"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const x=require("react");function xi(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Xn={exports:{}},Ct={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _r;function bi(){if(_r)return Ct;_r=1;var r=x,e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function i(a,u,l){var c,d={},p=null,h=null;l!==void 0&&(p=""+l),u.key!==void 0&&(p=""+u.key),u.ref!==void 0&&(h=u.ref);for(c in u)n.call(u,c)&&!o.hasOwnProperty(c)&&(d[c]=u[c]);if(a&&a.defaultProps)for(c in u=a.defaultProps,u)d[c]===void 0&&(d[c]=u[c]);return{$$typeof:e,type:a,key:p,ref:h,props:d,_owner:s.current}}return Ct.Fragment=t,Ct.jsx=i,Ct.jsxs=i,Ct}var St={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qr;function wi(){return qr||(qr=1,process.env.NODE_ENV!=="production"&&function(){var r=x,e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),h=Symbol.for("react.offscreen"),m=Symbol.iterator,f="@@iterator";function b(g){if(g===null||typeof g!="object")return null;var P=m&&g[m]||g[f];return typeof P=="function"?P:null}var S=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function v(g){{for(var P=arguments.length,D=new Array(P>1?P-1:0),W=1;W<P;W++)D[W-1]=arguments[W];y("error",g,D)}}function y(g,P,D){{var W=S.ReactDebugCurrentFrame,ie=W.getStackAddendum();ie!==""&&(P+="%s",D=D.concat([ie]));var de=D.map(function(ne){return String(ne)});de.unshift("Warning: "+P),Function.prototype.apply.call(console[g],console,de)}}var E=!1,w=!1,I=!1,N=!1,j=!1,M;M=Symbol.for("react.module.reference");function F(g){return!!(typeof g=="string"||typeof g=="function"||g===n||g===o||j||g===s||g===l||g===c||N||g===h||E||w||I||typeof g=="object"&&g!==null&&(g.$$typeof===p||g.$$typeof===d||g.$$typeof===i||g.$$typeof===a||g.$$typeof===u||g.$$typeof===M||g.getModuleId!==void 0))}function Q(g,P,D){var W=g.displayName;if(W)return W;var ie=P.displayName||P.name||"";return ie!==""?D+"("+ie+")":D}function X(g){return g.displayName||"Context"}function Z(g){if(g==null)return null;if(typeof g.tag=="number"&&v("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g;switch(g){case n:return"Fragment";case t:return"Portal";case o:return"Profiler";case s:return"StrictMode";case l:return"Suspense";case c:return"SuspenseList"}if(typeof g=="object")switch(g.$$typeof){case a:var P=g;return X(P)+".Consumer";case i:var D=g;return X(D._context)+".Provider";case u:return Q(g,g.render,"ForwardRef");case d:var W=g.displayName||null;return W!==null?W:Z(g.type)||"Memo";case p:{var ie=g,de=ie._payload,ne=ie._init;try{return Z(ne(de))}catch{return null}}}return null}var Y=Object.assign,V=0,re,G,oe,J,A,O,L;function _(){}_.__reactDisabledLog=!0;function H(){{if(V===0){re=console.log,G=console.info,oe=console.warn,J=console.error,A=console.group,O=console.groupCollapsed,L=console.groupEnd;var g={configurable:!0,enumerable:!0,value:_,writable:!0};Object.defineProperties(console,{info:g,log:g,warn:g,error:g,group:g,groupCollapsed:g,groupEnd:g})}V++}}function K(){{if(V--,V===0){var g={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:Y({},g,{value:re}),info:Y({},g,{value:G}),warn:Y({},g,{value:oe}),error:Y({},g,{value:J}),group:Y({},g,{value:A}),groupCollapsed:Y({},g,{value:O}),groupEnd:Y({},g,{value:L})})}V<0&&v("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var q=S.ReactCurrentDispatcher,k;function T(g,P,D){{if(k===void 0)try{throw Error()}catch(ie){var W=ie.stack.trim().match(/\n( *(at )?)/);k=W&&W[1]||""}return`
`+k+g}}var z=!1,$;{var se=typeof WeakMap=="function"?WeakMap:Map;$=new se}function R(g,P){if(!g||z)return"";{var D=$.get(g);if(D!==void 0)return D}var W;z=!0;var ie=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var de;de=q.current,q.current=null,H();try{if(P){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(Te){W=Te}Reflect.construct(g,[],ne)}else{try{ne.call()}catch(Te){W=Te}g.call(ne.prototype)}}else{try{throw Error()}catch(Te){W=Te}g()}}catch(Te){if(Te&&W&&typeof Te.stack=="string"){for(var ee=Te.stack.split(`
`),Ae=W.stack.split(`
`),xe=ee.length-1,be=Ae.length-1;xe>=1&&be>=0&&ee[xe]!==Ae[be];)be--;for(;xe>=1&&be>=0;xe--,be--)if(ee[xe]!==Ae[be]){if(xe!==1||be!==1)do if(xe--,be--,be<0||ee[xe]!==Ae[be]){var Me=`
`+ee[xe].replace(" at new "," at ");return g.displayName&&Me.includes("<anonymous>")&&(Me=Me.replace("<anonymous>",g.displayName)),typeof g=="function"&&$.set(g,Me),Me}while(xe>=1&&be>=0);break}}}finally{z=!1,q.current=de,K(),Error.prepareStackTrace=ie}var ct=g?g.displayName||g.name:"",Ge=ct?T(ct):"";return typeof g=="function"&&$.set(g,Ge),Ge}function te(g,P,D){return R(g,!1)}function ye(g){var P=g.prototype;return!!(P&&P.isReactComponent)}function Ce(g,P,D){if(g==null)return"";if(typeof g=="function")return R(g,ye(g));if(typeof g=="string")return T(g);switch(g){case l:return T("Suspense");case c:return T("SuspenseList")}if(typeof g=="object")switch(g.$$typeof){case u:return te(g.render);case d:return Ce(g.type,P,D);case p:{var W=g,ie=W._payload,de=W._init;try{return Ce(de(ie),P,D)}catch{}}}return""}var je=Object.prototype.hasOwnProperty,Oe={},_e=S.ReactDebugCurrentFrame;function Be(g){if(g){var P=g._owner,D=Ce(g.type,g._source,P?P.type:null);_e.setExtraStackFrame(D)}else _e.setExtraStackFrame(null)}function ot(g,P,D,W,ie){{var de=Function.call.bind(je);for(var ne in g)if(de(g,ne)){var ee=void 0;try{if(typeof g[ne]!="function"){var Ae=Error((W||"React class")+": "+D+" type `"+ne+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof g[ne]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Ae.name="Invariant Violation",Ae}ee=g[ne](P,ne,W,D,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(xe){ee=xe}ee&&!(ee instanceof Error)&&(Be(ie),v("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",W||"React class",D,ne,typeof ee),Be(null)),ee instanceof Error&&!(ee.message in Oe)&&(Oe[ee.message]=!0,Be(ie),v("Failed %s type: %s",D,ee.message),Be(null))}}}var Tn=Array.isArray;function ft(g){return Tn(g)}function Pn(g){{var P=typeof Symbol=="function"&&Symbol.toStringTag,D=P&&g[Symbol.toStringTag]||g.constructor.name||"Object";return D}}function B(g){try{return U(g),!1}catch{return!0}}function U(g){return""+g}function fe(g){if(B(g))return v("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Pn(g)),U(g)}var ge=S.ReactCurrentOwner,Se={key:!0,ref:!0,__self:!0,__source:!0},Qe,qe,Ke;Ke={};function gt(g){if(je.call(g,"ref")){var P=Object.getOwnPropertyDescriptor(g,"ref").get;if(P&&P.isReactWarning)return!1}return g.ref!==void 0}function vt(g){if(je.call(g,"key")){var P=Object.getOwnPropertyDescriptor(g,"key").get;if(P&&P.isReactWarning)return!1}return g.key!==void 0}function it(g,P){if(typeof g.ref=="string"&&ge.current&&P&&ge.current.stateNode!==P){var D=Z(ge.current.type);Ke[D]||(v('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',Z(ge.current.type),g.ref),Ke[D]=!0)}}function yt(g,P){{var D=function(){Qe||(Qe=!0,v("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",P))};D.isReactWarning=!0,Object.defineProperty(g,"key",{get:D,configurable:!0})}}function xt(g,P){{var D=function(){qe||(qe=!0,v("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",P))};D.isReactWarning=!0,Object.defineProperty(g,"ref",{get:D,configurable:!0})}}var bt=function(g,P,D,W,ie,de,ne){var ee={$$typeof:e,type:g,key:P,ref:D,props:ne,_owner:de};return ee._store={},Object.defineProperty(ee._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(ee,"_self",{configurable:!1,enumerable:!1,writable:!1,value:W}),Object.defineProperty(ee,"_source",{configurable:!1,enumerable:!1,writable:!1,value:ie}),Object.freeze&&(Object.freeze(ee.props),Object.freeze(ee)),ee};function wt(g,P,D,W,ie){{var de,ne={},ee=null,Ae=null;D!==void 0&&(fe(D),ee=""+D),vt(P)&&(fe(P.key),ee=""+P.key),gt(P)&&(Ae=P.ref,it(P,ie));for(de in P)je.call(P,de)&&!Se.hasOwnProperty(de)&&(ne[de]=P[de]);if(g&&g.defaultProps){var xe=g.defaultProps;for(de in xe)ne[de]===void 0&&(ne[de]=xe[de])}if(ee||Ae){var be=typeof g=="function"?g.displayName||g.name||"Unknown":g;ee&&yt(ne,be),Ae&&xt(ne,be)}return bt(g,ee,Ae,ie,W,ge.current,ne)}}var kt=S.ReactCurrentOwner,Br=S.ReactDebugCurrentFrame;function at(g){if(g){var P=g._owner,D=Ce(g.type,g._source,P?P.type:null);Br.setExtraStackFrame(D)}else Br.setExtraStackFrame(null)}var Rn;Rn=!1;function In(g){return typeof g=="object"&&g!==null&&g.$$typeof===e}function Dr(){{if(kt.current){var g=Z(kt.current.type);if(g)return`

Check the render method of \``+g+"`."}return""}}function li(g){return""}var zr={};function ui(g){{var P=Dr();if(!P){var D=typeof g=="string"?g:g.displayName||g.name;D&&(P=`

Check the top-level render call using <`+D+">.")}return P}}function Fr(g,P){{if(!g._store||g._store.validated||g.key!=null)return;g._store.validated=!0;var D=ui(P);if(zr[D])return;zr[D]=!0;var W="";g&&g._owner&&g._owner!==kt.current&&(W=" It was passed a child from "+Z(g._owner.type)+"."),at(g),v('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',D,W),at(null)}}function Hr(g,P){{if(typeof g!="object")return;if(ft(g))for(var D=0;D<g.length;D++){var W=g[D];In(W)&&Fr(W,P)}else if(In(g))g._store&&(g._store.validated=!0);else if(g){var ie=b(g);if(typeof ie=="function"&&ie!==g.entries)for(var de=ie.call(g),ne;!(ne=de.next()).done;)In(ne.value)&&Fr(ne.value,P)}}}function di(g){{var P=g.type;if(P==null||typeof P=="string")return;var D;if(typeof P=="function")D=P.propTypes;else if(typeof P=="object"&&(P.$$typeof===u||P.$$typeof===d))D=P.propTypes;else return;if(D){var W=Z(P);ot(D,g.props,"prop",W,g)}else if(P.PropTypes!==void 0&&!Rn){Rn=!0;var ie=Z(P);v("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",ie||"Unknown")}typeof P.getDefaultProps=="function"&&!P.getDefaultProps.isReactClassApproved&&v("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function pi(g){{for(var P=Object.keys(g.props),D=0;D<P.length;D++){var W=P[D];if(W!=="children"&&W!=="key"){at(g),v("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",W),at(null);break}}g.ref!==null&&(at(g),v("Invalid attribute `ref` supplied to `React.Fragment`."),at(null))}}var $r={};function Nr(g,P,D,W,ie,de){{var ne=F(g);if(!ne){var ee="";(g===void 0||typeof g=="object"&&g!==null&&Object.keys(g).length===0)&&(ee+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var Ae=li();Ae?ee+=Ae:ee+=Dr();var xe;g===null?xe="null":ft(g)?xe="array":g!==void 0&&g.$$typeof===e?(xe="<"+(Z(g.type)||"Unknown")+" />",ee=" Did you accidentally export a JSX literal instead of a component?"):xe=typeof g,v("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",xe,ee)}var be=wt(g,P,D,ie,de);if(be==null)return be;if(ne){var Me=P.children;if(Me!==void 0)if(W)if(ft(Me)){for(var ct=0;ct<Me.length;ct++)Hr(Me[ct],g);Object.freeze&&Object.freeze(Me)}else v("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Hr(Me,g)}if(je.call(P,"key")){var Ge=Z(g),Te=Object.keys(P).filter(function(yi){return yi!=="key"}),On=Te.length>0?"{key: someKey, "+Te.join(": ..., ")+": ...}":"{key: someKey}";if(!$r[Ge+On]){var vi=Te.length>0?"{"+Te.join(": ..., ")+": ...}":"{}";v(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,On,Ge,vi,Ge),$r[Ge+On]=!0}}return g===n?pi(be):di(be),be}}function mi(g,P,D){return Nr(g,P,D,!0)}function hi(g,P,D){return Nr(g,P,D,!1)}var fi=hi,gi=mi;St.Fragment=n,St.jsx=fi,St.jsxs=gi}()),St}process.env.NODE_ENV==="production"?Xn.exports=bi():Xn.exports=wi();var C=Xn.exports,ki=Object.defineProperty,Ut=(r,e,t)=>((n,s,o)=>s in n?ki(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,typeof e!="symbol"?e+"":e,t);class Xe extends Error{constructor(e={}){super(e.message),Ut(this,"exceptionId"),Ut(this,"message"),Ut(this,"source"),Ut(this,"type"),this.message=e.message??"",this.source=e.source,this.type=this.constructor.name,this.exceptionId=e.exceptionId}}class Je extends Xe{}class un extends Xe{}const Ee=r=>{typeof r!="string"?r&&typeof r.toString=="function"?console.warn(`[nlux] ${r.toString()}`):console.warn("[nlux]"):console.warn(`[nlux] ${r}`)},Ur=[],Zn=r=>{Ur.includes(r)||(Ur.push(r),Ee(r))},to=class an{static register(e){const t=e.__compId;t?an.componentDefs.get(t)===void 0&&(e.__renderer&&e.__updater?an.componentDefs.set(t,{id:t,model:e,render:e.__renderer,update:e.__updater}):Ee(`Component with id "${t}" missing renderer or updater`)):Ee("Component definition missing valid id")}static retrieve(e){const t=an.componentDefs.get(e);if(t)return t;Ee(`Component with id "${e}" not registered`)}};to.componentDefs=new Map;let no=to;btoa("sectionsRegistered")+"";const Ne=r=>{const e=requestAnimationFrame(()=>{r()});return()=>{cancelAnimationFrame(e)}},zt=r=>{r.replaceChildren()},De=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const e=16*Math.random()|0;return(r=="x"?e:3&e|8).toString(16)});class Le{constructor(e,t){this.subComponentElementIds=new Map,this.subComponents=new Map,this.__context=null,this.__destroyed=!1,this.__status="unmounted",this.actionsOnDomReady=[],this.compEventGetter=i=>{if(this.destroyed)return()=>{};const a=this.rendererEventListeners.get(i);if(!a)throw new Xe({source:this.constructor.name,message:`Unable to call renderer event "${i}" because no matching event listener was found. Make sure that the event listener is registered using @CompEventListener() decorator in the component model class, and use class methods instead of arrow function attributes.`});return a};const n=Object.getPrototypeOf(this).constructor.__compId;if(!n)throw new Je({source:this.constructor.name,message:"Unable to instantiate component: missing compId in implementation. Component should be annotated using @Model() to set compId before iy can be instantiated."});if(this.def=no.retrieve(n)??null,!this.def)throw new Je({source:this.constructor.name,message:`Unable to instantiate component "${n}" because it's not registered. Component should be registered using CompRegistry.register(ComponentClass) before instantiating a component.`});this.__instanceId=De(),this.__destroyed=!1,this.__context=e,this.renderedDom=null,this.renderingRoot=null,this.props=t;const s=t?Object.entries(t):[];this.elementProps=new Map(s),this.rendererEventListeners=new Map;const o=this.constructor.__compEventListeners;o&&o.forEach((i,a)=>{i.forEach(u=>{const l=Object.getPrototypeOf(this)[u];typeof l=="function"?this.addRendererEventListener(a,l.bind(this)):Ee(`Unable to set event listener "${a}" because method "${u}" cannot be found on component "${this.constructor.name} at runtime!"`)})}),this.rendererProps=Object.freeze(t)}get destroyed(){return this.__destroyed}get id(){return this.__instanceId}get rendered(){return this.renderedDom!==null}get root(){return this.throwIfDestroyed(),this.renderedDom&&this.renderingRoot?this.renderingRoot:null}get status(){return this.__status}get context(){if(!this.__context)throw new Je({source:this.constructor.name,message:"Unable to get context because it's not set"});return this.__context}destroy(){this.destroyComponent()}destroyListItemComponent(){this.destroyComponent(!0)}getProp(e){return this.throwIfDestroyed(),this.elementProps.get(e)??null}render(e,t){var i;if(!this.def)return;if(this.destroyed)return void Ee(`Unable to render component "${(i=this.def)==null?void 0:i.id}" because it is already destroyed`);if(this.rendered||this.renderedDom)return void Ee(`Unable to render component "${this.def.id}" because it is already rendered`);const n=document.createDocumentFragment(),s=Object.getPrototypeOf(this).constructor.__compId,o=this.executeRenderer(n);if(!o)throw new Xe({source:this.constructor.name,message:`Unable to render component "${s}" because renderer returned null`});this.renderedDom=o;for(const[,a]of this.subComponents){const u=this.getSubComponentPortal(a.id);u&&this.mountSubComponentToPortal(a.id,u)}Ne(()=>{this.destroyed||(t?e.insertBefore(n,t):e.append(n),this.renderingRoot=e)})}updateSubComponent(e,t,n){this.throwIfDestroyed();const s=this.subComponents.get(e);s&&!s.destroyed&&s.setProp(t,n)}addSubComponent(e,t,n){if(this.throwIfDestroyed(),this.subComponents.has(e))throw new Je({source:this.constructor.name,message:`Unable to add sub-component "${e}" because it already exists`});if(this.subComponents.set(e,t),n&&this.subComponentElementIds.set(e,n),this.renderedDom){const s=this.getSubComponentPortal(e);s&&this.mountSubComponentToPortal(e,s)}}executeDomAction(e,...t){if(this.throwIfDestroyed(),!this.renderedDom)return void this.actionsOnDomReady.push(()=>this.executeDomAction(e,...t));if(!this.renderingRoot)throw new Xe({source:this.constructor.name,message:"Unable to execute DOM action because renderingRoot is not set"});const n=this.renderedDom.actions[e];if(!n)throw new Xe({source:this.constructor.name,message:`Unable to execute DOM action "${String(e)}" because it does not exist`});return Ne(()=>n(...t))}executeRenderer(e){var s;const t=(s=this.def)==null?void 0:s.render;if(!t)return null;if(this.renderingRoot)throw new Xe({source:this.constructor.name,message:"Unable to render component because renderingRoot is already set"});const n=t({appendToRoot:o=>{e.append(o),this.runDomActionsQueue()},compEvent:this.compEventGetter,props:this.rendererProps,context:this.context});return n&&(this.renderingRoot=e),n}removeSubComponent(e){this.throwIfDestroyed(),Ne(()=>{const t=this.subComponents.get(e);t&&(t.renderingRoot=null,t.destroy(),this.subComponents.delete(e))})}runDomActionsQueue(){if(this.actionsOnDomReady.length>0&&this.rendered){const e=this.actionsOnDomReady;this.actionsOnDomReady=[];for(const t of e)Ne(()=>t())}}setProp(e,t){this.destroyed?Ee(`Unable to set prop "${String(e)}" because component "${this.constructor.name}" is destroyed`):this.elementProps.has(e)?(this.schedulePropUpdate(e,this.elementProps.get(e),t),this.props=Object.freeze(Object.fromEntries(this.elementProps)),this.elementProps.set(e,t)):Ee(`Unable to set prop "${String(e)}" because it does not exist in the component props`)}throwIfDestroyed(){if(this.__destroyed)throw new Je({source:this.constructor.name,message:"Unable to call method on destroyed component"})}addRendererEventListener(e,t){if(this.throwIfDestroyed(),this.rendererEventListeners.has(e))throw new Je({source:this.constructor.name,message:`Unable to add event listener to rendererEvents "${e}" because it already exists`});this.rendererEventListeners.set(e,t)}destroyComponent(e=!1){if(this.throwIfDestroyed(),this.subComponents.forEach(t=>{t.destroy()}),this.renderedDom){this.renderedDom.elements&&(this.renderedDom.elements=void 0),this.renderedDom.actions&&(this.renderedDom.actions=void 0),this.renderedDom.onDestroy&&this.renderedDom.onDestroy();const t=this.renderingRoot;Ne(()=>{var n;if(t)if(t instanceof DocumentFragment)for(;t.firstChild;)t.removeChild(t.firstChild);else e?(n=t.parentElement)==null||n.removeChild(t):zt(t)}),this.renderedDom=null,this.renderingRoot=null}this.__destroyed=!0,this.__context=null,this.props=void 0,this.elementProps.clear(),this.rendererEventListeners.clear(),this.subComponents.clear()}getSubComponentPortal(e){var o;const t=this.subComponents.get(e),n=this.subComponentElementIds.get(e);if(!t||!n)return null;const s=((o=this.renderedDom)==null?void 0:o.elements)[n];return s instanceof HTMLElement?s:null}mountSubComponentToPortal(e,t){const n=this.subComponents.get(e);n==null||n.render(t)}schedulePropUpdate(e,t,n){var a;if(!this.renderedDom||!((a=this.def)!=null&&a.update))return;const s=this.renderedDom,o=this.renderingRoot,i=this.def.update;o&&Ne(()=>{i({propName:e,currentValue:t,newValue:n,dom:{root:o,elements:s.elements,actions:s.actions},updateSubComponent:this.updateSubComponent})})}}Le.__compEventListeners=null,Le.__compId=null,Le.__renderer=null,Le.__updater=null;const Ze=(r,e,t)=>n=>{n.__compId=r,n.__renderer=e,n.__updater=t},ze=r=>(e,t)=>{const n=e;if(typeof n.constructor!="function")throw new Je({source:"CallbackFor",message:"@CallbackFor can only be used on methods of a class!"});n.constructor.hasOwnProperty("__compEventListeners")&&n.constructor.__compEventListeners!==null||(n.constructor.__compEventListeners=new Map);const s=n.constructor.__compEventListeners,o=s.get(r);o?o.push(t):s.set(r,[t])};function Ci(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let rt={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function Yr(r){rt=r}var Si=Object.defineProperty,ro=(r,e,t)=>((n,s,o)=>s in n?Si(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,typeof e!="symbol"?e+"":e,t);let Ot=class{constructor(e){ro(this,"options"),this.options=e||rt}postprocess(e){return e}preprocess(e){return e}processAllTokens(e){return e}};ro(Ot,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));const so=/[&<>"']/,Ai=new RegExp(so.source,"g"),oo=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Ei=new RegExp(oo.source,"g"),Ti={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Wr=r=>Ti[r];function Re(r,e){if(e){if(so.test(r))return r.replace(Ai,Wr)}else if(oo.test(r))return r.replace(Ei,Wr);return r}const Pi=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function Ri(r){return r.replace(Pi,(e,t)=>(t=t.toLowerCase())==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):"")}const Ii=/(^|[^\[])\^/g;function le(r,e){let t=typeof r=="string"?r:r.source;e=e||"";const n={replace:(s,o)=>{let i=typeof o=="string"?o:o.source;return i=i.replace(Ii,"$1"),t=t.replace(s,i),n},getRegex:()=>new RegExp(t,e)};return n}function Qr(r){try{r=encodeURI(r).replace(/%25/g,"%")}catch{return null}return r}const Mt={exec:()=>null};function Xr(r,e){const t=r.replace(/\|/g,(s,o,i)=>{let a=!1,u=o;for(;--u>=0&&i[u]==="\\";)a=!a;return a?"|":" |"}).split(/ \|/);let n=0;if(t[0].trim()||t.shift(),t.length>0&&!t[t.length-1].trim()&&t.pop(),e)if(t.length>e)t.splice(e);else for(;t.length<e;)t.push("");for(;n<t.length;n++)t[n]=t[n].trim().replace(/\\\|/g,"|");return t}function Yt(r,e,t){const n=r.length;if(n===0)return"";let s=0;for(;s<n;){const o=r.charAt(n-s-1);if(o!==e||t){if(o===e||!t)break;s++}else s++}return r.slice(0,n-s)}const Ht=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,io=/(?:[*+-]|\d{1,9}[.)])/,ao=le(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,io).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),xr=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,br=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Oi=le(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",br).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Mi=le(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,io).getRegex(),An="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",wr=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Li=le("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",wr).replace("tag",An).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Zr=le(xr).replace("hr",Ht).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",An).getRegex(),kr={blockquote:le(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Zr).getRegex(),code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,def:Oi,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:Ht,html:Li,lheading:ao,list:Mi,newline:/^(?: *(?:\n|$))+/,paragraph:Zr,table:Mt,text:/^[^\n]+/},Kr=le("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Ht).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",An).getRegex(),ji={...kr,table:Kr,paragraph:le(xr).replace("hr",Ht).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Kr).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",An).getRegex()},Bi={...kr,html:le(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",wr).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Mt,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:le(xr).replace("hr",Ht).replace("heading",` *#{1,6} *[^
]`).replace("lheading",ao).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},co=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,lo=/^( {2,}|\\)\n(?!\s*$)/,$t="\\p{P}\\p{S}",Di=le(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,$t).getRegex(),zi=le(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,$t).getRegex(),Fi=le("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,$t).getRegex(),Hi=le("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,$t).getRegex(),$i=le(/\\([punct])/,"gu").replace(/punct/g,$t).getRegex(),Ni=le(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),_i=le(wr).replace("(?:-->|$)","-->").getRegex(),qi=le("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",_i).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),dn=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Ui=le(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",dn).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Gr=le(/^!?\[(label)\]\[(ref)\]/).replace("label",dn).replace("ref",br).getRegex(),Jr=le(/^!?\[(ref)\](?:\[\])?/).replace("ref",br).getRegex(),Cr={_backpedal:Mt,anyPunctuation:$i,autolink:Ni,blockSkip:/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,br:lo,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:Mt,emStrongLDelim:zi,emStrongRDelimAst:Fi,emStrongRDelimUnd:Hi,escape:co,link:Ui,nolink:Jr,punctuation:Di,reflink:Gr,reflinkSearch:le("reflink|nolink(?!\\()","g").replace("reflink",Gr).replace("nolink",Jr).getRegex(),tag:qi,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:Mt},Yi={...Cr,link:le(/^!?\[(label)\]\((.*?)\)/).replace("label",dn).getRegex(),reflink:le(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",dn).getRegex()},Kn={...Cr,escape:le(co).replace("])","~|])").getRegex(),url:le(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Wi={...Kn,br:le(lo).replace("{2,}","*").getRegex(),text:le(Kn.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Wt={normal:kr,gfm:ji,pedantic:Bi},At={normal:Cr,gfm:Kn,breaks:Wi,pedantic:Yi};var Qi=Object.defineProperty,Mn=(r,e,t)=>((n,s,o)=>s in n?Qi(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,typeof e!="symbol"?e+"":e,t);function Vr(r,e,t,n){const s=e.href,o=e.title?Re(e.title):null,i=r[1].replace(/\\([\[\]])/g,"$1");if(r[0].charAt(0)!=="!"){n.state.inLink=!0;const a={type:"link",raw:t,href:s,title:o,text:i,tokens:n.inlineTokens(i)};return n.state.inLink=!1,a}return{type:"image",raw:t,href:s,title:o,text:Re(i)}}let pn=class{constructor(e){Mn(this,"lexer"),Mn(this,"options"),Mn(this,"rules"),this.options=e||rt}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let n,s;return t[2]==="@"?(n=Re(t[1]),s="mailto:"+n):(n=Re(t[1]),s=n),{type:"link",raw:t[0],text:n,href:s,tokens:[{type:"text",raw:n,text:n}]}}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let n=t[0].replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`);n=Yt(n.replace(/^ *>[ \t]?/gm,""),`
`);const s=this.lexer.state.top;this.lexer.state.top=!0;const o=this.lexer.blockTokens(n);return this.lexer.state.top=s,{type:"blockquote",raw:t[0],tokens:o,text:n}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const n=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Yt(n,`
`)}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(/\n/g," ");const s=/[^ ]/.test(n),o=/^ /.test(n)&&/ $/.test(n);return s&&o&&(n=n.substring(1,n.length-1)),n=Re(n,!0),{type:"codespan",raw:t[0],text:n}}}def(e){const t=this.rules.block.def.exec(e);if(t){const n=t[1].toLowerCase().replace(/\s+/g," "),s=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:s,title:o}}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}emStrong(e,t,n=""){let s=this.rules.inline.emStrongLDelim.exec(e);if(s&&!(s[3]&&n.match(/[\p{L}\p{N}]/u))&&(!(s[1]||s[2])||!n||this.rules.inline.punctuation.exec(n))){const o=[...s[0]].length-1;let i,a,u=o,l=0;const c=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,t=t.slice(-1*e.length+o);(s=c.exec(t))!=null;){if(i=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!i)continue;if(a=[...i].length,s[3]||s[4]){u+=a;continue}if((s[5]||s[6])&&o%3&&!((o+a)%3)){l+=a;continue}if(u-=a,u>0)continue;a=Math.min(a,a+u+l);const d=[...s[0]][0].length,p=e.slice(0,o+s.index+d+a);if(Math.min(o,a)%2){const m=p.slice(1,-1);return{type:"em",raw:p,text:m,tokens:this.lexer.inlineTokens(m)}}const h=p.slice(2,-2);return{type:"strong",raw:p,text:h,tokens:this.lexer.inlineTokens(h)}}}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Re(t[1])}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const n=t[0],s=function(o,i){const a=o.match(/^(\s+)(?:```)/);if(a===null)return i;const u=a[1];return i.split(`
`).map(l=>{const c=l.match(/^\s+/);if(c===null)return l;const[d]=c;return d.length>=u.length?l.slice(u.length):l}).join(`
`)}(n,t[3]||"");return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:s}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(/#$/.test(n)){const s=Yt(n,"#");this.options.pedantic?n=s.trim():s&&!/ $/.test(s)||(n=s.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let n;return n=this.lexer.state.inRawBlock?t[0]:Re(t[0]),{type:"text",raw:t[0],text:n}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}link(e){const t=this.rules.inline.link.exec(e);if(t){const n=t[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;const i=Yt(n.slice(0,-1),"\\");if((n.length-i.length)%2==0)return}else{const i=function(a,u){if(a.indexOf(u[1])===-1)return-1;let l=0;for(let c=0;c<a.length;c++)if(a[c]==="\\")c++;else if(a[c]===u[0])l++;else if(a[c]===u[1]&&(l--,l<0))return c;return-1}(t[2],"()");if(i>-1){const a=(t[0].indexOf("!")===0?5:4)+t[1].length+i;t[2]=t[2].substring(0,i),t[0]=t[0].substring(0,a).trim(),t[3]=""}}let s=t[2],o="";if(this.options.pedantic){const i=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s);i&&(s=i[1],o=i[3])}else o=t[3]?t[3].slice(1,-1):"";return s=s.trim(),/^</.test(s)&&(s=this.options.pedantic&&!/>$/.test(n)?s.slice(1):s.slice(1,-1)),Vr(t,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim();const s=n.length>1,o={type:"list",raw:"",ordered:s,start:s?+n.slice(0,-1):"",loose:!1,items:[]};n=s?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=s?n:"[*+-]");const i=new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`);let a="",u="",l=!1;for(;e;){let c=!1;if(!(t=i.exec(e))||this.rules.block.hr.test(e))break;a=t[0],e=e.substring(a.length);let d=t[2].split(`
`,1)[0].replace(/^\t+/,S=>" ".repeat(3*S.length)),p=e.split(`
`,1)[0],h=0;this.options.pedantic?(h=2,u=d.trimStart()):(h=t[2].search(/[^ ]/),h=h>4?1:h,u=d.slice(h),h+=t[1].length);let m=!1;if(!d&&/^ *$/.test(p)&&(a+=p+`
`,e=e.substring(p.length+1),c=!0),!c){const S=new RegExp(`^ {0,${Math.min(3,h-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),v=new RegExp(`^ {0,${Math.min(3,h-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),y=new RegExp(`^ {0,${Math.min(3,h-1)}}(?:\`\`\`|~~~)`),E=new RegExp(`^ {0,${Math.min(3,h-1)}}#`);for(;e;){const w=e.split(`
`,1)[0];if(p=w,this.options.pedantic&&(p=p.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),y.test(p)||E.test(p)||S.test(p)||v.test(e))break;if(p.search(/[^ ]/)>=h||!p.trim())u+=`
`+p.slice(h);else{if(m||d.search(/[^ ]/)>=4||y.test(d)||E.test(d)||v.test(d))break;u+=`
`+p}m||p.trim()||(m=!0),a+=w+`
`,e=e.substring(w.length+1),d=p.slice(h)}}o.loose||(l?o.loose=!0:/\n *\n *$/.test(a)&&(l=!0));let f,b=null;this.options.gfm&&(b=/^\[[ xX]\] /.exec(u),b&&(f=b[0]!=="[ ] ",u=u.replace(/^\[[ xX]\] +/,""))),o.items.push({type:"list_item",raw:a,task:!!b,checked:f,loose:!1,text:u,tokens:[]}),o.raw+=a}o.items[o.items.length-1].raw=a.trimEnd(),o.items[o.items.length-1].text=u.trimEnd(),o.raw=o.raw.trimEnd();for(let c=0;c<o.items.length;c++)if(this.lexer.state.top=!1,o.items[c].tokens=this.lexer.blockTokens(o.items[c].text,[]),!o.loose){const d=o.items[c].tokens.filter(h=>h.type==="space"),p=d.length>0&&d.some(h=>/\n.*\n/.test(h.raw));o.loose=p}if(o.loose)for(let c=0;c<o.items.length;c++)o.items[c].loose=!0;return o}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){const s=t[(n[2]||n[1]).replace(/\s+/g," ").toLowerCase()];if(!s){const o=n[0].charAt(0);return{type:"text",raw:o,text:o}}return Vr(n,s,n[0],this.lexer)}}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}table(e){const t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;const n=Xr(t[1]),s=t[2].replace(/^\||\| *$/g,"").split("|"),o=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],i={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===s.length){for(const a of s)/^ *-+: *$/.test(a)?i.align.push("right"):/^ *:-+: *$/.test(a)?i.align.push("center"):/^ *:-+ *$/.test(a)?i.align.push("left"):i.align.push(null);for(const a of n)i.header.push({text:a,tokens:this.lexer.inline(a)});for(const a of o)i.rows.push(Xr(a,i.header.length).map(u=>({text:u,tokens:this.lexer.inline(u)})));return i}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}url(e){var n;let t;if(t=this.rules.inline.url.exec(e)){let s,o;if(t[2]==="@")s=Re(t[0]),o="mailto:"+s;else{let i;do i=t[0],t[0]=((n=this.rules.inline._backpedal.exec(t[0]))==null?void 0:n[0])??"";while(i!==t[0]);s=Re(t[0]),o=t[1]==="www."?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:s,href:o,tokens:[{type:"text",raw:s,text:s}]}}}};var Xi=Object.defineProperty,Et=(r,e,t)=>((n,s,o)=>s in n?Xi(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,typeof e!="symbol"?e+"":e,t);let ut=class Gn{constructor(e){Et(this,"options"),Et(this,"state"),Et(this,"tokens"),Et(this,"inlineQueue"),Et(this,"tokenizer"),this.tokens=[],this.tokens.links=Object.create(null),this.options=e||rt,this.options.tokenizer=this.options.tokenizer||new pn,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:Wt.normal,inline:At.normal};this.options.pedantic?(t.block=Wt.pedantic,t.inline=At.pedantic):this.options.gfm&&(t.block=Wt.gfm,this.options.breaks?t.inline=At.breaks:t.inline=At.gfm),this.tokenizer.rules=t}static get rules(){return{block:Wt,inline:At}}static lex(e,t){return new Gn(t).lex(e)}static lexInline(e,t){return new Gn(t).inlineTokens(e)}blockTokens(e,t=[]){let n,s,o,i;for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,(a,u,l)=>u+"    ".repeat(l.length));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>!!(n=a.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0))))if(n=this.tokenizer.space(e))e=e.substring(n.raw.length),n.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(n);else if(n=this.tokenizer.code(e))e=e.substring(n.raw.length),s=t[t.length-1],!s||s.type!=="paragraph"&&s.type!=="text"?t.push(n):(s.raw+=`
`+n.raw,s.text+=`
`+n.text,this.inlineQueue[this.inlineQueue.length-1].src=s.text);else if(n=this.tokenizer.fences(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.heading(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.hr(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.blockquote(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.list(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.html(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.def(e))e=e.substring(n.raw.length),s=t[t.length-1],!s||s.type!=="paragraph"&&s.type!=="text"?this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title}):(s.raw+=`
`+n.raw,s.text+=`
`+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=s.text);else if(n=this.tokenizer.table(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.lheading(e))e=e.substring(n.raw.length),t.push(n);else{if(o=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const u=e.slice(1);let l;this.options.extensions.startBlock.forEach(c=>{l=c.call({lexer:this},u),typeof l=="number"&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(o=e.substring(0,a+1))}if(this.state.top&&(n=this.tokenizer.paragraph(o)))s=t[t.length-1],i&&s.type==="paragraph"?(s.raw+=`
`+n.raw,s.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):t.push(n),i=o.length!==e.length,e=e.substring(n.raw.length);else if(n=this.tokenizer.text(e))e=e.substring(n.raw.length),s=t[t.length-1],s&&s.type==="text"?(s.raw+=`
`+n.raw,s.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):t.push(n);else if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n,s,o,i,a,u,l=e;if(this.tokens.links){const c=Object.keys(this.tokens.links);if(c.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(l))!=null;)c.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.blockSkip.exec(l))!=null;)l=l.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(l))!=null;)l=l.slice(0,i.index)+"++"+l.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(a||(u=""),a=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(c=>!!(n=c.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0))))if(n=this.tokenizer.escape(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.tag(e))e=e.substring(n.raw.length),s=t[t.length-1],s&&n.type==="text"&&s.type==="text"?(s.raw+=n.raw,s.text+=n.text):t.push(n);else if(n=this.tokenizer.link(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(n.raw.length),s=t[t.length-1],s&&n.type==="text"&&s.type==="text"?(s.raw+=n.raw,s.text+=n.text):t.push(n);else if(n=this.tokenizer.emStrong(e,l,u))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.codespan(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.br(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.del(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.autolink(e))e=e.substring(n.raw.length),t.push(n);else if(this.state.inLink||!(n=this.tokenizer.url(e))){if(o=e,this.options.extensions&&this.options.extensions.startInline){let c=1/0;const d=e.slice(1);let p;this.options.extensions.startInline.forEach(h=>{p=h.call({lexer:this},d),typeof p=="number"&&p>=0&&(c=Math.min(c,p))}),c<1/0&&c>=0&&(o=e.substring(0,c+1))}if(n=this.tokenizer.inlineText(o))e=e.substring(n.raw.length),n.raw.slice(-1)!=="_"&&(u=n.raw.slice(-1)),a=!0,s=t[t.length-1],s&&s.type==="text"?(s.raw+=n.raw,s.text+=n.text):t.push(n);else if(e){const c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}throw new Error(c)}}else e=e.substring(n.raw.length),t.push(n);return t}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const n=this.inlineQueue[t];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}};var Zi=Object.defineProperty,Ki=(r,e,t)=>((n,s,o)=>s in n?Zi(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,e+"",t);let mn=class{constructor(e){Ki(this,"options"),this.options=e||rt}blockquote(e){return`<blockquote>
${e}</blockquote>
`}br(){return"<br>"}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}code(e,t,n){var o;const s=(o=(t||"").match(/^\S*/))==null?void 0:o[0];return e=e.replace(/\n$/,"")+`
`,s?'<pre><code class="language-'+Re(s)+'">'+(n?e:Re(e,!0))+`</code></pre>
`:"<pre><code>"+(n?e:Re(e,!0))+`</code></pre>
`}codespan(e){return`<code>${e}</code>`}del(e){return`<del>${e}</del>`}em(e){return`<em>${e}</em>`}heading(e,t,n){return`<h${t}>${e}</h${t}>
`}hr(){return`<hr>
`}html(e,t){return e}image(e,t,n){const s=Qr(e);if(s===null)return n;let o=`<img src="${e=s}" alt="${n}"`;return t&&(o+=` title="${t}"`),o+=">",o}link(e,t,n){const s=Qr(e);if(s===null)return n;let o='<a href="'+(e=s)+'"';return t&&(o+=' title="'+t+'"'),o+=">"+n+"</a>",o}list(e,t,n){const s=t?"ol":"ul";return"<"+s+(t&&n!==1?' start="'+n+'"':"")+`>
`+e+"</"+s+`>
`}listitem(e,t,n){return`<li>${e}</li>
`}paragraph(e){return`<p>${e}</p>
`}strong(e){return`<strong>${e}</strong>`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablecell(e,t){const n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>
`}tablerow(e){return`<tr>
${e}</tr>
`}text(e){return e}},Sr=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,n){return""+n}image(e,t,n){return""+n}br(){return""}};var Gi=Object.defineProperty,Ln=(r,e,t)=>((n,s,o)=>s in n?Gi(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,typeof e!="symbol"?e+"":e,t);let dt=class Jn{constructor(e){Ln(this,"options"),Ln(this,"renderer"),Ln(this,"textRenderer"),this.options=e||rt,this.options.renderer=this.options.renderer||new mn,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Sr}static parse(e,t){return new Jn(t).parse(e)}static parseInline(e,t){return new Jn(t).parseInline(e)}parse(e,t=!0){let n="";for(let s=0;s<e.length;s++){const o=e[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]){const i=o,a=this.options.extensions.renderers[i.type].call({parser:this},i);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(i.type)){n+=a||"";continue}}switch(o.type){case"space":continue;case"hr":n+=this.renderer.hr();continue;case"heading":{const i=o;n+=this.renderer.heading(this.parseInline(i.tokens),i.depth,Ri(this.parseInline(i.tokens,this.textRenderer)));continue}case"code":{const i=o;n+=this.renderer.code(i.text,i.lang,!!i.escaped);continue}case"table":{const i=o;let a="",u="";for(let c=0;c<i.header.length;c++)u+=this.renderer.tablecell(this.parseInline(i.header[c].tokens),{header:!0,align:i.align[c]});a+=this.renderer.tablerow(u);let l="";for(let c=0;c<i.rows.length;c++){const d=i.rows[c];u="";for(let p=0;p<d.length;p++)u+=this.renderer.tablecell(this.parseInline(d[p].tokens),{header:!1,align:i.align[p]});l+=this.renderer.tablerow(u)}n+=this.renderer.table(a,l);continue}case"blockquote":{const i=o,a=this.parse(i.tokens);n+=this.renderer.blockquote(a);continue}case"list":{const i=o,a=i.ordered,u=i.start,l=i.loose;let c="";for(let d=0;d<i.items.length;d++){const p=i.items[d],h=p.checked,m=p.task;let f="";if(p.task){const b=this.renderer.checkbox(!!h);l?p.tokens.length>0&&p.tokens[0].type==="paragraph"?(p.tokens[0].text=b+" "+p.tokens[0].text,p.tokens[0].tokens&&p.tokens[0].tokens.length>0&&p.tokens[0].tokens[0].type==="text"&&(p.tokens[0].tokens[0].text=b+" "+p.tokens[0].tokens[0].text)):p.tokens.unshift({type:"text",text:b+" "}):f+=b+" "}f+=this.parse(p.tokens,l),c+=this.renderer.listitem(f,m,!!h)}n+=this.renderer.list(c,a,u);continue}case"html":{const i=o;n+=this.renderer.html(i.text,i.block);continue}case"paragraph":{const i=o;n+=this.renderer.paragraph(this.parseInline(i.tokens));continue}case"text":{let i=o,a=i.tokens?this.parseInline(i.tokens):i.text;for(;s+1<e.length&&e[s+1].type==="text";)i=e[++s],a+=`
`+(i.tokens?this.parseInline(i.tokens):i.text);n+=t?this.renderer.paragraph(a):a;continue}default:{const i='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(i),"";throw new Error(i)}}}return n}parseInline(e,t){t=t||this.renderer;let n="";for(let s=0;s<e.length;s++){const o=e[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]){const i=this.options.extensions.renderers[o.type].call({parser:this},o);if(i!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){n+=i||"";continue}}switch(o.type){case"escape":{const i=o;n+=t.text(i.text);break}case"html":{const i=o;n+=t.html(i.text);break}case"link":{const i=o;n+=t.link(i.href,i.title,this.parseInline(i.tokens,t));break}case"image":{const i=o;n+=t.image(i.href,i.title,i.text);break}case"strong":{const i=o;n+=t.strong(this.parseInline(i.tokens,t));break}case"em":{const i=o;n+=t.em(this.parseInline(i.tokens,t));break}case"codespan":{const i=o;n+=t.codespan(i.text);break}case"br":n+=t.br();break;case"del":{const i=o;n+=t.del(this.parseInline(i.tokens,t));break}case"text":{const i=o;n+=t.text(i.text);break}default:{const i='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(i),"";throw new Error(i)}}}return n}};var Lt,es,Vn,Ji=Object.defineProperty,uo=r=>{throw TypeError(r)},Fe=(r,e,t)=>((n,s,o)=>s in n?Ji(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,typeof e!="symbol"?e+"":e,t),er=(r,e,t)=>(((n,s,o)=>{s.has(n)||uo("Cannot "+o)})(r,e,"access private method"),t);Lt=new WeakSet,es=function(r,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,r){const n="<p>An error occurred:</p><pre>"+Re(t.message+"",!0)+"</pre>";return e?Promise.resolve(n):n}if(e)return Promise.reject(t);throw t}},Vn=function(r,e){return(t,n)=>{const s={...n},o={...this.defaults,...s};this.defaults.async===!0&&s.async===!1&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);const i=er(this,Lt,es).call(this,!!o.silent,!!o.async);if(t==null)return i(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(t):t).then(a=>r(a,o)).then(a=>o.hooks?o.hooks.processAllTokens(a):a).then(a=>o.walkTokens?Promise.all(this.walkTokens(a,o.walkTokens)).then(()=>a):a).then(a=>e(a,o)).then(a=>o.hooks?o.hooks.postprocess(a):a).catch(i);try{o.hooks&&(t=o.hooks.preprocess(t));let a=r(t,o);o.hooks&&(a=o.hooks.processAllTokens(a)),o.walkTokens&&this.walkTokens(a,o.walkTokens);let u=e(a,o);return o.hooks&&(u=o.hooks.postprocess(u)),u}catch(a){return i(a)}}};const Ve=new class{constructor(...r){var e,t,n;e=this,(t=Lt).has(e)?uo("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Fe(this,"Hooks",Ot),Fe(this,"Lexer",ut),Fe(this,"Parser",dt),Fe(this,"Renderer",mn),Fe(this,"TextRenderer",Sr),Fe(this,"Tokenizer",pn),Fe(this,"defaults",{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}),Fe(this,"options",this.setOptions),Fe(this,"parse",er(this,Lt,Vn).call(this,ut.lex,dt.parse)),Fe(this,"parseInline",er(this,Lt,Vn).call(this,ut.lexInline,dt.parseInline)),this.use(...r)}lexer(r,e){return ut.lex(r,e??this.defaults)}parser(r,e){return dt.parse(r,e??this.defaults)}setOptions(r){return this.defaults={...this.defaults,...r},this}use(...r){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return r.forEach(t=>{const n={...t};if(n.async=this.defaults.async||n.async||!1,t.extensions&&(t.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const o=e.renderers[s.name];e.renderers[s.name]=o?function(...i){let a=s.renderer.apply(this,i);return a===!1&&(a=o.apply(this,i)),a}:s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const o=e[s.level];o?o.unshift(s.tokenizer):e[s.level]=[s.tokenizer],s.start&&(s.level==="block"?e.startBlock?e.startBlock.push(s.start):e.startBlock=[s.start]:s.level==="inline"&&(e.startInline?e.startInline.push(s.start):e.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(e.childTokens[s.name]=s.childTokens)}),n.extensions=e),t.renderer){const s=this.defaults.renderer||new mn(this.defaults);for(const o in t.renderer){if(!(o in s))throw new Error(`renderer '${o}' does not exist`);if(o==="options")continue;const i=o,a=t.renderer[i],u=s[i];s[i]=(...l)=>{let c=a.apply(s,l);return c===!1&&(c=u.apply(s,l)),c||""}}n.renderer=s}if(t.tokenizer){const s=this.defaults.tokenizer||new pn(this.defaults);for(const o in t.tokenizer){if(!(o in s))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;const i=o,a=t.tokenizer[i],u=s[i];s[i]=(...l)=>{let c=a.apply(s,l);return c===!1&&(c=u.apply(s,l)),c}}n.tokenizer=s}if(t.hooks){const s=this.defaults.hooks||new Ot;for(const o in t.hooks){if(!(o in s))throw new Error(`hook '${o}' does not exist`);if(o==="options")continue;const i=o,a=t.hooks[i],u=s[i];Ot.passThroughHooks.has(o)?s[i]=l=>{if(this.defaults.async)return Promise.resolve(a.call(s,l)).then(d=>u.call(s,d));const c=a.call(s,l);return u.call(s,c)}:s[i]=(...l)=>{let c=a.apply(s,l);return c===!1&&(c=u.apply(s,l)),c}}n.hooks=s}if(t.walkTokens){const s=this.defaults.walkTokens,o=t.walkTokens;n.walkTokens=function(i){let a=[];return a.push(o.call(this,i)),s&&(a=a.concat(s.call(this,i))),a}}this.defaults={...this.defaults,...n}}),this}walkTokens(r,e){var n,s;let t=[];for(const o of r)switch(t=t.concat(e.call(this,o)),o.type){case"table":{const i=o;for(const a of i.header)t=t.concat(this.walkTokens(a.tokens,e));for(const a of i.rows)for(const u of a)t=t.concat(this.walkTokens(u.tokens,e));break}case"list":{const i=o;t=t.concat(this.walkTokens(i.items,e));break}default:{const i=o;(s=(n=this.defaults.extensions)==null?void 0:n.childTokens)!=null&&s[i.type]?this.defaults.extensions.childTokens[i.type].forEach(a=>{const u=i[a].flat(1/0);t=t.concat(this.walkTokens(u,e))}):i.tokens&&(t=t.concat(this.walkTokens(i.tokens,e)))}}return t}};function me(r,e){return Ve.parse(r,e)}me.options=me.setOptions=function(r){return Ve.setOptions(r),me.defaults=Ve.defaults,Yr(me.defaults),me},me.getDefaults=Ci,me.defaults=rt,me.use=function(...r){return Ve.use(...r),me.defaults=Ve.defaults,Yr(me.defaults),me},me.walkTokens=function(r,e){return Ve.walkTokens(r,e)},me.parseInline=Ve.parseInline,me.Parser=dt,me.parser=dt.parse,me.Renderer=mn,me.TextRenderer=Sr,me.Lexer=ut,me.lexer=ut.lex,me.Tokenizer=pn,me.Hooks=Ot,me.parse=me;const po=(r,e)=>{const{showCodeBlockCopyButton:t,markdownLinkTarget:n,syntaxHighlighter:s,htmlSanitizer:o}=e||{},i=me(r,{async:!1,breaks:!0});if(typeof i!="string")throw new Error("Markdown parsing failed");const a=document.createElement("div");return a.innerHTML=o?o(i):i,a.querySelectorAll("pre").forEach(u=>{const l=document.createElement("div");l.className="code-block";const c=u.querySelector("code");if(!c){const m=u.innerHTML;return l.innerHTML=o?o(m):m,void u.replaceWith(l)}let d;for(let m=0;m<c.classList.length;m++){const f=c.classList[m];if(f.startsWith("language-")){d=f.slice(9);break}}const p=document.createElement("pre"),h="<div>"+c.innerHTML+"</div>";if(p.innerHTML=e!=null&&e.htmlSanitizer?e.htmlSanitizer(h):h,d&&(p.setAttribute("data-language",d),s)){const m="<div>"+s.createHighlighter()(c.textContent||"",d)+"</div>";p.innerHTML=o?o(m):m,p.className="highlighter-dark"}zt(l),l.appendChild(p),u.replaceWith(l)}),t!==!1&&a.querySelectorAll(".code-block").forEach(u=>{var p;if(!u.querySelector("pre")||(p=u.previousElementSibling)!=null&&p.classList.contains("nlux-comp-copyButton"))return;const l="Copy code block to clipboard",c=document.createElement("button");c.classList.add("nlux-comp-copyButton"),c.setAttribute("aria-label",l),c.setAttribute("title",l);const d=document.createElement("span");d.classList.add("icon-copy"),c.appendChild(d),u.appendChild(c)}),n!=="self"&&a.querySelectorAll("a").forEach(u=>{u.setAttribute("target","_blank")}),a.innerHTML},ts=r=>{if(!(r instanceof HTMLButtonElement)||r.dataset.clickListenerSet==="true")return;let e=!1;const t=r.nextElementSibling;r.addEventListener("click",()=>{if(e||!t)return;const n=t.innerText;navigator.clipboard.writeText(n??""),e=!0,r.classList.add("clicked"),setTimeout(()=>{e=!1,r.classList.remove("clicked")},1e3)}),r.dataset.clickListenerSet="true"},mo=r=>{const e="nlux-comp-copyButton";r instanceof HTMLButtonElement&&r.classList.contains(e)?ts(r):r.querySelectorAll(`.${e}`).forEach(ts)},Vi=(r,e)=>{let t=!1;const{onComplete:n}=e||{},s=[],o=(e!=null&&e.skipStreamingAnimation?"timeout":"animationFrame")=="timeout"?d=>setTimeout(d,0):d=>requestAnimationFrame(d),i=document.createElement("div");i.classList.add("md-in-progress"),r.append(i);const a=()=>{for(;i.firstChild;){const d=i.firstChild;d instanceof HTMLElement&&mo(d),i.before(d)}},u=!(e!=null&&e.skipStreamingAnimation)&&(e!=null&&e.streamingAnimationSpeed)&&e.streamingAnimationSpeed>=0?e.streamingAnimationSpeed:e!=null&&e.skipStreamingAnimation?0:8,l={timeSinceLastProcessing:new Date().getTime(),currentMarkdown:"",previousHtml:void 0};let c=setInterval(()=>{const d=new Date().getTime(),p=(e==null?void 0:e.waitTimeBeforeStreamCompletion)!=="never";if(s.length===0&&p){const m=typeof(e==null?void 0:e.waitTimeBeforeStreamCompletion)=="number"?e.waitTimeBeforeStreamCompletion:2e3;return void((t||d-l.timeSinceLastProcessing>m)&&(t=!0,c&&(clearInterval(c),c=void 0),a(),i.remove(),n==null?void 0:n()))}l.timeSinceLastProcessing=d;const h=s.shift();h!==void 0&&typeof h=="string"&&o(()=>{const m=l.currentMarkdown+h,f=po(m,e).trim();if(typeof f!="string")return l.currentMarkdown=l.currentMarkdown.slice(0,-h.length),void Ee("Markdown parsing failed");if(l.previousHtml&&f.length>l.previousHtml.length&&f.startsWith(l.previousHtml)){a();const b=f.slice(l.previousHtml.length).trim();i.innerHTML=e!=null&&e.htmlSanitizer?e.htmlSanitizer(b):b,l.currentMarkdown=h,l.previousHtml=void 0}else i.innerHTML=e!=null&&e.htmlSanitizer?e.htmlSanitizer(f):f,l.currentMarkdown=m,l.previousHtml=f})},u);return{next:d=>{if(t)Ee("Stream is already complete. No more chunks can be added");else for(const p of d)s.push(p)},complete:()=>{s.push(`
`),t=!0},error:()=>{t=!0}}},ho=(r,e)=>{const t=document.createElement("div");if(t.classList.add("nlux-comp-avatarContainer"),r){const n=document.createElement("div");n.classList.add("nlux-comp-avatarPicture"),n.style.backgroundImage=`url("${encodeURI(r)}")`,t.append(n)}return t},Ar="nlux-comp-avatar",Er=r=>{const e=document.createElement("div");return e.classList.add(Ar),r.avatar||r.name?(r.name&&(e.title=r.name),r.avatar&&r.avatar instanceof HTMLElement?(e.append(r.avatar.cloneNode(!0)),e):(e.append(ho(r.avatar)),e)):e},Qt={received:"nlux_msg_received",sent:"nlux_msg_sent"},fo=(r,e)=>{Object.keys(Qt).forEach(t=>{r.classList.remove(Qt[t])}),Qt[e]&&r.classList.add(Qt[e])},It={streaming:"nlux_msg_streaming",complete:"nlux_msg_complete"},go=(r,e)=>{Object.keys(It).forEach(t=>{r.classList.remove(It[t])}),It[e]&&r.classList.add(It[e])},vo=(r,e="text",t)=>{if(e==="markdown"){const n=document.createElement("div");n.innerHTML=po(r,t),mo(n);const s=document.createDocumentFragment();for(;n.firstChild;)s.appendChild(n.firstChild);return s}return document.createTextNode(r)},yo="nlux-comp-message",Xt={received:"nlux-comp-chatItem--received",sent:"nlux-comp-chatItem--sent"},xo=(r,e)=>{Object.keys(Xt).forEach(t=>{r.classList.remove(Xt[t])}),Xt[e]&&r.classList.add(Xt[e])},Zt={bubbles:"nlux-comp-chatItem--bubblesLayout",list:"nlux-comp-chatItem--listLayout"},bo=(r,e)=>{Object.keys(Zt).forEach(t=>{r.classList.remove(Zt[t])}),Zt[e]&&r.classList.add(Zt[e])},wo="nlux-comp-chatItem-participantInfo",ko="nlux-comp-chatItem-participantName",ea=r=>{const e=document.createElement("div");e.classList.add("nlux-comp-chatItem");const t={direction:r.direction,status:r.status,message:r.message};let n;if(r.avatar!==void 0){const i={name:r.name,avatar:r.avatar};n=Er(i)}const s=document.createElement("span");s.classList.add(ko),s.textContent=r.name;{const i=document.createElement("div");i.classList.add(wo),n!==void 0&&i.append(n),i.append(s),e.append(i)}xo(e,r.direction),bo(e,r.layout);const o=(i=>{const a=document.createElement("div");a.classList.add(yo);const u=i.status?i.status:"complete";return go(a,u),fo(a,i.direction),a})(t);return e.append(o),e},ns=(r,e,t)=>{if(e.name!==t.name&&typeof t.avatar=="string"){const n=t.name&&t.name.length>0?t.name[0].toUpperCase():"",s=r.querySelector("* > .nlux-comp-avatarContainer > .avtr_ltr");s==null||s.replaceChildren(n)}},Co=(r,e,t)=>{e.avatar===t.avatar&&e.name===t.name||(e.avatar!==t.avatar&&((n,s,o)=>{if(s.avatar!==o.avatar)if(typeof o.avatar=="string"&&typeof s.avatar=="string"){const i=n.querySelector("* > .nlux-comp-avatarContainer > .nlux-comp-avatarPicture");i!==null&&(i.style.backgroundImage=`url("${encodeURI(o.avatar)}")`)}else if(typeof o.avatar=="string"){const i=ho(o.avatar);n.replaceChildren(i)}else o.avatar?n.replaceChildren(o.avatar.cloneNode(!0)):zt(n)})(r,e,t),t.name?e.name!==t.name&&(r.title=t.name,ns(r,e,t)):(r.title="",ns(r,e,t)))},ta=(r,e,t)=>{if(e.message===t.message&&e.status===t.status&&e.direction===t.direction||!t||!t.hasOwnProperty("message")&&!t.hasOwnProperty("status")&&!t.hasOwnProperty("direction"))return;e.direction!==t.direction&&fo(r,t.direction);const n=t.status;if(e.status!==n)return go(r,t.status),void((s,o,i)=>{const a=i.status;if(a!=="streaming"&&a==="complete"){const u=i.message?i.message:"",l=document.createTextNode(u);s.classList.add(It[a]),zt(s),s.append(l)}})(r,0,t);n==="complete"&&(e.message===t.message&&e.format===t.format||((s,o,i)=>{o.message===i.message&&o.format===i.format||(zt(s),s.append(vo(i.message??"",i.format)))})(r,e,t))},rs="dom/getElement";var na=Object.defineProperty,ra=Object.getOwnPropertyDescriptor,ss=(r,e,t,n)=>{for(var s,o=n>1?void 0:n?ra(e,t):e,i=r.length-1;i>=0;i--)(s=r[i])&&(o=(n?s(e,t,o):s(o))||o);return n&&o&&na(e,t,o),o};let cn=class extends Le{constructor(e,t){super(e,t),this.serverResponse=[],this.stringContent="",t.domProps.message!==void 0&&(this.stringContent=t.domProps.message)}addChunk(e,t){this.throwIfDestroyed(),this.executeDomAction("processStreamedChunk",e),typeof e=="string"&&(this.stringContent+=e),this.serverResponse.push(t)}commitChunks(){this.throwIfDestroyed(),this.executeDomAction("commitStreamedChunks")}getChatSegmentItem(){return this.getProp("domProps").direction==="received"?{uid:this.props.uid,participantRole:"assistant",content:this.getItemContent(),serverResponse:this.serverResponse,status:"complete",dataTransferMode:"batch",time:new Date}:{uid:this.props.uid,participantRole:"user",content:this.getItemContent(),status:"complete",time:new Date}}getItemContent(){return this.aiMessageContent??this.stringContent}updateDomProps(e){const t=this.getProp("domProps"),n={...t,...e};this.setProp("domProps",n),this.executeDomAction("updateDomProps",t,n)}updateMarkdownStreamRenderer(e,t){if(this.setProp(e,t),e==="syntaxHighlighter"){const n=t;this.executeDomAction("updateMarkdownStreamRenderer",{syntaxHighlighter:n})}if(e==="htmlSanitizer"){const n=t;this.executeDomAction("updateMarkdownStreamRenderer",{htmlSanitizer:n})}}onMarkdownStreamComplete(e){this.context.emit("messageRendered",{uid:this.props.uid,message:e})}};ss([ze("markdown-stream-complete")],cn.prototype,"onMarkdownStreamComplete",1),cn=ss([Ze("chatItem",({props:r,appendToRoot:e,compEvent:t})=>{const n=ea({...r.domProps,message:void 0}),s=((c,d)=>{const p=c.querySelector(d);if(!p)throw new un({source:rs,message:`Could not find element with query "${d}". Make sure the query provided matches an element that exists in the root element.`});if(!(p instanceof HTMLElement))throw new un({source:rs,message:`Element with query "${d}" is not a valid HTMLElement.`});return p})(n,".nlux-comp-message");if(!s)throw new Error("Message container not found");const o=document.createElement("div");o.classList.add("nlux-markdownStream-root");const i=document.createElement("div");if(i.classList.add("nlux-markdown-container"),i.setAttribute("nlux-message-id",r.uid),o.append(i),s.append(o),r.domProps.message){const c=vo(r.domProps.message??"","markdown",{markdownLinkTarget:r.markdownLinkTarget,syntaxHighlighter:r.syntaxHighlighter,htmlSanitizer:r.htmlSanitizer});i.append(c)}let a;e(n);let u={...r};const l=c=>((d,p)=>{const h=Vi(d,{syntaxHighlighter:p==null?void 0:p.syntaxHighlighter,htmlSanitizer:p==null?void 0:p.htmlSanitizer,markdownLinkTarget:p==null?void 0:p.markdownLinkTarget,showCodeBlockCopyButton:p==null?void 0:p.showCodeBlockCopyButton,skipStreamingAnimation:p==null?void 0:p.skipStreamingAnimation,streamingAnimationSpeed:p==null?void 0:p.streamingAnimationSpeed,waitTimeBeforeStreamCompletion:p==null?void 0:p.waitTimeBeforeStreamCompletion,onComplete:p==null?void 0:p.onComplete});return{next(m){h.next(m)},complete(){h.complete()}}})(i,{syntaxHighlighter:c.syntaxHighlighter,htmlSanitizer:c.htmlSanitizer,markdownLinkTarget:c.markdownLinkTarget,showCodeBlockCopyButton:c.showCodeBlockCopyButton,skipStreamingAnimation:c.skipStreamingAnimation,streamingAnimationSpeed:c.streamingAnimationSpeed,onComplete:()=>t("markdown-stream-complete")});return{elements:{chatItemContainer:n},actions:{focus:()=>{n.focus()},processStreamedChunk:c=>{a||(a=l(u)),a.next(c)},commitStreamedChunks:()=>{a&&a.complete()},updateMarkdownStreamRenderer:c=>{u={...u,...c},l(u)},updateDomProps:(c,d)=>{((p,h,m)=>{if((h.direction!==m.direction||h.layout!==m.layout||h.status!==m.status||h.message!==m.message||h.name!==m.name||h.avatar!==m.avatar)&&m&&(m.hasOwnProperty("direction")||m.hasOwnProperty("layout")||m.hasOwnProperty("status")||m.hasOwnProperty("message")||m.hasOwnProperty("loader")||m.hasOwnProperty("name")||m.hasOwnProperty("avatar"))){if(h.direction!==m.direction&&xo(p,m.direction),h.layout!==m.layout&&bo(p,m.layout),h.direction!==m.direction||h.status!==m.status||h.message!==m.message){const f=p.querySelector(`.${yo}`);f&&ta(f,{direction:h.direction,status:h.status,message:h.message},{direction:m.direction,status:m.status,message:m.message})}if(h.name!==m.name||h.avatar!==m.avatar){const f=p.querySelector(`.${Ar}`);if(!m.name&&!m.avatar)return void(f==null?void 0:f.remove());if(f)Co(f,{name:h.name,avatar:h.avatar},{name:m.name,avatar:m.avatar});else if(m.name!==void 0||m.avatar!==void 0){const b={name:m.name,avatar:m.avatar},S=Er(b),v=p.querySelector(`.${wo}`);v&&v.prepend(S)}}if(h.name!==m.name){const f=p.querySelector(`.${ko}`);f&&(f.textContent=m.name||"")}}})(n,c,d)}},onDestroy:()=>{n.remove(),a=void 0}}},({propName:r,newValue:e,dom:t})=>{var n;switch(r){case"markdownLinkTarget":case"skipStreamingAnimation":case"syntaxHighlighter":case"htmlSanitizer":case"showCodeBlockCopyButton":case"streamingAnimationSpeed":(n=t.actions)==null||n.updateMarkdownStreamRenderer({[r]:e})}})],cn);const sa=(r,e)=>{let t,n=e,s=r,o=!0;const i=((f,b)=>{let S=!1;if(typeof f!="function")throw new Xe({source:"x/throttle",message:"Callback must be a function"});return(...v)=>{S||(f.apply(void 0,v),S=!0,setTimeout(function(){S=!1},b))}})((f=>{let b,S;return v=>{const y=v.target;if(!(y instanceof HTMLElement))return;const{scrollTop:E,clientHeight:w,scrollHeight:I}=y,N=I-30,j=Math.ceil(E+w)>=N,M=b===void 0||S===void 0?void 0:E>b&&S===I?"down":E<b&&S===I?"up":void 0;S=I,b=E,f({scrolledToBottom:j,scrollDirection:M})}})(({scrolledToBottom:f,scrollDirection:b})=>{o?b==="up"&&(o=!1):b==="down"&&f&&(o=!0)}),50),a=f=>{f.addEventListener("scroll",i)},u=f=>{f==null||f.removeEventListener("scroll",i)},l=f=>{(t==null?void 0:t.uid)===f&&(c==null||c.disconnect(),d==null||d.disconnect(),t=void 0,c=void 0,d=void 0)};let c,d;const p=()=>{s==null||s.scrollTo({top:5e4,behavior:"instant"})},h=()=>{s&&n&&o&&p()},m=()=>{h()};return a(s),{updateConversationContainer:f=>{u(s),a(f),s=f},updateProps:({autoScroll:f})=>{n=f},handleNewChatSegmentAdded:(f,b)=>{t&&(c==null||c.disconnect(),d==null||d.disconnect()),t={uid:f,container:b},c=new ResizeObserver(h),c.observe(b),d=new MutationObserver(m),d.observe(b,{childList:!0,subtree:!0,characterData:!0}),n&&p()},handleChatSegmentRemoved:f=>l(f),handleChatSegmentComplete:f=>l(f),destroy:()=>{t&&(l(t.uid),t=void 0),u(s),s=void 0}}},pt=r=>{var n;const e=typeof r=="function"?r.__compId:void 0;if(!e)throw new Error("Invalid compClass! Component should be registered before using");const t=(n=no.retrieve(e))==null?void 0:n.model;if(!t||typeof t!="function")throw new Error(`Component "${e}" is not registered`);return{withContext:s=>({create:()=>new t(s,{}),withProps:o=>({create:()=>new t(s,o)})})}},oa=r=>{const e=["adapter","events"],t=Object.keys(r).filter(s=>!e.includes(s)),n={};for(let s=0;s<t.length;s++){const o=t[s];n[o]=r[o]}return n},So=()=>{const r=document.createElement("div");r.classList.add("nlux-comp-messageLoader");const e=document.createElement("span");e.classList.add("spinning-loader");const t=document.createElement("div");return t.classList.add("nlux-comp-loaderContainer"),t.appendChild(e),r.appendChild(t),r},os=r=>{const e="nlux-chatSegment";return r==="complete"?`${e} nlux-chatSegment--complete`:r==="error"?`${e} nlux-chatSegment--error`:`${e} nlux-chatSegment--active`},Kt=(r,e)=>{var t,n;return r==="assistant"?((t=e==null?void 0:e.assistant)==null?void 0:t.name)??"Assistant":r==="user"?((n=e==null?void 0:e.user)==null?void 0:n.name)??"User":""},ia="bubbles";var aa=Object.defineProperty,ca=Object.getOwnPropertyDescriptor,Gt=(r,e,t,n)=>{for(var s,o=n>1?void 0:n?ca(e,t):e,i=r.length-1;i>=0;i--)(s=r[i])&&(o=(n?s(e,t,o):s(o))||o);return n&&o&&aa(e,t,o),o};let lt=class extends Le{constructor(e,t){super(e,t),this.chatItemCompIdsByIndex=[],this.chatItemComponentsById=new Map}addChatItem(e){var s,o;if(this.throwIfDestroyed(),this.chatItemComponentsById.has(e.uid))throw new Error(`CompChatSegment: chat item with id "${e.uid}" already exists`);const t=((i,a,u,l)=>{const c=a??ia;if(i.participantRole==="assistant"){const p=i.status==="complete"?"complete":"streaming";return i.dataTransferMode==="stream"?{status:p,layout:c,direction:"received",name:Kt("assistant",{assistant:l}),avatar:l==null?void 0:l.avatar}:i.status==="complete"?{status:p,layout:c,direction:"received",name:Kt("assistant",{assistant:l}),avatar:l==null?void 0:l.avatar,message:(d=i.content,typeof d=="string"?d:typeof d=="object"?`${d}`:d==null?"":typeof d.toString=="function"?d.toString():JSON.stringify(d))}:{status:p,layout:c,direction:"received",name:Kt("assistant",{assistant:l}),avatar:l==null?void 0:l.avatar}}var d;return{status:"complete",layout:c,direction:"sent",message:i.content,name:Kt("user",{user:u}),avatar:u==null?void 0:u.avatar}})(e,this.getProp("conversationLayout"),this.getProp("userPersona"),this.getProp("assistantPersona"));if(!t)throw new Error(`CompChatSegment: chat item with id "${e.uid}" has invalid props`);const n=pt(cn).withContext(this.context).withProps({uid:e.uid,domProps:t,markdownLinkTarget:this.getProp("markdownLinkTarget"),showCodeBlockCopyButton:this.getProp("showCodeBlockCopyButton"),skipStreamingAnimation:this.getProp("skipStreamingAnimation"),syntaxHighlighter:this.getProp("syntaxHighlighter"),htmlSanitizer:this.getProp("htmlSanitizer"),streamingAnimationSpeed:this.getProp("streamingAnimationSpeed")}).create();this.chatItemComponentsById.set(e.uid,n),this.chatItemCompIdsByIndex.push(e.uid),this.rendered&&((o=(s=this.renderedDom)==null?void 0:s.elements)!=null&&o.chatSegmentContainer?n.render(this.renderedDom.elements.chatSegmentContainer,this.renderedDom.elements.loaderContainer):Zn("CompChatSegment: chatSegmentContainer is not available"))}addChunk(e,t,n){if(this.destroyed)return;const s=this.chatItemComponentsById.get(e);if(!s)throw new Error(`CompChatSegment: chat item with id "${e}" not found`);s.addChunk(t,n)}complete(){this.throwIfDestroyed(),this.chatItemComponentsById.forEach(e=>e.commitChunks()),this.setProp("status","complete")}destroy(){this.chatItemComponentsById.forEach(e=>e.destroy()),this.chatItemComponentsById.clear(),this.chatItemCompIdsByIndex=[],super.destroy()}getChatItems(){return this.chatItemCompIdsByIndex.map(e=>this.chatItemComponentsById.get(e)).filter(e=>!!e)}setAssistantPersona(e){this.setProp("assistantPersona",e);const t={name:e==null?void 0:e.name,avatar:e==null?void 0:e.avatar};this.chatItemComponentsById.forEach(n=>{n.getChatSegmentItem().participantRole==="assistant"&&n.updateDomProps(t)})}setLayout(e){this.setProp("conversationLayout",e),this.chatItemComponentsById.forEach(t=>{t.updateDomProps({layout:e})})}setUserPersona(e){this.setProp("userPersona",e);const t={name:e==null?void 0:e.name,avatar:e==null?void 0:e.avatar};this.chatItemComponentsById.forEach(n=>{n.getChatSegmentItem().participantRole==="user"&&n.updateDomProps(t)})}updateMarkdownStreamRenderer(e,t){this.setProp(e,t)}onLoaderShown(e){var t;(t=this.renderedDom)!=null&&t.elements&&(this.renderedDom.elements.loaderContainer=e)}setProp(e,t){super.setProp(e,t),e!=="markdownLinkTarget"&&e!=="syntaxHighlighter"&&e!=="htmlSanitizer"&&e!=="skipStreamingAnimation"&&e!=="streamingAnimationSpeed"||this.chatItemComponentsById.forEach(n=>{n.updateMarkdownStreamRenderer(e,t)})}onChatSegmentReady(){Ne(()=>{var t,n,s,o;if(!((n=(t=this.renderedDom)==null?void 0:t.elements)!=null&&n.chatSegmentContainer))return;const e=(o=(s=this.renderedDom)==null?void 0:s.elements)==null?void 0:o.chatSegmentContainer;this.chatItemComponentsById.forEach(i=>{i.rendered||i.render(e)})})}onLoaderHidden(){var e;(e=this.renderedDom)!=null&&e.elements&&(this.renderedDom.elements.loaderContainer=void 0)}};Gt([ze("loader-shown")],lt.prototype,"onLoaderShown",1),Gt([ze("chat-segment-ready")],lt.prototype,"onChatSegmentReady",1),Gt([ze("loader-hidden")],lt.prototype,"onLoaderHidden",1),lt=Gt([Ze("chatSegment",({props:r,compEvent:e,appendToRoot:t})=>{let n;const s=document.createElement("div");s.className=os(r.status);const o=()=>{if(!n){n=document.createElement("div"),n.className="nlux-chatSegment-loader-container";const i=So();n.appendChild(i),s.appendChild(n),e("loader-shown")(n)}};return r.status==="active"&&o(),t(s),e("chat-segment-ready")(),{elements:{chatSegmentContainer:s,loaderContainer:n},actions:{showLoader:o,hideLoader:()=>{n&&(n.remove(),n=void 0,e("loader-hidden")())}},onDestroy:()=>{s.remove()}}},({propName:r,newValue:e,dom:t})=>{var n,s,o;if(r==="status"){const i=(n=t.elements)==null?void 0:n.chatSegmentContainer;if(!i)return;const a=e;i.className=os(a),a==="active"?(s=t.actions)==null||s.showLoader():(o=t.actions)==null||o.hideLoader()}})],lt);let tr=class extends Le{constructor(e,t){super(e,t),this.chatSegmentCompIdsByIndex=[],this.chatSegmentComponentsById=new Map,t.messages&&t.messages.length>0&&this.addChatSegment("complete",t.messages)}addChatItem(e,t){const n=this.chatSegmentComponentsById.get(e);if(!n)throw new Error(`CompConversation: chat segment with id "${e}" not found`);n.destroyed?Zn(`CompConversation: chat segment with id "${e}" is destroyed and cannot be used`):n.addChatItem(t)}addChatSegment(e="active",t){this.throwIfDestroyed();const n=De(),s=pt(lt).withContext(this.context).withProps({uid:n,status:e,conversationLayout:this.getProp("conversationLayout"),userPersona:this.getProp("userPersona"),assistantPersona:this.getProp("assistantPersona"),markdownLinkTarget:this.getProp("markdownLinkTarget"),showCodeBlockCopyButton:this.getProp("showCodeBlockCopyButton"),skipStreamingAnimation:this.getProp("skipStreamingAnimation"),syntaxHighlighter:this.getProp("syntaxHighlighter"),htmlSanitizer:this.getProp("htmlSanitizer"),streamingAnimationSpeed:this.getProp("streamingAnimationSpeed")}).create();if(t)for(const i of t)i.role==="assistant"?s.addChatItem({uid:De(),participantRole:"assistant",time:new Date,dataTransferMode:"batch",status:"complete",content:i.message,serverResponse:i.serverResponse}):i.role==="user"&&s.addChatItem({uid:De(),participantRole:"user",time:new Date,status:"complete",content:i.message});this.chatSegmentComponentsById.set(n,s),this.chatSegmentCompIdsByIndex.push(n);const o=s.id;return this.addSubComponent(o,s,"segmentsContainer"),this.notifyAboutSegmentCountChange(this.chatSegmentCompIdsByIndex.length),n}addChunk(e,t,n,s){const o=this.chatSegmentComponentsById.get(e);if(!o)throw new Error(`CompConversation: chat segment with id "${e}" not found`);o.addChunk(t,n,s)}completeChatSegment(e){const t=this.chatSegmentComponentsById.get(e);if(!t)throw new Error(`CompConversation: chat segment with id "${e}" not found`);t.destroyed||t.complete()}getChatSegmentContainer(e){const t=this.chatSegmentComponentsById.get(e);if((t==null?void 0:t.root)instanceof HTMLElement)return t.root}getConversationContentForAdapter(e="max"){if(typeof e=="number"&&e<0)return void Zn(`Invalid value provided for 'historyPayloadSize' : "${e}"! Value must be a positive integer or 'max'.`);if(e===0)return;const t=(n=>{const s=[];return n.forEach(o=>{o.items.forEach(i=>{if(i.status==="complete"){if(i.participantRole==="assistant")s.push({role:"assistant",message:i.content});else if(i.participantRole==="user")return s.push({role:"user",message:i.content})}})}),s})(this.chatSegmentCompIdsByIndex.map(n=>this.chatSegmentComponentsById.get(n)).filter(n=>n!==void 0).map(n=>({uid:n.id,status:"complete",items:n.getChatItems().map(s=>s.getChatSegmentItem())})));return e==="max"?t:t.slice(-e)}removeChatSegment(e){const t=this.chatSegmentComponentsById.get(e);if(!t)return;const n=t.id;this.subComponents.has(n)&&this.removeSubComponent(n),this.chatSegmentComponentsById.delete(t.id);const s=this.chatSegmentCompIdsByIndex.indexOf(e);s>=0&&this.chatSegmentCompIdsByIndex.splice(s,1),this.notifyAboutSegmentCountChange(this.chatSegmentCompIdsByIndex.length)}setAssistantPersona(e){this.setProp("assistantPersona",e),this.chatSegmentComponentsById.forEach(t=>{t.setAssistantPersona(e)})}setConversationLayout(e){this.setProp("conversationLayout",e),this.chatSegmentComponentsById.forEach(t=>{t.setLayout(e)})}setUserPersona(e){this.setProp("userPersona",e),this.chatSegmentComponentsById.forEach(t=>{t.setUserPersona(e)})}updateMarkdownStreamRenderer(e,t){this.setProp(e,t)}setProp(e,t){if(super.setProp(e,t),e==="markdownLinkTarget"||e==="syntaxHighlighter"||e==="htmlSanitizer"||e==="skipStreamingAnimation"||e==="streamingAnimationSpeed"||e==="showCodeBlockCopyButton"){const n=e,s=t;this.chatSegmentComponentsById.forEach(o=>{o.updateMarkdownStreamRenderer(n,s)})}}notifyAboutSegmentCountChange(e){const t=this.getProp("onSegmentCountChange");t&&t(e)}};tr=((r,e,t,n)=>{for(var s,o=e,i=r.length-1;i>=0;i--)(s=r[i])&&(o=s(o)||o);return o})([Ze("conversation",({appendToRoot:r})=>{const e=document.createElement("div");return e.classList.add("nlux-chatSegments-container"),r(e),{elements:{segmentsContainer:e},actions:{}}},()=>{})],tr);const jn={typing:"nlux-composer--typing","submitting-prompt":"nlux-composer--submitting","submitting-conversation-starter":"nlux-composer--submitting",waiting:"nlux-composer--waiting"},Ao=(r,e)=>{Object.keys(jn).forEach(t=>{r.classList.remove(jn[t])}),r.classList.add(jn[e])},la=r=>{const e=document.createElement("div");e.classList.add("nlux-comp-composer");const t=document.createElement("textarea");t.placeholder=r.placeholder??"",t.value=r.message??"",r.autoFocus&&(t.autofocus=!0);const n=document.createElement("button");return n.append((()=>{const s=document.createElement("div");s.classList.add("nlux-comp-sendIcon");const o=document.createElement("div");return o.classList.add("nlux-comp-sendIcon-container"),s.appendChild(o),s})()),n.append(So()),e.append(t),e.append(n),Ao(e,r.status),r.status!=="submitting-conversation-starter"&&r.status!=="submitting-prompt"||(t.disabled=!0,n.disabled=!0),r.status==="waiting"&&(n.disabled=!0),r.status==="typing"&&(n.disabled=r.disableSubmitButton??t.value===""),e},hn=(r,e)=>{let t=!1;const n=e?r.querySelector(e):r,s=n instanceof HTMLElement?n:void 0;if(!s)throw new un({source:"dom/listenTo",message:`Could not find element with query "${e}". Make sure the query provided matches an element that exists in the root element.`});const o=new Map,i=new Map,a=()=>{s&&(o.forEach((l,c)=>{s.removeEventListener(c,l)}),o.clear(),i.clear())},u={on:(l,c)=>{if(!c||!s)return u;if(!o.has(l)){const d=p=>{var h;(h=i.get(l))==null||h.forEach(m=>m(p))};o.set(l,d),s.addEventListener(l,d)}return i.has(l)||i.set(l,new Set),i.get(l).add(c),u},get:()=>{if(t)throw new Error("listenTo().get() can only be used once!");return t=!0,[s,a]}};return u};var ua=Object.defineProperty,da=Object.getOwnPropertyDescriptor,Tt=(r,e,t,n)=>{for(var s,o=n>1?void 0:n?da(e,t):e,i=r.length-1;i>=0;i--)(s=r[i])&&(o=(n?s(e,t,o):s(o))||o);return n&&o&&ua(e,t,o),o};let et=class extends Le{constructor(e,{props:t,eventListeners:n}){super(e,t),this.userEventListeners=n}focusTextInput(){this.executeDomAction("focusTextInput")}handleCommandEnterKeyPressed(e){var n;((n=this.getProp("domCompProps"))==null?void 0:n.submitShortcut)==="CommandEnter"&&(this.handleSendButtonClick(),e==null||e.preventDefault())}handleEnterKeyPressed(e){var n;const t=(n=this.getProp("domCompProps"))==null?void 0:n.submitShortcut;t&&t!=="Enter"||(this.handleSendButtonClick(),e==null||e.preventDefault())}handleSendButtonClick(){var s;const e=this.getProp("domCompProps");if(e!=null&&e.disableSubmitButton||!(e==null?void 0:e.message))return;const n=(s=this.userEventListeners)==null?void 0:s.onSubmit;n&&n()}handleTextChange(e){var s;const t=(s=this.userEventListeners)==null?void 0:s.onTextUpdated;t&&t(e);const n=this.getProp("domCompProps");this.setDomProps({...n,message:e})}handleTextInputUpdated(e){const t=e.target;t instanceof HTMLTextAreaElement&&this.handleTextChange(t.value)}setDomProps(e){this.setProp("domCompProps",e)}};Tt([ze("command-enter-key-pressed")],et.prototype,"handleCommandEnterKeyPressed",1),Tt([ze("enter-key-pressed")],et.prototype,"handleEnterKeyPressed",1),Tt([ze("send-message-clicked")],et.prototype,"handleSendButtonClick",1),Tt([ze("text-updated")],et.prototype,"handleTextInputUpdated",1),et=Tt([Ze("composer",({appendToRoot:r,props:e,compEvent:t})=>{const n=la(e.domCompProps);r(n);const[s,o]=hn(n,":scope > textarea").on("input",t("text-updated")).on("keydown",c=>{const d=c.key==="Enter",p=c.altKey||c.ctrlKey||c.metaKey||c.shiftKey;if(d&&!p)return void t("enter-key-pressed")(c);const h=c.getModifierState("Meta")&&c.key==="Enter",m=c.getModifierState("Control")&&c.key==="Enter";(h||m)&&t("command-enter-key-pressed")(c)}).get(),[i,a]=hn(n,":scope > button").on("click",t("send-message-clicked")).get();if(!(i instanceof HTMLButtonElement))throw new Error("Expected a button element");if(!(s instanceof HTMLTextAreaElement))throw new un({source:(u="composer",l="render",`#${u}/${l}`),message:"Expected a textarea element"});var u,l;return{elements:{root:n,textInput:s,sendButton:i},actions:{focusTextInput:()=>Ne(()=>{s.focus(),s.setSelectionRange(s.value.length,s.value.length)})},onDestroy:()=>{o(),a()}}},({propName:r,currentValue:e,newValue:t,dom:n})=>{var s;r==="domCompProps"&&((s=n.elements)!=null&&s.root)&&((o,i,a)=>{if(i.status===a.status&&i.message===a.message&&i.placeholder===a.placeholder&&i.autoFocus===a.autoFocus&&i.disableSubmitButton===a.disableSubmitButton)return;if(i.status!==a.status)return Ao(o,a.status),void((l,c,d)=>{if(c.status===d.status)return;const p=l.querySelector("* > textarea");d.status!=="typing"&&d.status!=="waiting"||!p.disabled?d.status!=="submitting-prompt"&&d.status!=="submitting-conversation-starter"||p.disabled||(p.disabled=!0):p.disabled=!1;const h=l.querySelector("* > button");if(d.status==="typing"){const m=(c.disableSubmitButton!==d.disableSubmitButton?d.disableSubmitButton:c.disableSubmitButton)??p.value==="";h.disabled!==m&&(h.disabled=m)}else d.status!=="waiting"&&d.status!=="submitting-prompt"&&d.status!=="submitting-conversation-starter"||h.disabled||(h.disabled=!0);c.placeholder!==d.placeholder&&(p.placeholder=d.placeholder??""),c.message!==d.message&&(p.value=d.message??""),c.autoFocus!==d.autoFocus&&(p.autofocus=d.autoFocus??!1)})(o,i,a);const u=o.querySelector("* > textarea");if(i.placeholder!==a.placeholder&&(u.placeholder=a.placeholder??""),i.autoFocus!==a.autoFocus&&(u.autofocus=a.autoFocus??!1),i.message!==a.message&&(u.value=a.message??""),i.status==="typing"){const l=o.querySelector("* > button"),c=(i.disableSubmitButton!==a.disableSubmitButton?a.disableSubmitButton:i.disableSubmitButton)??u.value==="";l.disabled!==c&&(l.disabled=c)}})(n.elements.root,e,t)})],et);const nr=r=>{if(typeof r!="object"||r===null)return!1;const e=r;return(typeof e.streamText=="function"||typeof e.batchText=="function")&&["stream","batch"].includes(e.dataTransferMode)&&typeof e.id=="string"&&typeof e.info=="object"&&e.info!==null&&typeof e.preProcessAiBatchedMessage=="function"&&typeof e.preProcessAiStreamedChunk=="function"},we=(r,e=1)=>{setTimeout(()=>{r()},e)},pa=(r,e,t,n,s,o,i,a,u)=>new Promise(l=>{const c=De(),d=[],p=[];let h=!1,m=!1,f=!1;const b=nr(t),S={next:v=>{if(m||f)return;let y,E;if(b){const w=v,I=t.preProcessAiStreamedChunk(w,n);I!=null&&(y=I,E=w,d.push(y),p.push(E))}else y=v,d.push(y);y!=null?(h||h||(h=!0,we(()=>{s.forEach(w=>{w({uid:c,status:"streaming",time:new Date,participantRole:"assistant",dataTransferMode:"stream"})})})),we(()=>{i.forEach(w=>{w({chunk:y,messageId:c,serverResponse:E})})})):Ee("Adapter returned an undefined or null value from streamText. This chunk will be ignored.")},complete:()=>{m||f||(f=!0,we(()=>{const v={uid:c,status:"complete",content:d,contentType:"text",serverResponse:void 0,time:new Date,participantRole:"assistant",dataTransferMode:"stream"};o.forEach(y=>{y(v)}),l()}),we(()=>{const v={uid:r,status:"complete",items:[e,{uid:c,status:"complete",contentType:"text",content:d,serverResponse:p,time:new Date,participantRole:"assistant",dataTransferMode:"stream"}]};a.forEach(y=>{y(v)})}))},error:v=>{m||f||(m=!0,we(()=>{u.forEach(y=>{y("failed-to-stream-content",v)}),l()}))}};t.streamText(e.content,S,n)}),ma=(r,e,t)=>{if(!r)return(()=>{const v=new Set,y=De(),E={uid:y,status:"complete",items:[]};return we(()=>{v.forEach(w=>{w(E)}),v.clear()}),{segment:E,observable:{on:(w,I)=>{w==="complete"&&v.add(I)},removeListener:(w,I)=>{v.delete(I)},destroy:()=>{v.clear()},get segmentId(){return y}},dataTransferMode:"batch"}})();const n=e;if(n.streamText===void 0&&n.batchText===void 0&&n.streamServerComponent===void 0)return(v=>{const y=new Set,E=De(),w={uid:E,status:"error",items:[]};return we(()=>{y.forEach(I=>I(v)),y.clear()}),{segment:w,dataTransferMode:"stream",observable:{on:(I,N)=>{I==="error"&&y.add(N)},removeListener:(I,N)=>{y.delete(N)},destroy:()=>{y.clear()},get segmentId(){return E}}}})("no-data-transfer-mode-supported");const s=De(),o=(v=>({uid:De(),time:new Date,status:"complete",participantRole:"user",content:v,contentType:"text"}))(r);let i,a,u,l,c,d,p=new Set,h=new Set,m=new Set;we(()=>{p!=null&&p.size&&(p.forEach(v=>{v(o)}),p.clear(),p=void 0)});const f=(v=>{const y=[],E=v,w=v;(E==null?void 0:E.streamText)===void 0&&(w==null?void 0:w.streamServerComponent)===void 0||y.push("stream"),(E==null?void 0:E.batchText)!==void 0&&y.push("batch");const I=nr(v)?v:void 0,N=(I==null?void 0:I.dataTransferMode)??void 0,j=y.length===1?y[0]:"stream";return N??j})(e);(v=>"streamServerComponent"in v?"server-component":"text")(e)==="server-component"?(u=new Set,a=new Set,((v,y,E,w,I,N,j,M)=>new Promise((F,Q)=>{try{const X=y.content,Z=De(),Y="assistant",V="streaming",re=new Date,G="stream";let oe,J;const A=()=>{we(()=>{N.forEach(_=>{oe&&J&&_({...oe,content:J,status:"complete"})})},20);const L={uid:v,status:"complete",items:[y,oe]};we(()=>{j.forEach(_=>{_(L)}),F()},20)},O=()=>{M.forEach(L=>{L("failed-to-stream-server-component",new Error("Failed to load content"))})};J=E.streamServerComponent(X,w,{onServerComponentReceived:A,onError:O}),oe={uid:Z,content:J,contentType:"server-component",participantRole:Y,status:V,time:re,dataTransferMode:G},we(()=>{I.forEach(L=>{L(oe)})},10)}catch(X){Ee(X);const Z=X instanceof Error?X:typeof X=="string"?new Error(X):new Error("Unknown error");we(()=>{M.forEach(Y=>Y("failed-to-load-content",Z))})}}))(s,o,e,t,a,u,h,m).finally(()=>{we(()=>S())})):f==="batch"?(i=new Set,(async(v,y,E,w,I,N,j)=>{try{const M=y.content,F=nr(E)?E:void 0,Q=F!==void 0,X=De(),Z="assistant",Y="complete",V=new Date,re="batch";let G;if(Q){const A=await F.batchText(M,w),O=F.preProcessAiBatchedMessage(A,w);O!=null&&(G={uid:X,content:O,contentType:"text",serverResponse:A,participantRole:Z,status:Y,time:V,dataTransferMode:re})}else G={uid:X,content:await E.batchText(M,w),contentType:"text",serverResponse:void 0,participantRole:Z,status:Y,time:V,dataTransferMode:re};if(!G)throw new Error("Response from adapter was undefined or cannot be processed");const oe=G;we(()=>{I.forEach(A=>{A(oe)})});const J={uid:v,status:"complete",items:[y,G]};we(()=>{N.forEach(A=>{A(J)})})}catch(M){Ee(M);const F=M instanceof Error?M:typeof M=="string"?new Error(M):new Error("Unknown error");we(()=>{j.forEach(Q=>Q("failed-to-load-content",F))})}})(s,o,e,t,i,h,m).finally(()=>{we(()=>S())})):(l=new Set,c=new Set,d=new Set,pa(s,o,e,t,l,c,d,h,m).finally(()=>{we(()=>S())}));const S=()=>{p==null||p.clear(),p=void 0,i==null||i.clear(),i=void 0,a==null||a.clear(),a=void 0,u==null||u.clear(),u=void 0,l==null||l.clear(),l=void 0,c==null||c.clear(),c=void 0,d==null||d.clear(),d=void 0,h==null||h.clear(),h=void 0,m==null||m.clear(),m=void 0};return{segment:{status:"active",uid:s,items:[]},dataTransferMode:f,observable:{get segmentId(){return s},on:(v,y)=>{v==="userMessageReceived"&&p?p.add(y):v==="aiMessageReceived"&&i?i.add(y):v==="aiServerComponentStreamStarted"&&a?a.add(y):v==="aiServerComponentStreamed"&&u?u.add(y):v==="aiMessageStreamStarted"&&l?l.add(y):v==="aiMessageStreamed"&&c?c.add(y):v==="aiChunkReceived"&&d?d.add(y):v==="complete"&&h?h.add(y):v==="error"&&m&&m.add(y)},removeListener:(v,y)=>{v!=="userMessageReceived"?v!=="aiMessageReceived"?v!=="aiMessageStreamStarted"?v!=="aiMessageStreamed"?v!=="aiChunkReceived"?v!=="complete"?v!=="error"||(m==null||m.delete(y)):h==null||h.delete(y):d==null||d.delete(y):c==null||c.delete(y):l==null||l.delete(y):i==null||i.delete(y):p==null||p.delete(y)},destroy:()=>S()}}},ha={"data-transfer-mode-not-supported":"Requested data transfer mode is not supported","no-data-transfer-mode-supported":"Adapter does not support any valid data transfer modes","connection-error":"Connection error","invalid-credentials":"Invalid credentials","invalid-api-key":"Invalid API key","http-server-side-error":"HTTP server side error","http-client-side-error":"HTTP client side error","failed-to-load-content":"Failed to load content","failed-to-stream-content":"Failed to stream content","failed-to-stream-server-component":"Failed to stream server component","failed-to-render-content":"Failed to display content"},rr=(r,e)=>r!==void 0&&r.length>0||e!==void 0&&e>0?"active":"starting",is="nlux-comp-welcomeMessage-text",Eo=(r,e)=>{const t=r.querySelector(`.${is}`);if(e!==""&&e!==void 0)if(t)t.textContent=e;else{const n=document.createElement("div");n.classList.add(is),n.textContent=e,r.appendChild(n)}else t==null||t.remove()},To="nlux-comp-welcomeMessage-personaName",sr=r=>{const e=document.createElement("div");e.classList.add("nlux-comp-welcomeMessage");const t=Er({name:r.name,avatar:r.avatar});e.append(t);const n=document.createElement("div"),s=document.createTextNode(r.name);return n.append(s),n.classList.add(To),e.append(n),Eo(e,r.message),e},as=()=>sr({name:"",avatar:"data:image/png;base64,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"});var fa=Object.defineProperty,ga=Object.getOwnPropertyDescriptor,cs=(r,e,t,n)=>{for(var s,o=n>1?void 0:n?ga(e,t):e,i=r.length-1;i>=0;i--)(s=r[i])&&(o=(n?s(e,t,o):s(o))||o);return n&&o&&fa(e,t,o),o};let ln=class extends Le{constructor(r,e){super(r,e),this.updateConversationStarters=t=>{}}conversationStarterClicked(r){this.getProp("onConversationStarterSelected")(r)}};cs([ze("conversation-starter-selected")],ln.prototype,"conversationStarterClicked",1),ln=cs([Ze("conversationStarters",({appendToRoot:r,props:e,compEvent:t})=>{const n=(o=>{const i=document.createElement("div");return i.classList.add("nlux-comp-conversationStarters"),o.forEach((a,u)=>{const l=document.createElement("button");l.classList.add("nlux-comp-conversationStarter");let c=document.createElement("div");a.icon&&(typeof a.icon=="string"?(c=document.createElement("img"),c.setAttribute("src",a.icon),c.setAttribute("width","16px")):(c.className="nlux-comp-conversationStarter-icon-container",c.appendChild(a.icon)));const d=document.createElement("span");d.classList.add("nlux-comp-conversationStarter-prompt"),d.textContent=a.label??a.prompt,l.appendChild(c),l.appendChild(d),i.appendChild(l)}),i})(e.conversationStarters);r(n);let s=[];return e.conversationStarters.forEach((o,i)=>{const[a,u]=hn(n,`:scope > :nth-child(${i+1})`).on("click",()=>{t("conversation-starter-selected")(o)}).get();s.push(u)}),{elements:{},actions:{},onDestroy:()=>{s.forEach(o=>o()),s=[],n.remove()}}},({})=>{})],ln);let or=class extends Le{constructor(r,e){super(r,e),this.setConversationStarters(e.conversationStarters)}setConversationStarters(r){var e;if(r||this.conversationStartersComp){if(r&&!this.conversationStartersComp){const t=this.getProp("onConversationStarterSelected");return this.conversationStartersComp=pt(ln).withContext(this.context).withProps({conversationStarters:r,onConversationStarterSelected:t}).create(),void this.addSubComponent(this.conversationStartersComp.id,this.conversationStartersComp,"conversationStartersContainer")}!r&&this.conversationStartersComp?(this.removeSubComponent(this.conversationStartersComp.id),this.conversationStartersComp=void 0):(e=this.conversationStartersComp)==null||e.updateConversationStarters(r)}}setShowGreeting(r){this.setProp("showGreeting",r),this.executeDomAction("resetGreeting",r)}setAssistantPersona(r){this.setProp("assistantPersona",r),this.executeDomAction("updateAssistantPersona",r)}resetConversationStarters(){const r=this.getProp("conversationStarters");this.setConversationStarters(r)}};or=((r,e,t,n)=>{for(var s,o=e,i=r.length-1;i>=0;i--)(s=r[i])&&(o=s(o)||o);return o})([Ze("launchPad",({appendToRoot:r,props:e})=>{const t={assistantPersona:e.assistantPersona,conversationStarters:e.conversationStarters,showGreeting:e.showGreeting!==!1};let n;if(t.showGreeting)if(e.assistantPersona){const i=e.assistantPersona;n=sr({name:i.name,avatar:i.avatar,message:i.tagline})}else n=as();n&&(r(n),t.greetingElement=n);const s=document.createElement("div");s.classList.add("nlux-conversationStarters-container"),r(s);const o=(i=!0)=>{t.showGreeting=i,t.greetingElement&&(t.greetingElement.remove(),t.greetingElement=void 0),i&&(t.greetingElement=t.assistantPersona?sr({name:t.assistantPersona.name,avatar:t.assistantPersona.avatar,message:t.assistantPersona.tagline}):as(),t.greetingElement&&s.insertAdjacentElement("beforebegin",t.greetingElement))};return{elements:{conversationStartersContainer:s},actions:{resetGreeting:(i=!0)=>{o(i)},updateAssistantPersona:i=>{const a=t.assistantPersona;t.assistantPersona=i,(a||i)&&t.showGreeting&&(i&&a?((u,l,c)=>{if(l.message!==c.message||l.name!==c.name||l.avatar!==c.avatar){if(l.message!==c.message&&Eo(u,c.message),l.name!==c.name){const d=u.querySelector(`.${To}`);if(d){const p=document.createTextNode(c.name);d.replaceChildren(p)}}if(l.avatar!==c.avatar||l.name!==c.name){const d=u.querySelector(`.${Ar}`);d&&Co(d,{name:l.name,avatar:l.avatar},{name:c.name,avatar:c.avatar})}}})(t.greetingElement,{name:a==null?void 0:a.name,avatar:a==null?void 0:a.avatar,message:a==null?void 0:a.tagline},{name:i.name,avatar:i.avatar,message:i.tagline}):o())}},onDestroy:()=>{var i;(i=t.greetingElement)==null||i.remove(),s.remove()}}},({})=>{})],or);var va=Object.defineProperty,ya=Object.getOwnPropertyDescriptor,Bn=(r,e,t,n)=>{for(var s,o=n>1?void 0:n?ya(e,t):e,i=r.length-1;i>=0;i--)(s=r[i])&&(o=(n?s(e,t,o):s(o))||o);return n&&o&&va(e,t,o),o};let Jt=class extends Le{constructor(r,{conversationLayout:e,autoScroll:t,streamingAnimationSpeed:n,visible:s=!0,composer:o,assistantPersona:i,userPersona:a,showGreeting:u,conversationStarters:l,initialConversationContent:c,syntaxHighlighter:d,htmlSanitizer:p,markdownLinkTarget:h,showCodeBlockCopyButton:m,skipStreamingAnimation:f}){if(super(r,{conversationLayout:e,visible:s,autoScroll:t,streamingAnimationSpeed:n,assistantPersona:i,userPersona:a,conversationStarters:l,showGreeting:u,initialConversationContent:c,composer:o,syntaxHighlighter:d,htmlSanitizer:p,markdownLinkTarget:h,showCodeBlockCopyButton:m,skipStreamingAnimation:f}),this.prompt="",this.handleConversationStarterClick=b=>{this.composer.setDomProps({status:"submitting-conversation-starter"}),this.composer.handleTextChange(b.prompt),this.composer.handleSendButtonClick()},this.handleSegmentCountChange=b=>{var v,y;if(this.segmentCount===b)return;this.segmentCount=b;const S=rr(this.getProp("initialConversationContent")||void 0,this.segmentCount);this.chatRoomStatus!==S&&(this.chatRoomStatus=S,this.executeDomAction("updateChatRoomStatus",this.chatRoomStatus),this.chatRoomStatus==="active"?(v=this.launchPad)!=null&&v.id&&(this.removeSubComponent((y=this.launchPad)==null?void 0:y.id),this.launchPad=void 0):this.addLaunchPad(this.getProp("showGreeting")??!0,this.getProp("assistantPersona"),this.getProp("conversationStarters"),this.handleConversationStarterClick))},this.segmentCount=c&&c.length>0?1:0,this.chatRoomStatus=rr(c,this.segmentCount),this.chatRoomStatus==="starting"&&this.addLaunchPad(u,i,l,this.handleConversationStarterClick),this.addConversation(i,a,c),this.addComposer(o==null?void 0:o.placeholder,o==null?void 0:o.autoFocus,o==null?void 0:o.disableSubmitButton,o==null?void 0:o.submitShortcut),!this.conversation||!this.composer)throw new Error("Chat room not initialized — An error occurred while initializing key components.")}getConversationContentForAdapter(r="max"){return this.conversation.getConversationContentForAdapter(r)}hide(){this.setProp("visible",!1)}messagesContainerClicked(){var r;(r=this.composer)==null||r.focusTextInput()}onChatRoomReady(){Ne(()=>{var e,t;const r=(t=(e=this.renderedDom)==null?void 0:e.elements)==null?void 0:t.conversationContainer;if(r instanceof HTMLElement){this.autoScrollController=sa(r,this.getProp("autoScroll")??!0);let n=0;const s=20,o=()=>{r.scrollHeight>r.clientHeight&&(r.scrollTo({behavior:"smooth",top:5e4}),clearInterval(i))},i=setInterval(()=>{n>=s?clearInterval(i):(o(),n++)},10)}this.context.emit("ready",{aiChatProps:oa(this.context.aiChatProps)})})}setProps(r){var e,t,n,s,o,i,a;if(r.hasOwnProperty("autoScroll")){const u=r.autoScroll;(e=this.autoScrollController)==null||e.updateProps({autoScroll:u})}if(r.hasOwnProperty("conversationLayout")&&((t=this.conversation)==null||t.setConversationLayout(r.conversationLayout)),r.hasOwnProperty("syntaxHighlighter")&&this.setProp("syntaxHighlighter",r.syntaxHighlighter),r.hasOwnProperty("htmlSanitizer")&&this.setProp("htmlSanitizer",r.htmlSanitizer),r.hasOwnProperty("markdownLinkTarget")&&this.setProp("markdownLinkTarget",r.markdownLinkTarget),r.hasOwnProperty("skipStreamingAnimation")&&this.setProp("skipStreamingAnimation",r.skipStreamingAnimation),r.hasOwnProperty("streamingAnimationSpeed")&&this.setProp("streamingAnimationSpeed",r.streamingAnimationSpeed),r.hasOwnProperty("assistantPersona")&&((n=this.conversation)==null||n.setAssistantPersona(r.assistantPersona??void 0),(s=this.launchPad)==null||s.setAssistantPersona(r.assistantPersona??void 0)),r.hasOwnProperty("userPersona")&&((o=this.conversation)==null||o.setUserPersona(r.userPersona??void 0)),r.hasOwnProperty("showGreeting")&&((i=this.launchPad)==null||i.setShowGreeting(r.showGreeting??!0)),r.hasOwnProperty("conversationStarters")&&((a=this.launchPad)==null||a.setConversationStarters(r.conversationStarters)),r.hasOwnProperty("composer")&&this.composer){const u={...this.composer.getProp("domCompProps"),...r.composer};this.composer.setDomProps(u)}}show(){this.setProp("visible",!0)}setProp(r,e){if(super.setProp(r,e),r==="markdownLinkTarget"||r==="syntaxHighlighter"||r==="htmlSanitizer"||r==="skipStreamingAnimation"||r==="streamingAnimationSpeed"){const t=r,n=e;this.conversation.updateMarkdownStreamRenderer(t,n)}}addLaunchPad(r,e,t,n){this.launchPad=pt(or).withContext(this.context).withProps({showGreeting:r,assistantPersona:e,conversationStarters:t,onConversationStarterSelected:n}).create(),this.addSubComponent(this.launchPad.id,this.launchPad,"launchPadContainer")}addConversation(r,e,t){this.conversation=pt(tr).withContext(this.context).withProps({assistantPersona:r,userPersona:e,messages:t,conversationLayout:this.getProp("conversationLayout"),markdownLinkTarget:this.getProp("markdownLinkTarget"),showCodeBlockCopyButton:this.getProp("showCodeBlockCopyButton"),skipStreamingAnimation:this.getProp("skipStreamingAnimation"),streamingAnimationSpeed:this.getProp("streamingAnimationSpeed"),syntaxHighlighter:this.getProp("syntaxHighlighter"),htmlSanitizer:this.getProp("htmlSanitizer"),onSegmentCountChange:this.handleSegmentCountChange}).create(),this.addSubComponent(this.conversation.id,this.conversation,"conversationContainer")}addComposer(r,e,t,n){this.composer=pt(et).withContext(this.context).withProps({props:{domCompProps:{status:"typing",placeholder:r,autoFocus:e,disableSubmitButton:t,submitShortcut:n}},eventListeners:{onTextUpdated:s=>this.handleComposerTextChange(s),onSubmit:()=>this.handleComposerSubmit()}}).create(),this.addSubComponent(this.composer.id,this.composer,"composerContainer")}handleComposerSubmit(){const r=this.props.composer;(({context:e,composerInstance:t,conversation:n,autoScrollController:s,messageToSend:o,resetComposer:i,setComposerAsWaiting:a})=>()=>{var l,c;const u=n.addChatSegment();try{const d=t.getProp("domCompProps");t.setDomProps({...d,status:"submitting-prompt"});const p={aiChatProps:e.aiChatProps,conversationHistory:n.getConversationContentForAdapter((c=(l=e.aiChatProps)==null?void 0:l.conversationOptions)==null?void 0:c.historyPayloadSize)},h=ma(o,e.adapter,p);h.observable.on("error",(m,f)=>{n.removeChatSegment(u),s==null||s.handleChatSegmentRemoved(u),i(!1),e.exception(m),e.emit("error",{errorId:m,message:ha[m],errorObject:f})}),h.observable.on("userMessageReceived",m=>{n.addChatItem(u,m),e.emit("messageSent",{uid:m.uid,message:m.content}),Ne(()=>{if(s){const f=n.getChatSegmentContainer(u);f&&s.handleNewChatSegmentAdded(u,f)}})}),h.dataTransferMode==="batch"?h.observable.on("aiMessageReceived",m=>{const f=typeof m.content=="string",b={...m,content:f?"":m.content};n.addChatItem(u,b),f&&n.addChunk(u,b.uid,m.content,m.serverResponse),n.completeChatSegment(u),e.emit("messageReceived",{uid:m.uid,message:m.content}),i(!0)}):(h.observable.on("aiMessageStreamStarted",m=>{n.addChatItem(u,m),a(),e.emit("messageStreamStarted",{uid:m.uid})}),h.observable.on("aiChunkReceived",m=>{const{messageId:f,chunk:b,serverResponse:S}=m;n.addChunk(u,f,b,S)}),h.observable.on("aiMessageStreamed",m=>{m.status==="complete"&&e.emit("messageReceived",{uid:m.uid,message:m.content})}),h.observable.on("aiServerComponentStreamStarted",m=>{n.addChatItem(u,m),a(),e.emit("messageStreamStarted",{uid:m.uid})}),h.observable.on("aiServerComponentStreamed",m=>{m.status==="complete"&&e.emit("messageReceived",{uid:m.uid,message:m.content})}),h.observable.on("complete",()=>{n.completeChatSegment(u),i(!1)}))}catch(d){Ee(d),i(!1)}})({context:this.context,composerInstance:this.composer,conversation:this.conversation,messageToSend:this.prompt,autoScrollController:this.autoScrollController,resetComposer:e=>{this.destroyed||this.resetComposer(e,r==null?void 0:r.autoFocus)},setComposerAsWaiting:()=>{this.destroyed||this.composer.setDomProps({status:"waiting"})}})()}handleComposerTextChange(r){this.prompt=r}resetComposer(r=!1,e=!1){if(!this.composer)return;const t={...this.composer.getProp("domCompProps"),status:"typing"};r&&(t.message=""),this.composer.setDomProps(t),e&&this.composer.focusTextInput()}};Bn([ze("conversation-container-clicked")],Jt.prototype,"messagesContainerClicked",1),Bn([ze("chat-room-ready")],Jt.prototype,"onChatRoomReady",1),Jt=Bn([Ze("chatRoom",({appendToRoot:r,compEvent:e,props:t})=>{const n=document.createElement("div");n.classList.add("nlux-conversation-container");const s=document.createElement("div");s.classList.add("nlux-composer-container");const o=document.createElement("div");o.classList.add("nlux-launchPad-container");const i=document.createDocumentFragment();i.appendChild(o),i.appendChild(n),i.appendChild(s);const a=t.visible??!0,u=document.createElement("div"),l=p=>{u.classList.remove("nlux-chatRoom-starting"),u.classList.remove("nlux-chatRoom-active"),u.classList.add(`nlux-chatRoom-${p}`)};u.classList.add("nlux-chatRoom-container"),l(rr(t.initialConversationContent)),u.append(i),u.style.display=a?"":"none";const[c,d]=hn(u,":scope > .nlux-conversation-container").on("click",e("conversation-container-clicked")).get();return r(u),e("chat-room-ready")(),{elements:{composerContainer:s,conversationContainer:n,launchPadContainer:o},actions:{updateChatRoomStatus:p=>{l(p)}},onDestroy:()=>{d()}}},({propName:r,newValue:e,dom:{elements:t}})=>{})],Jt);const xa=r=>{const e=new Set;let t=!1,n=null,s=null;const o=()=>{if(t||e.size===0)return;t=!0;const a=e.values().next().value;e.delete(a),n=(({message:u})=>{const l=document.createElement("div");l.classList.add("nlux-comp-exceptionItem");const c=document.createElement("span");return c.classList.add("nlux-comp-exp_itm_msg"),c.append(document.createTextNode(u)),l.append(c),l})(a),r.append(n),s=setTimeout(i,3e3)},i=()=>{n==null||n.classList.add("nlux-comp-exceptionItem--hiding"),s=setTimeout(()=>{t=!1,n==null||n.remove(),n=null,o()},500)};return{displayException:a=>{e.add({message:a}),t||o()},destroy:()=>{e.clear(),n==null||n.remove(),s&&clearTimeout(s)}}};let ls=class extends Le{constructor(r,e){super(r,e)}destroy(){super.destroy()}showAlert(r,e){this.executeDomAction("displayException",e)}};ls=((r,e,t,n)=>{for(var s,o=e,i=r.length-1;i>=0;i--)(s=r[i])&&(o=s(o)||o);return o})([Ze("exceptionsBox",({props:r,appendToRoot:e})=>{const t=(()=>{const s=document.createElement("div");return s.classList.add("nlux-comp-exceptionBox"),s})();e(t);let n=xa(t);return{elements:{root:t},actions:{displayException:s=>{n==null||n.displayException(s)}},onDestroy:()=>{n==null||n.destroy(),t.remove(),n=void 0}}},()=>{})],ls);const ba=r=>{const e=new Set;let t=!1,n=null,s=null;const o=()=>{if(t||e.size===0)return;t=!0;const a=e.values().next().value;e.delete(a),n=(({message:u})=>{const l=document.createElement("div");l.classList.add("nlux-comp-exceptionItem");const c=document.createElement("span");return c.classList.add("nlux-comp-exp_itm_msg"),c.append(document.createTextNode(u)),l.append(c),l})(a),r.append(n),s=setTimeout(i,3e3)},i=()=>{n==null||n.classList.add("nlux-comp-exceptionItem--hiding"),s=setTimeout(()=>{t=!1,n==null||n.remove(),n=null,o()},500)};return{displayException:a=>{e.add({message:a}),t||o()},destroy:()=>{e.clear(),n==null||n.remove(),s&&clearTimeout(s)}}},Ue=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const e=16*Math.random()|0;return(r=="x"?e:3&e|8).toString(16)}),Pe=r=>{typeof r!="string"?r&&typeof r.toString=="function"?console.warn(`[nlux] ${r.toString()}`):console.warn("[nlux]"):console.warn(`[nlux] ${r}`)},us=[],fn=r=>{us.includes(r)||(us.push(r),Pe(r))},ir={received:"nlux_msg_received",sent:"nlux_msg_sent"},ar={streaming:"nlux_msg_streaming",complete:"nlux_msg_complete"},ds=r=>{if(!(r instanceof HTMLButtonElement)||r.dataset.clickListenerSet==="true")return;let e=!1;const t=r.nextElementSibling;r.addEventListener("click",()=>{if(e||!t)return;const n=t.innerText;navigator.clipboard.writeText(n??""),e=!0,r.classList.add("clicked"),setTimeout(()=>{e=!1,r.classList.remove("clicked")},1e3)}),r.dataset.clickListenerSet="true"},Po=r=>{const e="nlux-comp-copyButton";r instanceof HTMLButtonElement&&r.classList.contains(e)?ds(r):r.querySelectorAll(`.${e}`).forEach(ds)};function wa(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let st={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function ps(r){st=r}var ka=Object.defineProperty,Ro=(r,e,t)=>((n,s,o)=>s in n?ka(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,typeof e!="symbol"?e+"":e,t);class jt{constructor(e){Ro(this,"options"),this.options=e||st}postprocess(e){return e}preprocess(e){return e}processAllTokens(e){return e}}Ro(jt,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));const Io=/[&<>"']/,Ca=new RegExp(Io.source,"g"),Oo=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Sa=new RegExp(Oo.source,"g"),Aa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ms=r=>Aa[r];function Ie(r,e){if(e){if(Io.test(r))return r.replace(Ca,ms)}else if(Oo.test(r))return r.replace(Sa,ms);return r}const Ea=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function Ta(r){return r.replace(Ea,(e,t)=>(t=t.toLowerCase())==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):"")}const Pa=/(^|[^\[])\^/g;function ue(r,e){let t=typeof r=="string"?r:r.source;e=e||"";const n={replace:(s,o)=>{let i=typeof o=="string"?o:o.source;return i=i.replace(Pa,"$1"),t=t.replace(s,i),n},getRegex:()=>new RegExp(t,e)};return n}function hs(r){try{r=encodeURI(r).replace(/%25/g,"%")}catch{return null}return r}const Bt={exec:()=>null};function fs(r,e){const t=r.replace(/\|/g,(s,o,i)=>{let a=!1,u=o;for(;--u>=0&&i[u]==="\\";)a=!a;return a?"|":" |"}).split(/ \|/);let n=0;if(t[0].trim()||t.shift(),t.length>0&&!t[t.length-1].trim()&&t.pop(),e)if(t.length>e)t.splice(e);else for(;t.length<e;)t.push("");for(;n<t.length;n++)t[n]=t[n].trim().replace(/\\\|/g,"|");return t}function Vt(r,e,t){const n=r.length;if(n===0)return"";let s=0;for(;s<n;){const o=r.charAt(n-s-1);if(o!==e||t){if(o===e||!t)break;s++}else s++}return r.slice(0,n-s)}const Nt=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Mo=/(?:[*+-]|\d{1,9}[.)])/,Lo=ue(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Mo).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),Tr=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Pr=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Ra=ue(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",Pr).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Ia=ue(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Mo).getRegex(),En="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Rr=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Oa=ue("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",Rr).replace("tag",En).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),gs=ue(Tr).replace("hr",Nt).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",En).getRegex(),Ir={blockquote:ue(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",gs).getRegex(),code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,def:Ra,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:Nt,html:Oa,lheading:Lo,list:Ia,newline:/^(?: *(?:\n|$))+/,paragraph:gs,table:Bt,text:/^[^\n]+/},vs=ue("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Nt).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",En).getRegex(),Ma={...Ir,table:vs,paragraph:ue(Tr).replace("hr",Nt).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",vs).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",En).getRegex()},La={...Ir,html:ue(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Rr).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Bt,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ue(Tr).replace("hr",Nt).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Lo).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},jo=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Bo=/^( {2,}|\\)\n(?!\s*$)/,_t="\\p{P}\\p{S}",ja=ue(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,_t).getRegex(),Ba=ue(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,_t).getRegex(),Da=ue("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,_t).getRegex(),za=ue("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,_t).getRegex(),Fa=ue(/\\([punct])/,"gu").replace(/punct/g,_t).getRegex(),Ha=ue(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),$a=ue(Rr).replace("(?:-->|$)","-->").getRegex(),Na=ue("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",$a).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),gn=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,_a=ue(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",gn).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),ys=ue(/^!?\[(label)\]\[(ref)\]/).replace("label",gn).replace("ref",Pr).getRegex(),xs=ue(/^!?\[(ref)\](?:\[\])?/).replace("ref",Pr).getRegex(),Or={_backpedal:Bt,anyPunctuation:Fa,autolink:Ha,blockSkip:/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,br:Bo,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:Bt,emStrongLDelim:Ba,emStrongRDelimAst:Da,emStrongRDelimUnd:za,escape:jo,link:_a,nolink:xs,punctuation:ja,reflink:ys,reflinkSearch:ue("reflink|nolink(?!\\()","g").replace("reflink",ys).replace("nolink",xs).getRegex(),tag:Na,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:Bt},qa={...Or,link:ue(/^!?\[(label)\]\((.*?)\)/).replace("label",gn).getRegex(),reflink:ue(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",gn).getRegex()},cr={...Or,escape:ue(jo).replace("])","~|])").getRegex(),url:ue(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Ua={...cr,br:ue(Bo).replace("{2,}","*").getRegex(),text:ue(cr.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},en={normal:Ir,gfm:Ma,pedantic:La},Pt={normal:Or,gfm:cr,breaks:Ua,pedantic:qa};var Ya=Object.defineProperty,Dn=(r,e,t)=>((n,s,o)=>s in n?Ya(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,typeof e!="symbol"?e+"":e,t);function bs(r,e,t,n){const s=e.href,o=e.title?Ie(e.title):null,i=r[1].replace(/\\([\[\]])/g,"$1");if(r[0].charAt(0)!=="!"){n.state.inLink=!0;const a={type:"link",raw:t,href:s,title:o,text:i,tokens:n.inlineTokens(i)};return n.state.inLink=!1,a}return{type:"image",raw:t,href:s,title:o,text:Ie(i)}}class vn{constructor(e){Dn(this,"lexer"),Dn(this,"options"),Dn(this,"rules"),this.options=e||st}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let n,s;return t[2]==="@"?(n=Ie(t[1]),s="mailto:"+n):(n=Ie(t[1]),s=n),{type:"link",raw:t[0],text:n,href:s,tokens:[{type:"text",raw:n,text:n}]}}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let n=t[0].replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`);n=Vt(n.replace(/^ *>[ \t]?/gm,""),`
`);const s=this.lexer.state.top;this.lexer.state.top=!0;const o=this.lexer.blockTokens(n);return this.lexer.state.top=s,{type:"blockquote",raw:t[0],tokens:o,text:n}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const n=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Vt(n,`
`)}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(/\n/g," ");const s=/[^ ]/.test(n),o=/^ /.test(n)&&/ $/.test(n);return s&&o&&(n=n.substring(1,n.length-1)),n=Ie(n,!0),{type:"codespan",raw:t[0],text:n}}}def(e){const t=this.rules.block.def.exec(e);if(t){const n=t[1].toLowerCase().replace(/\s+/g," "),s=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:s,title:o}}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}emStrong(e,t,n=""){let s=this.rules.inline.emStrongLDelim.exec(e);if(s&&!(s[3]&&n.match(/[\p{L}\p{N}]/u))&&(!(s[1]||s[2])||!n||this.rules.inline.punctuation.exec(n))){const o=[...s[0]].length-1;let i,a,u=o,l=0;const c=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,t=t.slice(-1*e.length+o);(s=c.exec(t))!=null;){if(i=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!i)continue;if(a=[...i].length,s[3]||s[4]){u+=a;continue}if((s[5]||s[6])&&o%3&&!((o+a)%3)){l+=a;continue}if(u-=a,u>0)continue;a=Math.min(a,a+u+l);const d=[...s[0]][0].length,p=e.slice(0,o+s.index+d+a);if(Math.min(o,a)%2){const m=p.slice(1,-1);return{type:"em",raw:p,text:m,tokens:this.lexer.inlineTokens(m)}}const h=p.slice(2,-2);return{type:"strong",raw:p,text:h,tokens:this.lexer.inlineTokens(h)}}}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Ie(t[1])}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const n=t[0],s=function(o,i){const a=o.match(/^(\s+)(?:```)/);if(a===null)return i;const u=a[1];return i.split(`
`).map(l=>{const c=l.match(/^\s+/);if(c===null)return l;const[d]=c;return d.length>=u.length?l.slice(u.length):l}).join(`
`)}(n,t[3]||"");return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:s}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(/#$/.test(n)){const s=Vt(n,"#");this.options.pedantic?n=s.trim():s&&!/ $/.test(s)||(n=s.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let n;return n=this.lexer.state.inRawBlock?t[0]:Ie(t[0]),{type:"text",raw:t[0],text:n}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}link(e){const t=this.rules.inline.link.exec(e);if(t){const n=t[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;const i=Vt(n.slice(0,-1),"\\");if((n.length-i.length)%2==0)return}else{const i=function(a,u){if(a.indexOf(u[1])===-1)return-1;let l=0;for(let c=0;c<a.length;c++)if(a[c]==="\\")c++;else if(a[c]===u[0])l++;else if(a[c]===u[1]&&(l--,l<0))return c;return-1}(t[2],"()");if(i>-1){const a=(t[0].indexOf("!")===0?5:4)+t[1].length+i;t[2]=t[2].substring(0,i),t[0]=t[0].substring(0,a).trim(),t[3]=""}}let s=t[2],o="";if(this.options.pedantic){const i=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s);i&&(s=i[1],o=i[3])}else o=t[3]?t[3].slice(1,-1):"";return s=s.trim(),/^</.test(s)&&(s=this.options.pedantic&&!/>$/.test(n)?s.slice(1):s.slice(1,-1)),bs(t,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim();const s=n.length>1,o={type:"list",raw:"",ordered:s,start:s?+n.slice(0,-1):"",loose:!1,items:[]};n=s?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=s?n:"[*+-]");const i=new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`);let a="",u="",l=!1;for(;e;){let c=!1;if(!(t=i.exec(e))||this.rules.block.hr.test(e))break;a=t[0],e=e.substring(a.length);let d=t[2].split(`
`,1)[0].replace(/^\t+/,S=>" ".repeat(3*S.length)),p=e.split(`
`,1)[0],h=0;this.options.pedantic?(h=2,u=d.trimStart()):(h=t[2].search(/[^ ]/),h=h>4?1:h,u=d.slice(h),h+=t[1].length);let m=!1;if(!d&&/^ *$/.test(p)&&(a+=p+`
`,e=e.substring(p.length+1),c=!0),!c){const S=new RegExp(`^ {0,${Math.min(3,h-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),v=new RegExp(`^ {0,${Math.min(3,h-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),y=new RegExp(`^ {0,${Math.min(3,h-1)}}(?:\`\`\`|~~~)`),E=new RegExp(`^ {0,${Math.min(3,h-1)}}#`);for(;e;){const w=e.split(`
`,1)[0];if(p=w,this.options.pedantic&&(p=p.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),y.test(p)||E.test(p)||S.test(p)||v.test(e))break;if(p.search(/[^ ]/)>=h||!p.trim())u+=`
`+p.slice(h);else{if(m||d.search(/[^ ]/)>=4||y.test(d)||E.test(d)||v.test(d))break;u+=`
`+p}m||p.trim()||(m=!0),a+=w+`
`,e=e.substring(w.length+1),d=p.slice(h)}}o.loose||(l?o.loose=!0:/\n *\n *$/.test(a)&&(l=!0));let f,b=null;this.options.gfm&&(b=/^\[[ xX]\] /.exec(u),b&&(f=b[0]!=="[ ] ",u=u.replace(/^\[[ xX]\] +/,""))),o.items.push({type:"list_item",raw:a,task:!!b,checked:f,loose:!1,text:u,tokens:[]}),o.raw+=a}o.items[o.items.length-1].raw=a.trimEnd(),o.items[o.items.length-1].text=u.trimEnd(),o.raw=o.raw.trimEnd();for(let c=0;c<o.items.length;c++)if(this.lexer.state.top=!1,o.items[c].tokens=this.lexer.blockTokens(o.items[c].text,[]),!o.loose){const d=o.items[c].tokens.filter(h=>h.type==="space"),p=d.length>0&&d.some(h=>/\n.*\n/.test(h.raw));o.loose=p}if(o.loose)for(let c=0;c<o.items.length;c++)o.items[c].loose=!0;return o}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){const s=t[(n[2]||n[1]).replace(/\s+/g," ").toLowerCase()];if(!s){const o=n[0].charAt(0);return{type:"text",raw:o,text:o}}return bs(n,s,n[0],this.lexer)}}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}table(e){const t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;const n=fs(t[1]),s=t[2].replace(/^\||\| *$/g,"").split("|"),o=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],i={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===s.length){for(const a of s)/^ *-+: *$/.test(a)?i.align.push("right"):/^ *:-+: *$/.test(a)?i.align.push("center"):/^ *:-+ *$/.test(a)?i.align.push("left"):i.align.push(null);for(const a of n)i.header.push({text:a,tokens:this.lexer.inline(a)});for(const a of o)i.rows.push(fs(a,i.header.length).map(u=>({text:u,tokens:this.lexer.inline(u)})));return i}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}url(e){var n;let t;if(t=this.rules.inline.url.exec(e)){let s,o;if(t[2]==="@")s=Ie(t[0]),o="mailto:"+s;else{let i;do i=t[0],t[0]=((n=this.rules.inline._backpedal.exec(t[0]))==null?void 0:n[0])??"";while(i!==t[0]);s=Ie(t[0]),o=t[1]==="www."?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:s,href:o,tokens:[{type:"text",raw:s,text:s}]}}}}var Wa=Object.defineProperty,Rt=(r,e,t)=>((n,s,o)=>s in n?Wa(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,typeof e!="symbol"?e+"":e,t);class Ye{constructor(e){Rt(this,"options"),Rt(this,"state"),Rt(this,"tokens"),Rt(this,"inlineQueue"),Rt(this,"tokenizer"),this.tokens=[],this.tokens.links=Object.create(null),this.options=e||st,this.options.tokenizer=this.options.tokenizer||new vn,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:en.normal,inline:Pt.normal};this.options.pedantic?(t.block=en.pedantic,t.inline=Pt.pedantic):this.options.gfm&&(t.block=en.gfm,this.options.breaks?t.inline=Pt.breaks:t.inline=Pt.gfm),this.tokenizer.rules=t}static get rules(){return{block:en,inline:Pt}}static lex(e,t){return new Ye(t).lex(e)}static lexInline(e,t){return new Ye(t).inlineTokens(e)}blockTokens(e,t=[]){let n,s,o,i;for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,(a,u,l)=>u+"    ".repeat(l.length));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>!!(n=a.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0))))if(n=this.tokenizer.space(e))e=e.substring(n.raw.length),n.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(n);else if(n=this.tokenizer.code(e))e=e.substring(n.raw.length),s=t[t.length-1],!s||s.type!=="paragraph"&&s.type!=="text"?t.push(n):(s.raw+=`
`+n.raw,s.text+=`
`+n.text,this.inlineQueue[this.inlineQueue.length-1].src=s.text);else if(n=this.tokenizer.fences(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.heading(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.hr(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.blockquote(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.list(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.html(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.def(e))e=e.substring(n.raw.length),s=t[t.length-1],!s||s.type!=="paragraph"&&s.type!=="text"?this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title}):(s.raw+=`
`+n.raw,s.text+=`
`+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=s.text);else if(n=this.tokenizer.table(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.lheading(e))e=e.substring(n.raw.length),t.push(n);else{if(o=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const u=e.slice(1);let l;this.options.extensions.startBlock.forEach(c=>{l=c.call({lexer:this},u),typeof l=="number"&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(o=e.substring(0,a+1))}if(this.state.top&&(n=this.tokenizer.paragraph(o)))s=t[t.length-1],i&&s.type==="paragraph"?(s.raw+=`
`+n.raw,s.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):t.push(n),i=o.length!==e.length,e=e.substring(n.raw.length);else if(n=this.tokenizer.text(e))e=e.substring(n.raw.length),s=t[t.length-1],s&&s.type==="text"?(s.raw+=`
`+n.raw,s.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):t.push(n);else if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n,s,o,i,a,u,l=e;if(this.tokens.links){const c=Object.keys(this.tokens.links);if(c.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(l))!=null;)c.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.blockSkip.exec(l))!=null;)l=l.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(l))!=null;)l=l.slice(0,i.index)+"++"+l.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(a||(u=""),a=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(c=>!!(n=c.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0))))if(n=this.tokenizer.escape(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.tag(e))e=e.substring(n.raw.length),s=t[t.length-1],s&&n.type==="text"&&s.type==="text"?(s.raw+=n.raw,s.text+=n.text):t.push(n);else if(n=this.tokenizer.link(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(n.raw.length),s=t[t.length-1],s&&n.type==="text"&&s.type==="text"?(s.raw+=n.raw,s.text+=n.text):t.push(n);else if(n=this.tokenizer.emStrong(e,l,u))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.codespan(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.br(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.del(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.autolink(e))e=e.substring(n.raw.length),t.push(n);else if(this.state.inLink||!(n=this.tokenizer.url(e))){if(o=e,this.options.extensions&&this.options.extensions.startInline){let c=1/0;const d=e.slice(1);let p;this.options.extensions.startInline.forEach(h=>{p=h.call({lexer:this},d),typeof p=="number"&&p>=0&&(c=Math.min(c,p))}),c<1/0&&c>=0&&(o=e.substring(0,c+1))}if(n=this.tokenizer.inlineText(o))e=e.substring(n.raw.length),n.raw.slice(-1)!=="_"&&(u=n.raw.slice(-1)),a=!0,s=t[t.length-1],s&&s.type==="text"?(s.raw+=n.raw,s.text+=n.text):t.push(n);else if(e){const c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}throw new Error(c)}}else e=e.substring(n.raw.length),t.push(n);return t}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const n=this.inlineQueue[t];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}}var Qa=Object.defineProperty,Xa=(r,e,t)=>((n,s,o)=>s in n?Qa(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,e+"",t);class yn{constructor(e){Xa(this,"options"),this.options=e||st}blockquote(e){return`<blockquote>
${e}</blockquote>
`}br(){return"<br>"}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}code(e,t,n){var o;const s=(o=(t||"").match(/^\S*/))==null?void 0:o[0];return e=e.replace(/\n$/,"")+`
`,s?'<pre><code class="language-'+Ie(s)+'">'+(n?e:Ie(e,!0))+`</code></pre>
`:"<pre><code>"+(n?e:Ie(e,!0))+`</code></pre>
`}codespan(e){return`<code>${e}</code>`}del(e){return`<del>${e}</del>`}em(e){return`<em>${e}</em>`}heading(e,t,n){return`<h${t}>${e}</h${t}>
`}hr(){return`<hr>
`}html(e,t){return e}image(e,t,n){const s=hs(e);if(s===null)return n;let o=`<img src="${e=s}" alt="${n}"`;return t&&(o+=` title="${t}"`),o+=">",o}link(e,t,n){const s=hs(e);if(s===null)return n;let o='<a href="'+(e=s)+'"';return t&&(o+=' title="'+t+'"'),o+=">"+n+"</a>",o}list(e,t,n){const s=t?"ol":"ul";return"<"+s+(t&&n!==1?' start="'+n+'"':"")+`>
`+e+"</"+s+`>
`}listitem(e,t,n){return`<li>${e}</li>
`}paragraph(e){return`<p>${e}</p>
`}strong(e){return`<strong>${e}</strong>`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablecell(e,t){const n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>
`}tablerow(e){return`<tr>
${e}</tr>
`}text(e){return e}}class Mr{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,n){return""+n}image(e,t,n){return""+n}br(){return""}}var Za=Object.defineProperty,zn=(r,e,t)=>((n,s,o)=>s in n?Za(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,typeof e!="symbol"?e+"":e,t);class We{constructor(e){zn(this,"options"),zn(this,"renderer"),zn(this,"textRenderer"),this.options=e||st,this.options.renderer=this.options.renderer||new yn,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Mr}static parse(e,t){return new We(t).parse(e)}static parseInline(e,t){return new We(t).parseInline(e)}parse(e,t=!0){let n="";for(let s=0;s<e.length;s++){const o=e[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]){const i=o,a=this.options.extensions.renderers[i.type].call({parser:this},i);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(i.type)){n+=a||"";continue}}switch(o.type){case"space":continue;case"hr":n+=this.renderer.hr();continue;case"heading":{const i=o;n+=this.renderer.heading(this.parseInline(i.tokens),i.depth,Ta(this.parseInline(i.tokens,this.textRenderer)));continue}case"code":{const i=o;n+=this.renderer.code(i.text,i.lang,!!i.escaped);continue}case"table":{const i=o;let a="",u="";for(let c=0;c<i.header.length;c++)u+=this.renderer.tablecell(this.parseInline(i.header[c].tokens),{header:!0,align:i.align[c]});a+=this.renderer.tablerow(u);let l="";for(let c=0;c<i.rows.length;c++){const d=i.rows[c];u="";for(let p=0;p<d.length;p++)u+=this.renderer.tablecell(this.parseInline(d[p].tokens),{header:!1,align:i.align[p]});l+=this.renderer.tablerow(u)}n+=this.renderer.table(a,l);continue}case"blockquote":{const i=o,a=this.parse(i.tokens);n+=this.renderer.blockquote(a);continue}case"list":{const i=o,a=i.ordered,u=i.start,l=i.loose;let c="";for(let d=0;d<i.items.length;d++){const p=i.items[d],h=p.checked,m=p.task;let f="";if(p.task){const b=this.renderer.checkbox(!!h);l?p.tokens.length>0&&p.tokens[0].type==="paragraph"?(p.tokens[0].text=b+" "+p.tokens[0].text,p.tokens[0].tokens&&p.tokens[0].tokens.length>0&&p.tokens[0].tokens[0].type==="text"&&(p.tokens[0].tokens[0].text=b+" "+p.tokens[0].tokens[0].text)):p.tokens.unshift({type:"text",text:b+" "}):f+=b+" "}f+=this.parse(p.tokens,l),c+=this.renderer.listitem(f,m,!!h)}n+=this.renderer.list(c,a,u);continue}case"html":{const i=o;n+=this.renderer.html(i.text,i.block);continue}case"paragraph":{const i=o;n+=this.renderer.paragraph(this.parseInline(i.tokens));continue}case"text":{let i=o,a=i.tokens?this.parseInline(i.tokens):i.text;for(;s+1<e.length&&e[s+1].type==="text";)i=e[++s],a+=`
`+(i.tokens?this.parseInline(i.tokens):i.text);n+=t?this.renderer.paragraph(a):a;continue}default:{const i='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(i),"";throw new Error(i)}}}return n}parseInline(e,t){t=t||this.renderer;let n="";for(let s=0;s<e.length;s++){const o=e[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]){const i=this.options.extensions.renderers[o.type].call({parser:this},o);if(i!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){n+=i||"";continue}}switch(o.type){case"escape":{const i=o;n+=t.text(i.text);break}case"html":{const i=o;n+=t.html(i.text);break}case"link":{const i=o;n+=t.link(i.href,i.title,this.parseInline(i.tokens,t));break}case"image":{const i=o;n+=t.image(i.href,i.title,i.text);break}case"strong":{const i=o;n+=t.strong(this.parseInline(i.tokens,t));break}case"em":{const i=o;n+=t.em(this.parseInline(i.tokens,t));break}case"codespan":{const i=o;n+=t.codespan(i.text);break}case"br":n+=t.br();break;case"del":{const i=o;n+=t.del(this.parseInline(i.tokens,t));break}case"text":{const i=o;n+=t.text(i.text);break}default:{const i='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(i),"";throw new Error(i)}}}return n}}var Dt,ws,lr,Ka=Object.defineProperty,Do=r=>{throw TypeError(r)},He=(r,e,t)=>((n,s,o)=>s in n?Ka(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,typeof e!="symbol"?e+"":e,t),ur=(r,e,t)=>(((n,s,o)=>{s.has(n)||Do("Cannot "+o)})(r,e,"access private method"),t);Dt=new WeakSet,ws=function(r,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,r){const n="<p>An error occurred:</p><pre>"+Ie(t.message+"",!0)+"</pre>";return e?Promise.resolve(n):n}if(e)return Promise.reject(t);throw t}},lr=function(r,e){return(t,n)=>{const s={...n},o={...this.defaults,...s};this.defaults.async===!0&&s.async===!1&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);const i=ur(this,Dt,ws).call(this,!!o.silent,!!o.async);if(t==null)return i(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(t):t).then(a=>r(a,o)).then(a=>o.hooks?o.hooks.processAllTokens(a):a).then(a=>o.walkTokens?Promise.all(this.walkTokens(a,o.walkTokens)).then(()=>a):a).then(a=>e(a,o)).then(a=>o.hooks?o.hooks.postprocess(a):a).catch(i);try{o.hooks&&(t=o.hooks.preprocess(t));let a=r(t,o);o.hooks&&(a=o.hooks.processAllTokens(a)),o.walkTokens&&this.walkTokens(a,o.walkTokens);let u=e(a,o);return o.hooks&&(u=o.hooks.postprocess(u)),u}catch(a){return i(a)}}};const tt=new class{constructor(...r){var e,t,n;e=this,(t=Dt).has(e)?Do("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),He(this,"Hooks",jt),He(this,"Lexer",Ye),He(this,"Parser",We),He(this,"Renderer",yn),He(this,"TextRenderer",Mr),He(this,"Tokenizer",vn),He(this,"defaults",{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}),He(this,"options",this.setOptions),He(this,"parse",ur(this,Dt,lr).call(this,Ye.lex,We.parse)),He(this,"parseInline",ur(this,Dt,lr).call(this,Ye.lexInline,We.parseInline)),this.use(...r)}lexer(r,e){return Ye.lex(r,e??this.defaults)}parser(r,e){return We.parse(r,e??this.defaults)}setOptions(r){return this.defaults={...this.defaults,...r},this}use(...r){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return r.forEach(t=>{const n={...t};if(n.async=this.defaults.async||n.async||!1,t.extensions&&(t.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const o=e.renderers[s.name];e.renderers[s.name]=o?function(...i){let a=s.renderer.apply(this,i);return a===!1&&(a=o.apply(this,i)),a}:s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const o=e[s.level];o?o.unshift(s.tokenizer):e[s.level]=[s.tokenizer],s.start&&(s.level==="block"?e.startBlock?e.startBlock.push(s.start):e.startBlock=[s.start]:s.level==="inline"&&(e.startInline?e.startInline.push(s.start):e.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(e.childTokens[s.name]=s.childTokens)}),n.extensions=e),t.renderer){const s=this.defaults.renderer||new yn(this.defaults);for(const o in t.renderer){if(!(o in s))throw new Error(`renderer '${o}' does not exist`);if(o==="options")continue;const i=o,a=t.renderer[i],u=s[i];s[i]=(...l)=>{let c=a.apply(s,l);return c===!1&&(c=u.apply(s,l)),c||""}}n.renderer=s}if(t.tokenizer){const s=this.defaults.tokenizer||new vn(this.defaults);for(const o in t.tokenizer){if(!(o in s))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;const i=o,a=t.tokenizer[i],u=s[i];s[i]=(...l)=>{let c=a.apply(s,l);return c===!1&&(c=u.apply(s,l)),c}}n.tokenizer=s}if(t.hooks){const s=this.defaults.hooks||new jt;for(const o in t.hooks){if(!(o in s))throw new Error(`hook '${o}' does not exist`);if(o==="options")continue;const i=o,a=t.hooks[i],u=s[i];jt.passThroughHooks.has(o)?s[i]=l=>{if(this.defaults.async)return Promise.resolve(a.call(s,l)).then(d=>u.call(s,d));const c=a.call(s,l);return u.call(s,c)}:s[i]=(...l)=>{let c=a.apply(s,l);return c===!1&&(c=u.apply(s,l)),c}}n.hooks=s}if(t.walkTokens){const s=this.defaults.walkTokens,o=t.walkTokens;n.walkTokens=function(i){let a=[];return a.push(o.call(this,i)),s&&(a=a.concat(s.call(this,i))),a}}this.defaults={...this.defaults,...n}}),this}walkTokens(r,e){var n,s;let t=[];for(const o of r)switch(t=t.concat(e.call(this,o)),o.type){case"table":{const i=o;for(const a of i.header)t=t.concat(this.walkTokens(a.tokens,e));for(const a of i.rows)for(const u of a)t=t.concat(this.walkTokens(u.tokens,e));break}case"list":{const i=o;t=t.concat(this.walkTokens(i.items,e));break}default:{const i=o;(s=(n=this.defaults.extensions)==null?void 0:n.childTokens)!=null&&s[i.type]?this.defaults.extensions.childTokens[i.type].forEach(a=>{const u=i[a].flat(1/0);t=t.concat(this.walkTokens(u,e))}):i.tokens&&(t=t.concat(this.walkTokens(i.tokens,e)))}}return t}};function he(r,e){return tt.parse(r,e)}he.options=he.setOptions=function(r){return tt.setOptions(r),he.defaults=tt.defaults,ps(he.defaults),he},he.getDefaults=wa,he.defaults=st,he.use=function(...r){return tt.use(...r),he.defaults=tt.defaults,ps(he.defaults),he},he.walkTokens=function(r,e){return tt.walkTokens(r,e)},he.parseInline=tt.parseInline,he.Parser=We,he.parser=We.parse,he.Renderer=yn,he.TextRenderer=Mr,he.Lexer=Ye,he.lexer=Ye.lex,he.Tokenizer=vn,he.Hooks=jt,he.parse=he;const zo=(r,e)=>{const{showCodeBlockCopyButton:t,markdownLinkTarget:n,syntaxHighlighter:s,htmlSanitizer:o}=e||{},i=he(r,{async:!1,breaks:!0});if(typeof i!="string")throw new Error("Markdown parsing failed");const a=document.createElement("div");return a.innerHTML=o?o(i):i,a.querySelectorAll("pre").forEach(u=>{const l=document.createElement("div");l.className="code-block";const c=u.querySelector("code");if(!c){const m=u.innerHTML;return l.innerHTML=o?o(m):m,void u.replaceWith(l)}let d;for(let m=0;m<c.classList.length;m++){const f=c.classList[m];if(f.startsWith("language-")){d=f.slice(9);break}}const p=document.createElement("pre"),h="<div>"+c.innerHTML+"</div>";if(p.innerHTML=e!=null&&e.htmlSanitizer?e.htmlSanitizer(h):h,d&&(p.setAttribute("data-language",d),s)){const m="<div>"+s.createHighlighter()(c.textContent||"",d)+"</div>";p.innerHTML=o?o(m):m,p.className="highlighter-dark"}(m=>{m.replaceChildren()})(l),l.appendChild(p),u.replaceWith(l)}),t!==!1&&a.querySelectorAll(".code-block").forEach(u=>{var p;if(!u.querySelector("pre")||(p=u.previousElementSibling)!=null&&p.classList.contains("nlux-comp-copyButton"))return;const l="Copy code block to clipboard",c=document.createElement("button");c.classList.add("nlux-comp-copyButton"),c.setAttribute("aria-label",l),c.setAttribute("title",l);const d=document.createElement("span");d.classList.add("icon-copy"),c.appendChild(d),u.appendChild(c)}),n!=="self"&&a.querySelectorAll("a").forEach(u=>{u.setAttribute("target","_blank")}),a.innerHTML},Fo="nlux-comp-message",ks={received:"nlux-comp-chatItem--received",sent:"nlux-comp-chatItem--sent"},Ga="nlux-comp-chatItem--bubblesLayout",Ja="nlux-comp-chatItem--listLayout",Va=r=>{const{markdownOptions:e}=r,t=x.useRef(null),n=x.useMemo(()=>r.content?zo(r.content,{syntaxHighlighter:e==null?void 0:e.syntaxHighlighter,htmlSanitizer:e==null?void 0:e.htmlSanitizer,markdownLinkTarget:e==null?void 0:e.markdownLinkTarget,showCodeBlockCopyButton:e==null?void 0:e.showCodeBlockCopyButton}):"",[r.content,e==null?void 0:e.markdownLinkTarget,e==null?void 0:e.syntaxHighlighter,e==null?void 0:e.htmlSanitizer,e==null?void 0:e.showCodeBlockCopyButton]);x.useEffect(()=>{t.current&&(e==null?void 0:e.showCodeBlockCopyButton)!==!1&&Po(t.current)},[n,t.current,e==null?void 0:e.showCodeBlockCopyButton]);const s=x.useMemo(()=>e!=null&&e.htmlSanitizer?e.htmlSanitizer(n):n,[n,e==null?void 0:e.htmlSanitizer]);return C.jsx(Ho,{children:C.jsx("div",{className:"nlux-markdownStream-root",children:C.jsx("div",{className:"nlux-markdown-container",ref:t,dangerouslySetInnerHTML:{__html:s}})})})};class Ho extends x.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e){Pe("Markdown rendering error occurred. This could be due to a malformed markdown content, or it could be because the page requires an HTML sanitizer. Please check the error message for more details and consider configuring NLUX with a compatible sanitizer."),this.props.onMarkdownRenderingError&&this.props.onMarkdownRenderingError(e)}render(){return this.state.hasError?null:this.props.children}}const Cs=r=>C.jsx(Ho,{children:C.jsx(Va,{...r})}),ec=(r,e)=>{let t=!1;const{onComplete:n}=e||{},s=[],o=(e!=null&&e.skipStreamingAnimation?"timeout":"animationFrame")=="timeout"?d=>setTimeout(d,0):d=>requestAnimationFrame(d),i=document.createElement("div");i.classList.add("md-in-progress"),r.append(i);const a=()=>{for(;i.firstChild;){const d=i.firstChild;d instanceof HTMLElement&&Po(d),i.before(d)}},u=!(e!=null&&e.skipStreamingAnimation)&&(e!=null&&e.streamingAnimationSpeed)&&e.streamingAnimationSpeed>=0?e.streamingAnimationSpeed:e!=null&&e.skipStreamingAnimation?0:8,l={timeSinceLastProcessing:new Date().getTime(),currentMarkdown:"",previousHtml:void 0};let c=setInterval(()=>{const d=new Date().getTime(),p=(e==null?void 0:e.waitTimeBeforeStreamCompletion)!=="never";if(s.length===0&&p){const m=typeof(e==null?void 0:e.waitTimeBeforeStreamCompletion)=="number"?e.waitTimeBeforeStreamCompletion:2e3;return void((t||d-l.timeSinceLastProcessing>m)&&(t=!0,c&&(clearInterval(c),c=void 0),a(),i.remove(),n==null?void 0:n()))}l.timeSinceLastProcessing=d;const h=s.shift();h!==void 0&&typeof h=="string"&&o(()=>{const m=l.currentMarkdown+h,f=zo(m,e).trim();if(typeof f!="string")return l.currentMarkdown=l.currentMarkdown.slice(0,-h.length),void Pe("Markdown parsing failed");if(l.previousHtml&&f.length>l.previousHtml.length&&f.startsWith(l.previousHtml)){a();const b=f.slice(l.previousHtml.length).trim();i.innerHTML=e!=null&&e.htmlSanitizer?e.htmlSanitizer(b):b,l.currentMarkdown=h,l.previousHtml=void 0}else i.innerHTML=e!=null&&e.htmlSanitizer?e.htmlSanitizer(f):f,l.currentMarkdown=m,l.previousHtml=f})},u);return{next:d=>{if(t)Pe("Stream is already complete. No more chunks can be added");else for(const p of d)s.push(p)},complete:()=>{s.push(`
`),t=!0},error:()=>{t=!0}}},tc=function(r,e){const{uid:t,status:n,responseRenderer:s,markdownOptions:o,initialMarkdownMessage:i,markdownContainersController:a}=r,[u,l]=x.useState([]),c=x.useRef(null),d=x.useRef(null),p=x.useRef(null),h=x.useRef(null),[m,f]=x.useState();x.useEffect(()=>{c.current!==d.current&&(d.current=c.current,f(c.current||void 0))}),x.useEffect(()=>{if(m){const S=a.getStreamingDomElement(t);m.append(S)}},[m]),x.useEffect(()=>{h.current=S=>{l(v=>[...v,S])}},[l]),x.useEffect(()=>{const S=a.getStreamingDomElement(t);return p.current=ec(S,{syntaxHighlighter:o==null?void 0:o.syntaxHighlighter,htmlSanitizer:o==null?void 0:o.htmlSanitizer,markdownLinkTarget:o==null?void 0:o.markdownLinkTarget,showCodeBlockCopyButton:o==null?void 0:o.showCodeBlockCopyButton,skipStreamingAnimation:o==null?void 0:o.skipStreamingAnimation,streamingAnimationSpeed:o==null?void 0:o.streamingAnimationSpeed,waitTimeBeforeStreamCompletion:o==null?void 0:o.waitTimeBeforeStreamCompletion}),i&&p.current.next(i),()=>{a.deleteStreamingDomElement(t)}},[]),x.useEffect(()=>()=>{d.current=null,p.current=null,h.current=null,f(void 0)},[]),x.useImperativeHandle(e,()=>({streamChunk:S=>{var v,y;h.current&&((v=h.current)==null||v.call(h,S)),typeof S=="string"&&((y=p.current)==null||y.next(S))},completeStream:()=>{var S;(S=p.current)==null||S.complete()}}),[]);const b=s||void 0;return C.jsxs("div",{className:`${Fo} ${ar[n]} ${ir.received}`,children:[b&&C.jsx(b,{uid:t,status:n,containerRef:c,content:u,contentType:"text",serverResponse:[],dataTransferMode:"stream"}),!b&&C.jsx("div",{className:"nlux-markdownStream-root",ref:c})]})},$o=r=>{const e=typeof r.avatar=="string",t=!e&&x.isValidElement(r.avatar);return C.jsxs("div",{className:"nlux-comp-avatar",children:[t&&r.avatar,!t&&e&&C.jsx("div",{className:"nlux-comp-avatarContainer",children:r.avatar&&C.jsx("div",{className:"nlux-comp-avatarPicture",style:{backgroundImage:`url("${encodeURI(r.avatar)}")`}})})]})},Fn=function(r){const e=r.status?ar[r.status]:ar.rendered,t=r.direction?ir[r.direction]:ir.received,n=`${Fo} ${e} ${t}`;if(r.status==="streaming"&&r.contentType==="text")return C.jsx("div",{className:n});const s=typeof r.message=="function"?C.jsx(r.message,{}):r.message;return C.jsx("div",{className:n,children:s})},nc=function(r,e){var m,f,b,S,v,y,E,w,I,N,j,M,F;const t=x.useMemo(()=>C.jsxs("div",{className:"nlux-comp-chatItem-participantInfo",children:[r.avatar!==void 0&&C.jsx($o,{name:r.name,avatar:r.avatar}),C.jsx("span",{className:"nlux-comp-chatItem-participantName",children:r.name})]}),[r.avatar,r.name]),n=x.useRef(null);x.useImperativeHandle(e,()=>({streamChunk:Q=>setTimeout(()=>{var X;return(X=n==null?void 0:n.current)==null?void 0:X.streamChunk(Q)}),completeStream:()=>setTimeout(()=>{var Q;return(Q=n==null?void 0:n.current)==null?void 0:Q.completeStream()})}),[]);const s=r.direction?ks[r.direction]:ks.received,o=r.layout==="bubbles"?Ga:Ja,i=`nlux-comp-chatItem ${s} ${o} ${o}`,a=x.useMemo(()=>function(Q,X){const{uid:Z,status:Y,dataTransferMode:V,contentType:re,fetchedContent:G,streamedContent:oe,streamedServerResponse:J,fetchedServerResponse:A,direction:O,messageOptions:L}=Q,_={current:null};if((L==null?void 0:L.responseRenderer)!==void 0){if(V==="stream"){const H={uid:Z,status:Y,dataTransferMode:V,contentType:re,content:oe??[],serverResponse:J??[],containerRef:_};return()=>{const K=L.responseRenderer;return C.jsx(K,{...H})}}{const H=x.isValidElement(G),K={uid:Z,status:"complete",dataTransferMode:V,contentType:re,content:G?H?G:[G]:[],serverResponse:A?[A]:[]};return()=>{const q=L.responseRenderer;return C.jsx(q,{...K})}}}if(O==="sent"){if(typeof G=="string"){const H=G;return()=>C.jsx(C.Fragment,{children:H})}return()=>""}if(typeof G=="string"){const H=G;return()=>C.jsx(Cs,{messageUid:Z,content:H,markdownOptions:{syntaxHighlighter:L==null?void 0:L.syntaxHighlighter,htmlSanitizer:L==null?void 0:L.htmlSanitizer,markdownLinkTarget:L==null?void 0:L.markdownLinkTarget,showCodeBlockCopyButton:L==null?void 0:L.showCodeBlockCopyButton,skipStreamingAnimation:L==null?void 0:L.skipStreamingAnimation}})}return x.isValidElement(G)?()=>C.jsx(C.Fragment,{children:G}):()=>""}(r),[r.uid,r.status,r.dataTransferMode,r.fetchedContent,r.streamedContent,r.direction,(m=r.messageOptions)==null?void 0:m.responseRenderer,(f=r.messageOptions)==null?void 0:f.syntaxHighlighter,(b=r.messageOptions)==null?void 0:b.htmlSanitizer,(S=r.messageOptions)==null?void 0:S.markdownLinkTarget]),u=x.useCallback(()=>{var X,Z;if(((X=r.messageOptions)==null?void 0:X.promptRenderer)===void 0)return C.jsx(Cs,{messageUid:r.uid,content:r.fetchedContent,markdownOptions:{htmlSanitizer:(Z=r.messageOptions)==null?void 0:Z.htmlSanitizer}});const Q=r.messageOptions.promptRenderer;return C.jsx(Q,{uid:r.uid,prompt:r.fetchedContent})},[(v=r.messageOptions)==null?void 0:v.promptRenderer,r.fetchedContent,r.uid]),l=x.useMemo(()=>x.forwardRef(tc),[]),c=r.contentType==="server-component",d=r.direction==="received",p=r.direction==="sent",h=r.dataTransferMode==="stream";return C.jsxs("div",{className:i,children:[t,d&&h&&!c&&C.jsx(l,{uid:r.uid,status:r.status,ref:n,direction:r.direction,responseRenderer:(y=r.messageOptions)==null?void 0:y.responseRenderer,markdownContainersController:r.markdownContainersController,markdownOptions:{syntaxHighlighter:(E=r.messageOptions)==null?void 0:E.syntaxHighlighter,htmlSanitizer:(w=r.messageOptions)==null?void 0:w.htmlSanitizer,markdownLinkTarget:(I=r.messageOptions)==null?void 0:I.markdownLinkTarget,showCodeBlockCopyButton:(N=r.messageOptions)==null?void 0:N.showCodeBlockCopyButton,skipStreamingAnimation:(j=r.messageOptions)==null?void 0:j.skipStreamingAnimation,streamingAnimationSpeed:(M=r.messageOptions)==null?void 0:M.streamingAnimationSpeed,waitTimeBeforeStreamCompletion:(F=r.messageOptions)==null?void 0:F.waitTimeBeforeStreamCompletion}},"do-not-change"),d&&h&&c&&C.jsx(Fn,{uid:r.uid,message:r.fetchedContent,status:r.status,contentType:"server-component",direction:r.direction}),d&&!h&&C.jsx(Fn,{uid:r.uid,message:a,status:r.status,contentType:"text",direction:r.direction}),p&&C.jsx(Fn,{uid:r.uid,message:u,status:r.status,contentType:"text",direction:r.direction})]})},Ss=r=>typeof r=="string"||typeof r=="number"||typeof r=="boolean"||r==null,tn=(r,e)=>{var t,n;return r==="assistant"?((t=e==null?void 0:e.assistant)==null?void 0:t.name)??"Assistant":r==="user"?((n=e==null?void 0:e.user)==null?void 0:n.name)??"User":""},nn=(r,e)=>{var t,n;return r==="assistant"?(t=e==null?void 0:e.assistant)==null?void 0:t.avatar:r==="user"?(n=e==null?void 0:e.user)==null?void 0:n.avatar:void 0},rc=function(r,e){const{chatSegment:t,containerRef:n}=r,[s,o]=x.useState(!1),i=x.useMemo(()=>new Map,[]),a=x.useRef(new Map),u=x.useRef(new Map),l=x.useMemo(()=>new Map,[]);x.useEffect(()=>{if(t.items.length===0)return i.clear(),a.current.clear(),void u.current.clear();const m=new Set(i.keys()),f=new Set(t.items.map(b=>b.uid));m.forEach(b=>{f.has(b)||i.delete(b)}),new Set(a.current.keys()).forEach(b=>{f.has(b)||(a.current.delete(b),u.current.delete(b))})},[t.items]);const c=x.useMemo(()=>t.status!=="active"?null:C.jsx("div",{className:"nlux-chatSegment-loader-container",children:r.Loader}),[t.status,r.Loader]),d=x.useMemo(()=>(m=>{const f="nlux-chatSegment";return m==="complete"?`${f} nlux-chatSegment--complete`:m==="error"?`${f} nlux-chatSegment--error`:`${f} nlux-chatSegment--active`})(t.status),[t.status]);x.useImperativeHandle(e,()=>({streamChunk:(m,f)=>{const b=i.get(m);if(b!=null&&b.current){const S=b.current.streamChunk;(l.get(m)??[]).forEach(v=>{S(v)}),l.delete(m),S(f)}else{const S=l.get(m)??[];l.set(m,[...S,f])}},completeStream:m=>{const f=i.get(m);f!=null&&f.current?(f.current.completeStream(),i.delete(m)):o(!0)}}),[]);const p=x.useMemo(()=>x.forwardRef(nc),[]);x.useEffect(()=>{l.size>0&&l.forEach((m,f)=>{const b=i.get(f);b!=null&&b.current&&(m.forEach(S=>{var v;(v=b==null?void 0:b.current)==null||v.streamChunk(S)}),l.delete(f),s&&(b.current.completeStream(),o(!1)))})});const h=t.items;return h.length===0?null:C.jsxs("div",{className:d,ref:n,children:[h.map((m,f)=>{var y;let b=i.get(m.uid);b||(b=x.createRef(),i.set(m.uid,b));let S=m.content,v="text";if(typeof S=="function"){const E=u.current.get(m.uid),w=a.current.get(m.uid);if(E&&w)S=w,v="server-component";else{a.current.delete(m.uid),u.current.delete(m.uid);try{const I=S;if(S=C.jsx(I,{}),!S||!x.isValidElement(S))throw new Error("Invalid React element returned from the AI chat content function.");v="server-component",a.current.set(m.uid,S),u.current.set(m.uid,I)}catch{return Pe(`The type of the AI chat content is an invalid function.
If you're looking to render a React Server Components, please refer to docs.nlkit.com/nlux for more information.
`),null}}}if(m.participantRole==="user")return m.status!=="complete"?(fn(`User chat item should be always be in complete state — Current status: ${m.status} — Segment UID: ${t.uid}`),null):Ss(S)?C.jsx(p,{ref:b,uid:m.uid,status:"complete",direction:"sent",contentType:v,layout:r.layout,messageOptions:r.messageOptions,dataTransferMode:"batch",fetchedContent:m.content,name:tn(m.participantRole,r.personaOptions),avatar:nn(m.participantRole,r.personaOptions),markdownContainersController:r.markdownContainersController},m.uid):(fn(`User chat item should have primitive content (string, number, boolean, null) — Current content: ${JSON.stringify(S)} — Segment UID: ${t.uid}`),null);if(m.status==="complete")return m.dataTransferMode==="stream"?C.jsx(p,{ref:b,uid:m.uid,status:m.status,direction:"received",contentType:v,layout:r.layout,messageOptions:r.messageOptions,dataTransferMode:m.dataTransferMode,streamedContent:S,name:tn(m.participantRole,r.personaOptions),avatar:nn(m.participantRole,r.personaOptions),markdownContainersController:r.markdownContainersController},m.uid):v!=="text"||Ss(S)||(y=r.messageOptions)!=null&&y.responseRenderer?C.jsx(p,{ref:b,uid:m.uid,status:"complete",direction:"received",layout:r.layout,messageOptions:r.messageOptions,dataTransferMode:m.dataTransferMode,fetchedContent:S,contentType:v,fetchedServerResponse:m.serverResponse,name:tn(m.participantRole,r.personaOptions),avatar:nn(m.participantRole,r.personaOptions),markdownContainersController:r.markdownContainersController},m.uid):(Pe(`When the type of the AI chat content is not primitive (object or array), a custom renderer must be provided — Current content: ${JSON.stringify(S)} — Segment UID: ${t.uid}`),null);if(m.status==="streaming"){const E=v==="server-component"&&x.isValidElement(S)?S:void 0;return C.jsx(p,{ref:b,uid:m.uid,status:"streaming",direction:"received",contentType:v,fetchedContent:E,layout:r.layout,messageOptions:r.messageOptions,dataTransferMode:m.dataTransferMode,name:tn(m.participantRole,r.personaOptions),avatar:nn(m.participantRole,r.personaOptions),markdownContainersController:r.markdownContainersController},m.uid)}return null}),c]})},sc=function(r,e){const{segments:t,personaOptions:n,conversationOptions:s,onLastActiveSegmentChange:o}=r,i=x.createRef();(function(c,d,p){const h=x.useMemo(()=>{const f=c.length>0?c[c.length-1]:void 0;return(f==null?void 0:f.status)==="active"?f.uid:void 0},[c]),m=x.useRef(void 0);x.useEffect(()=>{if(!p)return;const f=m.current;if(h===(f==null?void 0:f.uid)&&d.current===(f==null?void 0:f.div))return;const b=h&&d.current?{uid:h,div:d.current}:void 0;(b||m.current)&&(p(b),m.current=b)})})(t,i,o);const a=function(c){const d=x.useMemo(()=>new Map,[]);return x.useEffect(()=>{if(c.length===0)return void d.clear();const p=new Set(d.keys()),h=new Set(c.map(m=>m.uid));p.forEach(m=>{h.has(m)||d.delete(m)})},[c]),{get:p=>{var h;return(h=d.get(p))==null?void 0:h.current},getRef:p=>d.get(p),set:(p,h)=>{d.set(p,h)},remove:p=>{d.delete(p)}}}(t),u=(c=>x.useMemo(()=>{return d=c==null?void 0:c.layout,d??"bubbles";var d},[c==null?void 0:c.layout]))(s);x.useImperativeHandle(e,()=>({streamChunk:(c,d,p)=>{const h=a.get(c);h==null||h.streamChunk(d,p)},completeStream:(c,d)=>{const p=a.get(c);p==null||p.completeStream(d)}}),[]);const l=x.useMemo(()=>x.forwardRef(rc),[]);return C.jsx("div",{className:"nlux-chatSegments-container",children:t.map((c,d)=>{const p=d===t.length-1;let h=a.getRef(c.uid);return h||(h=x.createRef(),a.set(c.uid,h)),C.jsx(l,{ref:h,containerRef:p?i:void 0,markdownContainersController:r.markdownContainersController,chatSegment:c,layout:u,personaOptions:n,messageOptions:r.messageOptions,Loader:r.Loader},c.uid)})})},oc={typing:"nlux-composer--typing","submitting-prompt":"nlux-composer--submitting","submitting-conversation-starter":"nlux-composer--submitting",waiting:"nlux-composer--waiting"},ic=()=>C.jsx("div",{className:"nlux-comp-sendIcon",children:C.jsx("div",{className:"nlux-comp-sendIcon-container"})}),ac=r=>{const e=`nlux-comp-composer ${oc[r.status]||""}`,t=r.status==="submitting-conversation-starter"||r.status==="submitting-prompt",n=!r.hasValidInput||r.status==="submitting-conversation-starter"||r.status==="submitting-prompt"||r.status==="waiting",s=r.status==="typing",o=x.useRef(null);x.useEffect(()=>{r.status==="typing"&&r.autoFocus&&o.current&&o.current.focus()},[r.status,r.autoFocus,o.current]);const i=x.useMemo(()=>l=>{var c;(c=r.onChange)==null||c.call(r,l.target.value)},[r.onChange]),a=x.useMemo(()=>()=>{var l;(l=r.onSubmit)==null||l.call(r)},[r.onSubmit]),u=x.useMemo(()=>l=>{if(r.submitShortcut&&r.submitShortcut!=="Enter")r.submitShortcut==="CommandEnter"&&l.key==="Enter"&&(l.getModifierState("Control")||l.getModifierState("Meta"))&&(a(),l.preventDefault());else{const c=l.key==="Enter",d=l.altKey||l.ctrlKey||l.metaKey||l.shiftKey;c&&!d&&(a(),l.preventDefault())}},[a,r.submitShortcut]);return C.jsxs("div",{className:e,children:[C.jsx("textarea",{tabIndex:0,ref:o,disabled:t,placeholder:r.placeholder,value:r.prompt,onChange:i,onKeyDown:u}),C.jsxs("button",{tabIndex:0,disabled:n,onClick:()=>{var l;return(l=r.onSubmit)==null?void 0:l.call(r)},children:[s&&C.jsx(ic,{}),!s&&r.Loader]})]})},dr=r=>{var n;const e={},t=Object.keys(r);for(let s=0;s<t.length;s++){const o=t[s];o!=="personaOptions"&&o!=="messageOptions"&&o!=="adapter"&&o!=="events"&&Object.assign(e,{[o]:r[o]})}return r.personaOptions&&(e.personaOptions={},r.personaOptions.assistant&&(e.personaOptions.assistant={name:r.personaOptions.assistant.name,avatar:typeof r.personaOptions.assistant.avatar=="string"?r.personaOptions.assistant.avatar:"<REACT ELEMENT />",tagline:r.personaOptions.assistant.tagline}),r.personaOptions.user&&(e.personaOptions.user={name:r.personaOptions.user.name,avatar:typeof r.personaOptions.user.avatar=="string"?r.personaOptions.user.avatar:"<REACT ELEMENT />"})),r.messageOptions&&(e.messageOptions={...r.messageOptions,responseRenderer:r.messageOptions.responseRenderer?()=>null:void 0,promptRenderer:r.messageOptions.promptRenderer?()=>null:void 0}),(n=r.conversationOptions)!=null&&n.conversationStarters&&(e.conversationOptions={...r.conversationOptions,conversationStarters:r.conversationOptions.conversationStarters.map(s=>({...s,icon:s.icon?"<REACT ELEMENT />":void 0}))}),e};var cc=Object.defineProperty,rn=(r,e,t)=>((n,s,o)=>s in n?cc(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,typeof e!="symbol"?e+"":e,t);class lc extends Error{constructor(e={}){super(e.message),rn(this,"exceptionId"),rn(this,"message"),rn(this,"source"),rn(this,"type"),this.message=e.message??"",this.source=e.source,this.type=this.constructor.name,this.exceptionId=e.exceptionId}}const uc=(r,e)=>{let t,n=e,s=r,o=!0;const i=((f,b)=>{let S=!1;if(typeof f!="function")throw new lc({source:"x/throttle",message:"Callback must be a function"});return(...v)=>{S||(f.apply(void 0,v),S=!0,setTimeout(function(){S=!1},b))}})((f=>{let b,S;return v=>{const y=v.target;if(!(y instanceof HTMLElement))return;const{scrollTop:E,clientHeight:w,scrollHeight:I}=y,N=I-30,j=Math.ceil(E+w)>=N,M=b===void 0||S===void 0?void 0:E>b&&S===I?"down":E<b&&S===I?"up":void 0;S=I,b=E,f({scrolledToBottom:j,scrollDirection:M})}})(({scrolledToBottom:f,scrollDirection:b})=>{o?b==="up"&&(o=!1):b==="down"&&f&&(o=!0)}),50),a=f=>{f.addEventListener("scroll",i)},u=f=>{f==null||f.removeEventListener("scroll",i)},l=f=>{(t==null?void 0:t.uid)===f&&(c==null||c.disconnect(),d==null||d.disconnect(),t=void 0,c=void 0,d=void 0)};let c,d;const p=()=>{s==null||s.scrollTo({top:5e4,behavior:"instant"})},h=()=>{s&&n&&o&&p()},m=()=>{h()};return a(s),{updateConversationContainer:f=>{u(s),a(f),s=f},updateProps:({autoScroll:f})=>{n=f},handleNewChatSegmentAdded:(f,b)=>{t&&(c==null||c.disconnect(),d==null||d.disconnect()),t={uid:f,container:b},c=new ResizeObserver(h),c.observe(b),d=new MutationObserver(m),d.observe(b,{childList:!0,subtree:!0,characterData:!0}),n&&p()},handleChatSegmentRemoved:f=>l(f),handleChatSegmentComplete:f=>l(f),destroy:()=>{t&&(l(t.uid),t=void 0),u(s),s=void 0}}},As=!0,xn=r=>{if(typeof r!="object"||r===null)return!1;const e=r;return(typeof e.streamText=="function"||typeof e.batchText=="function")&&["stream","batch"].includes(e.dataTransferMode)&&typeof e.id=="string"&&typeof e.info=="object"&&e.info!==null&&typeof e.preProcessAiBatchedMessage=="function"&&typeof e.preProcessAiStreamedChunk=="function"},ke=(r,e=1)=>{setTimeout(()=>{r()},e)},dc=(r,e,t,n,s,o,i,a,u)=>new Promise(l=>{const c=Ue(),d=[],p=[];let h=!1,m=!1,f=!1;const b=xn(t),S={next:v=>{if(m||f)return;let y,E;if(b){const w=v,I=t.preProcessAiStreamedChunk(w,n);I!=null&&(y=I,E=w,d.push(y),p.push(E))}else y=v,d.push(y);y!=null?(h||h||(h=!0,ke(()=>{s.forEach(w=>{w({uid:c,status:"streaming",time:new Date,participantRole:"assistant",dataTransferMode:"stream"})})})),ke(()=>{i.forEach(w=>{w({chunk:y,messageId:c,serverResponse:E})})})):Pe("Adapter returned an undefined or null value from streamText. This chunk will be ignored.")},complete:()=>{m||f||(f=!0,ke(()=>{const v={uid:c,status:"complete",content:d,contentType:"text",serverResponse:void 0,time:new Date,participantRole:"assistant",dataTransferMode:"stream"};o.forEach(y=>{y(v)}),l()}),ke(()=>{const v={uid:r,status:"complete",items:[e,{uid:c,status:"complete",contentType:"text",content:d,serverResponse:p,time:new Date,participantRole:"assistant",dataTransferMode:"stream"}]};a.forEach(y=>{y(v)})}))},error:v=>{m||f||(m=!0,ke(()=>{u.forEach(y=>{y("failed-to-stream-content",v)}),l()}))}};t.streamText(e.content,S,n)}),pc=(r,e,t)=>{if(!r)return(()=>{const v=new Set,y=Ue(),E={uid:y,status:"complete",items:[]};return ke(()=>{v.forEach(w=>{w(E)}),v.clear()}),{segment:E,observable:{on:(w,I)=>{w==="complete"&&v.add(I)},removeListener:(w,I)=>{v.delete(I)},destroy:()=>{v.clear()},get segmentId(){return y}},dataTransferMode:"batch"}})();const n=e;if(n.streamText===void 0&&n.batchText===void 0&&n.streamServerComponent===void 0)return(v=>{const y=new Set,E=Ue(),w={uid:E,status:"error",items:[]};return ke(()=>{y.forEach(I=>I(v)),y.clear()}),{segment:w,dataTransferMode:"stream",observable:{on:(I,N)=>{I==="error"&&y.add(N)},removeListener:(I,N)=>{y.delete(N)},destroy:()=>{y.clear()},get segmentId(){return E}}}})("no-data-transfer-mode-supported");const s=Ue(),o=(v=>({uid:Ue(),time:new Date,status:"complete",participantRole:"user",content:v,contentType:"text"}))(r);let i,a,u,l,c,d,p=new Set,h=new Set,m=new Set;ke(()=>{p!=null&&p.size&&(p.forEach(v=>{v(o)}),p.clear(),p=void 0)});const f=(v=>{const y=[],E=v,w=v;(E==null?void 0:E.streamText)===void 0&&(w==null?void 0:w.streamServerComponent)===void 0||y.push("stream"),(E==null?void 0:E.batchText)!==void 0&&y.push("batch");const I=xn(v)?v:void 0,N=(I==null?void 0:I.dataTransferMode)??void 0,j=y.length===1?y[0]:"stream";return N??j})(e);(v=>"streamServerComponent"in v?"server-component":"text")(e)==="server-component"?(u=new Set,a=new Set,((v,y,E,w,I,N,j,M)=>new Promise((F,Q)=>{try{const X=y.content,Z=Ue(),Y="assistant",V="streaming",re=new Date,G="stream";let oe,J;const A=()=>{ke(()=>{N.forEach(_=>{oe&&J&&_({...oe,content:J,status:"complete"})})},20);const L={uid:v,status:"complete",items:[y,oe]};ke(()=>{j.forEach(_=>{_(L)}),F()},20)},O=()=>{M.forEach(L=>{L("failed-to-stream-server-component",new Error("Failed to load content"))})};J=E.streamServerComponent(X,w,{onServerComponentReceived:A,onError:O}),oe={uid:Z,content:J,contentType:"server-component",participantRole:Y,status:V,time:re,dataTransferMode:G},ke(()=>{I.forEach(L=>{L(oe)})},10)}catch(X){Pe(X);const Z=X instanceof Error?X:typeof X=="string"?new Error(X):new Error("Unknown error");ke(()=>{M.forEach(Y=>Y("failed-to-load-content",Z))})}}))(s,o,e,t,a,u,h,m).finally(()=>{ke(()=>S())})):f==="batch"?(i=new Set,(async(v,y,E,w,I,N,j)=>{try{const M=y.content,F=xn(E)?E:void 0,Q=F!==void 0,X=Ue(),Z="assistant",Y="complete",V=new Date,re="batch";let G;if(Q){const A=await F.batchText(M,w),O=F.preProcessAiBatchedMessage(A,w);O!=null&&(G={uid:X,content:O,contentType:"text",serverResponse:A,participantRole:Z,status:Y,time:V,dataTransferMode:re})}else G={uid:X,content:await E.batchText(M,w),contentType:"text",serverResponse:void 0,participantRole:Z,status:Y,time:V,dataTransferMode:re};if(!G)throw new Error("Response from adapter was undefined or cannot be processed");const oe=G;ke(()=>{I.forEach(A=>{A(oe)})});const J={uid:v,status:"complete",items:[y,G]};ke(()=>{N.forEach(A=>{A(J)})})}catch(M){Pe(M);const F=M instanceof Error?M:typeof M=="string"?new Error(M):new Error("Unknown error");ke(()=>{j.forEach(Q=>Q("failed-to-load-content",F))})}})(s,o,e,t,i,h,m).finally(()=>{ke(()=>S())})):(l=new Set,c=new Set,d=new Set,dc(s,o,e,t,l,c,d,h,m).finally(()=>{ke(()=>S())}));const S=()=>{p==null||p.clear(),p=void 0,i==null||i.clear(),i=void 0,a==null||a.clear(),a=void 0,u==null||u.clear(),u=void 0,l==null||l.clear(),l=void 0,c==null||c.clear(),c=void 0,d==null||d.clear(),d=void 0,h==null||h.clear(),h=void 0,m==null||m.clear(),m=void 0};return{segment:{status:"active",uid:s,items:[]},dataTransferMode:f,observable:{get segmentId(){return s},on:(v,y)=>{v==="userMessageReceived"&&p?p.add(y):v==="aiMessageReceived"&&i?i.add(y):v==="aiServerComponentStreamStarted"&&a?a.add(y):v==="aiServerComponentStreamed"&&u?u.add(y):v==="aiMessageStreamStarted"&&l?l.add(y):v==="aiMessageStreamed"&&c?c.add(y):v==="aiChunkReceived"&&d?d.add(y):v==="complete"&&h?h.add(y):v==="error"&&m&&m.add(y)},removeListener:(v,y)=>{v!=="userMessageReceived"?v!=="aiMessageReceived"?v!=="aiMessageStreamStarted"?v!=="aiMessageStreamed"?v!=="aiChunkReceived"?v!=="complete"?v!=="error"||(m==null||m.delete(y)):h==null||h.delete(y):d==null||d.delete(y):c==null||c.delete(y):l==null||l.delete(y):i==null||i.delete(y):p==null||p.delete(y)},destroy:()=>S()}}},mc={"data-transfer-mode-not-supported":"Requested data transfer mode is not supported","no-data-transfer-mode-supported":"Adapter does not support any valid data transfer modes","connection-error":"Connection error","invalid-credentials":"Invalid credentials","invalid-api-key":"Invalid API key","http-server-side-error":"HTTP server side error","http-client-side-error":"HTTP client side error","failed-to-load-content":"Failed to load content","failed-to-stream-content":"Failed to stream content","failed-to-stream-server-component":"Failed to stream server component","failed-to-render-content":"Failed to display content"},hc=r=>{var S;const{aiChatProps:e,adapterToUse:t,prompt:n,composerOptions:s,showException:o,chatSegments:i,initialSegment:a,setChatSegments:u,setComposerStatus:l,setPrompt:c,conversationRef:d}=r,p=x.useMemo(()=>n.length>0,[n]),h=x.useRef(n);h.current=n;const m=x.useRef({chatSegments:i,setChatSegments:u,setComposerStatus:l,showException:o,setPrompt:c}),f=x.useRef({});x.useEffect(()=>{m.current={chatSegments:i,setChatSegments:u,setComposerStatus:l,showException:o,setPrompt:c}},[i,u,l,o,c]);const b=((v,y,E)=>x.useMemo(()=>{const w=(N=>{const j=[];return N.forEach(M=>{M.items.forEach(F=>{if(F.status==="complete"){if(F.participantRole==="assistant")j.push({role:"assistant",message:F.content});else if(F.participantRole==="user")return j.push({role:"user",message:F.content})}})}),j})(y),I=E==="max"||E===void 0?w:E>0?w.slice(-E):void 0;return{aiChatProps:dr(v),conversationHistory:I}},[v,y,E]))(e,a?[a,...i]:i,(S=e.conversationOptions)==null?void 0:S.historyPayloadSize);return x.useEffect(()=>{f.current=e.events||{}},[e.events]),x.useCallback(()=>{if(!t)return void Pe("No valid adapter was provided to AiChat component");if(!p||s!=null&&s.disableSubmitButton)return;l("submitting-prompt");const v=n,y=new Set,E=xn(t)?t:t.streamServerComponent?{streamServerComponent:t.streamServerComponent}:{batchText:t.batchText,streamText:t.streamText},{segment:w,observable:I}=pc(v,E,b);if(w.status==="error")return Pe("Error occurred while submitting prompt"),o("Error occurred while submitting prompt"),l("typing"),void(h.current===""&&c(v));const N=j=>{const M=m.current.chatSegments.map(F=>F.uid!==I.segmentId?F:{...F,items:[...F.items,{...j}]});m.current.setChatSegments(M)};I.on("userMessageReceived",j=>{var M;N(j),(M=f.current)!=null&&M.messageSent&&f.current.messageSent({uid:j.uid,message:j.content})}),I.on("aiMessageStreamStarted",j=>{var M;N(j),m.current.setComposerStatus("waiting"),h.current===v&&m.current.setPrompt(""),y.add(j.uid),(M=f.current)!=null&&M.messageStreamStarted&&f.current.messageStreamStarted({uid:j.uid})}),I.on("aiServerComponentStreamStarted",j=>{var M,F;N(j),m.current.setComposerStatus("waiting"),h.current===v&&m.current.setPrompt(""),y.add(j.uid),(M=f.current)!=null&&M.serverComponentStreamStarted&&((F=f.current)==null||F.serverComponentStreamStarted({uid:j.uid}))}),I.on("aiServerComponentStreamed",j=>{var M,F;(M=f.current)!=null&&M.serverComponentRendered&&((F=f.current)==null||F.serverComponentRendered({uid:j.uid}))}),I.on("aiMessageReceived",j=>{var F;const M=m.current.chatSegments.map(Q=>Q.uid!==I.segmentId?Q:{...Q,items:[...Q.items,{...j}]});m.current.setChatSegments(M),(F=f.current)!=null&&F.messageReceived&&f.current.messageReceived({uid:j.uid,message:j.content})}),I.on("complete",j=>{m.current.setComposerStatus("typing");const M=m.current.chatSegments.map(F=>F.uid!==I.segmentId?F:{...j});m.current.setChatSegments(M),h.current===v&&c(""),y.size>0&&(y.forEach(F=>{requestAnimationFrame(()=>{var Q;(Q=d.current)==null||Q.completeStream(I.segmentId,F)})}),y.clear())}),I.on("aiChunkReceived",({messageId:j,chunk:M,serverResponse:F})=>{var Q;(Q=d.current)==null||Q.streamChunk(w.uid,j,M)}),I.on("aiMessageStreamed",j=>{var M,F;(M=f.current)!=null&&M.messageReceived&&((F=f.current)==null||F.messageReceived({uid:j.uid,message:j.content}))}),I.on("error",(j,M)=>{var X;const F=m.current.chatSegments.filter(Z=>Z.uid!==w.uid),Q=mc[j];m.current.setChatSegments(F),m.current.setComposerStatus("typing"),m.current.showException(Q),h.current===""&&c(v),(X=f.current)!=null&&X.error&&f.current.error({errorId:j,message:Q,errorObject:M})}),m.current.setChatSegments([...m.current.chatSegments,w])},[n,t,b,o,m,s==null?void 0:s.disableSubmitButton])},No="nlux-comp-welcomeMessage",_o=r=>C.jsxs("div",{className:No,children:[C.jsx($o,{avatar:r.avatar,name:r.name}),C.jsx("div",{className:"nlux-comp-welcomeMessage-personaName",children:r.name}),r.message&&C.jsx("div",{className:"nlux-comp-welcomeMessage-text",children:r.message})]}),Es=({children:r})=>C.jsx("div",{className:No,children:r}),fc=()=>{const r=x.useMemo(()=>"data:image/png;base64,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",[]);return C.jsx(_o,{avatar:r,name:""})},gc=r=>{const{onConversationStarterSelected:e}=r;return C.jsx("div",{className:"nlux-comp-conversationStarters",children:r.items.map((t,n)=>C.jsxs("button",{className:"nlux-comp-conversationStarter",onClick:()=>e(t),children:[C.jsx(vc,{icon:t.icon}),C.jsx("span",{className:"nlux-comp-conversationStarter-prompt",children:t.label??t.prompt})]},n))})},vc=({icon:r})=>r?typeof r=="string"?C.jsx("img",{src:r,width:16}):C.jsx("div",{className:"nlux-comp-conversationStarter-icon-container",children:r}):null,yc=r=>{const{segments:e,personaOptions:t,conversationOptions:n,userDefinedGreeting:s}=r,o=x.useMemo(()=>e.some(d=>d.items.length>0),[e]),i=x.useMemo(()=>!s&&!o&&(t==null?void 0:t.assistant)===void 0&&(n==null?void 0:n.showWelcomeMessage)!==!1,[o,t==null?void 0:t.assistant,n==null?void 0:n.showWelcomeMessage,s]),a=x.useMemo(()=>!s&&!o&&(t==null?void 0:t.assistant)!==void 0&&(n==null?void 0:n.showWelcomeMessage)!==!1,[s,o,t==null?void 0:t.assistant,n==null?void 0:n.showWelcomeMessage]),u=x.useMemo(()=>!o&&(n==null?void 0:n.conversationStarters)&&(n==null?void 0:n.conversationStarters.length)>0,[o,n==null?void 0:n.conversationStarters]),l=x.useMemo(()=>s!==void 0&&(n==null?void 0:n.showWelcomeMessage)!==!1,[s]);x.useEffect(()=>{s&&(n==null?void 0:n.showWelcomeMessage)===!1&&fn("Configuration conflict: The greeting UI override provided via <AiChatUI.Greeting> will not be shown because conversationOptions.showWelcomeMessage is set to false.")},[n==null?void 0:n.showWelcomeMessage,s]);const c=!(i||a||l||o);return C.jsxs(C.Fragment,{children:[i&&C.jsx(fc,{}),a&&C.jsx(_o,{name:t.assistant.name,avatar:t.assistant.avatar,message:t.assistant.tagline}),l&&C.jsx(Es,{children:s}),c&&C.jsx(Es,{children:null}),C.jsx("div",{className:"nlux-conversationStarters-container",children:u&&C.jsx(gc,{items:n.conversationStarters??[],onConversationStarterSelected:r.onConversationStarterSelected})})]})},Ts=()=>C.jsx("div",{className:"nlux-comp-messageLoader",children:C.jsx("div",{className:"nlux-comp-loaderContainer",children:C.jsx("span",{className:"spinning-loader"})})}),Ps={Loader:r=>C.jsx(C.Fragment,{children:r.children}),Greeting:r=>C.jsx(C.Fragment,{children:r.children})},Rs=x.createContext({}),xc=function(r){var H,K,q;const{adapter:e,className:t,initialConversation:n,conversationOptions:s,composerOptions:o,displayOptions:i}=r,{themeId:a,colorScheme:u}=i??{},l=x.useRef(null),c=x.useRef(null),d=x.useRef(void 0),p=x.useRef(null),h=((k,T)=>{const[z,$]=x.useState(),[se,R]=x.useState(),te=x.useRef(z),ye=x.useRef(T);return x.useEffect(()=>{const Ce=k.current||void 0;Ce!==se&&R(Ce)}),x.useEffect(()=>{se?te.current?te.current.updateConversationContainer(se):(te.current=uc(se,ye.current??As),$(te.current)):te.current&&(te.current.destroy(),$(void 0),te.current=void 0)},[se]),x.useEffect(()=>{ye.current=T,te.current&&te.current.updateProps({autoScroll:T??As})},[T]),z})(c,s==null?void 0:s.autoScroll),m=x.useMemo(()=>p.current?ba(p.current):void 0,[p.current]),f=(()=>{const k={},T=new Set;return x.useMemo(()=>({getStreamingDomElement:z=>{if(T.has(z)&&T.delete(z),k[z]===void 0){const $=document.createElement("div");$.setAttribute("nlux-message-id",z),$.className="nlux-markdown-container",k[z]=$}return k[z]},deleteStreamingDomElement:z=>{T.add(z),setTimeout(()=>{T.forEach($=>{k[$]&&(k[$].remove(),delete k[$])}),T.clear()},1e3)}}),[])})(),{PrimitivesContextProvider:b}=function(k){var $,se,R,te,ye,Ce,je,Oe,_e;const[T,z]=x.useState(k);return x.useEffect(()=>{z(k)},[($=k==null?void 0:k.messageOptions)==null?void 0:$.htmlSanitizer,(se=k==null?void 0:k.messageOptions)==null?void 0:se.syntaxHighlighter,(R=k==null?void 0:k.messageOptions)==null?void 0:R.markdownLinkTarget,(te=k==null?void 0:k.messageOptions)==null?void 0:te.showCodeBlockCopyButton,(ye=k==null?void 0:k.messageOptions)==null?void 0:ye.skipStreamingAnimation,(Ce=k==null?void 0:k.messageOptions)==null?void 0:Ce.streamingAnimationSpeed,(je=k==null?void 0:k.messageOptions)==null?void 0:je.waitTimeBeforeStreamCompletion,(Oe=k==null?void 0:k.messageOptions)==null?void 0:Oe.responseRenderer,(_e=k==null?void 0:k.messageOptions)==null?void 0:_e.promptRenderer]),{PrimitivesContextProvider:x.useMemo(()=>({children:Be})=>C.jsx(Rs.Provider,{value:T,children:Be}),[T]),primitivesContext:Rs}}({messageOptions:r.messageOptions}),[S,v]=x.useState(""),[y,E]=x.useState("typing"),[w,I]=x.useState(),[N,j]=x.useState([]),M=x.useMemo(()=>w?[w,...N]:N,[w,N]),F=x.useMemo(()=>(k=>{const T=k;if(typeof(T==null?void 0:T.create)=="function")return T.create();if(typeof(T==null?void 0:T.batchText)=="function"||typeof(T==null?void 0:T.streamText)=="function"||typeof(T==null?void 0:T.streamServerComponent)=="function")return k;Pe("Unable to determine the type of the adapter! Missing batchText or streamText method.")})(e),[e]),Q=(k=>x.useMemo(()=>{const T={minWidth:"280px",minHeight:"280px"};return k!=null&&k.width&&(T.width=k.width),k!=null&&k.height&&(T.height=k.height),T},[k==null?void 0:k.width,k==null?void 0:k.height]))(i),X=x.useMemo(()=>(k=>{const T=["nlux-AiChat-root"],z=`nlux-theme-${k.themeId||"nova"}`;return T.push(z),k.className&&T.push(k.className),T})({className:t,themeId:a}).join(" "),[t,a]),Z=x.useMemo(()=>{var k;return u!=="auto"&&u?u:typeof globalThis!==void 0&&globalThis.matchMedia&&((k=globalThis.matchMedia("(prefers-color-scheme: dark)"))!=null&&k.matches)?"dark":"light"},[u]),Y=x.useCallback(k=>m==null?void 0:m.displayException(k),[m]),V=x.useCallback(k=>v(k),[v]),re=hc({aiChatProps:r,adapterToUse:F,conversationRef:l,initialSegment:w,chatSegments:N,prompt:S,composerOptions:o,showException:Y,setChatSegments:j,setComposerStatus:E,setPrompt:v}),G=x.useCallback(k=>{v(k.prompt),E("submitting-conversation-starter")},[v,E]),oe=((k,T)=>x.useCallback(z=>{k&&z&&(T.current=z.uid,k.handleNewChatSegmentAdded(z.uid,z.div))},[k]))(h,d);x.useEffect(()=>{y!=="submitting-conversation-starter"&&y!=="submitting-external-message"||re()},[y,re]),x.useEffect(()=>I(n?{uid:"initial",status:"complete",items:n.map((k,T)=>{if(k.role==="assistant"||k.role==="user")return k.role==="user"?typeof k.message!="string"?void Pe(`Invalid message type for item at index ${T} in initial conversation: When role is "user", message must be a string`):{uid:Ue(),time:new Date,status:"complete",participantRole:"user",content:k.message}:{uid:Ue(),time:new Date,status:"complete",participantRole:"assistant",content:k.message,serverResponse:k.serverResponse,dataTransferMode:"batch"};Pe(`Invalid role for item at index ${T} in initial conversation: Role must be "assistant" or "user"`)}).filter(k=>k!==void 0)}:void 0),[n]),x.useEffect(()=>{var k;w&&((k=c.current)==null||k.scrollTo({behavior:"smooth",top:5e4}))},[w]);const J=x.useRef(void 0);x.useEffect(()=>{const k=r.api;J.current=k,typeof(k==null?void 0:k.__setHost)=="function"&&k.__setHost({sendMessage:T=>{v(T),E("submitting-external-message")},resetConversation:()=>{j([]),I(void 0)},cancelLastMessageRequest:()=>{const T=M.length>0?M[M.length-1]:void 0;(T==null?void 0:T.status)==="active"&&j(M.slice(0,-1))}})},[r.api,v,re,M,j]),x.useEffect(()=>()=>{var k;typeof((k=J.current)==null?void 0:k.__unsetHost)=="function"&&(J.current.__unsetHost(),J.current=void 0)},[]),(k=>{x.useEffect(()=>{var z;const T=(z=k.events)==null?void 0:z.ready;T&&T({aiChatProps:dr(k)})},[])})(r),((k,T)=>{var se;const z=x.useRef(),$=x.useRef();x.useEffect(()=>{z.current=()=>{const R=[];return T.forEach(te=>{te.items&&te.items.length!==0&&te.items.forEach(ye=>{ye.status==="complete"&&(ye.participantRole!=="assistant"?ye.participantRole==="user"&&R.push({role:"user",message:ye.content}):R.push({role:"assistant",message:ye.content}))})}),R}},[T]),x.useEffect(()=>{var R;$.current=(R=k.events)==null?void 0:R.preDestroy},[(se=k.events)==null?void 0:se.preDestroy]),x.useEffect(()=>()=>{var te;const R=$.current;R&&(R({aiChatProps:dr(k),conversationHistory:((te=z.current)==null?void 0:te.call(z))??[]}),z.current=void 0)},[])})(r,M);const A=x.useMemo(()=>x.forwardRef(sc),[]),O=(k=>{const T=x.useMemo(()=>k.children?Array.isArray(k.children)?k.children:[k.children]:[],[k.children]);return{Loader:x.useMemo(()=>T.length===0?C.jsx(Ts,{}):T.find(z=>z.type===Ps.Loader)||C.jsx(Ts,{}),[T]),Greeting:x.useMemo(()=>{if(T.length!==0)return T.find(z=>z.type===Ps.Greeting)},[T])}})(r),L=S.length>0,_=M.length===0?"nlux-chatRoom-starting":"nlux-chatRoom-active";return F?C.jsx(b,{children:C.jsxs("div",{className:X,style:Q,"data-color-scheme":Z,children:[C.jsx("div",{className:"nlux-comp-exceptionBox",ref:p}),C.jsxs("div",{className:`nlux-chatRoom-container ${_}`,children:[C.jsx("div",{className:"nlux-launchPad-container",children:C.jsx(yc,{segments:M,onConversationStarterSelected:G,conversationOptions:s,personaOptions:r.personaOptions,userDefinedGreeting:O.Greeting})}),C.jsx("div",{className:"nlux-conversation-container",ref:c,children:C.jsx(A,{ref:l,segments:M,conversationOptions:r.conversationOptions,personaOptions:r.personaOptions,messageOptions:r.messageOptions,onLastActiveSegmentChange:oe,Loader:O.Loader,markdownContainersController:f})}),C.jsx("div",{className:"nlux-composer-container",children:C.jsx(ac,{status:y,prompt:S,hasValidInput:L,placeholder:(H=r.composerOptions)==null?void 0:H.placeholder,autoFocus:(K=r.composerOptions)==null?void 0:K.autoFocus,submitShortcut:(q=r.composerOptions)==null?void 0:q.submitShortcut,onChange:V,onSubmit:re,Loader:O.Loader})})]})]})}):(fn("AiChat: No valid adapter provided. The component will not render."),C.jsx(C.Fragment,{}))};var qo={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Is=x.createContext&&x.createContext(qo),bc=["attr","size","title"];function wc(r,e){if(r==null)return{};var t=kc(r,e),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(s=0;s<o.length;s++)n=o[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function kc(r,e){if(r==null)return{};var t={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(e.indexOf(n)>=0)continue;t[n]=r[n]}return t}function bn(){return bn=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},bn.apply(this,arguments)}function Os(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,n)}return t}function wn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Os(Object(t),!0).forEach(function(n){Cc(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Os(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Cc(r,e,t){return e=Sc(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Sc(r){var e=Ac(r,"string");return typeof e=="symbol"?e:e+""}function Ac(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Uo(r){return r&&r.map((e,t)=>x.createElement(e.tag,wn({key:t},e.attr),Uo(e.child)))}function Ec(r){return e=>x.createElement(Tc,bn({attr:wn({},r.attr)},e),Uo(r.child))}function Tc(r){var e=t=>{var{attr:n,size:s,title:o}=r,i=wc(r,bc),a=s||t.size||"1em",u;return t.className&&(u=t.className),r.className&&(u=(u?u+" ":"")+r.className),x.createElement("svg",bn({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,i,{className:u,style:wn(wn({color:r.color||t.color},t.style),r.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),o&&x.createElement("title",null,o),r.children)};return Is!==void 0?x.createElement(Is.Consumer,null,t=>e(t)):e(qo)}function Pc(r){return Ec({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(r)}var Yo=(r=>(r.Text="Text",r.ImageUrl="ImageUrl",r))(Yo||{}),Wo=(r=>(r.SystemMessage="system",r.AIMessage="ai",r.HumanMessage="human",r))(Wo||{}),Qo=(r=>(r.Auto="Auto",r.Low="Low",r.High="High",r))(Qo||{});async function Xo(r){const{files:e,message:t}=r;if(!e||!e.length)return t;{let n=await Promise.all(e.map(async s=>{const o=await Rc(s,r.resizeOptions);if(!o)throw new Error("resize failed");const i=await Ic(o);if(!i)throw new Error("base64 failed");return["ImageUrl",i,null]}));return n.push(["Text",t,null]),n}}const Rc=async(r,e)=>{const t=(e==null?void 0:e.maxSize)||256,n=document.createElement("canvas"),s=n.getContext("2d");if(!s)throw new Error("ctx is not available");n.width=t,n.height=t;const o=await createImageBitmap(r),{width:i,height:a}=o,u=Math.max(t/i,t/a),l=(t-i*u)/2,c=(t-a*u)/2;return s.drawImage(o,0,0,i,a,l,c,i*u,a*u),new Promise(d=>{n.toBlob(p=>{d(p)})})};async function Ic(r){return new Promise((e,t)=>{const n=new FileReader;n.onloadend=()=>e(n.result),n.readAsDataURL(r)})}async function Oc(r,e){const t=r.getReader();let n;for(;!(n=await t.read()).done;)e(n.value)}function Mc(r){let e,t,n,s=!1;return function(i){e===void 0?(e=i,t=0,n=-1):e=jc(e,i);const a=e.length;let u=0;for(;t<a;){s&&(e[t]===10&&(u=++t),s=!1);let l=-1;for(;t<a&&l===-1;++t)switch(e[t]){case 58:n===-1&&(n=t-u);break;case 13:s=!0;case 10:l=t;break}if(l===-1)break;r(e.subarray(u,l),n),u=t,n=-1}u===a?e=void 0:u!==0&&(e=e.subarray(u),t-=u)}}function Lc(r,e,t){let n=Ms();const s=new TextDecoder;return function(i,a){if(i.length===0)t==null||t(n),n=Ms();else if(a>0){const u=s.decode(i.subarray(0,a)),l=a+(i[a+1]===32?2:1),c=s.decode(i.subarray(l));switch(u){case"data":n.data=n.data?n.data+`
`+c:c;break;case"event":n.event=c;break;case"id":r(n.id=c);break;case"retry":const d=parseInt(c,10);isNaN(d)||e(n.retry=d);break}}}}function jc(r,e){const t=new Uint8Array(r.length+e.length);return t.set(r),t.set(e,r.length),t}function Ms(){return{data:"",event:"",id:"",retry:void 0}}var Bc=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t};const pr="text/event-stream",Dc=1e3,Ls="last-event-id";function zc(r,e){var{signal:t,headers:n,onopen:s,onmessage:o,onclose:i,onerror:a,openWhenHidden:u,fetch:l}=e,c=Bc(e,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise((d,p)=>{const h=Object.assign({},n);h.accept||(h.accept=pr);let m;function f(){m.abort(),document.hidden||w()}u||document.addEventListener("visibilitychange",f);let b=Dc,S=0;function v(){document.removeEventListener("visibilitychange",f),window.clearTimeout(S),m.abort()}t==null||t.addEventListener("abort",()=>{v(),d()});const y=l??window.fetch,E=s??Fc;async function w(){var I;m=new AbortController;try{const N=await y(r,Object.assign(Object.assign({},c),{headers:h,signal:m.signal}));await E(N),await Oc(N.body,Mc(Lc(j=>{j?h[Ls]=j:delete h[Ls]},j=>{b=j},o))),i==null||i(),v(),d()}catch(N){if(!m.signal.aborted)try{const j=(I=a==null?void 0:a(N))!==null&&I!==void 0?I:b;window.clearTimeout(S),S=window.setTimeout(w,j)}catch(j){v(),p(j)}}}w()})}function Fc(r){const e=r.headers.get("content-type");if(!(e!=null&&e.startsWith(pr)))throw new Error(`Expected content-type to be ${pr}, Actual: ${e}`)}const Hc="https://api.dev.langdb.ai";class Hn extends Error{}const $c=r=>{const{files:e,fileResizeOptions:t,onError:n}=r,o=`${r.serverUrl||Hc}/stream`,[i,a]=x.useState(r.threadId),{modelName:u,agentParams:l}=r,c={"Content-Type":"application/json"};return r.publicId&&(c["X-PUBLIC-APPLICATION-ID"]=r.publicId),{streamText:async(d,p)=>{var h;if(!r.publicId){const m=await((h=r.getAccessToken)==null?void 0:h.call(r));if(!m){p.error(new Error("Failed to get the user token"));return}c.Authorization=`Bearer ${m}`}try{const m=await Xo({files:e,message:d,resizeOptions:t}),f={model_name:u,parameters:l||{},user_id:r.userId||"",thread_id:i,message:m};await zc(o,{method:"POST",body:JSON.stringify(f),headers:c,async onopen(b){if(b.ok&&b.headers.get("content-type")==="text/event-stream"){const S=b.headers.get("X-Thread-Id");if(S&&a(S),r.responseCallback&&r.responseCallback({response:b,modelName:u}),!b.body)throw new Hn("No body found");return}else if(b.status>=400&&b.status<500&&b.status!==429){const S=await b.text();throw new Hn(S||`${b.status}: Failed to send message to the server`)}else return},onmessage(b){if(b.event)throw n&&n(b),new Hn(b.data);p.next(b.data)},onclose(){},onerror(b){throw b}})}catch(m){console.log(m);const f=new Error(m.toString());r.responseCallback&&r.responseCallback({error:f,modelName:u}),p.error(f)}p.complete()}}};var mr={exports:{}},sn={exports:{}},ae={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var js;function Nc(){if(js)return ae;js=1;var r=typeof Symbol=="function"&&Symbol.for,e=r?Symbol.for("react.element"):60103,t=r?Symbol.for("react.portal"):60106,n=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,o=r?Symbol.for("react.profiler"):60114,i=r?Symbol.for("react.provider"):60109,a=r?Symbol.for("react.context"):60110,u=r?Symbol.for("react.async_mode"):60111,l=r?Symbol.for("react.concurrent_mode"):60111,c=r?Symbol.for("react.forward_ref"):60112,d=r?Symbol.for("react.suspense"):60113,p=r?Symbol.for("react.suspense_list"):60120,h=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116,f=r?Symbol.for("react.block"):60121,b=r?Symbol.for("react.fundamental"):60117,S=r?Symbol.for("react.responder"):60118,v=r?Symbol.for("react.scope"):60119;function y(w){if(typeof w=="object"&&w!==null){var I=w.$$typeof;switch(I){case e:switch(w=w.type,w){case u:case l:case n:case o:case s:case d:return w;default:switch(w=w&&w.$$typeof,w){case a:case c:case m:case h:case i:return w;default:return I}}case t:return I}}}function E(w){return y(w)===l}return ae.AsyncMode=u,ae.ConcurrentMode=l,ae.ContextConsumer=a,ae.ContextProvider=i,ae.Element=e,ae.ForwardRef=c,ae.Fragment=n,ae.Lazy=m,ae.Memo=h,ae.Portal=t,ae.Profiler=o,ae.StrictMode=s,ae.Suspense=d,ae.isAsyncMode=function(w){return E(w)||y(w)===u},ae.isConcurrentMode=E,ae.isContextConsumer=function(w){return y(w)===a},ae.isContextProvider=function(w){return y(w)===i},ae.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===e},ae.isForwardRef=function(w){return y(w)===c},ae.isFragment=function(w){return y(w)===n},ae.isLazy=function(w){return y(w)===m},ae.isMemo=function(w){return y(w)===h},ae.isPortal=function(w){return y(w)===t},ae.isProfiler=function(w){return y(w)===o},ae.isStrictMode=function(w){return y(w)===s},ae.isSuspense=function(w){return y(w)===d},ae.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===n||w===l||w===o||w===s||w===d||w===p||typeof w=="object"&&w!==null&&(w.$$typeof===m||w.$$typeof===h||w.$$typeof===i||w.$$typeof===a||w.$$typeof===c||w.$$typeof===b||w.$$typeof===S||w.$$typeof===v||w.$$typeof===f)},ae.typeOf=y,ae}var ce={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bs;function _c(){return Bs||(Bs=1,process.env.NODE_ENV!=="production"&&function(){var r=typeof Symbol=="function"&&Symbol.for,e=r?Symbol.for("react.element"):60103,t=r?Symbol.for("react.portal"):60106,n=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,o=r?Symbol.for("react.profiler"):60114,i=r?Symbol.for("react.provider"):60109,a=r?Symbol.for("react.context"):60110,u=r?Symbol.for("react.async_mode"):60111,l=r?Symbol.for("react.concurrent_mode"):60111,c=r?Symbol.for("react.forward_ref"):60112,d=r?Symbol.for("react.suspense"):60113,p=r?Symbol.for("react.suspense_list"):60120,h=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116,f=r?Symbol.for("react.block"):60121,b=r?Symbol.for("react.fundamental"):60117,S=r?Symbol.for("react.responder"):60118,v=r?Symbol.for("react.scope"):60119;function y(R){return typeof R=="string"||typeof R=="function"||R===n||R===l||R===o||R===s||R===d||R===p||typeof R=="object"&&R!==null&&(R.$$typeof===m||R.$$typeof===h||R.$$typeof===i||R.$$typeof===a||R.$$typeof===c||R.$$typeof===b||R.$$typeof===S||R.$$typeof===v||R.$$typeof===f)}function E(R){if(typeof R=="object"&&R!==null){var te=R.$$typeof;switch(te){case e:var ye=R.type;switch(ye){case u:case l:case n:case o:case s:case d:return ye;default:var Ce=ye&&ye.$$typeof;switch(Ce){case a:case c:case m:case h:case i:return Ce;default:return te}}case t:return te}}}var w=u,I=l,N=a,j=i,M=e,F=c,Q=n,X=m,Z=h,Y=t,V=o,re=s,G=d,oe=!1;function J(R){return oe||(oe=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),A(R)||E(R)===u}function A(R){return E(R)===l}function O(R){return E(R)===a}function L(R){return E(R)===i}function _(R){return typeof R=="object"&&R!==null&&R.$$typeof===e}function H(R){return E(R)===c}function K(R){return E(R)===n}function q(R){return E(R)===m}function k(R){return E(R)===h}function T(R){return E(R)===t}function z(R){return E(R)===o}function $(R){return E(R)===s}function se(R){return E(R)===d}ce.AsyncMode=w,ce.ConcurrentMode=I,ce.ContextConsumer=N,ce.ContextProvider=j,ce.Element=M,ce.ForwardRef=F,ce.Fragment=Q,ce.Lazy=X,ce.Memo=Z,ce.Portal=Y,ce.Profiler=V,ce.StrictMode=re,ce.Suspense=G,ce.isAsyncMode=J,ce.isConcurrentMode=A,ce.isContextConsumer=O,ce.isContextProvider=L,ce.isElement=_,ce.isForwardRef=H,ce.isFragment=K,ce.isLazy=q,ce.isMemo=k,ce.isPortal=T,ce.isProfiler=z,ce.isStrictMode=$,ce.isSuspense=se,ce.isValidElementType=y,ce.typeOf=E}()),ce}var Ds;function Zo(){return Ds||(Ds=1,process.env.NODE_ENV==="production"?sn.exports=Nc():sn.exports=_c()),sn.exports}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var $n,zs;function qc(){if(zs)return $n;zs=1;var r=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable;function n(o){if(o==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(o)}function s(){try{if(!Object.assign)return!1;var o=new String("abc");if(o[5]="de",Object.getOwnPropertyNames(o)[0]==="5")return!1;for(var i={},a=0;a<10;a++)i["_"+String.fromCharCode(a)]=a;var u=Object.getOwnPropertyNames(i).map(function(c){return i[c]});if(u.join("")!=="0123456789")return!1;var l={};return"abcdefghijklmnopqrst".split("").forEach(function(c){l[c]=c}),Object.keys(Object.assign({},l)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return $n=s()?Object.assign:function(o,i){for(var a,u=n(o),l,c=1;c<arguments.length;c++){a=Object(arguments[c]);for(var d in a)e.call(a,d)&&(u[d]=a[d]);if(r){l=r(a);for(var p=0;p<l.length;p++)t.call(a,l[p])&&(u[l[p]]=a[l[p]])}}return u},$n}var Nn,Fs;function Lr(){if(Fs)return Nn;Fs=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Nn=r,Nn}var _n,Hs;function Ko(){return Hs||(Hs=1,_n=Function.call.bind(Object.prototype.hasOwnProperty)),_n}var qn,$s;function Uc(){if($s)return qn;$s=1;var r=function(){};if(process.env.NODE_ENV!=="production"){var e=Lr(),t={},n=Ko();r=function(o){var i="Warning: "+o;typeof console<"u"&&console.error(i);try{throw new Error(i)}catch{}}}function s(o,i,a,u,l){if(process.env.NODE_ENV!=="production"){for(var c in o)if(n(o,c)){var d;try{if(typeof o[c]!="function"){var p=Error((u||"React class")+": "+a+" type `"+c+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof o[c]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw p.name="Invariant Violation",p}d=o[c](i,c,u,a,null,e)}catch(m){d=m}if(d&&!(d instanceof Error)&&r((u||"React class")+": type specification of "+a+" `"+c+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof d+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),d instanceof Error&&!(d.message in t)){t[d.message]=!0;var h=l?l():"";r("Failed "+a+" type: "+d.message+(h??""))}}}}return s.resetWarningCache=function(){process.env.NODE_ENV!=="production"&&(t={})},qn=s,qn}var Un,Ns;function Yc(){if(Ns)return Un;Ns=1;var r=Zo(),e=qc(),t=Lr(),n=Ko(),s=Uc(),o=function(){};process.env.NODE_ENV!=="production"&&(o=function(a){var u="Warning: "+a;typeof console<"u"&&console.error(u);try{throw new Error(u)}catch{}});function i(){return null}return Un=function(a,u){var l=typeof Symbol=="function"&&Symbol.iterator,c="@@iterator";function d(A){var O=A&&(l&&A[l]||A[c]);if(typeof O=="function")return O}var p="<<anonymous>>",h={array:S("array"),bigint:S("bigint"),bool:S("boolean"),func:S("function"),number:S("number"),object:S("object"),string:S("string"),symbol:S("symbol"),any:v(),arrayOf:y,element:E(),elementType:w(),instanceOf:I,node:F(),objectOf:j,oneOf:N,oneOfType:M,shape:X,exact:Z};function m(A,O){return A===O?A!==0||1/A===1/O:A!==A&&O!==O}function f(A,O){this.message=A,this.data=O&&typeof O=="object"?O:{},this.stack=""}f.prototype=Error.prototype;function b(A){if(process.env.NODE_ENV!=="production")var O={},L=0;function _(K,q,k,T,z,$,se){if(T=T||p,$=$||k,se!==t){if(u){var R=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw R.name="Invariant Violation",R}else if(process.env.NODE_ENV!=="production"&&typeof console<"u"){var te=T+":"+k;!O[te]&&L<3&&(o("You are manually calling a React.PropTypes validation function for the `"+$+"` prop on `"+T+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),O[te]=!0,L++)}}return q[k]==null?K?q[k]===null?new f("The "+z+" `"+$+"` is marked as required "+("in `"+T+"`, but its value is `null`.")):new f("The "+z+" `"+$+"` is marked as required in "+("`"+T+"`, but its value is `undefined`.")):null:A(q,k,T,z,$)}var H=_.bind(null,!1);return H.isRequired=_.bind(null,!0),H}function S(A){function O(L,_,H,K,q,k){var T=L[_],z=re(T);if(z!==A){var $=G(T);return new f("Invalid "+K+" `"+q+"` of type "+("`"+$+"` supplied to `"+H+"`, expected ")+("`"+A+"`."),{expectedType:A})}return null}return b(O)}function v(){return b(i)}function y(A){function O(L,_,H,K,q){if(typeof A!="function")return new f("Property `"+q+"` of component `"+H+"` has invalid PropType notation inside arrayOf.");var k=L[_];if(!Array.isArray(k)){var T=re(k);return new f("Invalid "+K+" `"+q+"` of type "+("`"+T+"` supplied to `"+H+"`, expected an array."))}for(var z=0;z<k.length;z++){var $=A(k,z,H,K,q+"["+z+"]",t);if($ instanceof Error)return $}return null}return b(O)}function E(){function A(O,L,_,H,K){var q=O[L];if(!a(q)){var k=re(q);return new f("Invalid "+H+" `"+K+"` of type "+("`"+k+"` supplied to `"+_+"`, expected a single ReactElement."))}return null}return b(A)}function w(){function A(O,L,_,H,K){var q=O[L];if(!r.isValidElementType(q)){var k=re(q);return new f("Invalid "+H+" `"+K+"` of type "+("`"+k+"` supplied to `"+_+"`, expected a single ReactElement type."))}return null}return b(A)}function I(A){function O(L,_,H,K,q){if(!(L[_]instanceof A)){var k=A.name||p,T=J(L[_]);return new f("Invalid "+K+" `"+q+"` of type "+("`"+T+"` supplied to `"+H+"`, expected ")+("instance of `"+k+"`."))}return null}return b(O)}function N(A){if(!Array.isArray(A))return process.env.NODE_ENV!=="production"&&(arguments.length>1?o("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):o("Invalid argument supplied to oneOf, expected an array.")),i;function O(L,_,H,K,q){for(var k=L[_],T=0;T<A.length;T++)if(m(k,A[T]))return null;var z=JSON.stringify(A,function(se,R){var te=G(R);return te==="symbol"?String(R):R});return new f("Invalid "+K+" `"+q+"` of value `"+String(k)+"` "+("supplied to `"+H+"`, expected one of "+z+"."))}return b(O)}function j(A){function O(L,_,H,K,q){if(typeof A!="function")return new f("Property `"+q+"` of component `"+H+"` has invalid PropType notation inside objectOf.");var k=L[_],T=re(k);if(T!=="object")return new f("Invalid "+K+" `"+q+"` of type "+("`"+T+"` supplied to `"+H+"`, expected an object."));for(var z in k)if(n(k,z)){var $=A(k,z,H,K,q+"."+z,t);if($ instanceof Error)return $}return null}return b(O)}function M(A){if(!Array.isArray(A))return process.env.NODE_ENV!=="production"&&o("Invalid argument supplied to oneOfType, expected an instance of array."),i;for(var O=0;O<A.length;O++){var L=A[O];if(typeof L!="function")return o("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+oe(L)+" at index "+O+"."),i}function _(H,K,q,k,T){for(var z=[],$=0;$<A.length;$++){var se=A[$],R=se(H,K,q,k,T,t);if(R==null)return null;R.data&&n(R.data,"expectedType")&&z.push(R.data.expectedType)}var te=z.length>0?", expected one of type ["+z.join(", ")+"]":"";return new f("Invalid "+k+" `"+T+"` supplied to "+("`"+q+"`"+te+"."))}return b(_)}function F(){function A(O,L,_,H,K){return Y(O[L])?null:new f("Invalid "+H+" `"+K+"` supplied to "+("`"+_+"`, expected a ReactNode."))}return b(A)}function Q(A,O,L,_,H){return new f((A||"React class")+": "+O+" type `"+L+"."+_+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+H+"`.")}function X(A){function O(L,_,H,K,q){var k=L[_],T=re(k);if(T!=="object")return new f("Invalid "+K+" `"+q+"` of type `"+T+"` "+("supplied to `"+H+"`, expected `object`."));for(var z in A){var $=A[z];if(typeof $!="function")return Q(H,K,q,z,G($));var se=$(k,z,H,K,q+"."+z,t);if(se)return se}return null}return b(O)}function Z(A){function O(L,_,H,K,q){var k=L[_],T=re(k);if(T!=="object")return new f("Invalid "+K+" `"+q+"` of type `"+T+"` "+("supplied to `"+H+"`, expected `object`."));var z=e({},L[_],A);for(var $ in z){var se=A[$];if(n(A,$)&&typeof se!="function")return Q(H,K,q,$,G(se));if(!se)return new f("Invalid "+K+" `"+q+"` key `"+$+"` supplied to `"+H+"`.\nBad object: "+JSON.stringify(L[_],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(A),null,"  "));var R=se(k,$,H,K,q+"."+$,t);if(R)return R}return null}return b(O)}function Y(A){switch(typeof A){case"number":case"string":case"undefined":return!0;case"boolean":return!A;case"object":if(Array.isArray(A))return A.every(Y);if(A===null||a(A))return!0;var O=d(A);if(O){var L=O.call(A),_;if(O!==A.entries){for(;!(_=L.next()).done;)if(!Y(_.value))return!1}else for(;!(_=L.next()).done;){var H=_.value;if(H&&!Y(H[1]))return!1}}else return!1;return!0;default:return!1}}function V(A,O){return A==="symbol"?!0:O?O["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&O instanceof Symbol:!1}function re(A){var O=typeof A;return Array.isArray(A)?"array":A instanceof RegExp?"object":V(O,A)?"symbol":O}function G(A){if(typeof A>"u"||A===null)return""+A;var O=re(A);if(O==="object"){if(A instanceof Date)return"date";if(A instanceof RegExp)return"regexp"}return O}function oe(A){var O=G(A);switch(O){case"array":case"object":return"an "+O;case"boolean":case"date":case"regexp":return"a "+O;default:return O}}function J(A){return!A.constructor||!A.constructor.name?p:A.constructor.name}return h.checkPropTypes=s,h.resetWarningCache=s.resetWarningCache,h.PropTypes=h,h},Un}var Yn,_s;function Wc(){if(_s)return Yn;_s=1;var r=Lr();function e(){}function t(){}return t.resetWarningCache=e,Yn=function(){function n(i,a,u,l,c,d){if(d!==r){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}n.isRequired=n;function s(){return n}var o={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return o.PropTypes=o,o},Yn}if(process.env.NODE_ENV!=="production"){var Qc=Zo(),Xc=!0;mr.exports=Yc()(Qc.isElement,Xc)}else mr.exports=Wc()();var Zc=mr.exports;const pe=xi(Zc);function mt(r,e,t,n){function s(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(c){try{l(n.next(c))}catch(d){i(d)}}function u(c){try{l(n.throw(c))}catch(d){i(d)}}function l(c){c.done?o(c.value):s(c.value).then(a,u)}l((n=n.apply(r,e||[])).next())})}function ht(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,s,o,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(l){return function(c){return u([l,c])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,l[0]&&(t=0)),t;)try{if(n=1,s&&(o=l[0]&2?s.return:l[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,l[1])).done)return o;switch(s=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,s=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(l[0]===6&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(c){l=[6,c],s=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function qs(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),s,o=[],i;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)o.push(s.value)}catch(a){i={error:a}}finally{try{s&&!s.done&&(t=n.return)&&t.call(n)}finally{if(i)throw i.error}}return o}function Us(r,e,t){if(t||arguments.length===2)for(var n=0,s=e.length,o;n<s;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))}var Kc=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function qt(r,e){var t=Gc(r);if(typeof t.path!="string"){var n=r.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof n=="string"&&n.length>0?n:r.name,writable:!1,configurable:!1,enumerable:!0})}return t}function Gc(r){var e=r.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!r.type){var n=e.split(".").pop().toLowerCase(),s=Kc.get(n);s&&Object.defineProperty(r,"type",{value:s,writable:!1,configurable:!1,enumerable:!0})}return r}var Jc=[".DS_Store","Thumbs.db"];function Vc(r){return mt(this,void 0,void 0,function(){return ht(this,function(e){return kn(r)&&el(r.dataTransfer)?[2,sl(r.dataTransfer,r.type)]:tl(r)?[2,nl(r)]:Array.isArray(r)&&r.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,rl(r)]:[2,[]]})})}function el(r){return kn(r)}function tl(r){return kn(r)&&kn(r.target)}function kn(r){return typeof r=="object"&&r!==null}function nl(r){return hr(r.target.files).map(function(e){return qt(e)})}function rl(r){return mt(this,void 0,void 0,function(){var e;return ht(this,function(t){switch(t.label){case 0:return[4,Promise.all(r.map(function(n){return n.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(n){return qt(n)})]}})})}function sl(r,e){return mt(this,void 0,void 0,function(){var t,n;return ht(this,function(s){switch(s.label){case 0:return r.items?(t=hr(r.items).filter(function(o){return o.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(ol))]):[3,2];case 1:return n=s.sent(),[2,Ys(Go(n))];case 2:return[2,Ys(hr(r.files).map(function(o){return qt(o)}))]}})})}function Ys(r){return r.filter(function(e){return Jc.indexOf(e.name)===-1})}function hr(r){if(r===null)return[];for(var e=[],t=0;t<r.length;t++){var n=r[t];e.push(n)}return e}function ol(r){if(typeof r.webkitGetAsEntry!="function")return Ws(r);var e=r.webkitGetAsEntry();return e&&e.isDirectory?Jo(e):Ws(r)}function Go(r){return r.reduce(function(e,t){return Us(Us([],qs(e),!1),qs(Array.isArray(t)?Go(t):[t]),!1)},[])}function Ws(r){var e=r.getAsFile();if(!e)return Promise.reject("".concat(r," is not a File"));var t=qt(e);return Promise.resolve(t)}function il(r){return mt(this,void 0,void 0,function(){return ht(this,function(e){return[2,r.isDirectory?Jo(r):al(r)]})})}function Jo(r){var e=r.createReader();return new Promise(function(t,n){var s=[];function o(){var i=this;e.readEntries(function(a){return mt(i,void 0,void 0,function(){var u,l,c;return ht(this,function(d){switch(d.label){case 0:if(a.length)return[3,5];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,Promise.all(s)];case 2:return u=d.sent(),t(u),[3,4];case 3:return l=d.sent(),n(l),[3,4];case 4:return[3,6];case 5:c=Promise.all(a.map(il)),s.push(c),o(),d.label=6;case 6:return[2]}})})},function(a){n(a)})}o()})}function al(r){return mt(this,void 0,void 0,function(){return ht(this,function(e){return[2,new Promise(function(t,n){r.file(function(s){var o=qt(s,r.fullPath);t(o)},function(s){n(s)})})]})})}var cl=function(r,e){if(r&&e){var t=Array.isArray(e)?e:e.split(","),n=r.name||"",s=(r.type||"").toLowerCase(),o=s.replace(/\/.*$/,"");return t.some(function(i){var a=i.trim().toLowerCase();return a.charAt(0)==="."?n.toLowerCase().endsWith(a):a.endsWith("/*")?o===a.replace(/\/.*$/,""):s===a})}return!0};function Qs(r){return dl(r)||ul(r)||ei(r)||ll()}function ll(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ul(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function dl(r){if(Array.isArray(r))return fr(r)}function Xs(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,n)}return t}function Zs(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Xs(Object(t),!0).forEach(function(n){Vo(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Xs(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Vo(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Ft(r,e){return hl(r)||ml(r,e)||ei(r,e)||pl()}function pl(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ei(r,e){if(r){if(typeof r=="string")return fr(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return fr(r,e)}}function fr(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function ml(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n=[],s=!0,o=!1,i,a;try{for(t=t.call(r);!(s=(i=t.next()).done)&&(n.push(i.value),!(e&&n.length===e));s=!0);}catch(u){o=!0,a=u}finally{try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}return n}}function hl(r){if(Array.isArray(r))return r}var fl="file-invalid-type",gl="file-too-large",vl="file-too-small",yl="too-many-files",xl=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:fl,message:"File type must be ".concat(t)}},Ks=function(e){return{code:gl,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},Gs=function(e){return{code:vl,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},bl={code:yl,message:"Too many files"};function ti(r,e){var t=r.type==="application/x-moz-file"||cl(r,e);return[t,t?null:xl(e)]}function ni(r,e,t){if(nt(r.size))if(nt(e)&&nt(t)){if(r.size>t)return[!1,Ks(t)];if(r.size<e)return[!1,Gs(e)]}else{if(nt(e)&&r.size<e)return[!1,Gs(e)];if(nt(t)&&r.size>t)return[!1,Ks(t)]}return[!0,null]}function nt(r){return r!=null}function wl(r){var e=r.files,t=r.accept,n=r.minSize,s=r.maxSize,o=r.multiple,i=r.maxFiles,a=r.validator;return!o&&e.length>1||o&&i>=1&&e.length>i?!1:e.every(function(u){var l=ti(u,t),c=Ft(l,1),d=c[0],p=ni(u,n,s),h=Ft(p,1),m=h[0],f=a?a(u):null;return d&&m&&!f})}function Cn(r){return typeof r.isPropagationStopped=="function"?r.isPropagationStopped():typeof r.cancelBubble<"u"?r.cancelBubble:!1}function on(r){return r.dataTransfer?Array.prototype.some.call(r.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!r.target&&!!r.target.files}function Js(r){r.preventDefault()}function kl(r){return r.indexOf("MSIE")!==-1||r.indexOf("Trident/")!==-1}function Cl(r){return r.indexOf("Edge/")!==-1}function Sl(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return kl(r)||Cl(r)}function $e(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return function(n){for(var s=arguments.length,o=new Array(s>1?s-1:0),i=1;i<s;i++)o[i-1]=arguments[i];return e.some(function(a){return!Cn(n)&&a&&a.apply(void 0,[n].concat(o)),Cn(n)})}}function Al(){return"showOpenFilePicker"in window}function El(r){if(nt(r)){var e=Object.entries(r).filter(function(t){var n=Ft(t,2),s=n[0],o=n[1],i=!0;return ri(s)||(console.warn('Skipped "'.concat(s,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),i=!1),(!Array.isArray(o)||!o.every(si))&&(console.warn('Skipped "'.concat(s,'" because an invalid file extension was provided.')),i=!1),i}).reduce(function(t,n){var s=Ft(n,2),o=s[0],i=s[1];return Zs(Zs({},t),{},Vo({},o,i))},{});return[{description:"Files",accept:e}]}return r}function Tl(r){if(nt(r))return Object.entries(r).reduce(function(e,t){var n=Ft(t,2),s=n[0],o=n[1];return[].concat(Qs(e),[s],Qs(o))},[]).filter(function(e){return ri(e)||si(e)}).join(",")}function Pl(r){return r instanceof DOMException&&(r.name==="AbortError"||r.code===r.ABORT_ERR)}function Rl(r){return r instanceof DOMException&&(r.name==="SecurityError"||r.code===r.SECURITY_ERR)}function ri(r){return r==="audio/*"||r==="video/*"||r==="image/*"||r==="text/*"||/\w+\/[-+.\w]+/g.test(r)}function si(r){return/^.*\.[\w]+$/.test(r)}var Il=["children"],Ol=["open"],Ml=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Ll=["refKey","onChange","onClick"];function jl(r){return zl(r)||Dl(r)||oi(r)||Bl()}function Bl(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dl(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function zl(r){if(Array.isArray(r))return gr(r)}function Wn(r,e){return $l(r)||Hl(r,e)||oi(r,e)||Fl()}function Fl(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oi(r,e){if(r){if(typeof r=="string")return gr(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return gr(r,e)}}function gr(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function Hl(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n=[],s=!0,o=!1,i,a;try{for(t=t.call(r);!(s=(i=t.next()).done)&&(n.push(i.value),!(e&&n.length===e));s=!0);}catch(u){o=!0,a=u}finally{try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}return n}}function $l(r){if(Array.isArray(r))return r}function Vs(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,n)}return t}function ve(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Vs(Object(t),!0).forEach(function(n){vr(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Vs(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function vr(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Sn(r,e){if(r==null)return{};var t=Nl(r,e),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(s=0;s<o.length;s++)n=o[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function Nl(r,e){if(r==null)return{};var t={},n=Object.keys(r),s,o;for(o=0;o<n.length;o++)s=n[o],!(e.indexOf(s)>=0)&&(t[s]=r[s]);return t}var jr=x.forwardRef(function(r,e){var t=r.children,n=Sn(r,Il),s=ai(n),o=s.open,i=Sn(s,Ol);return x.useImperativeHandle(e,function(){return{open:o}},[o]),x.createElement(x.Fragment,null,t(ve(ve({},i),{},{open:o})))});jr.displayName="Dropzone";var ii={disabled:!1,getFilesFromEvent:Vc,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};jr.defaultProps=ii;jr.propTypes={children:pe.func,accept:pe.objectOf(pe.arrayOf(pe.string)),multiple:pe.bool,preventDropOnDocument:pe.bool,noClick:pe.bool,noKeyboard:pe.bool,noDrag:pe.bool,noDragEventsBubbling:pe.bool,minSize:pe.number,maxSize:pe.number,maxFiles:pe.number,disabled:pe.bool,getFilesFromEvent:pe.func,onFileDialogCancel:pe.func,onFileDialogOpen:pe.func,useFsAccessApi:pe.bool,autoFocus:pe.bool,onDragEnter:pe.func,onDragLeave:pe.func,onDragOver:pe.func,onDrop:pe.func,onDropAccepted:pe.func,onDropRejected:pe.func,onError:pe.func,validator:pe.func};var yr={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function ai(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=ve(ve({},ii),r),t=e.accept,n=e.disabled,s=e.getFilesFromEvent,o=e.maxSize,i=e.minSize,a=e.multiple,u=e.maxFiles,l=e.onDragEnter,c=e.onDragLeave,d=e.onDragOver,p=e.onDrop,h=e.onDropAccepted,m=e.onDropRejected,f=e.onFileDialogCancel,b=e.onFileDialogOpen,S=e.useFsAccessApi,v=e.autoFocus,y=e.preventDropOnDocument,E=e.noClick,w=e.noKeyboard,I=e.noDrag,N=e.noDragEventsBubbling,j=e.onError,M=e.validator,F=x.useMemo(function(){return Tl(t)},[t]),Q=x.useMemo(function(){return El(t)},[t]),X=x.useMemo(function(){return typeof b=="function"?b:eo},[b]),Z=x.useMemo(function(){return typeof f=="function"?f:eo},[f]),Y=x.useRef(null),V=x.useRef(null),re=x.useReducer(_l,yr),G=Wn(re,2),oe=G[0],J=G[1],A=oe.isFocused,O=oe.isFileDialogActive,L=x.useRef(typeof window<"u"&&window.isSecureContext&&S&&Al()),_=function(){!L.current&&O&&setTimeout(function(){if(V.current){var U=V.current.files;U.length||(J({type:"closeDialog"}),Z())}},300)};x.useEffect(function(){return window.addEventListener("focus",_,!1),function(){window.removeEventListener("focus",_,!1)}},[V,O,Z,L]);var H=x.useRef([]),K=function(U){Y.current&&Y.current.contains(U.target)||(U.preventDefault(),H.current=[])};x.useEffect(function(){return y&&(document.addEventListener("dragover",Js,!1),document.addEventListener("drop",K,!1)),function(){y&&(document.removeEventListener("dragover",Js),document.removeEventListener("drop",K))}},[Y,y]),x.useEffect(function(){return!n&&v&&Y.current&&Y.current.focus(),function(){}},[Y,v,n]);var q=x.useCallback(function(B){j?j(B):console.error(B)},[j]),k=x.useCallback(function(B){B.preventDefault(),B.persist(),ot(B),H.current=[].concat(jl(H.current),[B.target]),on(B)&&Promise.resolve(s(B)).then(function(U){if(!(Cn(B)&&!N)){var fe=U.length,ge=fe>0&&wl({files:U,accept:F,minSize:i,maxSize:o,multiple:a,maxFiles:u,validator:M}),Se=fe>0&&!ge;J({isDragAccept:ge,isDragReject:Se,isDragActive:!0,type:"setDraggedFiles"}),l&&l(B)}}).catch(function(U){return q(U)})},[s,l,q,N,F,i,o,a,u,M]),T=x.useCallback(function(B){B.preventDefault(),B.persist(),ot(B);var U=on(B);if(U&&B.dataTransfer)try{B.dataTransfer.dropEffect="copy"}catch{}return U&&d&&d(B),!1},[d,N]),z=x.useCallback(function(B){B.preventDefault(),B.persist(),ot(B);var U=H.current.filter(function(ge){return Y.current&&Y.current.contains(ge)}),fe=U.indexOf(B.target);fe!==-1&&U.splice(fe,1),H.current=U,!(U.length>0)&&(J({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),on(B)&&c&&c(B))},[Y,c,N]),$=x.useCallback(function(B,U){var fe=[],ge=[];B.forEach(function(Se){var Qe=ti(Se,F),qe=Wn(Qe,2),Ke=qe[0],gt=qe[1],vt=ni(Se,i,o),it=Wn(vt,2),yt=it[0],xt=it[1],bt=M?M(Se):null;if(Ke&&yt&&!bt)fe.push(Se);else{var wt=[gt,xt];bt&&(wt=wt.concat(bt)),ge.push({file:Se,errors:wt.filter(function(kt){return kt})})}}),(!a&&fe.length>1||a&&u>=1&&fe.length>u)&&(fe.forEach(function(Se){ge.push({file:Se,errors:[bl]})}),fe.splice(0)),J({acceptedFiles:fe,fileRejections:ge,type:"setFiles"}),p&&p(fe,ge,U),ge.length>0&&m&&m(ge,U),fe.length>0&&h&&h(fe,U)},[J,a,F,i,o,u,p,h,m,M]),se=x.useCallback(function(B){B.preventDefault(),B.persist(),ot(B),H.current=[],on(B)&&Promise.resolve(s(B)).then(function(U){Cn(B)&&!N||$(U,B)}).catch(function(U){return q(U)}),J({type:"reset"})},[s,$,q,N]),R=x.useCallback(function(){if(L.current){J({type:"openDialog"}),X();var B={multiple:a,types:Q};window.showOpenFilePicker(B).then(function(U){return s(U)}).then(function(U){$(U,null),J({type:"closeDialog"})}).catch(function(U){Pl(U)?(Z(U),J({type:"closeDialog"})):Rl(U)?(L.current=!1,V.current?(V.current.value=null,V.current.click()):q(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):q(U)});return}V.current&&(J({type:"openDialog"}),X(),V.current.value=null,V.current.click())},[J,X,Z,S,$,q,Q,a]),te=x.useCallback(function(B){!Y.current||!Y.current.isEqualNode(B.target)||(B.key===" "||B.key==="Enter"||B.keyCode===32||B.keyCode===13)&&(B.preventDefault(),R())},[Y,R]),ye=x.useCallback(function(){J({type:"focus"})},[]),Ce=x.useCallback(function(){J({type:"blur"})},[]),je=x.useCallback(function(){E||(Sl()?setTimeout(R,0):R())},[E,R]),Oe=function(U){return n?null:U},_e=function(U){return w?null:Oe(U)},Be=function(U){return I?null:Oe(U)},ot=function(U){N&&U.stopPropagation()},Tn=x.useMemo(function(){return function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},U=B.refKey,fe=U===void 0?"ref":U,ge=B.role,Se=B.onKeyDown,Qe=B.onFocus,qe=B.onBlur,Ke=B.onClick,gt=B.onDragEnter,vt=B.onDragOver,it=B.onDragLeave,yt=B.onDrop,xt=Sn(B,Ml);return ve(ve(vr({onKeyDown:_e($e(Se,te)),onFocus:_e($e(Qe,ye)),onBlur:_e($e(qe,Ce)),onClick:Oe($e(Ke,je)),onDragEnter:Be($e(gt,k)),onDragOver:Be($e(vt,T)),onDragLeave:Be($e(it,z)),onDrop:Be($e(yt,se)),role:typeof ge=="string"&&ge!==""?ge:"presentation"},fe,Y),!n&&!w?{tabIndex:0}:{}),xt)}},[Y,te,ye,Ce,je,k,T,z,se,w,I,n]),ft=x.useCallback(function(B){B.stopPropagation()},[]),Pn=x.useMemo(function(){return function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},U=B.refKey,fe=U===void 0?"ref":U,ge=B.onChange,Se=B.onClick,Qe=Sn(B,Ll),qe=vr({accept:F,multiple:a,type:"file",style:{display:"none"},onChange:Oe($e(ge,se)),onClick:Oe($e(Se,ft)),tabIndex:-1},fe,V);return ve(ve({},qe),Qe)}},[V,t,a,se,n]);return ve(ve({},oe),{},{isFocused:A&&!n,getRootProps:Tn,getInputProps:Pn,rootRef:Y,inputRef:V,open:Oe(R)})}function _l(r,e){switch(e.type){case"focus":return ve(ve({},r),{},{isFocused:!0});case"blur":return ve(ve({},r),{},{isFocused:!1});case"openDialog":return ve(ve({},yr),{},{isFileDialogActive:!0});case"closeDialog":return ve(ve({},r),{},{isFileDialogActive:!1});case"setDraggedFiles":return ve(ve({},r),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return ve(ve({},r),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return ve({},yr);default:return r}}function eo(){}const ql=r=>C.jsx("svg",{...r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14"})}),Ul=()=>C.jsxs("svg",{viewBox:"0 0 200 200",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("circle",{cx:"100",cy:"100",r:"99.5",stroke:"#B0488C"}),C.jsxs("g",{clipPath:"url(#clip0_31_12)",children:[C.jsx("path",{d:"M87.6691 75.9199C88.563 75.9163 89.457 75.9128 90.378 75.9091C92.2639 75.9065 94.1498 75.9134 96.0357 75.9291C98.9224 75.9491 101.807 75.9292 104.694 75.9053C106.528 75.9078 108.362 75.9126 110.195 75.9199C111.059 75.9124 111.921 75.9048 112.81 75.897C119.46 75.9944 119.46 75.9944 121.75 78.2731C122.191 78.8959 122.631 79.5187 123.085 80.1604C123.454 80.531 123.454 80.531 123.83 80.9091C123.911 82.1028 123.941 83.3 123.95 84.4965C123.957 85.2614 123.964 86.0262 123.971 86.8143C123.974 87.6478 123.978 88.4815 123.981 89.3403C123.985 90.1927 123.99 91.0451 123.994 91.9233C124.001 93.7328 124.006 95.5423 124.009 97.3517C124.016 100.116 124.039 102.879 124.062 105.643C124.067 107.399 124.071 109.155 124.074 110.911C124.083 111.738 124.093 112.563 124.102 113.415C124.081 120.894 124.081 120.894 121.596 124.332C119.274 125.815 117.439 126.021 114.715 126.035C113.937 126.042 113.159 126.049 112.357 126.056C111.521 126.056 110.685 126.055 109.823 126.054C108.961 126.057 108.098 126.06 107.209 126.064C105.383 126.068 103.559 126.068 101.734 126.065C98.9428 126.062 96.1519 126.08 93.3604 126.099C91.5874 126.101 89.8145 126.101 88.0415 126.101C87.2067 126.107 86.372 126.115 85.5119 126.122C84.7316 126.117 83.9513 126.113 83.1474 126.107C82.4635 126.108 81.7796 126.109 81.075 126.109C78.7215 125.767 77.3408 124.983 75.4255 123.583C73.7766 121.097 73.7375 120.265 73.6961 117.362C73.6818 116.549 73.6676 115.737 73.6528 114.901C73.6465 114.023 73.6401 113.146 73.6337 112.242C73.6251 111.34 73.6166 110.438 73.6079 109.509C73.5938 107.6 73.5841 105.69 73.5783 103.781C73.5639 100.859 73.5177 97.9383 73.4707 95.0167C73.461 93.1626 73.4532 91.3085 73.4475 89.4543C73.4291 88.5801 73.4107 87.7058 73.3917 86.8049C73.4123 83.0474 73.445 80.866 75.6217 77.739C79.2026 75.469 83.5895 75.8841 87.6691 75.9199Z",fill:"#B0488C"}),C.jsx("path",{d:"M32.2341 37.4866C59.7575 37.4866 87.2809 37.4866 115.638 37.4866C115.638 42.9219 115.638 48.3572 115.638 53.9572C93.0298 53.9572 70.4213 53.9572 47.1277 53.9572C47.1277 64.5807 47.1277 75.2043 47.1277 86.1497C42.2128 86.1497 37.2979 86.1497 32.2341 86.1497C32.2341 70.0909 32.2341 54.0321 32.2341 37.4866Z",fill:"#B0488C"}),C.jsx("path",{d:"M32.2341 116.845C37.149 116.845 42.0639 116.845 47.1277 116.845C47.1277 127.221 47.1277 137.598 47.1277 148.289C71.7022 148.289 96.2766 148.289 121.596 148.289C121.596 153.23 121.596 158.171 121.596 163.262C92.1064 163.262 62.617 163.262 32.2341 163.262C32.2341 147.944 32.2341 132.627 32.2341 116.845Z",fill:"#B0488C"}),C.jsx("path",{d:"M161.814 34.6792C165.577 37.5618 167.934 41.1653 169.255 45.7219C170.002 51.7878 170.244 57.7758 166.678 63.0231C166.3 63.4902 165.921 63.9573 165.532 64.4385C164.964 65.1623 164.964 65.1623 164.386 65.9007C160.694 70.0863 156.304 72.2018 150.81 72.9575C144.443 73.235 139.791 71.2772 134.814 67.3864C130.268 63.0898 128.124 57.8507 127.879 51.6177C128.195 45.152 130.717 40.4865 135.049 35.7846C142.84 28.7908 153.315 29.3596 161.814 34.6792Z",fill:"#B0488C"}),C.jsx("path",{d:"M158.009 137.132C162.749 139.815 166.014 143.005 167.766 148.289C168.291 153.643 168.045 158.108 164.787 162.513C160.978 166.779 156.65 168.925 151.011 169.532C144.592 168.841 140.292 166.139 136.21 161.062C134.084 157.002 134.439 151.969 135 147.54C136.243 144.421 137.612 142.39 140.167 140.241C140.665 139.812 141.163 139.383 141.676 138.942C146.467 135.355 152.423 135.005 158.009 137.132Z",fill:"#B0488C"}),C.jsx("path",{d:"M149.894 85.4011C154.809 85.4011 159.723 85.4011 164.787 85.4011C164.787 96.0246 164.787 106.648 164.787 117.594C159.872 117.594 154.957 117.594 149.894 117.594C149.894 106.97 149.894 96.3465 149.894 85.4011Z",fill:"#B0488C"}),C.jsx("path",{d:"M40.3383 94.0136C43.3122 94.7142 44.8713 96.3632 46.6623 98.7366C47.3967 101.321 47.103 103.037 46.383 105.615C44.2412 107.919 42.6152 109.128 39.6343 110.107C36.957 110.107 35.8402 109.471 33.7234 107.861C33.2934 107.567 32.8633 107.274 32.4203 106.972C30.8391 104.667 30.4332 102.35 30.7447 99.6257C32.7702 95.2399 35.5991 93.6206 40.3383 94.0136Z",fill:"#B0488C"})]}),C.jsx("defs",{children:C.jsx("clipPath",{id:"clip0_31_12",children:C.jsx("rect",{width:"140",height:"140",fill:"white",transform:"translate(30 30)"})})})]}),Yl=({files:r})=>C.jsx(C.Fragment,{children:r.map(e=>C.jsx("div",{className:"thumbnail m-2",children:C.jsx("div",{className:"thumbnailInner",children:C.jsx("img",{src:e.preview,alt:e.name,className:"w-[150px]"})})},e.name))}),Wl=({files:r,setFiles:e})=>{const t=x.useCallback(i=>{e(a=>[...a,...i.map(u=>Object.assign(u,{preview:URL.createObjectURL(u)}))])},[]),{getRootProps:n,getInputProps:s}=ai({onDrop:t}),o=i=>()=>{const a=r.filter(u=>u!==i);e(a)};return C.jsxs("div",{className:"flex flex-col w-[100%] dropzone border",children:[C.jsxs("div",{...n(),className:"flex items-center justify-center p-4 border-2 border-dashed border-gray-400 rounded-lg cursor-pointer hover:border-gray-500",children:[C.jsx("input",{...s()}),C.jsx("p",{className:"text-gray-600",children:"Drag & drop images, or click to select files"})]}),C.jsx("aside",{className:"flex flex-wrap mt-4",children:r.map(i=>C.jsxs("div",{className:"relative m-2",children:[C.jsx("button",{onClick:o(i),className:"absolute top-0 right-0 p-1 bg-red-500 rounded-full text-white",children:C.jsx(ql,{className:"w-4 h-4"})}),C.jsx("div",{className:"border p-1 rounded-lg",children:C.jsx("img",{src:i.preview,alt:i.name,className:"w-12 h-12 object-cover rounded-lg"})})]},i.name))})]})};function Ql(r){var S,v;const e=r.advancedOptions||{},t=e.conversationOptions||{layout:"bubbles"},[n,s]=x.useState([]),o=$c({...r,files:n}),{controls:i}=r,[a,u]=x.useState(new Map),l=(y,E)=>{u(w=>new Map(w.set(y,E)))},c=({prompt:y,uid:E})=>{const w=a.get(E);return C.jsxs("div",{className:"rounded-lg shadow-sm",children:[C.jsx("span",{className:"block",children:y}),C.jsx("div",{className:"mt-2",children:w&&C.jsx(Yl,{files:w})})]})},d=Object.assign({},{colorScheme:"light",themeId:"langdb"},e.displayOptions),p=e.composerOptions||{placeholder:"How can i help you today ?"},h=Object.assign({},{assistant:Object.assign({},(S=r.personaOptions)==null?void 0:S.assistant,{name:"LangDB",tagline:`
              Easily build and deploy AI agents with SQL.
              Customize with our React widget on`,avatar:C.jsx(Ul,{})}),user:Object.assign({},(v=r.personaOptions)==null?void 0:v.user,{name:"User",avatar:C.jsx(Pc,{})})}),m=x.useCallback(y=>{n&&(l(y.uid,[...n]),s([]))},[l]),f=x.useCallback(()=>{},[]),b=r.className||"";return C.jsxs("div",{className:"flex flex-col w-[100%] h-full",children:[(i==null?void 0:i.enableFiles)&&C.jsx(Wl,{files:n,setFiles:s}),C.jsx("div",{className:"flex-1 w-full relative",children:C.jsx("main",{className:`items-center justify-between  ${b} h-full absolute`,style:r.style||{},children:C.jsx(xc,{adapter:o,initialConversation:r.messages,events:{messageSent:m,messageStreamStarted:f},messageOptions:{promptRenderer:c},personaOptions:h,conversationOptions:t,displayOptions:d,composerOptions:p,...e})})})]})}function Qn(...r){return r.filter(Boolean).join(" ")}const Xl=r=>{const{onMinimize:e,onMaximize:t,btnClassName:n,theme:s,children:o,title:i,maximizedPanelClassName:a,maximizedPanelStyle:u,showFullScreen:l,controls:c}=r,[d,p]=x.useState(!1),[h,m]=x.useState(l||!1),f=x.useCallback(()=>{p(b=>!b)},[]);return C.jsxs("div",{className:Qn(s||"dark"),children:[d&&C.jsxs("div",{style:h?u:{},className:Qn("light:text-slate-900 dark:text-white flex flex-1 bg-white dark:bg-black flex-col absolute p-[10px] pt-[0px]",h?a||"h-full w-full bottom-0 right-0":"rounded border shadow-md h-[60vh] w-[40vw] min-h-[500px] bottom-16 right-16"),children:[C.jsxs("div",{className:"border-b py-[5px] flex justify-center items-center",style:{zIndex:"99999"},children:[C.jsxs("div",{className:"flex gap-2",children:[C.jsx("button",{onClick:()=>{p(!1),e&&e()},children:C.jsx(Zl,{})}),!(c!=null&&c.hideMaximise)&&C.jsx("button",{onClick:()=>{m(b=>!b),t&&t()},children:h?C.jsx(Gl,{}):C.jsx(Kl,{})})]}),C.jsx("div",{className:"flex flex-1 justify-center",children:i})]}),C.jsx("div",{className:"flex flex-1 overflow-scroll ",children:o})]}),!d&&C.jsx("button",{className:Qn(n||"","fixed text-white bg-primary hover:bg-primary-800 bottom-5 right-5 flex w-[50px] hover:scale-110 scale-100 h-[50px] justify-center items-center p-[10px] rounded-full cursor-pointer shadow-none hover:shadow-xl transition ease-in-out"),onClick:f,children:C.jsx(ci,{})})]})},ci=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-6",children:C.jsx("path",{strokeLinecap:"round","stroke-linejoin":"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"})}),Zl=()=>C.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{d:"M19 13H5v-2h14v2z"})}),Kl=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-6",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8.25V18a2.25 2.25 0 0 0 2.25 2.25h13.5A2.25 2.25 0 0 0 21 18V8.25m-18 0V6a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 6v2.25m-18 0h18M5.25 6h.008v.008H5.25V6ZM7.5 6h.008v.008H7.5V6Zm2.25 0h.008v.008H9.75V6Z"})}),Gl=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9V4.5M9 9H4.5M9 9 3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5 5.25 5.25"})});exports.ChatIcon=ci;exports.FloatingChatWidget=Xl;exports.ImageDetail=Qo;exports.MessageContentType=Yo;exports.MessageType=Wo;exports.Widget=Ql;exports.createInnerMessage=Xo;
//# sourceMappingURL=index.cjs.js.map
