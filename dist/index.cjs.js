"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const g=require("react");function Pi(r){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(r){for(const t in r)if(t!=="default"){const n=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:()=>r[t]})}}return e.default=r,Object.freeze(e)}const Me=Pi(g);function Ri(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Kn={exports:{}},Et={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qr;function Oi(){if(Qr)return Et;Qr=1;var r=g,e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function i(a,u,l){var c,d={},p=null,h=null;l!==void 0&&(p=""+l),u.key!==void 0&&(p=""+u.key),u.ref!==void 0&&(h=u.ref);for(c in u)n.call(u,c)&&!o.hasOwnProperty(c)&&(d[c]=u[c]);if(a&&a.defaultProps)for(c in u=a.defaultProps,u)d[c]===void 0&&(d[c]=u[c]);return{$$typeof:e,type:a,key:p,ref:h,props:d,_owner:s.current}}return Et.Fragment=t,Et.jsx=i,Et.jsxs=i,Et}var Tt={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zr;function Di(){return Zr||(Zr=1,process.env.NODE_ENV!=="production"&&function(){var r=g,e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),h=Symbol.for("react.offscreen"),m=Symbol.iterator,v="@@iterator";function w(f){if(f===null||typeof f!="object")return null;var T=m&&f[m]||f[v];return typeof T=="function"?T:null}var C=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function b(f){{for(var T=arguments.length,F=new Array(T>1?T-1:0),X=1;X<T;X++)F[X-1]=arguments[X];x("error",f,F)}}function x(f,T,F){{var X=C.ReactDebugCurrentFrame,pe=X.getStackAddendum();pe!==""&&(T+="%s",F=F.concat([pe]));var ve=F.map(function(ie){return String(ie)});ve.unshift("Warning: "+T),Function.prototype.apply.call(console[f],console,ve)}}var E=!1,k=!1,O=!1,L=!1,H=!1,I;I=Symbol.for("react.module.reference");function P(f){return!!(typeof f=="string"||typeof f=="function"||f===n||f===o||H||f===s||f===l||f===c||L||f===h||E||k||O||typeof f=="object"&&f!==null&&(f.$$typeof===p||f.$$typeof===d||f.$$typeof===i||f.$$typeof===a||f.$$typeof===u||f.$$typeof===I||f.getModuleId!==void 0))}function q(f,T,F){var X=f.displayName;if(X)return X;var pe=T.displayName||T.name||"";return pe!==""?F+"("+pe+")":F}function M(f){return f.displayName||"Context"}function $(f){if(f==null)return null;if(typeof f.tag=="number"&&b("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case n:return"Fragment";case t:return"Portal";case o:return"Profiler";case s:return"StrictMode";case l:return"Suspense";case c:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case a:var T=f;return M(T)+".Consumer";case i:var F=f;return M(F._context)+".Provider";case u:return q(f,f.render,"ForwardRef");case d:var X=f.displayName||null;return X!==null?X:$(f.type)||"Memo";case p:{var pe=f,ve=pe._payload,ie=pe._init;try{return $(ie(ve))}catch{return null}}}return null}var B=Object.assign,K=0,ne,se,ce,_,A,D,N;function W(){}W.__reactDisabledLog=!0;function Q(){{if(K===0){ne=console.log,se=console.info,ce=console.warn,_=console.error,A=console.group,D=console.groupCollapsed,N=console.groupEnd;var f={configurable:!0,enumerable:!0,value:W,writable:!0};Object.defineProperties(console,{info:f,log:f,warn:f,error:f,group:f,groupCollapsed:f,groupEnd:f})}K++}}function te(){{if(K--,K===0){var f={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:B({},f,{value:ne}),info:B({},f,{value:se}),warn:B({},f,{value:ce}),error:B({},f,{value:_}),group:B({},f,{value:A}),groupCollapsed:B({},f,{value:D}),groupEnd:B({},f,{value:N})})}K<0&&b("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Y=C.ReactCurrentDispatcher,G;function J(f,T,F){{if(G===void 0)try{throw Error()}catch(pe){var X=pe.stack.trim().match(/\n( *(at )?)/);G=X&&X[1]||""}return`
`+G+f}}var re=!1,V;{var we=typeof WeakMap=="function"?WeakMap:Map;V=new we}function j(f,T){if(!f||re)return"";{var F=V.get(f);if(F!==void 0)return F}var X;re=!0;var pe=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var ve;ve=Y.current,Y.current=null,Q();try{if(T){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(Be){X=Be}Reflect.construct(f,[],ie)}else{try{ie.call()}catch(Be){X=Be}f.call(ie.prototype)}}else{try{throw Error()}catch(Be){X=Be}f()}}catch(Be){if(Be&&X&&typeof Be.stack=="string"){for(var oe=Be.stack.split(`
`),je=X.stack.split(`
`),Ae=oe.length-1,Te=je.length-1;Ae>=1&&Te>=0&&oe[Ae]!==je[Te];)Te--;for(;Ae>=1&&Te>=0;Ae--,Te--)if(oe[Ae]!==je[Te]){if(Ae!==1||Te!==1)do if(Ae--,Te--,Te<0||oe[Ae]!==je[Te]){var He=`
`+oe[Ae].replace(" at new "," at ");return f.displayName&&He.includes("<anonymous>")&&(He=He.replace("<anonymous>",f.displayName)),typeof f=="function"&&V.set(f,He),He}while(Ae>=1&&Te>=0);break}}}finally{re=!1,Y.current=ve,te(),Error.prepareStackTrace=pe}var pt=f?f.displayName||f.name:"",nt=pt?J(pt):"";return typeof f=="function"&&V.set(f,nt),nt}function Pe(f,T,F){return j(f,!1)}function Fe(f){var T=f.prototype;return!!(T&&T.isReactComponent)}function Le(f,T,F){if(f==null)return"";if(typeof f=="function")return j(f,Fe(f));if(typeof f=="string")return J(f);switch(f){case l:return J("Suspense");case c:return J("SuspenseList")}if(typeof f=="object")switch(f.$$typeof){case u:return Pe(f.render);case d:return Le(f.type,T,F);case p:{var X=f,pe=X._payload,ve=X._init;try{return Le(ve(pe),T,F)}catch{}}}return""}var S=Object.prototype.hasOwnProperty,z={},Z=C.ReactDebugCurrentFrame;function ae(f){if(f){var T=f._owner,F=Le(f.type,f._source,T?T.type:null);Z.setExtraStackFrame(F)}else Z.setExtraStackFrame(null)}function be(f,T,F,X,pe){{var ve=Function.call.bind(S);for(var ie in f)if(ve(f,ie)){var oe=void 0;try{if(typeof f[ie]!="function"){var je=Error((X||"React class")+": "+F+" type `"+ie+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof f[ie]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw je.name="Invariant Violation",je}oe=f[ie](T,ie,X,F,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(Ae){oe=Ae}oe&&!(oe instanceof Error)&&(ae(pe),b("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",X||"React class",F,ie,typeof oe),ae(null)),oe instanceof Error&&!(oe.message in z)&&(z[oe.message]=!0,ae(pe),b("Failed %s type: %s",F,oe.message),ae(null))}}}var xe=Array.isArray;function le(f){return xe(f)}function Ee(f){{var T=typeof Symbol=="function"&&Symbol.toStringTag,F=T&&f[Symbol.toStringTag]||f.constructor.name||"Object";return F}}function R(f){try{return U(f),!1}catch{return!0}}function U(f){return""+f}function de(f){if(R(f))return b("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Ee(f)),U(f)}var ue=C.ReactCurrentOwner,Ie={key:!0,ref:!0,__self:!0,__source:!0},_e,Xe,tt;tt={};function bt(f){if(S.call(f,"ref")){var T=Object.getOwnPropertyDescriptor(f,"ref").get;if(T&&T.isReactWarning)return!1}return f.ref!==void 0}function xt(f){if(S.call(f,"key")){var T=Object.getOwnPropertyDescriptor(f,"key").get;if(T&&T.isReactWarning)return!1}return f.key!==void 0}function ut(f,T){if(typeof f.ref=="string"&&ue.current&&T&&ue.current.stateNode!==T){var F=$(ue.current.type);tt[F]||(b('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',$(ue.current.type),f.ref),tt[F]=!0)}}function wt(f,T){{var F=function(){_e||(_e=!0,b("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",T))};F.isReactWarning=!0,Object.defineProperty(f,"key",{get:F,configurable:!0})}}function kt(f,T){{var F=function(){Xe||(Xe=!0,b("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",T))};F.isReactWarning=!0,Object.defineProperty(f,"ref",{get:F,configurable:!0})}}var Ct=function(f,T,F,X,pe,ve,ie){var oe={$$typeof:e,type:f,key:T,ref:F,props:ie,_owner:ve};return oe._store={},Object.defineProperty(oe._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(oe,"_self",{configurable:!1,enumerable:!1,writable:!1,value:X}),Object.defineProperty(oe,"_source",{configurable:!1,enumerable:!1,writable:!1,value:pe}),Object.freeze&&(Object.freeze(oe.props),Object.freeze(oe)),oe};function St(f,T,F,X,pe){{var ve,ie={},oe=null,je=null;F!==void 0&&(de(F),oe=""+F),xt(T)&&(de(T.key),oe=""+T.key),bt(T)&&(je=T.ref,ut(T,pe));for(ve in T)S.call(T,ve)&&!Ie.hasOwnProperty(ve)&&(ie[ve]=T[ve]);if(f&&f.defaultProps){var Ae=f.defaultProps;for(ve in Ae)ie[ve]===void 0&&(ie[ve]=Ae[ve])}if(oe||je){var Te=typeof f=="function"?f.displayName||f.name||"Unknown":f;oe&&wt(ie,Te),je&&kt(ie,Te)}return Ct(f,oe,je,pe,X,ue.current,ie)}}var At=C.ReactCurrentOwner,Hr=C.ReactDebugCurrentFrame;function dt(f){if(f){var T=f._owner,F=Le(f.type,f._source,T?T.type:null);Hr.setExtraStackFrame(F)}else Hr.setExtraStackFrame(null)}var On;On=!1;function Dn(f){return typeof f=="object"&&f!==null&&f.$$typeof===e}function Nr(){{if(At.current){var f=$(At.current.type);if(f)return`

Check the render method of \``+f+"`."}return""}}function bi(f){return""}var _r={};function xi(f){{var T=Nr();if(!T){var F=typeof f=="string"?f:f.displayName||f.name;F&&(T=`

Check the top-level render call using <`+F+">.")}return T}}function Ur(f,T){{if(!f._store||f._store.validated||f.key!=null)return;f._store.validated=!0;var F=xi(T);if(_r[F])return;_r[F]=!0;var X="";f&&f._owner&&f._owner!==At.current&&(X=" It was passed a child from "+$(f._owner.type)+"."),dt(f),b('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',F,X),dt(null)}}function qr(f,T){{if(typeof f!="object")return;if(le(f))for(var F=0;F<f.length;F++){var X=f[F];Dn(X)&&Ur(X,T)}else if(Dn(f))f._store&&(f._store.validated=!0);else if(f){var pe=w(f);if(typeof pe=="function"&&pe!==f.entries)for(var ve=pe.call(f),ie;!(ie=ve.next()).done;)Dn(ie.value)&&Ur(ie.value,T)}}}function wi(f){{var T=f.type;if(T==null||typeof T=="string")return;var F;if(typeof T=="function")F=T.propTypes;else if(typeof T=="object"&&(T.$$typeof===u||T.$$typeof===d))F=T.propTypes;else return;if(F){var X=$(T);be(F,f.props,"prop",X,f)}else if(T.PropTypes!==void 0&&!On){On=!0;var pe=$(T);b("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",pe||"Unknown")}typeof T.getDefaultProps=="function"&&!T.getDefaultProps.isReactClassApproved&&b("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function ki(f){{for(var T=Object.keys(f.props),F=0;F<T.length;F++){var X=T[F];if(X!=="children"&&X!=="key"){dt(f),b("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",X),dt(null);break}}f.ref!==null&&(dt(f),b("Invalid attribute `ref` supplied to `React.Fragment`."),dt(null))}}var Wr={};function Yr(f,T,F,X,pe,ve){{var ie=P(f);if(!ie){var oe="";(f===void 0||typeof f=="object"&&f!==null&&Object.keys(f).length===0)&&(oe+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var je=bi();je?oe+=je:oe+=Nr();var Ae;f===null?Ae="null":le(f)?Ae="array":f!==void 0&&f.$$typeof===e?(Ae="<"+($(f.type)||"Unknown")+" />",oe=" Did you accidentally export a JSX literal instead of a component?"):Ae=typeof f,b("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",Ae,oe)}var Te=St(f,T,F,pe,ve);if(Te==null)return Te;if(ie){var He=T.children;if(He!==void 0)if(X)if(le(He)){for(var pt=0;pt<He.length;pt++)qr(He[pt],f);Object.freeze&&Object.freeze(He)}else b("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else qr(He,f)}if(S.call(T,"key")){var nt=$(f),Be=Object.keys(T).filter(function(Ii){return Ii!=="key"}),Mn=Be.length>0?"{key: someKey, "+Be.join(": ..., ")+": ...}":"{key: someKey}";if(!Wr[nt+Mn]){var Ti=Be.length>0?"{"+Be.join(": ..., ")+": ...}":"{}";b(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,Mn,nt,Ti,nt),Wr[nt+Mn]=!0}}return f===n?ki(Te):wi(Te),Te}}function Ci(f,T,F){return Yr(f,T,F,!0)}function Si(f,T,F){return Yr(f,T,F,!1)}var Ai=Si,Ei=Ci;Tt.Fragment=n,Tt.jsx=Ai,Tt.jsxs=Ei}()),Tt}process.env.NODE_ENV==="production"?Kn.exports=Oi():Kn.exports=Di();var y=Kn.exports,Mi=Object.defineProperty,Xt=(r,e,t)=>((n,s,o)=>s in n?Mi(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,typeof e!="symbol"?e+"":e,t);class Ve extends Error{constructor(e={}){super(e.message),Xt(this,"exceptionId"),Xt(this,"message"),Xt(this,"source"),Xt(this,"type"),this.message=e.message??"",this.source=e.source,this.type=this.constructor.name,this.exceptionId=e.exceptionId}}class rt extends Ve{}class fn extends Ve{}const ee=r=>{typeof r!="string"?r&&typeof r.toString=="function"?console.warn(`[nlux] ${r.toString()}`):console.warn("[nlux]"):console.warn(`[nlux] ${r}`)},Xr=[],Gn=r=>{Xr.includes(r)||(Xr.push(r),ee(r))},io=class pn{static register(e){const t=e.__compId;t?pn.componentDefs.get(t)===void 0&&(e.__renderer&&e.__updater?pn.componentDefs.set(t,{id:t,model:e,render:e.__renderer,update:e.__updater}):ee(`Component with id "${t}" missing renderer or updater`)):ee("Component definition missing valid id")}static retrieve(e){const t=pn.componentDefs.get(e);if(t)return t;ee(`Component with id "${e}" not registered`)}};io.componentDefs=new Map;let ao=io;btoa("sectionsRegistered")+"";const Ze=r=>{const e=requestAnimationFrame(()=>{r()});return()=>{cancelAnimationFrame(e)}},Nt=r=>{r.replaceChildren()},Ue=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const e=16*Math.random()|0;return(r=="x"?e:3&e|8).toString(16)});class Ne{constructor(e,t){this.subComponentElementIds=new Map,this.subComponents=new Map,this.__context=null,this.__destroyed=!1,this.__status="unmounted",this.actionsOnDomReady=[],this.compEventGetter=i=>{if(this.destroyed)return()=>{};const a=this.rendererEventListeners.get(i);if(!a)throw new Ve({source:this.constructor.name,message:`Unable to call renderer event "${i}" because no matching event listener was found. Make sure that the event listener is registered using @CompEventListener() decorator in the component model class, and use class methods instead of arrow function attributes.`});return a};const n=Object.getPrototypeOf(this).constructor.__compId;if(!n)throw new rt({source:this.constructor.name,message:"Unable to instantiate component: missing compId in implementation. Component should be annotated using @Model() to set compId before iy can be instantiated."});if(this.def=ao.retrieve(n)??null,!this.def)throw new rt({source:this.constructor.name,message:`Unable to instantiate component "${n}" because it's not registered. Component should be registered using CompRegistry.register(ComponentClass) before instantiating a component.`});this.__instanceId=Ue(),this.__destroyed=!1,this.__context=e,this.renderedDom=null,this.renderingRoot=null,this.props=t;const s=t?Object.entries(t):[];this.elementProps=new Map(s),this.rendererEventListeners=new Map;const o=this.constructor.__compEventListeners;o&&o.forEach((i,a)=>{i.forEach(u=>{const l=Object.getPrototypeOf(this)[u];typeof l=="function"?this.addRendererEventListener(a,l.bind(this)):ee(`Unable to set event listener "${a}" because method "${u}" cannot be found on component "${this.constructor.name} at runtime!"`)})}),this.rendererProps=Object.freeze(t)}get destroyed(){return this.__destroyed}get id(){return this.__instanceId}get rendered(){return this.renderedDom!==null}get root(){return this.throwIfDestroyed(),this.renderedDom&&this.renderingRoot?this.renderingRoot:null}get status(){return this.__status}get context(){if(!this.__context)throw new rt({source:this.constructor.name,message:"Unable to get context because it's not set"});return this.__context}destroy(){this.destroyComponent()}destroyListItemComponent(){this.destroyComponent(!0)}getProp(e){return this.throwIfDestroyed(),this.elementProps.get(e)??null}render(e,t){var i;if(!this.def)return;if(this.destroyed)return void ee(`Unable to render component "${(i=this.def)==null?void 0:i.id}" because it is already destroyed`);if(this.rendered||this.renderedDom)return void ee(`Unable to render component "${this.def.id}" because it is already rendered`);const n=document.createDocumentFragment(),s=Object.getPrototypeOf(this).constructor.__compId,o=this.executeRenderer(n);if(!o)throw new Ve({source:this.constructor.name,message:`Unable to render component "${s}" because renderer returned null`});this.renderedDom=o;for(const[,a]of this.subComponents){const u=this.getSubComponentPortal(a.id);u&&this.mountSubComponentToPortal(a.id,u)}Ze(()=>{this.destroyed||(t?e.insertBefore(n,t):e.append(n),this.renderingRoot=e)})}updateSubComponent(e,t,n){this.throwIfDestroyed();const s=this.subComponents.get(e);s&&!s.destroyed&&s.setProp(t,n)}addSubComponent(e,t,n){if(this.throwIfDestroyed(),this.subComponents.has(e))throw new rt({source:this.constructor.name,message:`Unable to add sub-component "${e}" because it already exists`});if(this.subComponents.set(e,t),n&&this.subComponentElementIds.set(e,n),this.renderedDom){const s=this.getSubComponentPortal(e);s&&this.mountSubComponentToPortal(e,s)}}executeDomAction(e,...t){if(this.throwIfDestroyed(),!this.renderedDom)return void this.actionsOnDomReady.push(()=>this.executeDomAction(e,...t));if(!this.renderingRoot)throw new Ve({source:this.constructor.name,message:"Unable to execute DOM action because renderingRoot is not set"});const n=this.renderedDom.actions[e];if(!n)throw new Ve({source:this.constructor.name,message:`Unable to execute DOM action "${String(e)}" because it does not exist`});return Ze(()=>n(...t))}executeRenderer(e){var s;const t=(s=this.def)==null?void 0:s.render;if(!t)return null;if(this.renderingRoot)throw new Ve({source:this.constructor.name,message:"Unable to render component because renderingRoot is already set"});const n=t({appendToRoot:o=>{e.append(o),this.runDomActionsQueue()},compEvent:this.compEventGetter,props:this.rendererProps,context:this.context});return n&&(this.renderingRoot=e),n}removeSubComponent(e){this.throwIfDestroyed(),Ze(()=>{const t=this.subComponents.get(e);t&&(t.renderingRoot=null,t.destroy(),this.subComponents.delete(e))})}runDomActionsQueue(){if(this.actionsOnDomReady.length>0&&this.rendered){const e=this.actionsOnDomReady;this.actionsOnDomReady=[];for(const t of e)Ze(()=>t())}}setProp(e,t){this.destroyed?ee(`Unable to set prop "${String(e)}" because component "${this.constructor.name}" is destroyed`):this.elementProps.has(e)?(this.schedulePropUpdate(e,this.elementProps.get(e),t),this.props=Object.freeze(Object.fromEntries(this.elementProps)),this.elementProps.set(e,t)):ee(`Unable to set prop "${String(e)}" because it does not exist in the component props`)}throwIfDestroyed(){if(this.__destroyed)throw new rt({source:this.constructor.name,message:"Unable to call method on destroyed component"})}addRendererEventListener(e,t){if(this.throwIfDestroyed(),this.rendererEventListeners.has(e))throw new rt({source:this.constructor.name,message:`Unable to add event listener to rendererEvents "${e}" because it already exists`});this.rendererEventListeners.set(e,t)}destroyComponent(e=!1){if(this.throwIfDestroyed(),this.subComponents.forEach(t=>{t.destroy()}),this.renderedDom){this.renderedDom.elements&&(this.renderedDom.elements=void 0),this.renderedDom.actions&&(this.renderedDom.actions=void 0),this.renderedDom.onDestroy&&this.renderedDom.onDestroy();const t=this.renderingRoot;Ze(()=>{var n;if(t)if(t instanceof DocumentFragment)for(;t.firstChild;)t.removeChild(t.firstChild);else e?(n=t.parentElement)==null||n.removeChild(t):Nt(t)}),this.renderedDom=null,this.renderingRoot=null}this.__destroyed=!0,this.__context=null,this.props=void 0,this.elementProps.clear(),this.rendererEventListeners.clear(),this.subComponents.clear()}getSubComponentPortal(e){var o;const t=this.subComponents.get(e),n=this.subComponentElementIds.get(e);if(!t||!n)return null;const s=((o=this.renderedDom)==null?void 0:o.elements)[n];return s instanceof HTMLElement?s:null}mountSubComponentToPortal(e,t){const n=this.subComponents.get(e);n==null||n.render(t)}schedulePropUpdate(e,t,n){var a;if(!this.renderedDom||!((a=this.def)!=null&&a.update))return;const s=this.renderedDom,o=this.renderingRoot,i=this.def.update;o&&Ze(()=>{i({propName:e,currentValue:t,newValue:n,dom:{root:o,elements:s.elements,actions:s.actions},updateSubComponent:this.updateSubComponent})})}}Ne.__compEventListeners=null,Ne.__compId=null,Ne.__renderer=null,Ne.__updater=null;const et=(r,e,t)=>n=>{n.__compId=r,n.__renderer=e,n.__updater=t},qe=r=>(e,t)=>{const n=e;if(typeof n.constructor!="function")throw new rt({source:"CallbackFor",message:"@CallbackFor can only be used on methods of a class!"});n.constructor.hasOwnProperty("__compEventListeners")&&n.constructor.__compEventListeners!==null||(n.constructor.__compEventListeners=new Map);const s=n.constructor.__compEventListeners,o=s.get(r);o?o.push(t):s.set(r,[t])};function ji(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let ct={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function Kr(r){ct=r}var Bi=Object.defineProperty,co=(r,e,t)=>((n,s,o)=>s in n?Bi(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,typeof e!="symbol"?e+"":e,t);let jt=class{constructor(e){co(this,"options"),this.options=e||ct}postprocess(e){return e}preprocess(e){return e}processAllTokens(e){return e}};co(jt,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));const lo=/[&<>"']/,Li=new RegExp(lo.source,"g"),uo=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,zi=new RegExp(uo.source,"g"),$i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Gr=r=>$i[r];function ze(r,e){if(e){if(lo.test(r))return r.replace(Li,Gr)}else if(uo.test(r))return r.replace(zi,Gr);return r}const Fi=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function Hi(r){return r.replace(Fi,(e,t)=>(t=t.toLowerCase())==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):"")}const Ni=/(^|[^\[])\^/g;function fe(r,e){let t=typeof r=="string"?r:r.source;e=e||"";const n={replace:(s,o)=>{let i=typeof o=="string"?o:o.source;return i=i.replace(Ni,"$1"),t=t.replace(s,i),n},getRegex:()=>new RegExp(t,e)};return n}function Jr(r){try{r=encodeURI(r).replace(/%25/g,"%")}catch{return null}return r}const Bt={exec:()=>null};function Vr(r,e){const t=r.replace(/\|/g,(s,o,i)=>{let a=!1,u=o;for(;--u>=0&&i[u]==="\\";)a=!a;return a?"|":" |"}).split(/ \|/);let n=0;if(t[0].trim()||t.shift(),t.length>0&&!t[t.length-1].trim()&&t.pop(),e)if(t.length>e)t.splice(e);else for(;t.length<e;)t.push("");for(;n<t.length;n++)t[n]=t[n].trim().replace(/\\\|/g,"|");return t}function Kt(r,e,t){const n=r.length;if(n===0)return"";let s=0;for(;s<n;){const o=r.charAt(n-s-1);if(o!==e||t){if(o===e||!t)break;s++}else s++}return r.slice(0,n-s)}const qt=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,po=/(?:[*+-]|\d{1,9}[.)])/,ho=fe(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,po).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),Sr=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Ar=/(?!\s*\])(?:\\.|[^\[\]\\])+/,_i=fe(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",Ar).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Ui=fe(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,po).getRegex(),Pn="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Er=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,qi=fe("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",Er).replace("tag",Pn).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),es=fe(Sr).replace("hr",qt).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Pn).getRegex(),Tr={blockquote:fe(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",es).getRegex(),code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,def:_i,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:qt,html:qi,lheading:ho,list:Ui,newline:/^(?: *(?:\n|$))+/,paragraph:es,table:Bt,text:/^[^\n]+/},ts=fe("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",qt).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Pn).getRegex(),Wi={...Tr,table:ts,paragraph:fe(Sr).replace("hr",qt).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",ts).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Pn).getRegex()},Yi={...Tr,html:fe(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Er).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Bt,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:fe(Sr).replace("hr",qt).replace("heading",` *#{1,6} *[^
]`).replace("lheading",ho).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},mo=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,fo=/^( {2,}|\\)\n(?!\s*$)/,Wt="\\p{P}\\p{S}",Qi=fe(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Wt).getRegex(),Zi=fe(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Wt).getRegex(),Xi=fe("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Wt).getRegex(),Ki=fe("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Wt).getRegex(),Gi=fe(/\\([punct])/,"gu").replace(/punct/g,Wt).getRegex(),Ji=fe(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Vi=fe(Er).replace("(?:-->|$)","-->").getRegex(),ea=fe("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Vi).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),gn=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,ta=fe(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",gn).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),ns=fe(/^!?\[(label)\]\[(ref)\]/).replace("label",gn).replace("ref",Ar).getRegex(),rs=fe(/^!?\[(ref)\](?:\[\])?/).replace("ref",Ar).getRegex(),Ir={_backpedal:Bt,anyPunctuation:Gi,autolink:Ji,blockSkip:/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,br:fo,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:Bt,emStrongLDelim:Zi,emStrongRDelimAst:Xi,emStrongRDelimUnd:Ki,escape:mo,link:ta,nolink:rs,punctuation:Qi,reflink:ns,reflinkSearch:fe("reflink|nolink(?!\\()","g").replace("reflink",ns).replace("nolink",rs).getRegex(),tag:ea,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:Bt},na={...Ir,link:fe(/^!?\[(label)\]\((.*?)\)/).replace("label",gn).getRegex(),reflink:fe(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",gn).getRegex()},Jn={...Ir,escape:fe(mo).replace("])","~|])").getRegex(),url:fe(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},ra={...Jn,br:fe(fo).replace("{2,}","*").getRegex(),text:fe(Jn.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Gt={normal:Tr,gfm:Wi,pedantic:Yi},It={normal:Ir,gfm:Jn,breaks:ra,pedantic:na};var sa=Object.defineProperty,jn=(r,e,t)=>((n,s,o)=>s in n?sa(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,typeof e!="symbol"?e+"":e,t);function ss(r,e,t,n){const s=e.href,o=e.title?ze(e.title):null,i=r[1].replace(/\\([\[\]])/g,"$1");if(r[0].charAt(0)!=="!"){n.state.inLink=!0;const a={type:"link",raw:t,href:s,title:o,text:i,tokens:n.inlineTokens(i)};return n.state.inLink=!1,a}return{type:"image",raw:t,href:s,title:o,text:ze(i)}}let vn=class{constructor(e){jn(this,"lexer"),jn(this,"options"),jn(this,"rules"),this.options=e||ct}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let n,s;return t[2]==="@"?(n=ze(t[1]),s="mailto:"+n):(n=ze(t[1]),s=n),{type:"link",raw:t[0],text:n,href:s,tokens:[{type:"text",raw:n,text:n}]}}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let n=t[0].replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`);n=Kt(n.replace(/^ *>[ \t]?/gm,""),`
`);const s=this.lexer.state.top;this.lexer.state.top=!0;const o=this.lexer.blockTokens(n);return this.lexer.state.top=s,{type:"blockquote",raw:t[0],tokens:o,text:n}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const n=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Kt(n,`
`)}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(/\n/g," ");const s=/[^ ]/.test(n),o=/^ /.test(n)&&/ $/.test(n);return s&&o&&(n=n.substring(1,n.length-1)),n=ze(n,!0),{type:"codespan",raw:t[0],text:n}}}def(e){const t=this.rules.block.def.exec(e);if(t){const n=t[1].toLowerCase().replace(/\s+/g," "),s=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:s,title:o}}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}emStrong(e,t,n=""){let s=this.rules.inline.emStrongLDelim.exec(e);if(s&&!(s[3]&&n.match(/[\p{L}\p{N}]/u))&&(!(s[1]||s[2])||!n||this.rules.inline.punctuation.exec(n))){const o=[...s[0]].length-1;let i,a,u=o,l=0;const c=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,t=t.slice(-1*e.length+o);(s=c.exec(t))!=null;){if(i=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!i)continue;if(a=[...i].length,s[3]||s[4]){u+=a;continue}if((s[5]||s[6])&&o%3&&!((o+a)%3)){l+=a;continue}if(u-=a,u>0)continue;a=Math.min(a,a+u+l);const d=[...s[0]][0].length,p=e.slice(0,o+s.index+d+a);if(Math.min(o,a)%2){const m=p.slice(1,-1);return{type:"em",raw:p,text:m,tokens:this.lexer.inlineTokens(m)}}const h=p.slice(2,-2);return{type:"strong",raw:p,text:h,tokens:this.lexer.inlineTokens(h)}}}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:ze(t[1])}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const n=t[0],s=function(o,i){const a=o.match(/^(\s+)(?:```)/);if(a===null)return i;const u=a[1];return i.split(`
`).map(l=>{const c=l.match(/^\s+/);if(c===null)return l;const[d]=c;return d.length>=u.length?l.slice(u.length):l}).join(`
`)}(n,t[3]||"");return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:s}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(/#$/.test(n)){const s=Kt(n,"#");this.options.pedantic?n=s.trim():s&&!/ $/.test(s)||(n=s.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let n;return n=this.lexer.state.inRawBlock?t[0]:ze(t[0]),{type:"text",raw:t[0],text:n}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}link(e){const t=this.rules.inline.link.exec(e);if(t){const n=t[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;const i=Kt(n.slice(0,-1),"\\");if((n.length-i.length)%2==0)return}else{const i=function(a,u){if(a.indexOf(u[1])===-1)return-1;let l=0;for(let c=0;c<a.length;c++)if(a[c]==="\\")c++;else if(a[c]===u[0])l++;else if(a[c]===u[1]&&(l--,l<0))return c;return-1}(t[2],"()");if(i>-1){const a=(t[0].indexOf("!")===0?5:4)+t[1].length+i;t[2]=t[2].substring(0,i),t[0]=t[0].substring(0,a).trim(),t[3]=""}}let s=t[2],o="";if(this.options.pedantic){const i=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s);i&&(s=i[1],o=i[3])}else o=t[3]?t[3].slice(1,-1):"";return s=s.trim(),/^</.test(s)&&(s=this.options.pedantic&&!/>$/.test(n)?s.slice(1):s.slice(1,-1)),ss(t,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim();const s=n.length>1,o={type:"list",raw:"",ordered:s,start:s?+n.slice(0,-1):"",loose:!1,items:[]};n=s?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=s?n:"[*+-]");const i=new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`);let a="",u="",l=!1;for(;e;){let c=!1;if(!(t=i.exec(e))||this.rules.block.hr.test(e))break;a=t[0],e=e.substring(a.length);let d=t[2].split(`
`,1)[0].replace(/^\t+/,C=>" ".repeat(3*C.length)),p=e.split(`
`,1)[0],h=0;this.options.pedantic?(h=2,u=d.trimStart()):(h=t[2].search(/[^ ]/),h=h>4?1:h,u=d.slice(h),h+=t[1].length);let m=!1;if(!d&&/^ *$/.test(p)&&(a+=p+`
`,e=e.substring(p.length+1),c=!0),!c){const C=new RegExp(`^ {0,${Math.min(3,h-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),b=new RegExp(`^ {0,${Math.min(3,h-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),x=new RegExp(`^ {0,${Math.min(3,h-1)}}(?:\`\`\`|~~~)`),E=new RegExp(`^ {0,${Math.min(3,h-1)}}#`);for(;e;){const k=e.split(`
`,1)[0];if(p=k,this.options.pedantic&&(p=p.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),x.test(p)||E.test(p)||C.test(p)||b.test(e))break;if(p.search(/[^ ]/)>=h||!p.trim())u+=`
`+p.slice(h);else{if(m||d.search(/[^ ]/)>=4||x.test(d)||E.test(d)||b.test(d))break;u+=`
`+p}m||p.trim()||(m=!0),a+=k+`
`,e=e.substring(k.length+1),d=p.slice(h)}}o.loose||(l?o.loose=!0:/\n *\n *$/.test(a)&&(l=!0));let v,w=null;this.options.gfm&&(w=/^\[[ xX]\] /.exec(u),w&&(v=w[0]!=="[ ] ",u=u.replace(/^\[[ xX]\] +/,""))),o.items.push({type:"list_item",raw:a,task:!!w,checked:v,loose:!1,text:u,tokens:[]}),o.raw+=a}o.items[o.items.length-1].raw=a.trimEnd(),o.items[o.items.length-1].text=u.trimEnd(),o.raw=o.raw.trimEnd();for(let c=0;c<o.items.length;c++)if(this.lexer.state.top=!1,o.items[c].tokens=this.lexer.blockTokens(o.items[c].text,[]),!o.loose){const d=o.items[c].tokens.filter(h=>h.type==="space"),p=d.length>0&&d.some(h=>/\n.*\n/.test(h.raw));o.loose=p}if(o.loose)for(let c=0;c<o.items.length;c++)o.items[c].loose=!0;return o}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){const s=t[(n[2]||n[1]).replace(/\s+/g," ").toLowerCase()];if(!s){const o=n[0].charAt(0);return{type:"text",raw:o,text:o}}return ss(n,s,n[0],this.lexer)}}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}table(e){const t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;const n=Vr(t[1]),s=t[2].replace(/^\||\| *$/g,"").split("|"),o=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],i={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===s.length){for(const a of s)/^ *-+: *$/.test(a)?i.align.push("right"):/^ *:-+: *$/.test(a)?i.align.push("center"):/^ *:-+ *$/.test(a)?i.align.push("left"):i.align.push(null);for(const a of n)i.header.push({text:a,tokens:this.lexer.inline(a)});for(const a of o)i.rows.push(Vr(a,i.header.length).map(u=>({text:u,tokens:this.lexer.inline(u)})));return i}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}url(e){var n;let t;if(t=this.rules.inline.url.exec(e)){let s,o;if(t[2]==="@")s=ze(t[0]),o="mailto:"+s;else{let i;do i=t[0],t[0]=((n=this.rules.inline._backpedal.exec(t[0]))==null?void 0:n[0])??"";while(i!==t[0]);s=ze(t[0]),o=t[1]==="www."?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:s,href:o,tokens:[{type:"text",raw:s,text:s}]}}}};var oa=Object.defineProperty,Pt=(r,e,t)=>((n,s,o)=>s in n?oa(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,typeof e!="symbol"?e+"":e,t);let mt=class Vn{constructor(e){Pt(this,"options"),Pt(this,"state"),Pt(this,"tokens"),Pt(this,"inlineQueue"),Pt(this,"tokenizer"),this.tokens=[],this.tokens.links=Object.create(null),this.options=e||ct,this.options.tokenizer=this.options.tokenizer||new vn,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:Gt.normal,inline:It.normal};this.options.pedantic?(t.block=Gt.pedantic,t.inline=It.pedantic):this.options.gfm&&(t.block=Gt.gfm,this.options.breaks?t.inline=It.breaks:t.inline=It.gfm),this.tokenizer.rules=t}static get rules(){return{block:Gt,inline:It}}static lex(e,t){return new Vn(t).lex(e)}static lexInline(e,t){return new Vn(t).inlineTokens(e)}blockTokens(e,t=[]){let n,s,o,i;for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,(a,u,l)=>u+"    ".repeat(l.length));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>!!(n=a.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0))))if(n=this.tokenizer.space(e))e=e.substring(n.raw.length),n.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(n);else if(n=this.tokenizer.code(e))e=e.substring(n.raw.length),s=t[t.length-1],!s||s.type!=="paragraph"&&s.type!=="text"?t.push(n):(s.raw+=`
`+n.raw,s.text+=`
`+n.text,this.inlineQueue[this.inlineQueue.length-1].src=s.text);else if(n=this.tokenizer.fences(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.heading(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.hr(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.blockquote(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.list(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.html(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.def(e))e=e.substring(n.raw.length),s=t[t.length-1],!s||s.type!=="paragraph"&&s.type!=="text"?this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title}):(s.raw+=`
`+n.raw,s.text+=`
`+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=s.text);else if(n=this.tokenizer.table(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.lheading(e))e=e.substring(n.raw.length),t.push(n);else{if(o=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const u=e.slice(1);let l;this.options.extensions.startBlock.forEach(c=>{l=c.call({lexer:this},u),typeof l=="number"&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(o=e.substring(0,a+1))}if(this.state.top&&(n=this.tokenizer.paragraph(o)))s=t[t.length-1],i&&s.type==="paragraph"?(s.raw+=`
`+n.raw,s.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):t.push(n),i=o.length!==e.length,e=e.substring(n.raw.length);else if(n=this.tokenizer.text(e))e=e.substring(n.raw.length),s=t[t.length-1],s&&s.type==="text"?(s.raw+=`
`+n.raw,s.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):t.push(n);else if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n,s,o,i,a,u,l=e;if(this.tokens.links){const c=Object.keys(this.tokens.links);if(c.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(l))!=null;)c.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.blockSkip.exec(l))!=null;)l=l.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(l))!=null;)l=l.slice(0,i.index)+"++"+l.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(a||(u=""),a=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(c=>!!(n=c.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0))))if(n=this.tokenizer.escape(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.tag(e))e=e.substring(n.raw.length),s=t[t.length-1],s&&n.type==="text"&&s.type==="text"?(s.raw+=n.raw,s.text+=n.text):t.push(n);else if(n=this.tokenizer.link(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(n.raw.length),s=t[t.length-1],s&&n.type==="text"&&s.type==="text"?(s.raw+=n.raw,s.text+=n.text):t.push(n);else if(n=this.tokenizer.emStrong(e,l,u))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.codespan(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.br(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.del(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.autolink(e))e=e.substring(n.raw.length),t.push(n);else if(this.state.inLink||!(n=this.tokenizer.url(e))){if(o=e,this.options.extensions&&this.options.extensions.startInline){let c=1/0;const d=e.slice(1);let p;this.options.extensions.startInline.forEach(h=>{p=h.call({lexer:this},d),typeof p=="number"&&p>=0&&(c=Math.min(c,p))}),c<1/0&&c>=0&&(o=e.substring(0,c+1))}if(n=this.tokenizer.inlineText(o))e=e.substring(n.raw.length),n.raw.slice(-1)!=="_"&&(u=n.raw.slice(-1)),a=!0,s=t[t.length-1],s&&s.type==="text"?(s.raw+=n.raw,s.text+=n.text):t.push(n);else if(e){const c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}throw new Error(c)}}else e=e.substring(n.raw.length),t.push(n);return t}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const n=this.inlineQueue[t];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}};var ia=Object.defineProperty,aa=(r,e,t)=>((n,s,o)=>s in n?ia(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,e+"",t);let yn=class{constructor(e){aa(this,"options"),this.options=e||ct}blockquote(e){return`<blockquote>
${e}</blockquote>
`}br(){return"<br>"}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}code(e,t,n){var o;const s=(o=(t||"").match(/^\S*/))==null?void 0:o[0];return e=e.replace(/\n$/,"")+`
`,s?'<pre><code class="language-'+ze(s)+'">'+(n?e:ze(e,!0))+`</code></pre>
`:"<pre><code>"+(n?e:ze(e,!0))+`</code></pre>
`}codespan(e){return`<code>${e}</code>`}del(e){return`<del>${e}</del>`}em(e){return`<em>${e}</em>`}heading(e,t,n){return`<h${t}>${e}</h${t}>
`}hr(){return`<hr>
`}html(e,t){return e}image(e,t,n){const s=Jr(e);if(s===null)return n;let o=`<img src="${e=s}" alt="${n}"`;return t&&(o+=` title="${t}"`),o+=">",o}link(e,t,n){const s=Jr(e);if(s===null)return n;let o='<a href="'+(e=s)+'"';return t&&(o+=' title="'+t+'"'),o+=">"+n+"</a>",o}list(e,t,n){const s=t?"ol":"ul";return"<"+s+(t&&n!==1?' start="'+n+'"':"")+`>
`+e+"</"+s+`>
`}listitem(e,t,n){return`<li>${e}</li>
`}paragraph(e){return`<p>${e}</p>
`}strong(e){return`<strong>${e}</strong>`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablecell(e,t){const n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>
`}tablerow(e){return`<tr>
${e}</tr>
`}text(e){return e}},Pr=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,n){return""+n}image(e,t,n){return""+n}br(){return""}};var ca=Object.defineProperty,Bn=(r,e,t)=>((n,s,o)=>s in n?ca(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,typeof e!="symbol"?e+"":e,t);let ft=class er{constructor(e){Bn(this,"options"),Bn(this,"renderer"),Bn(this,"textRenderer"),this.options=e||ct,this.options.renderer=this.options.renderer||new yn,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Pr}static parse(e,t){return new er(t).parse(e)}static parseInline(e,t){return new er(t).parseInline(e)}parse(e,t=!0){let n="";for(let s=0;s<e.length;s++){const o=e[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]){const i=o,a=this.options.extensions.renderers[i.type].call({parser:this},i);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(i.type)){n+=a||"";continue}}switch(o.type){case"space":continue;case"hr":n+=this.renderer.hr();continue;case"heading":{const i=o;n+=this.renderer.heading(this.parseInline(i.tokens),i.depth,Hi(this.parseInline(i.tokens,this.textRenderer)));continue}case"code":{const i=o;n+=this.renderer.code(i.text,i.lang,!!i.escaped);continue}case"table":{const i=o;let a="",u="";for(let c=0;c<i.header.length;c++)u+=this.renderer.tablecell(this.parseInline(i.header[c].tokens),{header:!0,align:i.align[c]});a+=this.renderer.tablerow(u);let l="";for(let c=0;c<i.rows.length;c++){const d=i.rows[c];u="";for(let p=0;p<d.length;p++)u+=this.renderer.tablecell(this.parseInline(d[p].tokens),{header:!1,align:i.align[p]});l+=this.renderer.tablerow(u)}n+=this.renderer.table(a,l);continue}case"blockquote":{const i=o,a=this.parse(i.tokens);n+=this.renderer.blockquote(a);continue}case"list":{const i=o,a=i.ordered,u=i.start,l=i.loose;let c="";for(let d=0;d<i.items.length;d++){const p=i.items[d],h=p.checked,m=p.task;let v="";if(p.task){const w=this.renderer.checkbox(!!h);l?p.tokens.length>0&&p.tokens[0].type==="paragraph"?(p.tokens[0].text=w+" "+p.tokens[0].text,p.tokens[0].tokens&&p.tokens[0].tokens.length>0&&p.tokens[0].tokens[0].type==="text"&&(p.tokens[0].tokens[0].text=w+" "+p.tokens[0].tokens[0].text)):p.tokens.unshift({type:"text",text:w+" "}):v+=w+" "}v+=this.parse(p.tokens,l),c+=this.renderer.listitem(v,m,!!h)}n+=this.renderer.list(c,a,u);continue}case"html":{const i=o;n+=this.renderer.html(i.text,i.block);continue}case"paragraph":{const i=o;n+=this.renderer.paragraph(this.parseInline(i.tokens));continue}case"text":{let i=o,a=i.tokens?this.parseInline(i.tokens):i.text;for(;s+1<e.length&&e[s+1].type==="text";)i=e[++s],a+=`
`+(i.tokens?this.parseInline(i.tokens):i.text);n+=t?this.renderer.paragraph(a):a;continue}default:{const i='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(i),"";throw new Error(i)}}}return n}parseInline(e,t){t=t||this.renderer;let n="";for(let s=0;s<e.length;s++){const o=e[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]){const i=this.options.extensions.renderers[o.type].call({parser:this},o);if(i!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){n+=i||"";continue}}switch(o.type){case"escape":{const i=o;n+=t.text(i.text);break}case"html":{const i=o;n+=t.html(i.text);break}case"link":{const i=o;n+=t.link(i.href,i.title,this.parseInline(i.tokens,t));break}case"image":{const i=o;n+=t.image(i.href,i.title,i.text);break}case"strong":{const i=o;n+=t.strong(this.parseInline(i.tokens,t));break}case"em":{const i=o;n+=t.em(this.parseInline(i.tokens,t));break}case"codespan":{const i=o;n+=t.codespan(i.text);break}case"br":n+=t.br();break;case"del":{const i=o;n+=t.del(this.parseInline(i.tokens,t));break}case"text":{const i=o;n+=t.text(i.text);break}default:{const i='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(i),"";throw new Error(i)}}}return n}};var Lt,os,tr,la=Object.defineProperty,go=r=>{throw TypeError(r)},We=(r,e,t)=>((n,s,o)=>s in n?la(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,typeof e!="symbol"?e+"":e,t),nr=(r,e,t)=>(((n,s,o)=>{s.has(n)||go("Cannot "+o)})(r,e,"access private method"),t);Lt=new WeakSet,os=function(r,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,r){const n="<p>An error occurred:</p><pre>"+ze(t.message+"",!0)+"</pre>";return e?Promise.resolve(n):n}if(e)return Promise.reject(t);throw t}},tr=function(r,e){return(t,n)=>{const s={...n},o={...this.defaults,...s};this.defaults.async===!0&&s.async===!1&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);const i=nr(this,Lt,os).call(this,!!o.silent,!!o.async);if(t==null)return i(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(t):t).then(a=>r(a,o)).then(a=>o.hooks?o.hooks.processAllTokens(a):a).then(a=>o.walkTokens?Promise.all(this.walkTokens(a,o.walkTokens)).then(()=>a):a).then(a=>e(a,o)).then(a=>o.hooks?o.hooks.postprocess(a):a).catch(i);try{o.hooks&&(t=o.hooks.preprocess(t));let a=r(t,o);o.hooks&&(a=o.hooks.processAllTokens(a)),o.walkTokens&&this.walkTokens(a,o.walkTokens);let u=e(a,o);return o.hooks&&(u=o.hooks.postprocess(u)),u}catch(a){return i(a)}}};const st=new class{constructor(...r){var e,t,n;e=this,(t=Lt).has(e)?go("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),We(this,"Hooks",jt),We(this,"Lexer",mt),We(this,"Parser",ft),We(this,"Renderer",yn),We(this,"TextRenderer",Pr),We(this,"Tokenizer",vn),We(this,"defaults",{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}),We(this,"options",this.setOptions),We(this,"parse",nr(this,Lt,tr).call(this,mt.lex,ft.parse)),We(this,"parseInline",nr(this,Lt,tr).call(this,mt.lexInline,ft.parseInline)),this.use(...r)}lexer(r,e){return mt.lex(r,e??this.defaults)}parser(r,e){return ft.parse(r,e??this.defaults)}setOptions(r){return this.defaults={...this.defaults,...r},this}use(...r){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return r.forEach(t=>{const n={...t};if(n.async=this.defaults.async||n.async||!1,t.extensions&&(t.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const o=e.renderers[s.name];e.renderers[s.name]=o?function(...i){let a=s.renderer.apply(this,i);return a===!1&&(a=o.apply(this,i)),a}:s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const o=e[s.level];o?o.unshift(s.tokenizer):e[s.level]=[s.tokenizer],s.start&&(s.level==="block"?e.startBlock?e.startBlock.push(s.start):e.startBlock=[s.start]:s.level==="inline"&&(e.startInline?e.startInline.push(s.start):e.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(e.childTokens[s.name]=s.childTokens)}),n.extensions=e),t.renderer){const s=this.defaults.renderer||new yn(this.defaults);for(const o in t.renderer){if(!(o in s))throw new Error(`renderer '${o}' does not exist`);if(o==="options")continue;const i=o,a=t.renderer[i],u=s[i];s[i]=(...l)=>{let c=a.apply(s,l);return c===!1&&(c=u.apply(s,l)),c||""}}n.renderer=s}if(t.tokenizer){const s=this.defaults.tokenizer||new vn(this.defaults);for(const o in t.tokenizer){if(!(o in s))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;const i=o,a=t.tokenizer[i],u=s[i];s[i]=(...l)=>{let c=a.apply(s,l);return c===!1&&(c=u.apply(s,l)),c}}n.tokenizer=s}if(t.hooks){const s=this.defaults.hooks||new jt;for(const o in t.hooks){if(!(o in s))throw new Error(`hook '${o}' does not exist`);if(o==="options")continue;const i=o,a=t.hooks[i],u=s[i];jt.passThroughHooks.has(o)?s[i]=l=>{if(this.defaults.async)return Promise.resolve(a.call(s,l)).then(d=>u.call(s,d));const c=a.call(s,l);return u.call(s,c)}:s[i]=(...l)=>{let c=a.apply(s,l);return c===!1&&(c=u.apply(s,l)),c}}n.hooks=s}if(t.walkTokens){const s=this.defaults.walkTokens,o=t.walkTokens;n.walkTokens=function(i){let a=[];return a.push(o.call(this,i)),s&&(a=a.concat(s.call(this,i))),a}}this.defaults={...this.defaults,...n}}),this}walkTokens(r,e){var n,s;let t=[];for(const o of r)switch(t=t.concat(e.call(this,o)),o.type){case"table":{const i=o;for(const a of i.header)t=t.concat(this.walkTokens(a.tokens,e));for(const a of i.rows)for(const u of a)t=t.concat(this.walkTokens(u.tokens,e));break}case"list":{const i=o;t=t.concat(this.walkTokens(i.items,e));break}default:{const i=o;(s=(n=this.defaults.extensions)==null?void 0:n.childTokens)!=null&&s[i.type]?this.defaults.extensions.childTokens[i.type].forEach(a=>{const u=i[a].flat(1/0);t=t.concat(this.walkTokens(u,e))}):i.tokens&&(t=t.concat(this.walkTokens(i.tokens,e)))}}return t}};function ke(r,e){return st.parse(r,e)}ke.options=ke.setOptions=function(r){return st.setOptions(r),ke.defaults=st.defaults,Kr(ke.defaults),ke},ke.getDefaults=ji,ke.defaults=ct,ke.use=function(...r){return st.use(...r),ke.defaults=st.defaults,Kr(ke.defaults),ke},ke.walkTokens=function(r,e){return st.walkTokens(r,e)},ke.parseInline=st.parseInline,ke.Parser=ft,ke.parser=ft.parse,ke.Renderer=yn,ke.TextRenderer=Pr,ke.Lexer=mt,ke.lexer=mt.lex,ke.Tokenizer=vn,ke.Hooks=jt,ke.parse=ke;const vo=(r,e)=>{const{showCodeBlockCopyButton:t,markdownLinkTarget:n,syntaxHighlighter:s,htmlSanitizer:o}=e||{},i=ke(r,{async:!1,breaks:!0});if(typeof i!="string")throw new Error("Markdown parsing failed");const a=document.createElement("div");return a.innerHTML=o?o(i):i,a.querySelectorAll("pre").forEach(u=>{const l=document.createElement("div");l.className="code-block";const c=u.querySelector("code");if(!c){const m=u.innerHTML;return l.innerHTML=o?o(m):m,void u.replaceWith(l)}let d;for(let m=0;m<c.classList.length;m++){const v=c.classList[m];if(v.startsWith("language-")){d=v.slice(9);break}}const p=document.createElement("pre"),h="<div>"+c.innerHTML+"</div>";if(p.innerHTML=e!=null&&e.htmlSanitizer?e.htmlSanitizer(h):h,d&&(p.setAttribute("data-language",d),s)){const m="<div>"+s.createHighlighter()(c.textContent||"",d)+"</div>";p.innerHTML=o?o(m):m,p.className="highlighter-dark"}Nt(l),l.appendChild(p),u.replaceWith(l)}),t!==!1&&a.querySelectorAll(".code-block").forEach(u=>{var p;if(!u.querySelector("pre")||(p=u.previousElementSibling)!=null&&p.classList.contains("nlux-comp-copyButton"))return;const l="Copy code block to clipboard",c=document.createElement("button");c.classList.add("nlux-comp-copyButton"),c.setAttribute("aria-label",l),c.setAttribute("title",l);const d=document.createElement("span");d.classList.add("icon-copy"),c.appendChild(d),u.appendChild(c)}),n!=="self"&&a.querySelectorAll("a").forEach(u=>{u.setAttribute("target","_blank")}),a.innerHTML},is=r=>{if(!(r instanceof HTMLButtonElement)||r.dataset.clickListenerSet==="true")return;let e=!1;const t=r.nextElementSibling;r.addEventListener("click",()=>{if(e||!t)return;const n=t.innerText;navigator.clipboard.writeText(n??""),e=!0,r.classList.add("clicked"),setTimeout(()=>{e=!1,r.classList.remove("clicked")},1e3)}),r.dataset.clickListenerSet="true"},yo=r=>{const e="nlux-comp-copyButton";r instanceof HTMLButtonElement&&r.classList.contains(e)?is(r):r.querySelectorAll(`.${e}`).forEach(is)},ua=(r,e)=>{let t=!1;const{onComplete:n}=e||{},s=[],o=(e!=null&&e.skipStreamingAnimation?"timeout":"animationFrame")=="timeout"?d=>setTimeout(d,0):d=>requestAnimationFrame(d),i=document.createElement("div");i.classList.add("md-in-progress"),r.append(i);const a=()=>{for(;i.firstChild;){const d=i.firstChild;d instanceof HTMLElement&&yo(d),i.before(d)}},u=!(e!=null&&e.skipStreamingAnimation)&&(e!=null&&e.streamingAnimationSpeed)&&e.streamingAnimationSpeed>=0?e.streamingAnimationSpeed:e!=null&&e.skipStreamingAnimation?0:8,l={timeSinceLastProcessing:new Date().getTime(),currentMarkdown:"",previousHtml:void 0};let c=setInterval(()=>{const d=new Date().getTime(),p=(e==null?void 0:e.waitTimeBeforeStreamCompletion)!=="never";if(s.length===0&&p){const m=typeof(e==null?void 0:e.waitTimeBeforeStreamCompletion)=="number"?e.waitTimeBeforeStreamCompletion:2e3;return void((t||d-l.timeSinceLastProcessing>m)&&(t=!0,c&&(clearInterval(c),c=void 0),a(),i.remove(),n==null?void 0:n()))}l.timeSinceLastProcessing=d;const h=s.shift();h!==void 0&&typeof h=="string"&&o(()=>{const m=l.currentMarkdown+h,v=vo(m,e).trim();if(typeof v!="string")return l.currentMarkdown=l.currentMarkdown.slice(0,-h.length),void ee("Markdown parsing failed");if(l.previousHtml&&v.length>l.previousHtml.length&&v.startsWith(l.previousHtml)){a();const w=v.slice(l.previousHtml.length).trim();i.innerHTML=e!=null&&e.htmlSanitizer?e.htmlSanitizer(w):w,l.currentMarkdown=h,l.previousHtml=void 0}else i.innerHTML=e!=null&&e.htmlSanitizer?e.htmlSanitizer(v):v,l.currentMarkdown=m,l.previousHtml=v})},u);return{next:d=>{if(t)ee("Stream is already complete. No more chunks can be added");else for(const p of d)s.push(p)},complete:()=>{s.push(`
`),t=!0},cancel:()=>{c&&(clearInterval(c),c=void 0),t=!0,i.remove()},error:()=>{t=!0}}},bo=(r,e)=>{const t=document.createElement("div");if(t.classList.add("nlux-comp-avatarContainer"),r){const n=document.createElement("div");n.classList.add("nlux-comp-avatarPicture"),n.style.backgroundImage=`url("${encodeURI(r)}")`,t.append(n)}return t},Rr="nlux-comp-avatar",Or=r=>{const e=document.createElement("div");return e.classList.add(Rr),r.avatar||r.name?(r.name&&(e.title=r.name),r.avatar&&r.avatar instanceof HTMLElement?(e.append(r.avatar.cloneNode(!0)),e):(e.append(bo(r.avatar)),e)):e},Jt={received:"nlux_msg_received",sent:"nlux_msg_sent"},xo=(r,e)=>{Object.keys(Jt).forEach(t=>{r.classList.remove(Jt[t])}),Jt[e]&&r.classList.add(Jt[e])},Mt={streaming:"nlux_msg_streaming",complete:"nlux_msg_complete"},wo=(r,e)=>{Object.keys(Mt).forEach(t=>{r.classList.remove(Mt[t])}),Mt[e]&&r.classList.add(Mt[e])},ko=(r,e="text",t)=>{if(e==="markdown"){const n=document.createElement("div"),s=vo(r,t);n.innerHTML=t!=null&&t.htmlSanitizer?t.htmlSanitizer(s):s,yo(n);const o=document.createDocumentFragment();for(;n.firstChild;)o.appendChild(n.firstChild);return o}return document.createTextNode(r)},Co="nlux-comp-message",Vt={received:"nlux-comp-chatItem--received",sent:"nlux-comp-chatItem--sent"},So=(r,e)=>{Object.keys(Vt).forEach(t=>{r.classList.remove(Vt[t])}),Vt[e]&&r.classList.add(Vt[e])},en={bubbles:"nlux-comp-chatItem--bubblesLayout",list:"nlux-comp-chatItem--listLayout"},Ao=(r,e)=>{Object.keys(en).forEach(t=>{r.classList.remove(en[t])}),en[e]&&r.classList.add(en[e])},Eo="nlux-comp-chatItem-participantInfo",To="nlux-comp-chatItem-participantName",da=r=>{const e=document.createElement("div");e.classList.add("nlux-comp-chatItem");const t={direction:r.direction,status:r.status,message:r.message,htmlSanitizer:r.htmlSanitizer};let n;if(r.avatar!==void 0){const i={name:r.name,avatar:r.avatar};n=Or(i)}const s=document.createElement("span");s.classList.add(To),s.textContent=r.name;{const i=document.createElement("div");i.classList.add(Eo),n!==void 0&&i.append(n),i.append(s),e.append(i)}So(e,r.direction),Ao(e,r.layout);const o=(i=>{const a=document.createElement("div");a.classList.add(Co);const u=i.status?i.status:"complete";return wo(a,u),xo(a,i.direction),a})(t);return e.append(o),e},as=(r,e,t)=>{if(e.name!==t.name&&typeof t.avatar=="string"){const n=t.name&&t.name.length>0?t.name[0].toUpperCase():"",s=r.querySelector("* > .nlux-comp-avatarContainer > .avtr_ltr");s==null||s.replaceChildren(n)}},Io=(r,e,t)=>{e.avatar===t.avatar&&e.name===t.name||(e.avatar!==t.avatar&&((n,s,o)=>{if(s.avatar!==o.avatar)if(typeof o.avatar=="string"&&typeof s.avatar=="string"){const i=n.querySelector("* > .nlux-comp-avatarContainer > .nlux-comp-avatarPicture");i!==null&&(i.style.backgroundImage=`url("${encodeURI(o.avatar)}")`)}else if(typeof o.avatar=="string"){const i=bo(o.avatar);n.replaceChildren(i)}else o.avatar?n.replaceChildren(o.avatar.cloneNode(!0)):Nt(n)})(r,e,t),t.name?e.name!==t.name&&(r.title=t.name,as(r,e,t)):(r.title="",as(r,e,t)))},pa=(r,e,t)=>{if(e.message===t.message&&e.status===t.status&&e.direction===t.direction||!t||!t.hasOwnProperty("message")&&!t.hasOwnProperty("status")&&!t.hasOwnProperty("direction"))return;e.direction!==t.direction&&xo(r,t.direction);const n=t.status;if(e.status!==n)return wo(r,t.status),void((s,o,i)=>{const a=i.status;if(a!=="streaming"&&a==="complete"){const u=i.message?i.message:"",l=document.createTextNode(u);s.classList.add(Mt[a]),Nt(s),s.append(l)}})(r,0,t);n==="complete"&&(e.message===t.message&&e.format===t.format||((s,o,i)=>{o.message===i.message&&o.format===i.format||(Nt(s),s.append(ko(i.message??"",i.format,{htmlSanitizer:i.htmlSanitizer})))})(r,e,t))},cs="dom/getElement";var ha=Object.defineProperty,ma=Object.getOwnPropertyDescriptor,ls=(r,e,t,n)=>{for(var s,o=n>1?void 0:n?ma(e,t):e,i=r.length-1;i>=0;i--)(s=r[i])&&(o=(n?s(e,t,o):s(o))||o);return n&&o&&ha(e,t,o),o};let hn=class extends Ne{constructor(e,t){super(e,t),this.serverResponse=[],this.stringContent="",t.domProps.message!==void 0&&(this.stringContent=t.domProps.message)}addChunk(e,t){this.throwIfDestroyed(),this.executeDomAction("processStreamedChunk",e),typeof e=="string"&&(this.stringContent+=e),this.serverResponse.push(t)}commitChunks(){this.throwIfDestroyed(),this.executeDomAction("commitStreamedChunks")}getChatSegmentItem(){return this.getProp("domProps").direction==="received"?{uid:this.props.uid,participantRole:"assistant",content:this.getItemContent(),serverResponse:this.serverResponse,status:"complete",dataTransferMode:"batch",time:new Date}:{uid:this.props.uid,participantRole:"user",content:this.getItemContent(),status:"complete",time:new Date}}getItemContent(){return this.aiMessageContent??this.stringContent}updateDomProps(e){const t=this.getProp("domProps"),n={...t,...e};this.setProp("domProps",n),this.executeDomAction("updateDomProps",t,n)}updateMarkdownStreamRenderer(e,t){if(this.setProp(e,t),e==="syntaxHighlighter"){const n=t;this.executeDomAction("updateMarkdownStreamRenderer",{syntaxHighlighter:n})}if(e==="htmlSanitizer"){const n=t;this.executeDomAction("updateMarkdownStreamRenderer",{htmlSanitizer:n})}}onMarkdownStreamComplete(e){this.context.emit("messageRendered",{uid:this.props.uid})}};ls([qe("markdown-stream-complete")],hn.prototype,"onMarkdownStreamComplete",1),hn=ls([et("chatItem",({props:r,appendToRoot:e,compEvent:t})=>{const n=da({...r.domProps,htmlSanitizer:r.htmlSanitizer,message:void 0}),s=((c,d)=>{const p=c.querySelector(d);if(!p)throw new fn({source:cs,message:`Could not find element with query "${d}". Make sure the query provided matches an element that exists in the root element.`});if(!(p instanceof HTMLElement))throw new fn({source:cs,message:`Element with query "${d}" is not a valid HTMLElement.`});return p})(n,".nlux-comp-message");if(!s)throw new Error("Message container not found");const o=document.createElement("div");o.classList.add("nlux-markdownStream-root");const i=document.createElement("div");if(i.classList.add("nlux-markdown-container"),i.setAttribute("nlux-message-id",r.uid),o.append(i),s.append(o),r.domProps.message){const c=ko(r.domProps.message??"","markdown",{markdownLinkTarget:r.markdownLinkTarget,syntaxHighlighter:r.syntaxHighlighter,htmlSanitizer:r.htmlSanitizer});i.append(c)}let a;e(n);let u={...r};const l=c=>((d,p)=>{const h=ua(d,{syntaxHighlighter:p==null?void 0:p.syntaxHighlighter,htmlSanitizer:p==null?void 0:p.htmlSanitizer,markdownLinkTarget:p==null?void 0:p.markdownLinkTarget,showCodeBlockCopyButton:p==null?void 0:p.showCodeBlockCopyButton,skipStreamingAnimation:p==null?void 0:p.skipStreamingAnimation,streamingAnimationSpeed:p==null?void 0:p.streamingAnimationSpeed,waitTimeBeforeStreamCompletion:p==null?void 0:p.waitTimeBeforeStreamCompletion,onComplete:p==null?void 0:p.onComplete});return{next(m){h.next(m)},complete(){h.complete()}}})(i,{syntaxHighlighter:c.syntaxHighlighter,htmlSanitizer:c.htmlSanitizer,markdownLinkTarget:c.markdownLinkTarget,showCodeBlockCopyButton:c.showCodeBlockCopyButton,skipStreamingAnimation:c.skipStreamingAnimation,streamingAnimationSpeed:c.streamingAnimationSpeed,onComplete:()=>t("markdown-stream-complete")});return{elements:{chatItemContainer:n},actions:{focus:()=>{n.focus()},processStreamedChunk:c=>{a||(a=l(u)),a.next(c)},commitStreamedChunks:()=>{a&&a.complete()},updateMarkdownStreamRenderer:c=>{u={...u,...c},l(u)},updateDomProps:(c,d)=>{((p,h,m)=>{if((h.direction!==m.direction||h.layout!==m.layout||h.status!==m.status||h.message!==m.message||h.name!==m.name||h.avatar!==m.avatar)&&m&&(m.hasOwnProperty("direction")||m.hasOwnProperty("layout")||m.hasOwnProperty("status")||m.hasOwnProperty("message")||m.hasOwnProperty("loader")||m.hasOwnProperty("name")||m.hasOwnProperty("avatar"))){if(h.direction!==m.direction&&So(p,m.direction),h.layout!==m.layout&&Ao(p,m.layout),h.direction!==m.direction||h.status!==m.status||h.message!==m.message){const v=p.querySelector(`.${Co}`);v&&pa(v,{direction:h.direction,status:h.status,message:h.message,htmlSanitizer:h.htmlSanitizer},{direction:m.direction,status:m.status,message:m.message,htmlSanitizer:h.htmlSanitizer})}if(h.name!==m.name||h.avatar!==m.avatar){const v=p.querySelector(`.${Rr}`);if(!m.name&&!m.avatar)return void(v==null?void 0:v.remove());if(v)Io(v,{name:h.name,avatar:h.avatar},{name:m.name,avatar:m.avatar});else if(m.name!==void 0||m.avatar!==void 0){const w={name:m.name,avatar:m.avatar},C=Or(w),b=p.querySelector(`.${Eo}`);b&&b.prepend(C)}}if(h.name!==m.name){const v=p.querySelector(`.${To}`);v&&(v.textContent=m.name||"")}}})(n,c,d)}},onDestroy:()=>{n.remove(),a=void 0}}},({propName:r,newValue:e,dom:t})=>{var n;switch(r){case"markdownLinkTarget":case"skipStreamingAnimation":case"syntaxHighlighter":case"htmlSanitizer":case"showCodeBlockCopyButton":case"streamingAnimationSpeed":(n=t.actions)==null||n.updateMarkdownStreamRenderer({[r]:e})}})],hn);const fa=(r,e)=>{let t,n=e,s=r,o=!0;const i=((v,w)=>{let C=!1;if(typeof v!="function")throw new Ve({source:"x/throttle",message:"Callback must be a function"});return(...b)=>{C||(v.apply(void 0,b),C=!0,setTimeout(function(){C=!1},w))}})((v=>{let w,C;return b=>{const x=b.target;if(!(x instanceof HTMLElement))return;const{scrollTop:E,clientHeight:k,scrollHeight:O}=x,L=O-30,H=Math.ceil(E+k)>=L,I=w===void 0||C===void 0?void 0:E>w&&C===O?"down":E<w&&C===O?"up":void 0;C=O,w=E,v({scrolledToBottom:H,scrollDirection:I})}})(({scrolledToBottom:v,scrollDirection:w})=>{o?w==="up"&&(o=!1):w==="down"&&v&&(o=!0)}),50),a=v=>{v.addEventListener("scroll",i)},u=v=>{v==null||v.removeEventListener("scroll",i)},l=v=>{(t==null?void 0:t.uid)===v&&(c==null||c.disconnect(),d==null||d.disconnect(),t=void 0,c=void 0,d=void 0)};let c,d;const p=()=>{s==null||s.scrollTo({top:5e4,behavior:"instant"})},h=()=>{s&&n&&o&&p()},m=()=>{h()};return a(s),{updateConversationContainer:v=>{u(s),a(v),s=v},updateProps:({autoScroll:v})=>{n=v},handleNewChatSegmentAdded:(v,w)=>{t&&(c==null||c.disconnect(),d==null||d.disconnect()),t={uid:v,container:w},c=new ResizeObserver(h),c.observe(w),d=new MutationObserver(m),d.observe(w,{childList:!0,subtree:!0,characterData:!0}),n&&p()},handleChatSegmentRemoved:v=>l(v),handleChatSegmentComplete:v=>l(v),destroy:()=>{t&&(l(t.uid),t=void 0),u(s),s=void 0}}},gt=r=>{var n;const e=typeof r=="function"?r.__compId:void 0;if(!e)throw new Error("Invalid compClass! Component should be registered before using");const t=(n=ao.retrieve(e))==null?void 0:n.model;if(!t||typeof t!="function")throw new Error(`Component "${e}" is not registered`);return{withContext:s=>({create:()=>new t(s,{}),withProps:o=>({create:()=>new t(s,o)})})}},ga=r=>{const e=["adapter","events"],t=Object.keys(r).filter(s=>!e.includes(s)),n={};for(let s=0;s<t.length;s++){const o=t[s];n[o]=r[o]}return n},Po=()=>{const r=document.createElement("div");r.classList.add("nlux-comp-messageLoader");const e=document.createElement("span");e.classList.add("spinning-loader");const t=document.createElement("div");return t.classList.add("nlux-comp-loaderContainer"),t.appendChild(e),r.appendChild(t),r},us=r=>{const e="nlux-chatSegment";return r==="complete"?`${e} nlux-chatSegment--complete`:r==="error"?`${e} nlux-chatSegment--error`:`${e} nlux-chatSegment--active`},tn=(r,e)=>{var t,n;return r==="assistant"?((t=e==null?void 0:e.assistant)==null?void 0:t.name)??"Assistant":r==="user"?((n=e==null?void 0:e.user)==null?void 0:n.name)??"User":""},va="bubbles";var ya=Object.defineProperty,ba=Object.getOwnPropertyDescriptor,nn=(r,e,t,n)=>{for(var s,o=n>1?void 0:n?ba(e,t):e,i=r.length-1;i>=0;i--)(s=r[i])&&(o=(n?s(e,t,o):s(o))||o);return n&&o&&ya(e,t,o),o};let ht=class extends Ne{constructor(e,t){super(e,t),this.chatItemCompIdsByIndex=[],this.chatItemComponentsById=new Map}addChatItem(e){var s,o;if(this.throwIfDestroyed(),this.chatItemComponentsById.has(e.uid))throw new Error(`CompChatSegment: chat item with id "${e.uid}" already exists`);const t=((i,a,u,l)=>{const c=a??va;if(i.participantRole==="assistant"){const p=i.status==="complete"?"complete":"streaming";return i.dataTransferMode==="stream"?{status:p,layout:c,direction:"received",name:tn("assistant",{assistant:l}),avatar:l==null?void 0:l.avatar}:i.status==="complete"?{status:p,layout:c,direction:"received",name:tn("assistant",{assistant:l}),avatar:l==null?void 0:l.avatar,message:(d=i.content,typeof d=="string"?d:typeof d=="object"?`${d}`:d==null?"":typeof d.toString=="function"?d.toString():JSON.stringify(d))}:{status:p,layout:c,direction:"received",name:tn("assistant",{assistant:l}),avatar:l==null?void 0:l.avatar}}var d;return{status:"complete",layout:c,direction:"sent",message:i.content,name:tn("user",{user:u}),avatar:u==null?void 0:u.avatar}})(e,this.getProp("conversationLayout"),this.getProp("userPersona"),this.getProp("assistantPersona"));if(!t)throw new Error(`CompChatSegment: chat item with id "${e.uid}" has invalid props`);const n=gt(hn).withContext(this.context).withProps({uid:e.uid,domProps:t,markdownLinkTarget:this.getProp("markdownLinkTarget"),showCodeBlockCopyButton:this.getProp("showCodeBlockCopyButton"),skipStreamingAnimation:this.getProp("skipStreamingAnimation"),syntaxHighlighter:this.getProp("syntaxHighlighter"),htmlSanitizer:this.getProp("htmlSanitizer"),streamingAnimationSpeed:this.getProp("streamingAnimationSpeed")}).create();this.chatItemComponentsById.set(e.uid,n),this.chatItemCompIdsByIndex.push(e.uid),this.rendered&&((o=(s=this.renderedDom)==null?void 0:s.elements)!=null&&o.chatSegmentContainer?n.render(this.renderedDom.elements.chatSegmentContainer,this.renderedDom.elements.loaderContainer):Gn("CompChatSegment: chatSegmentContainer is not available"))}addChunk(e,t,n){if(this.destroyed)return;const s=this.chatItemComponentsById.get(e);if(!s)throw new Error(`CompChatSegment: chat item with id "${e}" not found`);s.addChunk(t,n)}complete(){this.throwIfDestroyed(),this.chatItemComponentsById.forEach(e=>e.commitChunks()),this.setProp("status","complete")}destroy(){this.chatItemComponentsById.forEach(e=>e.destroy()),this.chatItemComponentsById.clear(),this.chatItemCompIdsByIndex=[],super.destroy()}getChatItems(){return this.chatItemCompIdsByIndex.map(e=>this.chatItemComponentsById.get(e)).filter(e=>!!e)}setAssistantPersona(e){this.setProp("assistantPersona",e);const t={name:e==null?void 0:e.name,avatar:e==null?void 0:e.avatar};this.chatItemComponentsById.forEach(n=>{n.getChatSegmentItem().participantRole==="assistant"&&n.updateDomProps(t)})}setLayout(e){this.setProp("conversationLayout",e),this.chatItemComponentsById.forEach(t=>{t.updateDomProps({layout:e})})}setUserPersona(e){this.setProp("userPersona",e);const t={name:e==null?void 0:e.name,avatar:e==null?void 0:e.avatar};this.chatItemComponentsById.forEach(n=>{n.getChatSegmentItem().participantRole==="user"&&n.updateDomProps(t)})}updateMarkdownStreamRenderer(e,t){this.setProp(e,t)}onLoaderShown(e){var t;(t=this.renderedDom)!=null&&t.elements&&(this.renderedDom.elements.loaderContainer=e)}setProp(e,t){super.setProp(e,t),e!=="markdownLinkTarget"&&e!=="syntaxHighlighter"&&e!=="htmlSanitizer"&&e!=="skipStreamingAnimation"&&e!=="streamingAnimationSpeed"||this.chatItemComponentsById.forEach(n=>{n.updateMarkdownStreamRenderer(e,t)})}onChatSegmentReady(){Ze(()=>{var t,n,s,o;if(!((n=(t=this.renderedDom)==null?void 0:t.elements)!=null&&n.chatSegmentContainer))return;const e=(o=(s=this.renderedDom)==null?void 0:s.elements)==null?void 0:o.chatSegmentContainer;this.chatItemComponentsById.forEach(i=>{i.rendered||i.render(e)})})}onLoaderHidden(){var e;(e=this.renderedDom)!=null&&e.elements&&(this.renderedDom.elements.loaderContainer=void 0)}};nn([qe("loader-shown")],ht.prototype,"onLoaderShown",1),nn([qe("chat-segment-ready")],ht.prototype,"onChatSegmentReady",1),nn([qe("loader-hidden")],ht.prototype,"onLoaderHidden",1),ht=nn([et("chatSegment",({props:r,compEvent:e,appendToRoot:t})=>{let n;const s=document.createElement("div");s.className=us(r.status);const o=()=>{if(!n){n=document.createElement("div"),n.className="nlux-chatSegment-loader-container";const i=Po();n.appendChild(i),s.appendChild(n),e("loader-shown")(n)}};return r.status==="active"&&o(),t(s),e("chat-segment-ready")(),{elements:{chatSegmentContainer:s,loaderContainer:n},actions:{showLoader:o,hideLoader:()=>{n&&(n.remove(),n=void 0,e("loader-hidden")())}},onDestroy:()=>{s.remove()}}},({propName:r,newValue:e,dom:t})=>{var n,s,o;if(r==="status"){const i=(n=t.elements)==null?void 0:n.chatSegmentContainer;if(!i)return;const a=e;i.className=us(a),a==="active"?(s=t.actions)==null||s.showLoader():(o=t.actions)==null||o.hideLoader()}})],ht);let rr=class extends Ne{constructor(e,t){super(e,t),this.chatSegmentCompIdsByIndex=[],this.chatSegmentComponentsById=new Map,t.messages&&t.messages.length>0&&this.addChatSegment("complete",t.messages)}addChatItem(e,t){const n=this.chatSegmentComponentsById.get(e);if(!n)throw new Error(`CompConversation: chat segment with id "${e}" not found`);n.destroyed?Gn(`CompConversation: chat segment with id "${e}" is destroyed and cannot be used`):n.addChatItem(t)}addChatSegment(e="active",t){this.throwIfDestroyed();const n=Ue(),s=gt(ht).withContext(this.context).withProps({uid:n,status:e,conversationLayout:this.getProp("conversationLayout"),userPersona:this.getProp("userPersona"),assistantPersona:this.getProp("assistantPersona"),markdownLinkTarget:this.getProp("markdownLinkTarget"),showCodeBlockCopyButton:this.getProp("showCodeBlockCopyButton"),skipStreamingAnimation:this.getProp("skipStreamingAnimation"),syntaxHighlighter:this.getProp("syntaxHighlighter"),htmlSanitizer:this.getProp("htmlSanitizer"),streamingAnimationSpeed:this.getProp("streamingAnimationSpeed")}).create();if(t)for(const i of t)i.role==="assistant"?s.addChatItem({uid:Ue(),participantRole:"assistant",time:new Date,dataTransferMode:"batch",status:"complete",content:i.message,serverResponse:i.serverResponse,contentType:"text"}):i.role==="user"&&s.addChatItem({uid:Ue(),participantRole:"user",time:new Date,status:"complete",content:i.message,contentType:"text"});this.chatSegmentComponentsById.set(n,s),this.chatSegmentCompIdsByIndex.push(n);const o=s.id;return this.addSubComponent(o,s,"segmentsContainer"),this.notifyAboutSegmentCountChange(this.chatSegmentCompIdsByIndex.length),n}addChunk(e,t,n,s){const o=this.chatSegmentComponentsById.get(e);if(!o)throw new Error(`CompConversation: chat segment with id "${e}" not found`);o.addChunk(t,n,s)}completeChatSegment(e){const t=this.chatSegmentComponentsById.get(e);if(!t)throw new Error(`CompConversation: chat segment with id "${e}" not found`);t.destroyed||t.complete()}getChatSegmentContainer(e){const t=this.chatSegmentComponentsById.get(e);if((t==null?void 0:t.root)instanceof HTMLElement)return t.root}getConversationContentForAdapter(e="max"){if(typeof e=="number"&&e<0)return void Gn(`Invalid value provided for 'historyPayloadSize' : "${e}"! Value must be a positive integer or 'max'.`);if(e===0)return;const t=(n=>{const s=[];return n.forEach(o=>{o.items.forEach(i=>{if(i.status==="complete"){if(i.participantRole==="assistant")s.push({role:"assistant",message:i.content});else if(i.participantRole==="user")return s.push({role:"user",message:i.content})}})}),s})(this.chatSegmentCompIdsByIndex.map(n=>this.chatSegmentComponentsById.get(n)).filter(n=>n!==void 0).map(n=>({uid:n.id,status:"complete",items:n.getChatItems().map(s=>s.getChatSegmentItem())})));return e==="max"?t:t.slice(-e)}removeChatSegment(e){const t=this.chatSegmentComponentsById.get(e);if(!t)return;const n=t.id;this.subComponents.has(n)&&this.removeSubComponent(n),this.chatSegmentComponentsById.delete(t.id);const s=this.chatSegmentCompIdsByIndex.indexOf(e);s>=0&&this.chatSegmentCompIdsByIndex.splice(s,1),this.notifyAboutSegmentCountChange(this.chatSegmentCompIdsByIndex.length)}setAssistantPersona(e){this.setProp("assistantPersona",e),this.chatSegmentComponentsById.forEach(t=>{t.setAssistantPersona(e)})}setConversationLayout(e){this.setProp("conversationLayout",e),this.chatSegmentComponentsById.forEach(t=>{t.setLayout(e)})}setUserPersona(e){this.setProp("userPersona",e),this.chatSegmentComponentsById.forEach(t=>{t.setUserPersona(e)})}updateMarkdownStreamRenderer(e,t){this.setProp(e,t)}setProp(e,t){if(super.setProp(e,t),e==="markdownLinkTarget"||e==="syntaxHighlighter"||e==="htmlSanitizer"||e==="skipStreamingAnimation"||e==="streamingAnimationSpeed"||e==="showCodeBlockCopyButton"){const n=e,s=t;this.chatSegmentComponentsById.forEach(o=>{o.updateMarkdownStreamRenderer(n,s)})}}notifyAboutSegmentCountChange(e){const t=this.getProp("onSegmentCountChange");t&&t(e)}};rr=((r,e,t,n)=>{for(var s,o=e,i=r.length-1;i>=0;i--)(s=r[i])&&(o=s(o)||o);return o})([et("conversation",({appendToRoot:r})=>{const e=document.createElement("div");return e.classList.add("nlux-chatSegments-container"),r(e),{elements:{segmentsContainer:e},actions:{}}},()=>{})],rr);const Ln={typing:"nlux-composer--typing","submitting-prompt":"nlux-composer--submitting","submitting-conversation-starter":"nlux-composer--submitting",waiting:"nlux-composer--waiting"},Ro=(r,e)=>{Object.keys(Ln).forEach(t=>{r.classList.remove(Ln[t])}),r.classList.add(Ln[e])},xa=r=>{const e=document.createElement("div");e.classList.add("nlux-comp-composer");const t=document.createElement("textarea");t.placeholder=r.placeholder??"",t.value=r.message??"",r.autoFocus&&(t.autofocus=!0);const n=document.createElement("button");return n.append((()=>{const s=document.createElement("div");s.classList.add("nlux-comp-sendIcon");const o=document.createElement("div");return o.classList.add("nlux-comp-sendIcon-container"),s.appendChild(o),s})()),n.append(Po()),e.append(t),e.append(n),Ro(e,r.status),r.status!=="submitting-conversation-starter"&&r.status!=="submitting-prompt"||(t.disabled=!0,n.disabled=!0),r.status==="waiting"&&(n.disabled=!0),r.status==="typing"&&(n.disabled=r.disableSubmitButton??t.value===""),e},bn=(r,e)=>{let t=!1;const n=e?r.querySelector(e):r,s=n instanceof HTMLElement?n:void 0;if(!s)throw new fn({source:"dom/listenTo",message:`Could not find element with query "${e}". Make sure the query provided matches an element that exists in the root element.`});const o=new Map,i=new Map,a=()=>{s&&(o.forEach((l,c)=>{s.removeEventListener(c,l)}),o.clear(),i.clear())},u={on:(l,c)=>{if(!c||!s)return u;if(!o.has(l)){const d=p=>{var h;(h=i.get(l))==null||h.forEach(m=>m(p))};o.set(l,d),s.addEventListener(l,d)}return i.has(l)||i.set(l,new Set),i.get(l).add(c),u},get:()=>{if(t)throw new Error("listenTo().get() can only be used once!");return t=!0,[s,a]}};return u};var wa=Object.defineProperty,ka=Object.getOwnPropertyDescriptor,Rt=(r,e,t,n)=>{for(var s,o=n>1?void 0:n?ka(e,t):e,i=r.length-1;i>=0;i--)(s=r[i])&&(o=(n?s(e,t,o):s(o))||o);return n&&o&&wa(e,t,o),o};let ot=class extends Ne{constructor(e,{props:t,eventListeners:n}){super(e,t),this.userEventListeners=n}focusTextInput(){this.executeDomAction("focusTextInput")}handleCommandEnterKeyPressed(e){var n;((n=this.getProp("domCompProps"))==null?void 0:n.submitShortcut)==="CommandEnter"&&(this.handleSendButtonClick(),e==null||e.preventDefault())}handleEnterKeyPressed(e){var n;const t=(n=this.getProp("domCompProps"))==null?void 0:n.submitShortcut;t&&(t!=="Enter"||e!=null&&e.isComposing)||(this.handleSendButtonClick(),e==null||e.preventDefault())}handleSendButtonClick(){var s;const e=this.getProp("domCompProps");if(e!=null&&e.disableSubmitButton||!(e==null?void 0:e.message))return;const n=(s=this.userEventListeners)==null?void 0:s.onSubmit;n&&n()}handleTextChange(e){var s;const t=(s=this.userEventListeners)==null?void 0:s.onTextUpdated;t&&t(e);const n=this.getProp("domCompProps");this.setDomProps({...n,message:e})}handleTextInputUpdated(e){const t=e.target;t instanceof HTMLTextAreaElement&&this.handleTextChange(t.value)}setDomProps(e){this.setProp("domCompProps",e)}};Rt([qe("command-enter-key-pressed")],ot.prototype,"handleCommandEnterKeyPressed",1),Rt([qe("enter-key-pressed")],ot.prototype,"handleEnterKeyPressed",1),Rt([qe("send-message-clicked")],ot.prototype,"handleSendButtonClick",1),Rt([qe("text-updated")],ot.prototype,"handleTextInputUpdated",1),ot=Rt([et("composer",({appendToRoot:r,props:e,compEvent:t})=>{const n=xa(e.domCompProps);r(n);const[s,o]=bn(n,":scope > textarea").on("input",t("text-updated")).on("keydown",c=>{const d=c.key==="Enter"&&!c.isComposing,p=c.altKey||c.ctrlKey||c.metaKey||c.shiftKey;if(d&&!p)return void t("enter-key-pressed")(c);const h=c.getModifierState("Meta")&&c.key==="Enter",m=c.getModifierState("Control")&&c.key==="Enter";(h||m)&&t("command-enter-key-pressed")(c)}).get(),[i,a]=bn(n,":scope > button").on("click",t("send-message-clicked")).get();if(!(i instanceof HTMLButtonElement))throw new Error("Expected a button element");if(!(s instanceof HTMLTextAreaElement))throw new fn({source:(u="composer",l="render",`#${u}/${l}`),message:"Expected a textarea element"});var u,l;return{elements:{root:n,textInput:s,sendButton:i},actions:{focusTextInput:()=>Ze(()=>{s.focus(),s.setSelectionRange(s.value.length,s.value.length)})},onDestroy:()=>{o(),a()}}},({propName:r,currentValue:e,newValue:t,dom:n})=>{var s;r==="domCompProps"&&((s=n.elements)!=null&&s.root)&&((o,i,a)=>{if(i.status===a.status&&i.message===a.message&&i.placeholder===a.placeholder&&i.autoFocus===a.autoFocus&&i.disableSubmitButton===a.disableSubmitButton)return;if(i.status!==a.status)return Ro(o,a.status),void((l,c,d)=>{if(c.status===d.status)return;const p=l.querySelector("* > textarea");d.status!=="typing"&&d.status!=="waiting"||!p.disabled?d.status!=="submitting-prompt"&&d.status!=="submitting-conversation-starter"||p.disabled||(p.disabled=!0):p.disabled=!1;const h=l.querySelector("* > button");if(d.status==="typing"){const m=(c.disableSubmitButton!==d.disableSubmitButton?d.disableSubmitButton:c.disableSubmitButton)??p.value==="";h.disabled!==m&&(h.disabled=m)}else d.status!=="waiting"&&d.status!=="submitting-prompt"&&d.status!=="submitting-conversation-starter"||h.disabled||(h.disabled=!0);c.placeholder!==d.placeholder&&(p.placeholder=d.placeholder??""),c.message!==d.message&&(p.value=d.message??""),c.autoFocus!==d.autoFocus&&(p.autofocus=d.autoFocus??!1)})(o,i,a);const u=o.querySelector("* > textarea");if(i.placeholder!==a.placeholder&&(u.placeholder=a.placeholder??""),i.autoFocus!==a.autoFocus&&(u.autofocus=a.autoFocus??!1),i.message!==a.message&&(u.value=a.message??""),i.status==="typing"){const l=o.querySelector("* > button"),c=(i.disableSubmitButton!==a.disableSubmitButton?a.disableSubmitButton:i.disableSubmitButton)??u.value==="";l.disabled!==c&&(l.disabled=c)}})(n.elements.root,e,t)})],ot);const sr=r=>{if(typeof r!="object"||r===null)return!1;const e=r;return(typeof e.streamText=="function"||typeof e.batchText=="function")&&["stream","batch"].includes(e.dataTransferMode)&&typeof e.id=="string"&&typeof e.info=="object"&&e.info!==null&&typeof e.preProcessAiBatchedMessage=="function"&&typeof e.preProcessAiStreamedChunk=="function"},Re=(r,e=1)=>{setTimeout(()=>{r()},e)},Ca=(r,e,t,n,s,o,i,a,u)=>new Promise(l=>{const c=Ue(),d=[],p=[];let h=!1,m=!1,v=!1;const w=sr(t),C={next:b=>{if(m||v)return;let x,E;if(w){const k=b,O=t.preProcessAiStreamedChunk(k,n);O!=null&&(x=O,E=k,d.push(x),p.push(E))}else x=b,d.push(x);x!=null?(h||h||(h=!0,Re(()=>{s.forEach(k=>{k({uid:c,status:"streaming",time:new Date,participantRole:"assistant",dataTransferMode:"stream"})})})),Re(()=>{i.forEach(k=>{k({chunk:x,messageId:c,serverResponse:E})})})):ee("Adapter returned an undefined or null value from streamText. This chunk will be ignored.")},complete:()=>{m||v||(v=!0,Re(()=>{const b={uid:c,status:"complete",content:d,contentType:"text",serverResponse:void 0,time:new Date,participantRole:"assistant",dataTransferMode:"stream"};o.forEach(x=>{x(b)}),l()}),Re(()=>{const b={uid:r,status:"complete",items:[e,{uid:c,status:"complete",contentType:"text",content:d,serverResponse:p,time:new Date,participantRole:"assistant",dataTransferMode:"stream"}]};a.forEach(x=>{x(b)})}))},error:b=>{m||v||(m=!0,Re(()=>{u.forEach(x=>{x("failed-to-stream-content",b)}),l()}))}};t.streamText(e.content,C,n)}),Sa=(r,e,t)=>{if(!r)return(()=>{const b=new Set,x=Ue(),E={uid:x,status:"complete",items:[]};return Re(()=>{b.forEach(k=>{k(E)}),b.clear()}),{segment:E,observable:{on:(k,O)=>{k==="complete"&&b.add(O)},removeListener:(k,O)=>{b.delete(O)},destroy:()=>{b.clear()},get segmentId(){return x}},dataTransferMode:"batch"}})();const n=e;if(n.streamText===void 0&&n.batchText===void 0&&n.streamServerComponent===void 0)return(b=>{const x=new Set,E=Ue(),k={uid:E,status:"error",items:[]};return Re(()=>{x.forEach(O=>O(b)),x.clear()}),{segment:k,dataTransferMode:"stream",observable:{on:(O,L)=>{O==="error"&&x.add(L)},removeListener:(O,L)=>{x.delete(L)},destroy:()=>{x.clear()},get segmentId(){return E}}}})("no-data-transfer-mode-supported");const s=Ue(),o=(b=>({uid:Ue(),time:new Date,status:"complete",participantRole:"user",content:b,contentType:"text"}))(r);let i,a,u,l,c,d,p=new Set,h=new Set,m=new Set;Re(()=>{p!=null&&p.size&&(p.forEach(b=>{b(o)}),p.clear(),p=void 0)});const v=(b=>{const x=[],E=b,k=b;(E==null?void 0:E.streamText)===void 0&&(k==null?void 0:k.streamServerComponent)===void 0||x.push("stream"),(E==null?void 0:E.batchText)!==void 0&&x.push("batch");const O=sr(b)?b:void 0,L=(O==null?void 0:O.dataTransferMode)??void 0,H=x.length===1?x[0]:"stream";return L??H})(e);(b=>"streamServerComponent"in b?"server-component":"text")(e)==="server-component"?(u=new Set,a=new Set,((b,x,E,k,O,L,H,I)=>new Promise((P,q)=>{try{const M=x.content,$=Ue(),B="assistant",K="streaming",ne=new Date,se="stream";let ce,_;const A=()=>{Re(()=>{L.forEach(W=>{ce&&_&&W({...ce,content:_,status:"complete"})})},20);const N={uid:b,status:"complete",items:[x,ce]};Re(()=>{H.forEach(W=>{W(N)}),P()},20)},D=()=>{I.forEach(N=>{N("failed-to-stream-server-component",new Error("Failed to load content"))})};_=E.streamServerComponent(M,k,{onServerComponentReceived:A,onError:D}),ce={uid:$,content:_,contentType:"server-component",participantRole:B,status:K,time:ne,dataTransferMode:se},Re(()=>{O.forEach(N=>{N(ce)})},10)}catch(M){ee(M);const $=M instanceof Error?M:typeof M=="string"?new Error(M):new Error("Unknown error");Re(()=>{I.forEach(B=>B("failed-to-load-content",$))})}}))(s,o,e,t,a,u,h,m).finally(()=>{Re(()=>C())})):v==="batch"?(i=new Set,(async(b,x,E,k,O,L,H)=>{try{const I=x.content,P=sr(E)?E:void 0,q=P!==void 0,M=Ue(),$="assistant",B="complete",K=new Date,ne="batch";let se;if(q){const A=await P.batchText(I,k),D=P.preProcessAiBatchedMessage(A,k);D!=null&&(se={uid:M,content:D,contentType:"text",serverResponse:A,participantRole:$,status:B,time:K,dataTransferMode:ne})}else se={uid:M,content:await E.batchText(I,k),contentType:"text",serverResponse:void 0,participantRole:$,status:B,time:K,dataTransferMode:ne};if(!se)throw new Error("Response from adapter was undefined or cannot be processed");const ce=se;Re(()=>{O.forEach(A=>{A(ce)})});const _={uid:b,status:"complete",items:[x,se]};Re(()=>{L.forEach(A=>{A(_)})})}catch(I){ee(I);const P=I instanceof Error?I:typeof I=="string"?new Error(I):new Error("Unknown error");Re(()=>{H.forEach(q=>q("failed-to-load-content",P))})}})(s,o,e,t,i,h,m).finally(()=>{Re(()=>C())})):(l=new Set,c=new Set,d=new Set,Ca(s,o,e,t,l,c,d,h,m).finally(()=>{Re(()=>C())}));const C=()=>{p==null||p.clear(),p=void 0,i==null||i.clear(),i=void 0,a==null||a.clear(),a=void 0,u==null||u.clear(),u=void 0,l==null||l.clear(),l=void 0,c==null||c.clear(),c=void 0,d==null||d.clear(),d=void 0,h==null||h.clear(),h=void 0,m==null||m.clear(),m=void 0};return{segment:{status:"active",uid:s,items:[]},dataTransferMode:v,observable:{get segmentId(){return s},on:(b,x)=>{b==="userMessageReceived"&&p?p.add(x):b==="aiMessageReceived"&&i?i.add(x):b==="aiServerComponentStreamStarted"&&a?a.add(x):b==="aiServerComponentStreamed"&&u?u.add(x):b==="aiMessageStreamStarted"&&l?l.add(x):b==="aiMessageStreamed"&&c?c.add(x):b==="aiChunkReceived"&&d?d.add(x):b==="complete"&&h?h.add(x):b==="error"&&m&&m.add(x)},removeListener:(b,x)=>{b!=="userMessageReceived"?b!=="aiMessageReceived"?b!=="aiMessageStreamStarted"?b!=="aiMessageStreamed"?b!=="aiChunkReceived"?b!=="complete"?b!=="error"||(m==null||m.delete(x)):h==null||h.delete(x):d==null||d.delete(x):c==null||c.delete(x):l==null||l.delete(x):i==null||i.delete(x):p==null||p.delete(x)},destroy:()=>C()}}},Aa={"data-transfer-mode-not-supported":"Requested data transfer mode is not supported","no-data-transfer-mode-supported":"Adapter does not support any valid data transfer modes","connection-error":"Connection error","invalid-credentials":"Invalid credentials","invalid-api-key":"Invalid API key","http-server-side-error":"HTTP server side error","http-client-side-error":"HTTP client side error","failed-to-load-content":"Failed to load content","failed-to-stream-content":"Failed to stream content","failed-to-stream-server-component":"Failed to stream server component","failed-to-render-content":"Failed to display content"},or=(r,e)=>r!==void 0&&r.length>0||e!==void 0&&e>0?"active":"starting",ds="nlux-comp-welcomeMessage-text",Oo=(r,e)=>{const t=r.querySelector(`.${ds}`);if(e!==""&&e!==void 0)if(t)t.textContent=e;else{const n=document.createElement("div");n.classList.add(ds),n.textContent=e,r.appendChild(n)}else t==null||t.remove()},Do="nlux-comp-welcomeMessage-personaName",ir=r=>{const e=document.createElement("div");e.classList.add("nlux-comp-welcomeMessage");const t=Or({name:r.name,avatar:r.avatar});e.append(t);const n=document.createElement("div"),s=document.createTextNode(r.name);return n.append(s),n.classList.add(Do),e.append(n),Oo(e,r.message),e},ps=()=>ir({name:"",avatar:"data:image/png;base64,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"});var Ea=Object.defineProperty,Ta=Object.getOwnPropertyDescriptor,hs=(r,e,t,n)=>{for(var s,o=n>1?void 0:n?Ta(e,t):e,i=r.length-1;i>=0;i--)(s=r[i])&&(o=(n?s(e,t,o):s(o))||o);return n&&o&&Ea(e,t,o),o};let mn=class extends Ne{constructor(r,e){super(r,e),this.updateConversationStarters=t=>{}}conversationStarterClicked(r){this.getProp("onConversationStarterSelected")(r)}};hs([qe("conversation-starter-selected")],mn.prototype,"conversationStarterClicked",1),mn=hs([et("conversationStarters",({appendToRoot:r,props:e,compEvent:t})=>{const n=(o=>{const i=document.createElement("div");return i.classList.add("nlux-comp-conversationStarters"),o.forEach((a,u)=>{const l=document.createElement("button");l.classList.add("nlux-comp-conversationStarter");let c=document.createElement("div");a.icon&&(typeof a.icon=="string"?(c=document.createElement("img"),c.setAttribute("src",a.icon),c.setAttribute("width","16px")):(c.className="nlux-comp-conversationStarter-icon-container",c.appendChild(a.icon)));const d=document.createElement("span");d.classList.add("nlux-comp-conversationStarter-prompt"),d.textContent=a.label??a.prompt,l.appendChild(c),l.appendChild(d),i.appendChild(l)}),i})(e.conversationStarters);r(n);let s=[];return e.conversationStarters.forEach((o,i)=>{const[a,u]=bn(n,`:scope > :nth-child(${i+1})`).on("click",()=>{t("conversation-starter-selected")(o)}).get();s.push(u)}),{elements:{},actions:{},onDestroy:()=>{s.forEach(o=>o()),s=[],n.remove()}}},({})=>{})],mn);let ar=class extends Ne{constructor(r,e){super(r,e),this.setConversationStarters(e.conversationStarters)}setConversationStarters(r){var e;if(r||this.conversationStartersComp){if(r&&!this.conversationStartersComp){const t=this.getProp("onConversationStarterSelected");return this.conversationStartersComp=gt(mn).withContext(this.context).withProps({conversationStarters:r,onConversationStarterSelected:t}).create(),void this.addSubComponent(this.conversationStartersComp.id,this.conversationStartersComp,"conversationStartersContainer")}!r&&this.conversationStartersComp?(this.removeSubComponent(this.conversationStartersComp.id),this.conversationStartersComp=void 0):(e=this.conversationStartersComp)==null||e.updateConversationStarters(r)}}setShowGreeting(r){this.setProp("showGreeting",r),this.executeDomAction("resetGreeting",r)}setAssistantPersona(r){this.setProp("assistantPersona",r),this.executeDomAction("updateAssistantPersona",r)}resetConversationStarters(){const r=this.getProp("conversationStarters");this.setConversationStarters(r)}};ar=((r,e,t,n)=>{for(var s,o=e,i=r.length-1;i>=0;i--)(s=r[i])&&(o=s(o)||o);return o})([et("launchPad",({appendToRoot:r,props:e})=>{const t={assistantPersona:e.assistantPersona,conversationStarters:e.conversationStarters,showGreeting:e.showGreeting!==!1};let n;if(t.showGreeting)if(e.assistantPersona){const i=e.assistantPersona;n=ir({name:i.name,avatar:i.avatar,message:i.tagline})}else n=ps();n&&(r(n),t.greetingElement=n);const s=document.createElement("div");s.classList.add("nlux-conversationStarters-container"),r(s);const o=(i=!0)=>{t.showGreeting=i,t.greetingElement&&(t.greetingElement.remove(),t.greetingElement=void 0),i&&(t.greetingElement=t.assistantPersona?ir({name:t.assistantPersona.name,avatar:t.assistantPersona.avatar,message:t.assistantPersona.tagline}):ps(),t.greetingElement&&s.insertAdjacentElement("beforebegin",t.greetingElement))};return{elements:{conversationStartersContainer:s},actions:{resetGreeting:(i=!0)=>{o(i)},updateAssistantPersona:i=>{const a=t.assistantPersona;t.assistantPersona=i,(a||i)&&t.showGreeting&&(i&&a?((u,l,c)=>{if(l.message!==c.message||l.name!==c.name||l.avatar!==c.avatar){if(l.message!==c.message&&Oo(u,c.message),l.name!==c.name){const d=u.querySelector(`.${Do}`);if(d){const p=document.createTextNode(c.name);d.replaceChildren(p)}}if(l.avatar!==c.avatar||l.name!==c.name){const d=u.querySelector(`.${Rr}`);d&&Io(d,{name:l.name,avatar:l.avatar},{name:c.name,avatar:c.avatar})}}})(t.greetingElement,{name:a==null?void 0:a.name,avatar:a==null?void 0:a.avatar,message:a==null?void 0:a.tagline},{name:i.name,avatar:i.avatar,message:i.tagline}):o())}},onDestroy:()=>{var i;(i=t.greetingElement)==null||i.remove(),s.remove()}}},({})=>{})],ar);var Ia=Object.defineProperty,Pa=Object.getOwnPropertyDescriptor,zn=(r,e,t,n)=>{for(var s,o=n>1?void 0:n?Pa(e,t):e,i=r.length-1;i>=0;i--)(s=r[i])&&(o=(n?s(e,t,o):s(o))||o);return n&&o&&Ia(e,t,o),o};let rn=class extends Ne{constructor(r,{conversationLayout:e,autoScroll:t,streamingAnimationSpeed:n,visible:s=!0,composer:o,assistantPersona:i,userPersona:a,showGreeting:u,conversationStarters:l,initialConversationContent:c,syntaxHighlighter:d,htmlSanitizer:p,markdownLinkTarget:h,showCodeBlockCopyButton:m,skipStreamingAnimation:v}){if(super(r,{conversationLayout:e,visible:s,autoScroll:t,streamingAnimationSpeed:n,assistantPersona:i,userPersona:a,conversationStarters:l,showGreeting:u,initialConversationContent:c,composer:o,syntaxHighlighter:d,htmlSanitizer:p,markdownLinkTarget:h,showCodeBlockCopyButton:m,skipStreamingAnimation:v}),this.prompt="",this.handleConversationStarterClick=w=>{this.composer.setDomProps({status:"submitting-conversation-starter"}),this.composer.handleTextChange(w.prompt),this.composer.handleSendButtonClick()},this.handleSegmentCountChange=w=>{var b,x;if(this.segmentCount===w)return;this.segmentCount=w;const C=or(this.getProp("initialConversationContent")||void 0,this.segmentCount);this.chatRoomStatus!==C&&(this.chatRoomStatus=C,this.executeDomAction("updateChatRoomStatus",this.chatRoomStatus),this.chatRoomStatus==="active"?(b=this.launchPad)!=null&&b.id&&(this.removeSubComponent((x=this.launchPad)==null?void 0:x.id),this.launchPad=void 0):this.addLaunchPad(this.getProp("showGreeting")??!0,this.getProp("assistantPersona"),this.getProp("conversationStarters"),this.handleConversationStarterClick))},this.segmentCount=c&&c.length>0?1:0,this.chatRoomStatus=or(c,this.segmentCount),this.chatRoomStatus==="starting"&&this.addLaunchPad(u,i,l,this.handleConversationStarterClick),this.addConversation(i,a,c),this.addComposer(o==null?void 0:o.placeholder,o==null?void 0:o.autoFocus,o==null?void 0:o.disableSubmitButton,o==null?void 0:o.submitShortcut),!this.conversation||!this.composer)throw new Error("Chat room not initialized — An error occurred while initializing key components.")}getConversationContentForAdapter(r="max"){return this.conversation.getConversationContentForAdapter(r)}hide(){this.setProp("visible",!1)}messagesContainerClicked(){var r;(r=this.composer)==null||r.focusTextInput()}onChatRoomReady(){Ze(()=>{var e,t;const r=(t=(e=this.renderedDom)==null?void 0:e.elements)==null?void 0:t.conversationContainer;if(r instanceof HTMLElement){this.autoScrollController=fa(r,this.getProp("autoScroll")??!0);let n=0;const s=20,o=()=>{r.scrollHeight>r.clientHeight&&(r.scrollTo({behavior:"smooth",top:5e4}),clearInterval(i))},i=setInterval(()=>{n>=s?clearInterval(i):(o(),n++)},10)}this.context.emit("ready",{aiChatProps:ga(this.context.aiChatProps)})})}setProps(r){var e,t,n,s,o,i,a;if(r.hasOwnProperty("autoScroll")){const u=r.autoScroll;(e=this.autoScrollController)==null||e.updateProps({autoScroll:u})}if(r.hasOwnProperty("conversationLayout")&&((t=this.conversation)==null||t.setConversationLayout(r.conversationLayout)),r.hasOwnProperty("syntaxHighlighter")&&this.setProp("syntaxHighlighter",r.syntaxHighlighter),r.hasOwnProperty("htmlSanitizer")&&this.setProp("htmlSanitizer",r.htmlSanitizer),r.hasOwnProperty("markdownLinkTarget")&&this.setProp("markdownLinkTarget",r.markdownLinkTarget),r.hasOwnProperty("skipStreamingAnimation")&&this.setProp("skipStreamingAnimation",r.skipStreamingAnimation),r.hasOwnProperty("streamingAnimationSpeed")&&this.setProp("streamingAnimationSpeed",r.streamingAnimationSpeed),r.hasOwnProperty("assistantPersona")&&((n=this.conversation)==null||n.setAssistantPersona(r.assistantPersona??void 0),(s=this.launchPad)==null||s.setAssistantPersona(r.assistantPersona??void 0)),r.hasOwnProperty("userPersona")&&((o=this.conversation)==null||o.setUserPersona(r.userPersona??void 0)),r.hasOwnProperty("showGreeting")&&((i=this.launchPad)==null||i.setShowGreeting(r.showGreeting??!0)),r.hasOwnProperty("conversationStarters")&&((a=this.launchPad)==null||a.setConversationStarters(r.conversationStarters)),r.hasOwnProperty("composer")&&this.composer){const u={...this.composer.getProp("domCompProps"),...r.composer};this.composer.setDomProps(u)}}show(){this.setProp("visible",!0)}setProp(r,e){if(super.setProp(r,e),r==="markdownLinkTarget"||r==="syntaxHighlighter"||r==="htmlSanitizer"||r==="skipStreamingAnimation"||r==="streamingAnimationSpeed"){const t=r,n=e;this.conversation.updateMarkdownStreamRenderer(t,n)}}addLaunchPad(r,e,t,n){this.launchPad=gt(ar).withContext(this.context).withProps({showGreeting:r,assistantPersona:e,conversationStarters:t,onConversationStarterSelected:n}).create(),this.addSubComponent(this.launchPad.id,this.launchPad,"launchPadContainer")}addConversation(r,e,t){this.conversation=gt(rr).withContext(this.context).withProps({assistantPersona:r,userPersona:e,messages:t,conversationLayout:this.getProp("conversationLayout"),markdownLinkTarget:this.getProp("markdownLinkTarget"),showCodeBlockCopyButton:this.getProp("showCodeBlockCopyButton"),skipStreamingAnimation:this.getProp("skipStreamingAnimation"),streamingAnimationSpeed:this.getProp("streamingAnimationSpeed"),syntaxHighlighter:this.getProp("syntaxHighlighter"),htmlSanitizer:this.getProp("htmlSanitizer"),onSegmentCountChange:this.handleSegmentCountChange}).create(),this.addSubComponent(this.conversation.id,this.conversation,"conversationContainer")}addComposer(r,e,t,n){this.composer=gt(ot).withContext(this.context).withProps({props:{domCompProps:{status:"typing",placeholder:r,autoFocus:e,disableSubmitButton:t,submitShortcut:n}},eventListeners:{onTextUpdated:s=>this.handleComposerTextChange(s),onSubmit:()=>this.handleComposerSubmit()}}).create(),this.addSubComponent(this.composer.id,this.composer,"composerContainer")}handleComposerSubmit(){const r=this.props.composer;(({context:e,composerInstance:t,conversation:n,autoScrollController:s,messageToSend:o,resetComposer:i,setComposerAsWaiting:a})=>()=>{var l,c;const u=n.addChatSegment();try{const d=t.getProp("domCompProps");t.setDomProps({...d,status:"submitting-prompt"});const p={aiChatProps:e.aiChatProps,conversationHistory:n.getConversationContentForAdapter((c=(l=e.aiChatProps)==null?void 0:l.conversationOptions)==null?void 0:c.historyPayloadSize)},h=Sa(o,e.adapter,p);h.observable.on("error",(m,v)=>{n.removeChatSegment(u),s==null||s.handleChatSegmentRemoved(u),i(!1),e.exception(m),e.emit("error",{errorId:m,message:Aa[m],errorObject:v})}),h.observable.on("userMessageReceived",m=>{n.addChatItem(u,m),e.emit("messageSent",{uid:m.uid,message:m.content}),Ze(()=>{if(s){const v=n.getChatSegmentContainer(u);v&&s.handleNewChatSegmentAdded(u,v)}})}),h.dataTransferMode==="batch"?h.observable.on("aiMessageReceived",m=>{const v=typeof m.content=="string",w={...m,content:v?"":m.content};n.addChatItem(u,w),v&&n.addChunk(u,w.uid,m.content,m.serverResponse),n.completeChatSegment(u),e.emit("messageReceived",{uid:m.uid,message:m.content}),i(!0)}):(h.observable.on("aiMessageStreamStarted",m=>{n.addChatItem(u,m),a(),e.emit("messageStreamStarted",{uid:m.uid})}),h.observable.on("aiChunkReceived",m=>{const{messageId:v,chunk:w,serverResponse:C}=m;n.addChunk(u,v,w,C)}),h.observable.on("aiMessageStreamed",m=>{m.status==="complete"&&e.emit("messageReceived",{uid:m.uid,message:m.content})}),h.observable.on("aiServerComponentStreamStarted",m=>{n.addChatItem(u,m),a(),e.emit("messageStreamStarted",{uid:m.uid})}),h.observable.on("aiServerComponentStreamed",m=>{m.status==="complete"&&e.emit("messageReceived",{uid:m.uid,message:m.content})}),h.observable.on("complete",()=>{n.completeChatSegment(u),i(!1)}))}catch(d){ee(d),i(!1)}})({context:this.context,composerInstance:this.composer,conversation:this.conversation,messageToSend:this.prompt,autoScrollController:this.autoScrollController,resetComposer:e=>{this.destroyed||this.resetComposer(e,r==null?void 0:r.autoFocus)},setComposerAsWaiting:()=>{this.destroyed||this.composer.setDomProps({status:"waiting"})}})()}handleComposerTextChange(r){this.prompt=r}resetComposer(r=!1,e=!1){if(!this.composer)return;const t={...this.composer.getProp("domCompProps"),status:"typing"};r&&(t.message=""),this.composer.setDomProps(t),e&&this.composer.focusTextInput()}};zn([qe("conversation-container-clicked")],rn.prototype,"messagesContainerClicked",1),zn([qe("chat-room-ready")],rn.prototype,"onChatRoomReady",1),rn=zn([et("chatRoom",({appendToRoot:r,compEvent:e,props:t})=>{const n=document.createElement("div");n.classList.add("nlux-conversation-container");const s=document.createElement("div");s.classList.add("nlux-composer-container");const o=document.createElement("div");o.classList.add("nlux-launchPad-container");const i=document.createDocumentFragment();i.appendChild(o),i.appendChild(n),i.appendChild(s);const a=t.visible??!0,u=document.createElement("div"),l=p=>{u.classList.remove("nlux-chatRoom-starting"),u.classList.remove("nlux-chatRoom-active"),u.classList.add(`nlux-chatRoom-${p}`)};u.classList.add("nlux-chatRoom-container"),l(or(t.initialConversationContent)),u.append(i),u.style.display=a?"":"none";const[c,d]=bn(u,":scope > .nlux-conversation-container").on("click",e("conversation-container-clicked")).get();return r(u),e("chat-room-ready")(),{elements:{composerContainer:s,conversationContainer:n,launchPadContainer:o},actions:{updateChatRoomStatus:p=>{l(p)}},onDestroy:()=>{d()}}},({propName:r,newValue:e,dom:{elements:t}})=>{})],rn);const Ra=r=>{const e=new Set;let t=!1,n=null,s=null;const o=()=>{if(t||e.size===0)return;t=!0;const a=e.values().next().value;e.delete(a),n=(({message:u})=>{const l=document.createElement("div");l.classList.add("nlux-comp-exceptionItem");const c=document.createElement("span");return c.classList.add("nlux-comp-exp_itm_msg"),c.append(document.createTextNode(u)),l.append(c),l})(a),r.append(n),s=setTimeout(i,3e3)},i=()=>{n==null||n.classList.add("nlux-comp-exceptionItem--hiding"),s=setTimeout(()=>{t=!1,n==null||n.remove(),n=null,o()},500)};return{displayException:a=>{e.add({message:a}),t||o()},destroy:()=>{e.clear(),n==null||n.remove(),s&&clearTimeout(s)}}};let ms=class extends Ne{constructor(r,e){super(r,e)}destroy(){super.destroy()}showAlert(r,e){this.executeDomAction("displayException",e)}};ms=((r,e,t,n)=>{for(var s,o=e,i=r.length-1;i>=0;i--)(s=r[i])&&(o=s(o)||o);return o})([et("exceptionsBox",({props:r,appendToRoot:e})=>{const t=(()=>{const s=document.createElement("div");return s.classList.add("nlux-comp-exceptionBox"),s})();e(t);let n=Ra(t);return{elements:{root:t},actions:{displayException:s=>{n==null||n.displayException(s)}},onDestroy:()=>{n==null||n.destroy(),t.remove(),n=void 0}}},()=>{})],ms);class Oa{constructor(e){this.actionToPerformWhenIdle="none",this.itemIds=new Set,this.status="idle",this.theContextId=null,this.updateQueueByItemId=new Map,this.dataAdapter=e}get contextId(){return this.theContextId}async createContext(e){if(this.status==="destroyed")return{success:!1,error:"The context has been destroyed"};const t=e??null;this.itemIds.clear(),t!==null&&Object.keys(t).forEach(n=>{this.itemIds.add(n)}),this.actionToPerformWhenIdle="none";try{const n=await this.dataAdapter.create(t??{});return n.success?(this.theContextId=n.contextId,{success:!0,contextId:n.contextId}):{success:!1,error:"Failed to set the context"}}catch(n){return{success:!1,error:`${n}`}}}async destroy(){return this.status==="destroyed"?(ee("Context.DataSyncService.destroy() called on a state that has already been destroyed"),{success:!0}):(this.status!=="updating"||this.contextId||ee("Context.DataSyncService.destroy() called with no contextId!"),this.contextId&&(this.status="updating",await this.dataAdapter.discard(this.contextId)),this.status="destroyed",this.theContextId=null,this.updateQueueByItemId.clear(),this.actionToPerformWhenIdle="none",{success:!0})}async flush(){if(!this.contextId)throw new Error("Context not initialized");if(this.status==="updating")return void(this.actionToPerformWhenIdle="flush");this.status="updating";const e=this.updateQueueByItemId.keys(),t=[],n=[];for(const o of e){const i=this.updateQueueByItemId.get(o);i&&(i.operation!=="delete"?["set","update"].includes(i.operation)&&t.push(o):n.push(o))}const s=t.reduce((o,i)=>{const a=this.updateQueueByItemId.get(i);return a&&(a.operation==="set"&&(o[i]={value:a.data,description:a.description}),a.operation!=="update"||a.data===void 0&&a.description===void 0||(o[i]={value:a.data,description:a.description})),o},{});if(Object.keys(s).length>0){Object.keys(s).forEach(o=>{this.updateQueueByItemId.delete(o)});try{await this.dataAdapter.updateItems(this.contextId,s)}catch(o){ee(`Failed to update context data: ${o}`),Object.keys(s).forEach(i=>{const a=s[i];a&&this.updateQueueByItemId.set(i,{operation:"update",data:a.value,description:a.description})})}}if(n.length>0){n.forEach(o=>{this.itemIds.delete(o),this.updateQueueByItemId.delete(o)});try{await this.dataAdapter.removeItems(this.contextId,n)}catch(o){ee(`Failed to delete context data: ${o}`),n.forEach(i=>{this.itemIds.add(i),this.updateQueueByItemId.set(i,{operation:"delete"})})}}await this.backToIdle()}hasActiveItemWithId(e){var t;return this.itemIds.has(e)&&(!this.updateQueueByItemId.has(e)||((t=this.updateQueueByItemId.get(e))==null?void 0:t.operation)!=="delete")}hasItemWithId(e){return this.itemIds.has(e)}removeItem(e){if(this.status==="destroyed")throw new Error("The context has been destroyed");if(!this.contextId)throw new Error("Context not initialized");if(!this.itemIds.has(e))throw new Error("Item not found");this.updateQueueByItemId.set(e,{operation:"delete"})}async resetContextData(e){const t=this.contextId;if(this.itemIds.clear(),this.updateQueueByItemId.clear(),this.status!=="updating"){if(!t)return ee("resetContextData() called with no contextId!"),void await this.backToIdle();try{this.status="updating",await this.dataAdapter.resetItems(t,e)}catch(n){ee(`Failed to reset context data: ${n}`)}this.updateQueueByItemId.clear(),e?(this.itemIds.clear(),Object.keys(e).forEach(n=>{this.itemIds.add(n)})):this.itemIds.clear(),await this.backToIdle()}else this.actionToPerformWhenIdle="reset"}setItemData(e,t,n){if(this.status==="destroyed")throw new Error("The context has been destroyed");this.updateQueueByItemId.set(e,{operation:"set",description:t,data:n}),this.itemIds.add(e)}updateItemData(e,t,n){if(this.status==="destroyed")throw new Error("The context has been destroyed");if(n===void 0&&t===void 0)return;const s=this.updateQueueByItemId.get(e);if((s==null?void 0:s.operation)==="delete")throw new Error("Item has been deleted");const o=n??(s==null?void 0:s.data)??void 0,i=t??(s==null?void 0:s.description)??void 0;this.updateQueueByItemId.set(e,{operation:"update",data:o,description:i})}async backToIdle(){this.status="idle";const e=this.actionToPerformWhenIdle;this.actionToPerformWhenIdle="none",e!=="flush"?e!=="reset"||await this.resetContextData():await this.flush()}}class Da{constructor(e,t){this.actionToPerformWhenIdle="none",this.status="idle",this.taskCallbacks=new Map,this.tasks=new Set,this.updateQueueByTaskId=new Map,this.contextId=e,this.adapter=t}canRunTask(e){return this.taskCallbacks.has(e)}async destroy(){return this.status==="destroyed"?(ee("Context.TasksService.destroy() called on a state that has already been destroyed"),{success:!0}):(this.status="updating",await this.unregisterAllTasks(),this.status="destroyed",this.updateQueueByTaskId.clear(),this.tasks.clear(),{success:!0})}async flush(){if(this.status==="updating")return void(this.actionToPerformWhenIdle="flush");const e=this.updateQueueByTaskId.keys(),t=[],n=[],s=[];for(const i of e){const a=this.updateQueueByTaskId.get(i);a&&(a.operation!=="delete"?a.operation!=="set"?a.operation==="update"&&n.push(i):t.push(i):s.push(i))}if(t.length===0&&n.length===0&&s.length===0)return;this.status="updating";const o={...this.buildUpdateObject(t),...this.buildUpdateObject(n)};if(Object.keys(o).length>0)try{const i=await this.adapter.updateTasks(this.contextId,o);if(i.success)for(const a of Object.keys(o)){const u=this.updateQueueByTaskId.get(a);u&&u.operation==="set"&&(this.taskCallbacks.set(a,u.callback),this.updateQueueByTaskId.delete(a))}else ee(`Context.TasksService.flush() failed to register tasks for context ID ${this.contextId}
Error: ${i.error}`)}catch(i){ee(`Context.TasksService.flush() failed to register tasks for context ID ${this.contextId}
Error: ${i}`)}if(s.length>0)try{const i=await this.adapter.removeTasks(this.contextId,s);if(i.success)for(const a of s)this.taskCallbacks.delete(a),this.updateQueueByTaskId.delete(a);else ee(`Context.TasksService.flush() failed to unregister tasks for context ID ${this.contextId}
Error: ${i.error}`)}catch(i){ee(`Context.TasksService.flush() failed to unregister tasks for context ID ${this.contextId}
Error: ${i}`)}await this.backToIdle()}hasTask(e){return this.tasks.has(e)}async registerTask(e,t,n,s){if(this.status==="destroyed")throw new Error("Context has been destroyed");if(this.tasks.has(e))throw new Error(`A task with ID '${e}' already exists. Task IDs must be unique.`);this.updateQueueByTaskId.set(e,{operation:"set",description:t,paramDescriptions:s||[],callback:n}),this.tasks.add(e)}async resetContextData(){const e=this.contextId;if(this.tasks.clear(),this.taskCallbacks.clear(),this.updateQueueByTaskId.clear(),this.status!=="updating"){if(!e)return ee("resetContextData() called with no contextId!"),void await this.backToIdle();try{this.status="updating",await this.unregisterAllTasks()}catch(t){ee(`Failed to reset context data: ${t}`)}await this.backToIdle()}else this.actionToPerformWhenIdle="reset"}async runTask(e,t){if(this.status==="destroyed")throw new Error("Context has been destroyed");if(!this.tasks.has(e))return{success:!1,error:`Task with ID ${e} not found`};const n=this.taskCallbacks.get(e);if(!n)return{success:!1,error:`The task with ID '${e}' has no callback. This is potential due to failed registration.`};try{return{success:!0,result:n(...t??[])}}catch(s){return{success:!1,error:`${s}`}}}async unregisterAllTasks(){if(this.tasks.size===0)return{success:!0};const e=await this.adapter.resetTasks(this.contextId);return e.success&&(this.tasks.clear(),this.taskCallbacks.clear(),this.updateQueueByTaskId.clear()),e}async unregisterTask(e){if(this.status==="destroyed")throw new Error("Context has been destroyed");return this.tasks.has(e)?(this.tasks.delete(e),this.taskCallbacks.delete(e),this.updateQueueByTaskId.set(e,{operation:"delete"}),{success:!0}):{success:!0}}async updateTaskCallback(e,t){if(this.status==="destroyed")throw new Error("The context has been destroyed");if(!this.tasks.has(e))throw new Error(`Task with ID ${e} not found`);this.taskCallbacks.set(e,t)}async updateTaskDescription(e,t){if(this.status==="destroyed")throw new Error("The context has been destroyed");if(!this.tasks.has(e))throw new Error(`Task with ID ${e} not found`);const n=this.updateQueueByTaskId.get(e);if(n)if(n.operation!=="update"){const s={operation:"update",description:t};this.updateQueueByTaskId.set(e,s)}else n.description=t;else this.updateQueueByTaskId.set(e,{operation:"update",description:t})}async updateTaskParamDescriptions(e,t){if(this.status==="destroyed")throw new Error("The context has been destroyed");if(!this.tasks.has(e))throw new Error(`Task with ID ${e} not found`);const n=this.updateQueueByTaskId.get(e);if(n)if(n.operation!=="update"){const s={operation:"update",paramDescriptions:t};this.updateQueueByTaskId.set(e,s)}else n.paramDescriptions=t;else this.updateQueueByTaskId.set(e,{operation:"update",paramDescriptions:t})}async backToIdle(){this.status="idle";const e=this.actionToPerformWhenIdle;this.actionToPerformWhenIdle="none",e!=="flush"?e!=="reset"||await this.unregisterAllTasks():await this.flush()}buildUpdateObject(e){return e.reduce((t,n)=>{const s=this.updateQueueByTaskId.get(n);if(!s)return t;if(s.operation==="set"&&(t[n]={description:s.description,paramDescriptions:s.paramDescriptions}),s.operation==="update"&&(s.description!==void 0||s.paramDescriptions!==void 0)){const o={};s.description!==void 0&&(o.description=s.description),s.paramDescriptions!==void 0&&(o.paramDescriptions=s.paramDescriptions),t[n]=o}return t},{})}}class Ma{constructor(){this.theDataAdapter=null,this.theDataSyncOptions=null,this.theDataSyncService=null,this.theStatus="idle",this.theTasksAdapter=null,this.theTasksService=null,this.destroy=async()=>{var e,t;return this.theStatus==="destroyed"||(this.theStatus="destroyed",await Promise.all([(e=this.theDataSyncService)==null?void 0:e.destroy(),(t=this.theTasksService)==null?void 0:t.destroy()]),this.theDataSyncService=null,this.theTasksService=null,this.theDataAdapter=null,this.theTasksAdapter=null),{success:!0}},this.flush=async()=>{var e,t;try{await((e=this.theDataSyncService)==null?void 0:e.flush())}catch{return{success:!1,error:"Failed to flush context data"}}try{await((t=this.theTasksService)==null?void 0:t.flush())}catch{return{success:!1,error:"Failed to flush context tasks"}}return{success:!0}},this.initialize=async e=>{var t;if(this.theStatus==="initializing")return ee(`${this.constructor.name}.initialize() called while context is still initializing! You cannot initialize twice at the same time. Use ${this.constructor.name}.status or await ${this.constructor.name}.initialize() to make sure that the context is not initializing before calling this method.`),{success:!1,error:"Context is still initializing! Use AiContext.status to check the context status before calling this method."};if(this.theStatus==="syncing")return ee(`${this.constructor.name}.initialize() called on an already initialized context! Use ${this.constructor.name}.status to check the context status before calling this method. `),{success:!1,error:"Context already initialized! Use AiContext.status to check the context status before calling this method."};if(this.theStatus==="destroyed")return ee(`${this.constructor.name}.initialize() called on destroyed context! Use ${this.constructor.name}.status to check the context status before calling this method. When the context is destroyed, it cannot be used anymore and you should create a new context.`),{success:!1,error:"Context has been destroyed"};if(this.theStatus==="error")return ee(`${this.constructor.name}.initialize() called on a context in error state! Use ${this.constructor.name}.status to check the context status before calling this method. When the context is in error state, it cannot be used anymore and you should create a new context.`),{success:!1,error:"Context is in error state"};if(!this.theDataAdapter)return ee(`Adapter not set! You must set the adapter before initializing the context. Use ${this.constructor.name}.withAdapter() to set the adapter before calling this method.`),{success:!1,error:"Adapter not set"};this.theStatus="initializing",this.theDataSyncService=new Oa(this.theDataAdapter);try{const n=await this.theDataSyncService.createContext(e);return this.status==="destroyed"?(n.success&&await((t=this.theDataSyncService)==null?void 0:t.resetContextData()),{success:!1,error:"Context has been destroyed"}):n.success?this.contextId?(this.theStatus="syncing",this.theTasksAdapter?this.theTasksService=new Da(this.contextId,this.theTasksAdapter):ee("Initializing nlux AiContext without tasks adapter. The context will not handle registering and executing tasks by AI. If you want to use tasks triggered by AI, you should provide an adapter that implements ContextAdapter interface [type ContextAdapter = ContextDataAdapter & ContextTasksAdapter]"),{success:!0,contextId:n.contextId}):(this.theStatus="error",{success:!1,error:"Failed to obtain context ID"}):(this.theStatus="error",{success:!1,error:"Failed to initialize context"})}catch(n){return this.theStatus="error",{success:!1,error:`${n}`}}},this.observeState=(e,t,n)=>{var s;if(this.theStatus!=="idle")if(this.theStatus!=="initializing"){if(this.theStatus!=="destroyed")return(s=this.theDataSyncService)==null||s.setItemData(e,t,n??null),{setData:o=>{var i;(i=this.theDataSyncService)==null||i.updateItemData(e,void 0,o)},setDescription:o=>{var i;(i=this.theDataSyncService)==null||i.updateItemData(e,o,void 0)},discard:()=>{var o;(o=this.theDataSyncService)==null||o.removeItem(e)}};ee(`${this.constructor.name}.observeState() called on destroyed context! Use ${this.constructor.name}.status to check the context status before calling this method. When the context is destroyed, it cannot be used anymore and you should create a new context.`)}else ee(`${this.constructor.name}.observeState() called while context is still initializing! You cannot observe state items while the context is initializing. Use ${this.constructor.name}.status or await ${this.constructor.name}.initialize() to make sure that the context is not initializing before calling this method.`);else ee(`${this.constructor.name}.observeState() called on idle context! Use ${this.constructor.name}.status to check the context status before calling this method. Use ${this.constructor.name}.initialize() to initialize the context when it is not initialized.`)},this.registerTask=(e,t,n,s)=>{if(this.theStatus==="idle")return void ee(`${this.constructor.name}.registerTask() called on idle context! Use ${this.constructor.name}.status to check the context status before calling this method. Use ${this.constructor.name}.initialize() to initialize the context when it is not initialized.`);if(!this.theTasksService)return void ee(`${this.constructor.name}.registerTask() called on a context that has does not have tasks service! You should use an adapter that implements ContextTasksAdapter interface in order to register tasks. Use ${this.constructor.name}.withAdapter() to set the right adapter before calling this method.`);if(this.theStatus==="destroyed")return void ee(`${this.constructor.name}.registerTask() called on destroyed context! Use ${this.constructor.name}.status to check the context status before calling this method. When the context is destroyed, it cannot be used anymore and you should create a new context.`);let o="updating";if(!this.theTasksService.hasTask(e))return this.theTasksService.registerTask(e,t,n,s).then(()=>{o==="updating"&&(o="set")}).catch(()=>{ee(`${this.constructor.name}.registerTask() failed to register task '${e}'!
The task will be marked as deleted and will not be updated anymore.`),o==="updating"&&(o="deleted",this.unregisterTask(e))}),{discard:()=>{o="deleted",this.unregisterTask(e)},setDescription:i=>{var a;if(o==="deleted")throw new Error("Task has been deleted");o="updating",(a=this.theTasksService)==null||a.updateTaskDescription(e,i).then(()=>{o==="updating"&&(o="set")}).catch(()=>{o==="updating"&&(o="set")})},setCallback:i=>{var a;if(o==="deleted")throw new Error("Task has been deleted");o="updating",(a=this.theTasksService)==null||a.updateTaskCallback(e,i).then(()=>{o==="updating"&&(o="set")}).catch(()=>{o==="updating"&&(o="set")})},setParamDescriptions:i=>{var a;if(o==="deleted")throw new Error("Task has been deleted");o="updating",(a=this.theTasksService)==null||a.updateTaskParamDescriptions(e,i).then(()=>{o==="updating"&&(o="set")}).catch(()=>{o==="updating"&&(o="set")})}};console.warn(`${this.constructor.name}.registerTask() called with existing taskId: ${e}! It's only possible to register a task once. Use ${this.constructor.name}.hasTask() to check if the task already exists. Use ${this.constructor.name}.registerTask() with a different taskId if you want to register a different task.`)},this.reset=async e=>{var t,n;if(!this.theDataSyncService)return ee(`${this.constructor.name}.reset() called on a state that has not been initialized! Use ${this.constructor.name}.initialize() to initialize the context before attempting any reset.`),{success:!1,error:"Context has not been initialized"};try{return await((t=this.theDataSyncService)==null?void 0:t.resetContextData(e)),await((n=this.theTasksService)==null?void 0:n.resetContextData()),this.theStatus="syncing",{success:!0}}catch(s){return this.theStatus="error",{success:!1,error:`${s}`}}},this.runTask=async(e,t)=>this.theTasksService?this.theTasksService.runTask(e,t):(ee(`${this.constructor.name}.runTask() called on a state that has not been initialized! Use ${this.constructor.name}.initialize() to initialize the context before attempting any task execution.`),Promise.resolve({success:!1,error:"Context has not been initialized with tasks service. An adapter that implements ContextTasksAdapter interface should be provided to the context, and the context should be initialized before running any tasks."})),this.withAdapter=e=>{if(this.theDataAdapter)throw new Error("Adapter already set");const t=typeof(e==null?void 0:e.build)=="function";this.theDataAdapter=t?e.build():e;const n=(s=>{const o=s;return!(!o||typeof o.resetTasks!="function"||typeof o.updateTasks!="function"||typeof o.removeTasks!="function")&&o})(this.theDataAdapter);return n&&(this.theTasksAdapter=n),this},this.withDataSyncOptions=e=>{if(this.theDataSyncOptions)throw new Error("Data sync options already set");return this.theDataSyncOptions={...e},this},this.unregisterTask=e=>this.theTasksService?this.theTasksService.unregisterTask(e):(ee(`${this.constructor.name}.unregisterTask() called on a state that has not been initialized! Use ${this.constructor.name}.initialize() to initialize the context before attempting any task unregister.`),Promise.resolve({success:!1,error:"Context has not been initialized"}))}get contextId(){var e;return((e=this.theDataSyncService)==null?void 0:e.contextId)??null}get status(){return this.theStatus}hasItem(e){var t;return((t=this.theDataSyncService)==null?void 0:t.hasItemWithId(e))??!1}hasRunnableTask(e){var t;return((t=this.theTasksService)==null?void 0:t.canRunTask(e))??!1}hasTask(e){var t;return((t=this.theTasksService)==null?void 0:t.hasTask(e))??!1}}const fs=()=>new Ma,ja={"1k":1e3,"10k":1e4,"100k":1e5,"1mb":1e6,"10mb":1e7};var gs=Object.prototype.hasOwnProperty;function vs(r,e){for(let t of r.keys())if(zt(t,e))return t}function zt(r,e){var t,n,s;if(r===e)return!0;if(r&&e&&(t=r.constructor)===e.constructor){if(t===Date)return r.getTime()===e.getTime();if(t===RegExp)return r.toString()===e.toString();if(t===Array){if((n=r.length)===e.length)for(;n--&&zt(r[n],e[n]););return n===-1}if(t===Set){if(r.size!==e.size)return!1;for(n of r)if((s=n)&&typeof s=="object"&&!(s=vs(e,s))||!e.has(s))return!1;return!0}if(t===Map){if(r.size!==e.size)return!1;for(n of r)if((s=n[0])&&typeof s=="object"&&!(s=vs(e,s))||!zt(n[1],e.get(s)))return!1;return!0}if(t===ArrayBuffer)r=new Uint8Array(r),e=new Uint8Array(e);else if(t===DataView){if((n=r.byteLength)===e.byteLength)for(;n--&&r.getInt8(n)===e.getInt8(n););return n===-1}if(ArrayBuffer.isView(r)){if((n=r.byteLength)===e.byteLength)for(;n--&&r[n]===e[n];);return n===-1}if(!t||typeof r=="object"){for(t in n=0,r)if(gs.call(r,t)&&++n&&!gs.call(e,t)||!(t in e)||!zt(r[t],e[t]))return!1;return Object.keys(e).length===n}}return r!=r&&e!=e}const Ba=r=>{const e=new Set;let t=!1,n=null,s=null;const o=()=>{if(t||e.size===0)return;t=!0;const a=e.values().next().value;e.delete(a),n=(({message:u})=>{const l=document.createElement("div");l.classList.add("nlux-comp-exceptionItem");const c=document.createElement("span");return c.classList.add("nlux-comp-exp_itm_msg"),c.append(document.createTextNode(u)),l.append(c),l})(a),r.append(n),s=setTimeout(i,3e3)},i=()=>{n==null||n.classList.add("nlux-comp-exceptionItem--hiding"),s=setTimeout(()=>{t=!1,n==null||n.remove(),n=null,o()},500)};return{displayException:a=>{e.add({message:a}),t||o()},destroy:()=>{e.clear(),n==null||n.remove(),s&&clearTimeout(s)}}},Ke=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const e=16*Math.random()|0;return(r=="x"?e:3&e|8).toString(16)}),De=r=>{typeof r!="string"?r&&typeof r.toString=="function"?console.warn(`[nlux] ${r.toString()}`):console.warn("[nlux]"):console.warn(`[nlux] ${r}`)},ys=[],_t=r=>{ys.includes(r)||(ys.push(r),De(r))},La=r=>{const e="nlux-chatSegment";return r==="complete"?`${e} nlux-chatSegment--complete`:r==="error"?`${e} nlux-chatSegment--error`:`${e} nlux-chatSegment--active`},cr={received:"nlux_msg_received",sent:"nlux_msg_sent"},lr={streaming:"nlux_msg_streaming",complete:"nlux_msg_complete"},bs=r=>{if(!(r instanceof HTMLButtonElement)||r.dataset.clickListenerSet==="true")return;let e=!1;const t=r.nextElementSibling;r.addEventListener("click",()=>{if(e||!t)return;const n=t.innerText;navigator.clipboard.writeText(n??""),e=!0,r.classList.add("clicked"),setTimeout(()=>{e=!1,r.classList.remove("clicked")},1e3)}),r.dataset.clickListenerSet="true"},Mo=r=>{const e="nlux-comp-copyButton";r instanceof HTMLButtonElement&&r.classList.contains(e)?bs(r):r.querySelectorAll(`.${e}`).forEach(bs)};function za(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let lt={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function xs(r){lt=r}var $a=Object.defineProperty,jo=(r,e,t)=>((n,s,o)=>s in n?$a(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,typeof e!="symbol"?e+"":e,t);class $t{constructor(e){jo(this,"options"),this.options=e||lt}postprocess(e){return e}preprocess(e){return e}processAllTokens(e){return e}}jo($t,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));const Bo=/[&<>"']/,Fa=new RegExp(Bo.source,"g"),Lo=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Ha=new RegExp(Lo.source,"g"),Na={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ws=r=>Na[r];function $e(r,e){if(e){if(Bo.test(r))return r.replace(Fa,ws)}else if(Lo.test(r))return r.replace(Ha,ws);return r}const _a=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function Ua(r){return r.replace(_a,(e,t)=>(t=t.toLowerCase())==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):"")}const qa=/(^|[^\[])\^/g;function ge(r,e){let t=typeof r=="string"?r:r.source;e=e||"";const n={replace:(s,o)=>{let i=typeof o=="string"?o:o.source;return i=i.replace(qa,"$1"),t=t.replace(s,i),n},getRegex:()=>new RegExp(t,e)};return n}function ks(r){try{r=encodeURI(r).replace(/%25/g,"%")}catch{return null}return r}const Ft={exec:()=>null};function Cs(r,e){const t=r.replace(/\|/g,(s,o,i)=>{let a=!1,u=o;for(;--u>=0&&i[u]==="\\";)a=!a;return a?"|":" |"}).split(/ \|/);let n=0;if(t[0].trim()||t.shift(),t.length>0&&!t[t.length-1].trim()&&t.pop(),e)if(t.length>e)t.splice(e);else for(;t.length<e;)t.push("");for(;n<t.length;n++)t[n]=t[n].trim().replace(/\\\|/g,"|");return t}function sn(r,e,t){const n=r.length;if(n===0)return"";let s=0;for(;s<n;){const o=r.charAt(n-s-1);if(o!==e||t){if(o===e||!t)break;s++}else s++}return r.slice(0,n-s)}const Yt=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,zo=/(?:[*+-]|\d{1,9}[.)])/,$o=ge(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,zo).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),Dr=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Mr=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Wa=ge(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",Mr).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Ya=ge(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,zo).getRegex(),Rn="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",jr=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Qa=ge("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",jr).replace("tag",Rn).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Ss=ge(Dr).replace("hr",Yt).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Rn).getRegex(),Br={blockquote:ge(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Ss).getRegex(),code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,def:Wa,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:Yt,html:Qa,lheading:$o,list:Ya,newline:/^(?: *(?:\n|$))+/,paragraph:Ss,table:Ft,text:/^[^\n]+/},As=ge("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Yt).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Rn).getRegex(),Za={...Br,table:As,paragraph:ge(Dr).replace("hr",Yt).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",As).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Rn).getRegex()},Xa={...Br,html:ge(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",jr).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ft,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ge(Dr).replace("hr",Yt).replace("heading",` *#{1,6} *[^
]`).replace("lheading",$o).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Fo=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Ho=/^( {2,}|\\)\n(?!\s*$)/,Qt="\\p{P}\\p{S}",Ka=ge(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Qt).getRegex(),Ga=ge(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Qt).getRegex(),Ja=ge("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Qt).getRegex(),Va=ge("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Qt).getRegex(),ec=ge(/\\([punct])/,"gu").replace(/punct/g,Qt).getRegex(),tc=ge(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),nc=ge(jr).replace("(?:-->|$)","-->").getRegex(),rc=ge("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",nc).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),xn=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,sc=ge(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",xn).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Es=ge(/^!?\[(label)\]\[(ref)\]/).replace("label",xn).replace("ref",Mr).getRegex(),Ts=ge(/^!?\[(ref)\](?:\[\])?/).replace("ref",Mr).getRegex(),Lr={_backpedal:Ft,anyPunctuation:ec,autolink:tc,blockSkip:/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,br:Ho,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:Ft,emStrongLDelim:Ga,emStrongRDelimAst:Ja,emStrongRDelimUnd:Va,escape:Fo,link:sc,nolink:Ts,punctuation:Ka,reflink:Es,reflinkSearch:ge("reflink|nolink(?!\\()","g").replace("reflink",Es).replace("nolink",Ts).getRegex(),tag:rc,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:Ft},oc={...Lr,link:ge(/^!?\[(label)\]\((.*?)\)/).replace("label",xn).getRegex(),reflink:ge(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",xn).getRegex()},ur={...Lr,escape:ge(Fo).replace("])","~|])").getRegex(),url:ge(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},ic={...ur,br:ge(Ho).replace("{2,}","*").getRegex(),text:ge(ur.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},on={normal:Br,gfm:Za,pedantic:Xa},Ot={normal:Lr,gfm:ur,breaks:ic,pedantic:oc};var ac=Object.defineProperty,$n=(r,e,t)=>((n,s,o)=>s in n?ac(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,typeof e!="symbol"?e+"":e,t);function Is(r,e,t,n){const s=e.href,o=e.title?$e(e.title):null,i=r[1].replace(/\\([\[\]])/g,"$1");if(r[0].charAt(0)!=="!"){n.state.inLink=!0;const a={type:"link",raw:t,href:s,title:o,text:i,tokens:n.inlineTokens(i)};return n.state.inLink=!1,a}return{type:"image",raw:t,href:s,title:o,text:$e(i)}}class wn{constructor(e){$n(this,"lexer"),$n(this,"options"),$n(this,"rules"),this.options=e||lt}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let n,s;return t[2]==="@"?(n=$e(t[1]),s="mailto:"+n):(n=$e(t[1]),s=n),{type:"link",raw:t[0],text:n,href:s,tokens:[{type:"text",raw:n,text:n}]}}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let n=t[0].replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`);n=sn(n.replace(/^ *>[ \t]?/gm,""),`
`);const s=this.lexer.state.top;this.lexer.state.top=!0;const o=this.lexer.blockTokens(n);return this.lexer.state.top=s,{type:"blockquote",raw:t[0],tokens:o,text:n}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const n=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:sn(n,`
`)}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(/\n/g," ");const s=/[^ ]/.test(n),o=/^ /.test(n)&&/ $/.test(n);return s&&o&&(n=n.substring(1,n.length-1)),n=$e(n,!0),{type:"codespan",raw:t[0],text:n}}}def(e){const t=this.rules.block.def.exec(e);if(t){const n=t[1].toLowerCase().replace(/\s+/g," "),s=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:s,title:o}}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}emStrong(e,t,n=""){let s=this.rules.inline.emStrongLDelim.exec(e);if(s&&!(s[3]&&n.match(/[\p{L}\p{N}]/u))&&(!(s[1]||s[2])||!n||this.rules.inline.punctuation.exec(n))){const o=[...s[0]].length-1;let i,a,u=o,l=0;const c=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,t=t.slice(-1*e.length+o);(s=c.exec(t))!=null;){if(i=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!i)continue;if(a=[...i].length,s[3]||s[4]){u+=a;continue}if((s[5]||s[6])&&o%3&&!((o+a)%3)){l+=a;continue}if(u-=a,u>0)continue;a=Math.min(a,a+u+l);const d=[...s[0]][0].length,p=e.slice(0,o+s.index+d+a);if(Math.min(o,a)%2){const m=p.slice(1,-1);return{type:"em",raw:p,text:m,tokens:this.lexer.inlineTokens(m)}}const h=p.slice(2,-2);return{type:"strong",raw:p,text:h,tokens:this.lexer.inlineTokens(h)}}}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:$e(t[1])}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const n=t[0],s=function(o,i){const a=o.match(/^(\s+)(?:```)/);if(a===null)return i;const u=a[1];return i.split(`
`).map(l=>{const c=l.match(/^\s+/);if(c===null)return l;const[d]=c;return d.length>=u.length?l.slice(u.length):l}).join(`
`)}(n,t[3]||"");return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:s}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(/#$/.test(n)){const s=sn(n,"#");this.options.pedantic?n=s.trim():s&&!/ $/.test(s)||(n=s.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let n;return n=this.lexer.state.inRawBlock?t[0]:$e(t[0]),{type:"text",raw:t[0],text:n}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}link(e){const t=this.rules.inline.link.exec(e);if(t){const n=t[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;const i=sn(n.slice(0,-1),"\\");if((n.length-i.length)%2==0)return}else{const i=function(a,u){if(a.indexOf(u[1])===-1)return-1;let l=0;for(let c=0;c<a.length;c++)if(a[c]==="\\")c++;else if(a[c]===u[0])l++;else if(a[c]===u[1]&&(l--,l<0))return c;return-1}(t[2],"()");if(i>-1){const a=(t[0].indexOf("!")===0?5:4)+t[1].length+i;t[2]=t[2].substring(0,i),t[0]=t[0].substring(0,a).trim(),t[3]=""}}let s=t[2],o="";if(this.options.pedantic){const i=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s);i&&(s=i[1],o=i[3])}else o=t[3]?t[3].slice(1,-1):"";return s=s.trim(),/^</.test(s)&&(s=this.options.pedantic&&!/>$/.test(n)?s.slice(1):s.slice(1,-1)),Is(t,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim();const s=n.length>1,o={type:"list",raw:"",ordered:s,start:s?+n.slice(0,-1):"",loose:!1,items:[]};n=s?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=s?n:"[*+-]");const i=new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`);let a="",u="",l=!1;for(;e;){let c=!1;if(!(t=i.exec(e))||this.rules.block.hr.test(e))break;a=t[0],e=e.substring(a.length);let d=t[2].split(`
`,1)[0].replace(/^\t+/,C=>" ".repeat(3*C.length)),p=e.split(`
`,1)[0],h=0;this.options.pedantic?(h=2,u=d.trimStart()):(h=t[2].search(/[^ ]/),h=h>4?1:h,u=d.slice(h),h+=t[1].length);let m=!1;if(!d&&/^ *$/.test(p)&&(a+=p+`
`,e=e.substring(p.length+1),c=!0),!c){const C=new RegExp(`^ {0,${Math.min(3,h-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),b=new RegExp(`^ {0,${Math.min(3,h-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),x=new RegExp(`^ {0,${Math.min(3,h-1)}}(?:\`\`\`|~~~)`),E=new RegExp(`^ {0,${Math.min(3,h-1)}}#`);for(;e;){const k=e.split(`
`,1)[0];if(p=k,this.options.pedantic&&(p=p.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),x.test(p)||E.test(p)||C.test(p)||b.test(e))break;if(p.search(/[^ ]/)>=h||!p.trim())u+=`
`+p.slice(h);else{if(m||d.search(/[^ ]/)>=4||x.test(d)||E.test(d)||b.test(d))break;u+=`
`+p}m||p.trim()||(m=!0),a+=k+`
`,e=e.substring(k.length+1),d=p.slice(h)}}o.loose||(l?o.loose=!0:/\n *\n *$/.test(a)&&(l=!0));let v,w=null;this.options.gfm&&(w=/^\[[ xX]\] /.exec(u),w&&(v=w[0]!=="[ ] ",u=u.replace(/^\[[ xX]\] +/,""))),o.items.push({type:"list_item",raw:a,task:!!w,checked:v,loose:!1,text:u,tokens:[]}),o.raw+=a}o.items[o.items.length-1].raw=a.trimEnd(),o.items[o.items.length-1].text=u.trimEnd(),o.raw=o.raw.trimEnd();for(let c=0;c<o.items.length;c++)if(this.lexer.state.top=!1,o.items[c].tokens=this.lexer.blockTokens(o.items[c].text,[]),!o.loose){const d=o.items[c].tokens.filter(h=>h.type==="space"),p=d.length>0&&d.some(h=>/\n.*\n/.test(h.raw));o.loose=p}if(o.loose)for(let c=0;c<o.items.length;c++)o.items[c].loose=!0;return o}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){const s=t[(n[2]||n[1]).replace(/\s+/g," ").toLowerCase()];if(!s){const o=n[0].charAt(0);return{type:"text",raw:o,text:o}}return Is(n,s,n[0],this.lexer)}}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}table(e){const t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;const n=Cs(t[1]),s=t[2].replace(/^\||\| *$/g,"").split("|"),o=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],i={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===s.length){for(const a of s)/^ *-+: *$/.test(a)?i.align.push("right"):/^ *:-+: *$/.test(a)?i.align.push("center"):/^ *:-+ *$/.test(a)?i.align.push("left"):i.align.push(null);for(const a of n)i.header.push({text:a,tokens:this.lexer.inline(a)});for(const a of o)i.rows.push(Cs(a,i.header.length).map(u=>({text:u,tokens:this.lexer.inline(u)})));return i}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}url(e){var n;let t;if(t=this.rules.inline.url.exec(e)){let s,o;if(t[2]==="@")s=$e(t[0]),o="mailto:"+s;else{let i;do i=t[0],t[0]=((n=this.rules.inline._backpedal.exec(t[0]))==null?void 0:n[0])??"";while(i!==t[0]);s=$e(t[0]),o=t[1]==="www."?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:s,href:o,tokens:[{type:"text",raw:s,text:s}]}}}}var cc=Object.defineProperty,Dt=(r,e,t)=>((n,s,o)=>s in n?cc(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,typeof e!="symbol"?e+"":e,t);class Ge{constructor(e){Dt(this,"options"),Dt(this,"state"),Dt(this,"tokens"),Dt(this,"inlineQueue"),Dt(this,"tokenizer"),this.tokens=[],this.tokens.links=Object.create(null),this.options=e||lt,this.options.tokenizer=this.options.tokenizer||new wn,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:on.normal,inline:Ot.normal};this.options.pedantic?(t.block=on.pedantic,t.inline=Ot.pedantic):this.options.gfm&&(t.block=on.gfm,this.options.breaks?t.inline=Ot.breaks:t.inline=Ot.gfm),this.tokenizer.rules=t}static get rules(){return{block:on,inline:Ot}}static lex(e,t){return new Ge(t).lex(e)}static lexInline(e,t){return new Ge(t).inlineTokens(e)}blockTokens(e,t=[]){let n,s,o,i;for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,(a,u,l)=>u+"    ".repeat(l.length));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>!!(n=a.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0))))if(n=this.tokenizer.space(e))e=e.substring(n.raw.length),n.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(n);else if(n=this.tokenizer.code(e))e=e.substring(n.raw.length),s=t[t.length-1],!s||s.type!=="paragraph"&&s.type!=="text"?t.push(n):(s.raw+=`
`+n.raw,s.text+=`
`+n.text,this.inlineQueue[this.inlineQueue.length-1].src=s.text);else if(n=this.tokenizer.fences(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.heading(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.hr(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.blockquote(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.list(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.html(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.def(e))e=e.substring(n.raw.length),s=t[t.length-1],!s||s.type!=="paragraph"&&s.type!=="text"?this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title}):(s.raw+=`
`+n.raw,s.text+=`
`+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=s.text);else if(n=this.tokenizer.table(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.lheading(e))e=e.substring(n.raw.length),t.push(n);else{if(o=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const u=e.slice(1);let l;this.options.extensions.startBlock.forEach(c=>{l=c.call({lexer:this},u),typeof l=="number"&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(o=e.substring(0,a+1))}if(this.state.top&&(n=this.tokenizer.paragraph(o)))s=t[t.length-1],i&&s.type==="paragraph"?(s.raw+=`
`+n.raw,s.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):t.push(n),i=o.length!==e.length,e=e.substring(n.raw.length);else if(n=this.tokenizer.text(e))e=e.substring(n.raw.length),s=t[t.length-1],s&&s.type==="text"?(s.raw+=`
`+n.raw,s.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):t.push(n);else if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n,s,o,i,a,u,l=e;if(this.tokens.links){const c=Object.keys(this.tokens.links);if(c.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(l))!=null;)c.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.blockSkip.exec(l))!=null;)l=l.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(l))!=null;)l=l.slice(0,i.index)+"++"+l.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(a||(u=""),a=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(c=>!!(n=c.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0))))if(n=this.tokenizer.escape(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.tag(e))e=e.substring(n.raw.length),s=t[t.length-1],s&&n.type==="text"&&s.type==="text"?(s.raw+=n.raw,s.text+=n.text):t.push(n);else if(n=this.tokenizer.link(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(n.raw.length),s=t[t.length-1],s&&n.type==="text"&&s.type==="text"?(s.raw+=n.raw,s.text+=n.text):t.push(n);else if(n=this.tokenizer.emStrong(e,l,u))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.codespan(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.br(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.del(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.autolink(e))e=e.substring(n.raw.length),t.push(n);else if(this.state.inLink||!(n=this.tokenizer.url(e))){if(o=e,this.options.extensions&&this.options.extensions.startInline){let c=1/0;const d=e.slice(1);let p;this.options.extensions.startInline.forEach(h=>{p=h.call({lexer:this},d),typeof p=="number"&&p>=0&&(c=Math.min(c,p))}),c<1/0&&c>=0&&(o=e.substring(0,c+1))}if(n=this.tokenizer.inlineText(o))e=e.substring(n.raw.length),n.raw.slice(-1)!=="_"&&(u=n.raw.slice(-1)),a=!0,s=t[t.length-1],s&&s.type==="text"?(s.raw+=n.raw,s.text+=n.text):t.push(n);else if(e){const c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}throw new Error(c)}}else e=e.substring(n.raw.length),t.push(n);return t}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const n=this.inlineQueue[t];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}}var lc=Object.defineProperty,uc=(r,e,t)=>((n,s,o)=>s in n?lc(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,e+"",t);class kn{constructor(e){uc(this,"options"),this.options=e||lt}blockquote(e){return`<blockquote>
${e}</blockquote>
`}br(){return"<br>"}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}code(e,t,n){var o;const s=(o=(t||"").match(/^\S*/))==null?void 0:o[0];return e=e.replace(/\n$/,"")+`
`,s?'<pre><code class="language-'+$e(s)+'">'+(n?e:$e(e,!0))+`</code></pre>
`:"<pre><code>"+(n?e:$e(e,!0))+`</code></pre>
`}codespan(e){return`<code>${e}</code>`}del(e){return`<del>${e}</del>`}em(e){return`<em>${e}</em>`}heading(e,t,n){return`<h${t}>${e}</h${t}>
`}hr(){return`<hr>
`}html(e,t){return e}image(e,t,n){const s=ks(e);if(s===null)return n;let o=`<img src="${e=s}" alt="${n}"`;return t&&(o+=` title="${t}"`),o+=">",o}link(e,t,n){const s=ks(e);if(s===null)return n;let o='<a href="'+(e=s)+'"';return t&&(o+=' title="'+t+'"'),o+=">"+n+"</a>",o}list(e,t,n){const s=t?"ol":"ul";return"<"+s+(t&&n!==1?' start="'+n+'"':"")+`>
`+e+"</"+s+`>
`}listitem(e,t,n){return`<li>${e}</li>
`}paragraph(e){return`<p>${e}</p>
`}strong(e){return`<strong>${e}</strong>`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablecell(e,t){const n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>
`}tablerow(e){return`<tr>
${e}</tr>
`}text(e){return e}}class zr{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,n){return""+n}image(e,t,n){return""+n}br(){return""}}var dc=Object.defineProperty,Fn=(r,e,t)=>((n,s,o)=>s in n?dc(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,typeof e!="symbol"?e+"":e,t);class Je{constructor(e){Fn(this,"options"),Fn(this,"renderer"),Fn(this,"textRenderer"),this.options=e||lt,this.options.renderer=this.options.renderer||new kn,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new zr}static parse(e,t){return new Je(t).parse(e)}static parseInline(e,t){return new Je(t).parseInline(e)}parse(e,t=!0){let n="";for(let s=0;s<e.length;s++){const o=e[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]){const i=o,a=this.options.extensions.renderers[i.type].call({parser:this},i);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(i.type)){n+=a||"";continue}}switch(o.type){case"space":continue;case"hr":n+=this.renderer.hr();continue;case"heading":{const i=o;n+=this.renderer.heading(this.parseInline(i.tokens),i.depth,Ua(this.parseInline(i.tokens,this.textRenderer)));continue}case"code":{const i=o;n+=this.renderer.code(i.text,i.lang,!!i.escaped);continue}case"table":{const i=o;let a="",u="";for(let c=0;c<i.header.length;c++)u+=this.renderer.tablecell(this.parseInline(i.header[c].tokens),{header:!0,align:i.align[c]});a+=this.renderer.tablerow(u);let l="";for(let c=0;c<i.rows.length;c++){const d=i.rows[c];u="";for(let p=0;p<d.length;p++)u+=this.renderer.tablecell(this.parseInline(d[p].tokens),{header:!1,align:i.align[p]});l+=this.renderer.tablerow(u)}n+=this.renderer.table(a,l);continue}case"blockquote":{const i=o,a=this.parse(i.tokens);n+=this.renderer.blockquote(a);continue}case"list":{const i=o,a=i.ordered,u=i.start,l=i.loose;let c="";for(let d=0;d<i.items.length;d++){const p=i.items[d],h=p.checked,m=p.task;let v="";if(p.task){const w=this.renderer.checkbox(!!h);l?p.tokens.length>0&&p.tokens[0].type==="paragraph"?(p.tokens[0].text=w+" "+p.tokens[0].text,p.tokens[0].tokens&&p.tokens[0].tokens.length>0&&p.tokens[0].tokens[0].type==="text"&&(p.tokens[0].tokens[0].text=w+" "+p.tokens[0].tokens[0].text)):p.tokens.unshift({type:"text",text:w+" "}):v+=w+" "}v+=this.parse(p.tokens,l),c+=this.renderer.listitem(v,m,!!h)}n+=this.renderer.list(c,a,u);continue}case"html":{const i=o;n+=this.renderer.html(i.text,i.block);continue}case"paragraph":{const i=o;n+=this.renderer.paragraph(this.parseInline(i.tokens));continue}case"text":{let i=o,a=i.tokens?this.parseInline(i.tokens):i.text;for(;s+1<e.length&&e[s+1].type==="text";)i=e[++s],a+=`
`+(i.tokens?this.parseInline(i.tokens):i.text);n+=t?this.renderer.paragraph(a):a;continue}default:{const i='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(i),"";throw new Error(i)}}}return n}parseInline(e,t){t=t||this.renderer;let n="";for(let s=0;s<e.length;s++){const o=e[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]){const i=this.options.extensions.renderers[o.type].call({parser:this},o);if(i!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){n+=i||"";continue}}switch(o.type){case"escape":{const i=o;n+=t.text(i.text);break}case"html":{const i=o;n+=t.html(i.text);break}case"link":{const i=o;n+=t.link(i.href,i.title,this.parseInline(i.tokens,t));break}case"image":{const i=o;n+=t.image(i.href,i.title,i.text);break}case"strong":{const i=o;n+=t.strong(this.parseInline(i.tokens,t));break}case"em":{const i=o;n+=t.em(this.parseInline(i.tokens,t));break}case"codespan":{const i=o;n+=t.codespan(i.text);break}case"br":n+=t.br();break;case"del":{const i=o;n+=t.del(this.parseInline(i.tokens,t));break}case"text":{const i=o;n+=t.text(i.text);break}default:{const i='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(i),"";throw new Error(i)}}}return n}}var Ht,Ps,dr,pc=Object.defineProperty,No=r=>{throw TypeError(r)},Ye=(r,e,t)=>((n,s,o)=>s in n?pc(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,typeof e!="symbol"?e+"":e,t),pr=(r,e,t)=>(((n,s,o)=>{s.has(n)||No("Cannot "+o)})(r,e,"access private method"),t);Ht=new WeakSet,Ps=function(r,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,r){const n="<p>An error occurred:</p><pre>"+$e(t.message+"",!0)+"</pre>";return e?Promise.resolve(n):n}if(e)return Promise.reject(t);throw t}},dr=function(r,e){return(t,n)=>{const s={...n},o={...this.defaults,...s};this.defaults.async===!0&&s.async===!1&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);const i=pr(this,Ht,Ps).call(this,!!o.silent,!!o.async);if(t==null)return i(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(t):t).then(a=>r(a,o)).then(a=>o.hooks?o.hooks.processAllTokens(a):a).then(a=>o.walkTokens?Promise.all(this.walkTokens(a,o.walkTokens)).then(()=>a):a).then(a=>e(a,o)).then(a=>o.hooks?o.hooks.postprocess(a):a).catch(i);try{o.hooks&&(t=o.hooks.preprocess(t));let a=r(t,o);o.hooks&&(a=o.hooks.processAllTokens(a)),o.walkTokens&&this.walkTokens(a,o.walkTokens);let u=e(a,o);return o.hooks&&(u=o.hooks.postprocess(u)),u}catch(a){return i(a)}}};const it=new class{constructor(...r){var e,t,n;e=this,(t=Ht).has(e)?No("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Ye(this,"Hooks",$t),Ye(this,"Lexer",Ge),Ye(this,"Parser",Je),Ye(this,"Renderer",kn),Ye(this,"TextRenderer",zr),Ye(this,"Tokenizer",wn),Ye(this,"defaults",{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}),Ye(this,"options",this.setOptions),Ye(this,"parse",pr(this,Ht,dr).call(this,Ge.lex,Je.parse)),Ye(this,"parseInline",pr(this,Ht,dr).call(this,Ge.lexInline,Je.parseInline)),this.use(...r)}lexer(r,e){return Ge.lex(r,e??this.defaults)}parser(r,e){return Je.parse(r,e??this.defaults)}setOptions(r){return this.defaults={...this.defaults,...r},this}use(...r){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return r.forEach(t=>{const n={...t};if(n.async=this.defaults.async||n.async||!1,t.extensions&&(t.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const o=e.renderers[s.name];e.renderers[s.name]=o?function(...i){let a=s.renderer.apply(this,i);return a===!1&&(a=o.apply(this,i)),a}:s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const o=e[s.level];o?o.unshift(s.tokenizer):e[s.level]=[s.tokenizer],s.start&&(s.level==="block"?e.startBlock?e.startBlock.push(s.start):e.startBlock=[s.start]:s.level==="inline"&&(e.startInline?e.startInline.push(s.start):e.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(e.childTokens[s.name]=s.childTokens)}),n.extensions=e),t.renderer){const s=this.defaults.renderer||new kn(this.defaults);for(const o in t.renderer){if(!(o in s))throw new Error(`renderer '${o}' does not exist`);if(o==="options")continue;const i=o,a=t.renderer[i],u=s[i];s[i]=(...l)=>{let c=a.apply(s,l);return c===!1&&(c=u.apply(s,l)),c||""}}n.renderer=s}if(t.tokenizer){const s=this.defaults.tokenizer||new wn(this.defaults);for(const o in t.tokenizer){if(!(o in s))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;const i=o,a=t.tokenizer[i],u=s[i];s[i]=(...l)=>{let c=a.apply(s,l);return c===!1&&(c=u.apply(s,l)),c}}n.tokenizer=s}if(t.hooks){const s=this.defaults.hooks||new $t;for(const o in t.hooks){if(!(o in s))throw new Error(`hook '${o}' does not exist`);if(o==="options")continue;const i=o,a=t.hooks[i],u=s[i];$t.passThroughHooks.has(o)?s[i]=l=>{if(this.defaults.async)return Promise.resolve(a.call(s,l)).then(d=>u.call(s,d));const c=a.call(s,l);return u.call(s,c)}:s[i]=(...l)=>{let c=a.apply(s,l);return c===!1&&(c=u.apply(s,l)),c}}n.hooks=s}if(t.walkTokens){const s=this.defaults.walkTokens,o=t.walkTokens;n.walkTokens=function(i){let a=[];return a.push(o.call(this,i)),s&&(a=a.concat(s.call(this,i))),a}}this.defaults={...this.defaults,...n}}),this}walkTokens(r,e){var n,s;let t=[];for(const o of r)switch(t=t.concat(e.call(this,o)),o.type){case"table":{const i=o;for(const a of i.header)t=t.concat(this.walkTokens(a.tokens,e));for(const a of i.rows)for(const u of a)t=t.concat(this.walkTokens(u.tokens,e));break}case"list":{const i=o;t=t.concat(this.walkTokens(i.items,e));break}default:{const i=o;(s=(n=this.defaults.extensions)==null?void 0:n.childTokens)!=null&&s[i.type]?this.defaults.extensions.childTokens[i.type].forEach(a=>{const u=i[a].flat(1/0);t=t.concat(this.walkTokens(u,e))}):i.tokens&&(t=t.concat(this.walkTokens(i.tokens,e)))}}return t}};function Ce(r,e){return it.parse(r,e)}Ce.options=Ce.setOptions=function(r){return it.setOptions(r),Ce.defaults=it.defaults,xs(Ce.defaults),Ce},Ce.getDefaults=za,Ce.defaults=lt,Ce.use=function(...r){return it.use(...r),Ce.defaults=it.defaults,xs(Ce.defaults),Ce},Ce.walkTokens=function(r,e){return it.walkTokens(r,e)},Ce.parseInline=it.parseInline,Ce.Parser=Je,Ce.parser=Je.parse,Ce.Renderer=kn,Ce.TextRenderer=zr,Ce.Lexer=Ge,Ce.lexer=Ge.lex,Ce.Tokenizer=wn,Ce.Hooks=$t,Ce.parse=Ce;const _o=(r,e)=>{const{showCodeBlockCopyButton:t,markdownLinkTarget:n,syntaxHighlighter:s,htmlSanitizer:o}=e||{},i=Ce(r,{async:!1,breaks:!0});if(typeof i!="string")throw new Error("Markdown parsing failed");const a=document.createElement("div");return a.innerHTML=o?o(i):i,a.querySelectorAll("pre").forEach(u=>{const l=document.createElement("div");l.className="code-block";const c=u.querySelector("code");if(!c){const m=u.innerHTML;return l.innerHTML=o?o(m):m,void u.replaceWith(l)}let d;for(let m=0;m<c.classList.length;m++){const v=c.classList[m];if(v.startsWith("language-")){d=v.slice(9);break}}const p=document.createElement("pre"),h="<div>"+c.innerHTML+"</div>";if(p.innerHTML=e!=null&&e.htmlSanitizer?e.htmlSanitizer(h):h,d&&(p.setAttribute("data-language",d),s)){const m="<div>"+s.createHighlighter()(c.textContent||"",d)+"</div>";p.innerHTML=o?o(m):m,p.className="highlighter-dark"}(m=>{m.replaceChildren()})(l),l.appendChild(p),u.replaceWith(l)}),t!==!1&&a.querySelectorAll(".code-block").forEach(u=>{var p;if(!u.querySelector("pre")||(p=u.previousElementSibling)!=null&&p.classList.contains("nlux-comp-copyButton"))return;const l="Copy code block to clipboard",c=document.createElement("button");c.classList.add("nlux-comp-copyButton"),c.setAttribute("aria-label",l),c.setAttribute("title",l);const d=document.createElement("span");d.classList.add("icon-copy"),c.appendChild(d),u.appendChild(c)}),n!=="self"&&a.querySelectorAll("a").forEach(u=>{u.setAttribute("target","_blank")}),a.innerHTML},Uo="nlux-comp-message",Rs={received:"nlux-comp-chatItem--received",sent:"nlux-comp-chatItem--sent"},hc="nlux-comp-chatItem--bubblesLayout",mc="nlux-comp-chatItem--listLayout",fc=(r,e)=>{let t=!1;const{onComplete:n}=e||{},s=[],o=(e!=null&&e.skipStreamingAnimation?"timeout":"animationFrame")=="timeout"?d=>setTimeout(d,0):d=>requestAnimationFrame(d),i=document.createElement("div");i.classList.add("md-in-progress"),r.append(i);const a=()=>{for(;i.firstChild;){const d=i.firstChild;d instanceof HTMLElement&&Mo(d),i.before(d)}},u=!(e!=null&&e.skipStreamingAnimation)&&(e!=null&&e.streamingAnimationSpeed)&&e.streamingAnimationSpeed>=0?e.streamingAnimationSpeed:e!=null&&e.skipStreamingAnimation?0:8,l={timeSinceLastProcessing:new Date().getTime(),currentMarkdown:"",previousHtml:void 0};let c=setInterval(()=>{const d=new Date().getTime(),p=(e==null?void 0:e.waitTimeBeforeStreamCompletion)!=="never";if(s.length===0&&p){const m=typeof(e==null?void 0:e.waitTimeBeforeStreamCompletion)=="number"?e.waitTimeBeforeStreamCompletion:2e3;return void((t||d-l.timeSinceLastProcessing>m)&&(t=!0,c&&(clearInterval(c),c=void 0),a(),i.remove(),n==null?void 0:n()))}l.timeSinceLastProcessing=d;const h=s.shift();h!==void 0&&typeof h=="string"&&o(()=>{const m=l.currentMarkdown+h,v=_o(m,e).trim();if(typeof v!="string")return l.currentMarkdown=l.currentMarkdown.slice(0,-h.length),void De("Markdown parsing failed");if(l.previousHtml&&v.length>l.previousHtml.length&&v.startsWith(l.previousHtml)){a();const w=v.slice(l.previousHtml.length).trim();i.innerHTML=e!=null&&e.htmlSanitizer?e.htmlSanitizer(w):w,l.currentMarkdown=h,l.previousHtml=void 0}else i.innerHTML=e!=null&&e.htmlSanitizer?e.htmlSanitizer(v):v,l.currentMarkdown=m,l.previousHtml=v})},u);return{next:d=>{if(t)De("Stream is already complete. No more chunks can be added");else for(const p of d)s.push(p)},complete:()=>{s.push(`
`),t=!0},cancel:()=>{c&&(clearInterval(c),c=void 0),t=!0,i.remove()},error:()=>{t=!0}}},gc=function(r,e){const{uid:t,status:n,responseRenderer:s,markdownOptions:o,initialMarkdownMessage:i,markdownContainersController:a}=r,[u,l]=g.useState([]),c=g.useRef(null),d=g.useRef(null),p=g.useRef(null),h=g.useRef(null),[m,v]=g.useState();g.useEffect(()=>{c.current!==d.current&&(d.current=c.current,v(c.current||void 0))}),g.useEffect(()=>{if(m){const C=a.getStreamingDomElement(t);m.append(C)}},[m]),g.useEffect(()=>{h.current=C=>{l(b=>[...b,C])}},[l]),g.useEffect(()=>{const C=a.getStreamingDomElement(t);return p.current=fc(C,{syntaxHighlighter:o==null?void 0:o.syntaxHighlighter,htmlSanitizer:o==null?void 0:o.htmlSanitizer,markdownLinkTarget:o==null?void 0:o.markdownLinkTarget,showCodeBlockCopyButton:o==null?void 0:o.showCodeBlockCopyButton,skipStreamingAnimation:o==null?void 0:o.skipStreamingAnimation,streamingAnimationSpeed:o==null?void 0:o.streamingAnimationSpeed,waitTimeBeforeStreamCompletion:o==null?void 0:o.waitTimeBeforeStreamCompletion,onComplete:o==null?void 0:o.onStreamComplete}),i&&p.current.next(i),()=>{a.deleteStreamingDomElement(t)}},[]),g.useEffect(()=>()=>{d.current=null,p.current=null,h.current=null,v(void 0)},[]),g.useImperativeHandle(e,()=>({streamChunk:C=>{var b,x;h.current&&((b=h.current)==null||b.call(h,C)),typeof C=="string"&&((x=p.current)==null||x.next(C))},completeStream:()=>{var C;(C=p.current)==null||C.complete()},cancelStream:()=>{var C;(C=p.current)==null||C.cancel()}}),[]);const w=s||void 0;return y.jsxs("div",{className:`${Uo} ${lr[n]} ${cr.received}`,children:[w&&y.jsx(w,{uid:t,status:n,containerRef:c,content:u,contentType:"text",serverResponse:[],dataTransferMode:"stream"}),!w&&y.jsx("div",{className:"nlux-markdownStream-root",ref:c})]})},qo=(r,e)=>{if(!e||e==="Enter"){const t=r.key==="Enter"&&!r.nativeEvent.isComposing,n=r.altKey||r.ctrlKey||r.metaKey||r.shiftKey;return t&&!n}return!!(e==="CommandEnter"&&r.key==="Enter"&&(r.getModifierState("Control")||r.getModifierState("Meta")))},vc=r=>{const{markdownOptions:e}=r,t=g.useRef(null),n=g.useMemo(()=>r.content?_o(r.content,{syntaxHighlighter:e==null?void 0:e.syntaxHighlighter,htmlSanitizer:e==null?void 0:e.htmlSanitizer,markdownLinkTarget:e==null?void 0:e.markdownLinkTarget,showCodeBlockCopyButton:e==null?void 0:e.showCodeBlockCopyButton}):"",[r.content,e==null?void 0:e.markdownLinkTarget,e==null?void 0:e.syntaxHighlighter,e==null?void 0:e.htmlSanitizer,e==null?void 0:e.showCodeBlockCopyButton]);g.useEffect(()=>{t.current&&(e==null?void 0:e.showCodeBlockCopyButton)!==!1&&Mo(t.current)},[n,t.current,e==null?void 0:e.showCodeBlockCopyButton]);const s=g.useMemo(()=>e!=null&&e.htmlSanitizer?e.htmlSanitizer(n):n,[n,e==null?void 0:e.htmlSanitizer]),o=g.useCallback(l=>{if(!r.canResubmit)return;const c=l.currentTarget.textContent;return c?qo(l,r.submitShortcutKey)?(l.preventDefault(),void(r.onResubmit&&r.onResubmit(c))):void(l.key==="Escape"&&(l.preventDefault(),l.currentTarget.textContent=r.content,l.currentTarget.blur())):void 0},[r.canResubmit,r.onResubmit,r.content]),i=g.useCallback(l=>{r.canResubmit&&(l.preventDefault(),l.currentTarget.textContent=r.content,l.currentTarget.blur())},[r.canResubmit,r.content]),a=g.useCallback(l=>{if(!r.canResubmit)return;l.preventDefault();const c=document.createRange();c.selectNodeContents(l.currentTarget);const d=window.getSelection();d==null||d.removeAllRanges(),d==null||d.addRange(c)},[r.canResubmit]),u=r.canResubmit?"editable-markdown-container":"";return y.jsx(Wo,{children:y.jsx("div",{className:"nlux-markdownStream-root"+(u?` ${u}`:""),children:y.jsx("div",{className:"nlux-markdown-container",ref:t,dangerouslySetInnerHTML:{__html:s},contentEditable:r.canResubmit,onKeyDown:o,onBlur:i,onFocus:a})})})};class Wo extends g.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e){De("Markdown rendering error occurred. This could be due to a malformed markdown content, or it could be because the page requires an HTML sanitizer. Please check the error message for more details and consider configuring NLUX with a compatible sanitizer."),this.props.onMarkdownRenderingError&&this.props.onMarkdownRenderingError(e)}render(){return this.state.hasError?null:this.props.children}}const hr=r=>y.jsx(Wo,{children:y.jsx(vc,{...r})}),Yo=r=>{const e=typeof r.avatar=="string",t=!e&&g.isValidElement(r.avatar);return y.jsxs("div",{className:"nlux-comp-avatar",children:[t&&r.avatar,!t&&e&&y.jsx("div",{className:"nlux-comp-avatarContainer",children:r.avatar&&y.jsx("div",{className:"nlux-comp-avatarPicture",style:{backgroundImage:`url("${encodeURI(r.avatar)}")`}})})]})},yc=function(r,e){var C,b,x,E,k,O,L,H;const t=g.useRef(null);g.useImperativeHandle(e,()=>({streamChunk:I=>setTimeout(()=>{var P;return(P=t==null?void 0:t.current)==null?void 0:P.streamChunk(I)}),completeStream:()=>setTimeout(()=>{var I;return(I=t==null?void 0:t.current)==null?void 0:I.completeStream()}),cancelStream:()=>{var I;return(I=t==null?void 0:t.current)==null?void 0:I.cancelStream()}}),[]);const n=r.contentType==="server-component",s=r.direction==="received",o=r.direction==="sent",i=r.dataTransferMode==="stream",a=r.isPartOfInitialSegment,u=g.useCallback(()=>{var I;return(I=r.onMarkdownStreamRendered)==null?void 0:I.call(r,r.uid)},[r.uid]);g.useEffect(()=>{var I;i||n||a||((I=r.onMarkdownStreamRendered)==null||I.call(r,r.uid))},[]);const l=function(I){const{uid:P,status:q,dataTransferMode:M,contentType:$,fetchedContent:B,streamedContent:K,streamedServerResponse:ne,fetchedServerResponse:se,direction:ce,messageOptions:_}=I;if((_==null?void 0:_.responseRenderer)!==void 0){if(M==="stream"){const N={uid:P,status:q,dataTransferMode:M,contentType:$,content:K??[],serverResponse:ne??[]};return()=>{const W=_.responseRenderer;return y.jsx(W,{...N})}}const A=g.isValidElement(B),D={uid:P,status:"complete",dataTransferMode:M,contentType:$,content:B?A?[]:[B]:[],serverComponent:A?B:void 0,serverResponse:se?[se]:[]};return()=>{const N=_.responseRenderer;return y.jsx(N,{...D})}}if(ce==="sent"){if(typeof B=="string"){const A=B;return()=>y.jsx(y.Fragment,{children:A})}return()=>""}if(typeof B=="string"){const A=B;return()=>y.jsx(hr,{messageUid:P,content:A,markdownOptions:{syntaxHighlighter:_==null?void 0:_.syntaxHighlighter,htmlSanitizer:_==null?void 0:_.htmlSanitizer,markdownLinkTarget:_==null?void 0:_.markdownLinkTarget,showCodeBlockCopyButton:_==null?void 0:_.showCodeBlockCopyButton,skipStreamingAnimation:_==null?void 0:_.skipStreamingAnimation}})}return g.isValidElement(B)?()=>y.jsx(y.Fragment,{children:B}):()=>""}(r),c=function(I){var P;return g.useCallback(()=>{var M,$,B;if(((M=I.messageOptions)==null?void 0:M.promptRenderer)===void 0)return y.jsx(hr,{messageUid:I.uid,content:I.fetchedContent,markdownOptions:{htmlSanitizer:($=I.messageOptions)==null?void 0:$.htmlSanitizer},canResubmit:(B=I.messageOptions)==null?void 0:B.editableUserMessages,submitShortcutKey:I.submitShortcutKey,onResubmit:K=>{I.onPromptResubmit&&I.onPromptResubmit(K)}});const q=I.messageOptions.promptRenderer;return y.jsx(q,{uid:I.uid,prompt:I.fetchedContent,onResubmit:K=>{I.onPromptResubmit&&I.onPromptResubmit(K)}})},[(P=I.messageOptions)==null?void 0:P.promptRenderer,I.fetchedContent,I.uid])}(r),d=g.useMemo(()=>g.forwardRef(gc),[]),p=function(I){const P=g.useMemo(()=>y.jsxs("div",{className:"nlux-comp-chatItem-participantInfo",children:[I.avatar!==void 0&&y.jsx(Yo,{name:I.name,avatar:I.avatar}),y.jsx("span",{className:"nlux-comp-chatItem-participantName",children:I.name})]}),[I.avatar,I.name]);return()=>y.jsx(y.Fragment,{children:P})}(r),h=`nlux-comp-chatItem ${r.direction?Rs[r.direction]:Rs.received} ${r.layout==="bubbles"?hc:mc}`,m=r.status?lr[r.status]:lr.rendered,v=r.direction?cr[r.direction]:cr.received,w=`${Uo} ${m} ${v}`;return y.jsxs("div",{className:h,children:[y.jsx(p,{}),s&&i&&!n&&y.jsx(d,{uid:r.uid,status:r.status,ref:t,direction:r.direction,responseRenderer:(C=r.messageOptions)==null?void 0:C.responseRenderer,markdownContainersController:r.markdownContainersController,markdownOptions:{syntaxHighlighter:(b=r.messageOptions)==null?void 0:b.syntaxHighlighter,htmlSanitizer:(x=r.messageOptions)==null?void 0:x.htmlSanitizer,markdownLinkTarget:(E=r.messageOptions)==null?void 0:E.markdownLinkTarget,showCodeBlockCopyButton:(k=r.messageOptions)==null?void 0:k.showCodeBlockCopyButton,skipStreamingAnimation:(O=r.messageOptions)==null?void 0:O.skipStreamingAnimation,streamingAnimationSpeed:(L=r.messageOptions)==null?void 0:L.streamingAnimationSpeed,waitTimeBeforeStreamCompletion:(H=r.messageOptions)==null?void 0:H.waitTimeBeforeStreamCompletion,onStreamComplete:u}},"do-not-change"),s&&i&&n&&y.jsx("div",{className:w,children:r.fetchedContent}),s&&!i&&y.jsx("div",{className:w,children:y.jsx(l,{})}),o&&y.jsx("div",{className:w,children:y.jsx(c,{})})]})},Os=r=>typeof r=="string"||typeof r=="number"||typeof r=="boolean"||r==null,an=(r,e)=>{var t,n;return r==="assistant"?((t=e==null?void 0:e.assistant)==null?void 0:t.name)??"Assistant":r==="user"?((n=e==null?void 0:e.user)==null?void 0:n.name)??"User":""},cn=(r,e)=>{var t,n;return r==="assistant"?(t=e==null?void 0:e.assistant)==null?void 0:t.avatar:r==="user"?(n=e==null?void 0:e.user)==null?void 0:n.avatar:void 0},bc=function(r,e){const{chatSegment:t,containerRef:n}=r,[s,o]=g.useState(!1),i=g.useMemo(()=>new Map,[]),a=g.useMemo(()=>new Map,[]),u=g.useRef(new Map),l=g.useRef(new Map);((h,m,v,w)=>{g.useEffect(()=>{if(h.length===0)return w.clear(),m.current.clear(),void v.current.clear();const C=new Set(w.keys()),b=new Set(h.map(x=>x.uid));C.forEach(x=>{b.has(x)||w.delete(x)}),new Set(m.current.keys()).forEach(x=>{b.has(x)||(m.current.delete(x),v.current.delete(x))})},[h])})(t.items,u,l,i),g.useImperativeHandle(e,()=>({streamChunk:(h,m)=>{const v=i.get(h);if(v!=null&&v.current){const w=v.current.streamChunk;(a.get(h)??[]).forEach(C=>{w(C)}),a.delete(h),w(m)}else{const w=a.get(h)??[];a.set(h,[...w,m])}},completeStream:h=>{const m=i.get(h);m!=null&&m.current?(m.current.completeStream(),i.delete(h)):o(!0)},cancelStreams:()=>{a.clear(),i.forEach(h=>{var m;(m=h.current)==null||m.cancelStream()})}}),[]),g.useEffect(()=>{a.size>0&&a.forEach((h,m)=>{const v=i.get(m);v!=null&&v.current&&(h.forEach(w=>{var C;(C=v==null?void 0:v.current)==null||C.streamChunk(w)}),a.delete(m),s&&(v.current.completeStream(),o(!1)))})});const c=g.useMemo(()=>t.status!=="active"?null:y.jsx("div",{className:"nlux-chatSegment-loader-container",children:r.Loader}),[t.status,r.Loader]),d=g.useMemo(()=>g.forwardRef(yc),[]),p=g.useCallback(h=>{var m;(m=r.onMarkdownStreamRendered)==null||m.call(r,t.uid,h)},[]);return t.items.length===0?null:y.jsxs("div",{ref:n,className:La(t.status),children:[t.items.map(h=>xc(r,d,t,h,i,l,u,p)),c]})},xc=function(r,e,t,n,s,o,i,a){var p;const u=r.isInitialSegment;let l=s.get(n.uid);l||(l=g.createRef(),s.set(n.uid,l));let c=n.content,d="text";if(typeof c=="function"){const h=o.current.get(n.uid),m=i.current.get(n.uid);if(h&&m)c=m,d="server-component";else{i.current.delete(n.uid),o.current.delete(n.uid);try{const v=c;if(c=y.jsx(v,{}),!c||!g.isValidElement(c))throw new Error("Invalid React element returned from the AI chat content function.");d="server-component",i.current.set(n.uid,c),o.current.set(n.uid,v)}catch{return De(`The type of the AI chat content is an invalid function.
If you're looking to render a React Server Components, please refer to docs.nlkit.com/nlux for more information.
`),null}}}if(n.participantRole==="user")return n.status!=="complete"?(_t(`User chat item should be always be in complete state — Current status: ${n.status} — Segment UID: ${t.uid}`),null):Os(c)?y.jsx(e,{ref:l,uid:n.uid,status:"complete",direction:"sent",contentType:d,dataTransferMode:"batch",fetchedContent:n.content,markdownContainersController:r.markdownContainersController,layout:r.layout,messageOptions:r.messageOptions,isPartOfInitialSegment:u,name:an(n.participantRole,r.personaOptions),avatar:cn(n.participantRole,r.personaOptions),submitShortcutKey:r.submitShortcutKey,onPromptResubmit:h=>r.onPromptResubmit(r.chatSegment.uid,n.uid,h)},n.uid):(_t(`User chat item should have primitive content (string, number, boolean, null) — Current content: ${JSON.stringify(c)} — Segment UID: ${t.uid}`),null);if(n.status==="complete")return n.dataTransferMode==="stream"?y.jsx(e,{ref:l,uid:n.uid,status:n.status,direction:"received",contentType:d,dataTransferMode:n.dataTransferMode,markdownContainersController:r.markdownContainersController,onMarkdownStreamRendered:a,streamedContent:c,streamedServerResponse:n.serverResponse,layout:r.layout,messageOptions:r.messageOptions,isPartOfInitialSegment:u,name:an(n.participantRole,r.personaOptions),avatar:cn(n.participantRole,r.personaOptions)},n.uid):d!=="text"||Os(c)||(p=r.messageOptions)!=null&&p.responseRenderer?y.jsx(e,{ref:l,uid:n.uid,status:"complete",direction:"received",contentType:d,dataTransferMode:n.dataTransferMode,markdownContainersController:r.markdownContainersController,onMarkdownStreamRendered:a,fetchedContent:c,fetchedServerResponse:n.serverResponse,layout:r.layout,messageOptions:r.messageOptions,isPartOfInitialSegment:u,name:an(n.participantRole,r.personaOptions),avatar:cn(n.participantRole,r.personaOptions)},n.uid):(De(`When the type of the AI chat content is not primitive (object or array), a custom renderer must be provided — Current content: ${JSON.stringify(c)} — Segment UID: ${t.uid}`),null);if(n.status==="streaming"){const h=d==="server-component"&&g.isValidElement(c)?c:void 0;return y.jsx(e,{ref:l,uid:n.uid,status:"streaming",direction:"received",contentType:d,dataTransferMode:n.dataTransferMode,markdownContainersController:r.markdownContainersController,onMarkdownStreamRendered:a,fetchedContent:h,layout:r.layout,messageOptions:r.messageOptions,isPartOfInitialSegment:u,name:an(n.participantRole,r.personaOptions),avatar:cn(n.participantRole,r.personaOptions)},n.uid)}},wc=function(r,e){const{segments:t,personaOptions:n,conversationOptions:s,onLastActiveSegmentChange:o}=r,i=g.createRef();(function(c,d,p){const h=g.useMemo(()=>{const v=c.length>0?c[c.length-1]:void 0;return(v==null?void 0:v.status)==="active"?v.uid:void 0},[c]),m=g.useRef(void 0);g.useEffect(()=>{if(!p)return;const v=m.current;if(h===(v==null?void 0:v.uid)&&d.current===(v==null?void 0:v.div))return;const w=h&&d.current?{uid:h,div:d.current}:void 0;(w||m.current)&&(p(w),m.current=w)})})(t,i,o);const a=function(c){const d=g.useMemo(()=>new Map,[]);return g.useEffect(()=>{if(c.length===0)return void d.clear();const p=new Set(d.keys()),h=new Set(c.map(m=>m.uid));p.forEach(m=>{h.has(m)||d.delete(m)})},[c]),{get:p=>{var h;return(h=d.get(p))==null?void 0:h.current},getRef:p=>d.get(p),set:(p,h)=>{d.set(p,h)},remove:p=>{d.delete(p)}}}(t),u=(c=>g.useMemo(()=>{return d=c==null?void 0:c.layout,d??"bubbles";var d},[c==null?void 0:c.layout]))(s);g.useImperativeHandle(e,()=>({streamChunk:(c,d,p)=>{const h=a.get(c);h==null||h.streamChunk(d,p)},completeStream:(c,d)=>{const p=a.get(c);p==null||p.completeStream(d)},cancelSegmentStreams:c=>{const d=a.get(c);d==null||d.cancelStreams()}}),[]);const l=g.useMemo(()=>g.forwardRef(bc),[]);return y.jsx("div",{className:"nlux-chatSegments-container",children:t.map((c,d)=>{const p=d===t.length-1,h=c.uid==="initial";let m=a.getRef(c.uid);return m||(m=g.createRef(),a.set(c.uid,m)),y.jsx(l,{ref:m,containerRef:p?i:void 0,markdownContainersController:r.markdownContainersController,chatSegment:c,isInitialSegment:h,layout:u,personaOptions:n,messageOptions:r.messageOptions,Loader:r.Loader,submitShortcutKey:r.submitShortcutKey,onPromptResubmit:r.onPromptResubmit,onMarkdownStreamRendered:r.onMarkdownStreamRendered},c.uid)})})},kc={typing:"nlux-composer--typing","submitting-prompt":"nlux-composer--submitting","submitting-conversation-starter":"nlux-composer--submitting",waiting:"nlux-composer--waiting"},Cc=()=>y.jsx("div",{className:"nlux-comp-cancelIcon",children:y.jsx("div",{className:"nlux-comp-cancelIcon-container"})}),Sc=()=>y.jsx("div",{className:"nlux-comp-sendIcon",children:y.jsx("div",{className:"nlux-comp-sendIcon-container"})}),Hn=["submitting-prompt","submitting-edit","submitting-conversation-starter","submitting-external-message"],Ac=r=>{const e=`nlux-comp-composer ${kc[r.status]||""}`,t=Hn.includes(r.status),n=!r.hasValidInput||r.status==="waiting"||Hn.includes(r.status),s=r.status==="typing"||r.status==="waiting",o=r.hideStopButton!==!0&&(Hn.includes(r.status)||r.status==="waiting"),i=g.useRef(null);g.useEffect(()=>{r.status==="typing"&&r.autoFocus&&i.current&&i.current.focus()},[r.status,r.autoFocus,i.current]);const a=g.useMemo(()=>c=>{var d;(d=r.onChange)==null||d.call(r,c.target.value)},[r.onChange]),u=g.useMemo(()=>()=>{var c;(c=r.onSubmit)==null||c.call(r)},[r.onSubmit]),l=g.useMemo(()=>c=>{qo(c,r.submitShortcut)&&(c.preventDefault(),u())},[u,r.submitShortcut]);return y.jsxs("div",{className:e,children:[y.jsx("textarea",{tabIndex:0,ref:i,disabled:t,placeholder:r.placeholder,value:r.prompt,onChange:a,onKeyDown:l}),!o&&y.jsxs("button",{tabIndex:0,disabled:n,onClick:()=>r.onSubmit(),children:[s&&y.jsx(Sc,{}),!s&&r.Loader]}),o&&y.jsx("button",{tabIndex:0,onClick:r.onCancel,children:y.jsx(Cc,{})})]})},mr=r=>{var n;const e={},t=Object.keys(r);for(let s=0;s<t.length;s++){const o=t[s];o!=="personaOptions"&&o!=="messageOptions"&&o!=="adapter"&&o!=="events"&&Object.assign(e,{[o]:r[o]})}return r.personaOptions&&(e.personaOptions={},r.personaOptions.assistant&&(e.personaOptions.assistant={name:r.personaOptions.assistant.name,avatar:typeof r.personaOptions.assistant.avatar=="string"?r.personaOptions.assistant.avatar:"<REACT ELEMENT />",tagline:r.personaOptions.assistant.tagline}),r.personaOptions.user&&(e.personaOptions.user={name:r.personaOptions.user.name,avatar:typeof r.personaOptions.user.avatar=="string"?r.personaOptions.user.avatar:"<REACT ELEMENT />"})),r.messageOptions&&(e.messageOptions={...r.messageOptions,responseRenderer:r.messageOptions.responseRenderer?()=>null:void 0,promptRenderer:r.messageOptions.promptRenderer?()=>null:void 0}),(n=r.conversationOptions)!=null&&n.conversationStarters&&(e.conversationOptions={...r.conversationOptions,conversationStarters:r.conversationOptions.conversationStarters.map(s=>({...s,icon:s.icon?"<REACT ELEMENT />":void 0}))}),e};var Ec=Object.defineProperty,ln=(r,e,t)=>((n,s,o)=>s in n?Ec(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,typeof e!="symbol"?e+"":e,t);class Tc extends Error{constructor(e={}){super(e.message),ln(this,"exceptionId"),ln(this,"message"),ln(this,"source"),ln(this,"type"),this.message=e.message??"",this.source=e.source,this.type=this.constructor.name,this.exceptionId=e.exceptionId}}const Ic=(r,e)=>{let t,n=e,s=r,o=!0;const i=((v,w)=>{let C=!1;if(typeof v!="function")throw new Tc({source:"x/throttle",message:"Callback must be a function"});return(...b)=>{C||(v.apply(void 0,b),C=!0,setTimeout(function(){C=!1},w))}})((v=>{let w,C;return b=>{const x=b.target;if(!(x instanceof HTMLElement))return;const{scrollTop:E,clientHeight:k,scrollHeight:O}=x,L=O-30,H=Math.ceil(E+k)>=L,I=w===void 0||C===void 0?void 0:E>w&&C===O?"down":E<w&&C===O?"up":void 0;C=O,w=E,v({scrolledToBottom:H,scrollDirection:I})}})(({scrolledToBottom:v,scrollDirection:w})=>{o?w==="up"&&(o=!1):w==="down"&&v&&(o=!0)}),50),a=v=>{v.addEventListener("scroll",i)},u=v=>{v==null||v.removeEventListener("scroll",i)},l=v=>{(t==null?void 0:t.uid)===v&&(c==null||c.disconnect(),d==null||d.disconnect(),t=void 0,c=void 0,d=void 0)};let c,d;const p=()=>{s==null||s.scrollTo({top:5e4,behavior:"instant"})},h=()=>{s&&n&&o&&p()},m=()=>{h()};return a(s),{updateConversationContainer:v=>{u(s),a(v),s=v},updateProps:({autoScroll:v})=>{n=v},handleNewChatSegmentAdded:(v,w)=>{t&&(c==null||c.disconnect(),d==null||d.disconnect()),t={uid:v,container:w},c=new ResizeObserver(h),c.observe(w),d=new MutationObserver(m),d.observe(w,{childList:!0,subtree:!0,characterData:!0}),n&&p()},handleChatSegmentRemoved:v=>l(v),handleChatSegmentComplete:v=>l(v),destroy:()=>{t&&(l(t.uid),t=void 0),u(s),s=void 0}}},Ds=!0,Cn=r=>{if(typeof r!="object"||r===null)return!1;const e=r;return(typeof e.streamText=="function"||typeof e.batchText=="function")&&["stream","batch"].includes(e.dataTransferMode)&&typeof e.id=="string"&&typeof e.info=="object"&&e.info!==null&&typeof e.preProcessAiBatchedMessage=="function"&&typeof e.preProcessAiStreamedChunk=="function"},Oe=(r,e=1)=>{setTimeout(()=>{r()},e)},Pc=(r,e,t,n,s,o,i,a,u)=>new Promise(l=>{const c=Ke(),d=[],p=[];let h=!1,m=!1,v=!1;const w=Cn(t),C={next:b=>{if(m||v)return;let x,E;if(w){const k=b,O=t.preProcessAiStreamedChunk(k,n);O!=null&&(x=O,E=k,d.push(x),p.push(E))}else x=b,d.push(x);x!=null?(h||h||(h=!0,Oe(()=>{s.forEach(k=>{k({uid:c,status:"streaming",time:new Date,participantRole:"assistant",dataTransferMode:"stream"})})})),Oe(()=>{i.forEach(k=>{k({chunk:x,messageId:c,serverResponse:E})})})):De("Adapter returned an undefined or null value from streamText. This chunk will be ignored.")},complete:()=>{m||v||(v=!0,Oe(()=>{const b={uid:c,status:"complete",content:d,contentType:"text",serverResponse:void 0,time:new Date,participantRole:"assistant",dataTransferMode:"stream"};o.forEach(x=>{x(b)}),l()}),Oe(()=>{const b={uid:r,status:"complete",items:[e,{uid:c,status:"complete",contentType:"text",content:d,serverResponse:p,time:new Date,participantRole:"assistant",dataTransferMode:"stream"}]};a.forEach(x=>{x(b)})}))},error:b=>{m||v||(m=!0,Oe(()=>{u.forEach(x=>{x("failed-to-stream-content",b)}),l()}))}};t.streamText(e.content,C,n)}),Rc=(r,e,t)=>{if(!r)return(()=>{const b=new Set,x=Ke(),E={uid:x,status:"complete",items:[]};return Oe(()=>{b.forEach(k=>{k(E)}),b.clear()}),{segment:E,observable:{on:(k,O)=>{k==="complete"&&b.add(O)},removeListener:(k,O)=>{b.delete(O)},destroy:()=>{b.clear()},get segmentId(){return x}},dataTransferMode:"batch"}})();const n=e;if(n.streamText===void 0&&n.batchText===void 0&&n.streamServerComponent===void 0)return(b=>{const x=new Set,E=Ke(),k={uid:E,status:"error",items:[]};return Oe(()=>{x.forEach(O=>O(b)),x.clear()}),{segment:k,dataTransferMode:"stream",observable:{on:(O,L)=>{O==="error"&&x.add(L)},removeListener:(O,L)=>{x.delete(L)},destroy:()=>{x.clear()},get segmentId(){return E}}}})("no-data-transfer-mode-supported");const s=Ke(),o=(b=>({uid:Ke(),time:new Date,status:"complete",participantRole:"user",content:b,contentType:"text"}))(r);let i,a,u,l,c,d,p=new Set,h=new Set,m=new Set;Oe(()=>{p!=null&&p.size&&(p.forEach(b=>{b(o)}),p.clear(),p=void 0)});const v=(b=>{const x=[],E=b,k=b;(E==null?void 0:E.streamText)===void 0&&(k==null?void 0:k.streamServerComponent)===void 0||x.push("stream"),(E==null?void 0:E.batchText)!==void 0&&x.push("batch");const O=Cn(b)?b:void 0,L=(O==null?void 0:O.dataTransferMode)??void 0,H=x.length===1?x[0]:"stream";return L??H})(e);(b=>"streamServerComponent"in b?"server-component":"text")(e)==="server-component"?(u=new Set,a=new Set,((b,x,E,k,O,L,H,I)=>new Promise((P,q)=>{try{const M=x.content,$=Ke(),B="assistant",K="streaming",ne=new Date,se="stream";let ce,_;const A=()=>{Oe(()=>{L.forEach(W=>{ce&&_&&W({...ce,content:_,status:"complete"})})},20);const N={uid:b,status:"complete",items:[x,ce]};Oe(()=>{H.forEach(W=>{W(N)}),P()},20)},D=()=>{I.forEach(N=>{N("failed-to-stream-server-component",new Error("Failed to load content"))})};_=E.streamServerComponent(M,k,{onServerComponentReceived:A,onError:D}),ce={uid:$,content:_,contentType:"server-component",participantRole:B,status:K,time:ne,dataTransferMode:se},Oe(()=>{O.forEach(N=>{N(ce)})},10)}catch(M){De(M);const $=M instanceof Error?M:typeof M=="string"?new Error(M):new Error("Unknown error");Oe(()=>{I.forEach(B=>B("failed-to-load-content",$))})}}))(s,o,e,t,a,u,h,m).finally(()=>{Oe(()=>C())})):v==="batch"?(i=new Set,(async(b,x,E,k,O,L,H)=>{try{const I=x.content,P=Cn(E)?E:void 0,q=P!==void 0,M=Ke(),$="assistant",B="complete",K=new Date,ne="batch";let se;if(q){const A=await P.batchText(I,k),D=P.preProcessAiBatchedMessage(A,k);D!=null&&(se={uid:M,content:D,contentType:"text",serverResponse:A,participantRole:$,status:B,time:K,dataTransferMode:ne})}else se={uid:M,content:await E.batchText(I,k),contentType:"text",serverResponse:void 0,participantRole:$,status:B,time:K,dataTransferMode:ne};if(!se)throw new Error("Response from adapter was undefined or cannot be processed");const ce=se;Oe(()=>{O.forEach(A=>{A(ce)})});const _={uid:b,status:"complete",items:[x,se]};Oe(()=>{L.forEach(A=>{A(_)})})}catch(I){De(I);const P=I instanceof Error?I:typeof I=="string"?new Error(I):new Error("Unknown error");Oe(()=>{H.forEach(q=>q("failed-to-load-content",P))})}})(s,o,e,t,i,h,m).finally(()=>{Oe(()=>C())})):(l=new Set,c=new Set,d=new Set,Pc(s,o,e,t,l,c,d,h,m).finally(()=>{Oe(()=>C())}));const C=()=>{p==null||p.clear(),p=void 0,i==null||i.clear(),i=void 0,a==null||a.clear(),a=void 0,u==null||u.clear(),u=void 0,l==null||l.clear(),l=void 0,c==null||c.clear(),c=void 0,d==null||d.clear(),d=void 0,h==null||h.clear(),h=void 0,m==null||m.clear(),m=void 0};return{segment:{status:"active",uid:s,items:[]},dataTransferMode:v,observable:{get segmentId(){return s},on:(b,x)=>{b==="userMessageReceived"&&p?p.add(x):b==="aiMessageReceived"&&i?i.add(x):b==="aiServerComponentStreamStarted"&&a?a.add(x):b==="aiServerComponentStreamed"&&u?u.add(x):b==="aiMessageStreamStarted"&&l?l.add(x):b==="aiMessageStreamed"&&c?c.add(x):b==="aiChunkReceived"&&d?d.add(x):b==="complete"&&h?h.add(x):b==="error"&&m&&m.add(x)},removeListener:(b,x)=>{b!=="userMessageReceived"?b!=="aiMessageReceived"?b!=="aiMessageStreamStarted"?b!=="aiMessageStreamed"?b!=="aiChunkReceived"?b!=="complete"?b!=="error"||(m==null||m.delete(x)):h==null||h.delete(x):d==null||d.delete(x):c==null||c.delete(x):l==null||l.delete(x):i==null||i.delete(x):p==null||p.delete(x)},destroy:()=>C()}}},Oc={"data-transfer-mode-not-supported":"Requested data transfer mode is not supported","no-data-transfer-mode-supported":"Adapter does not support any valid data transfer modes","connection-error":"Connection error","invalid-credentials":"Invalid credentials","invalid-api-key":"Invalid API key","http-server-side-error":"HTTP server side error","http-client-side-error":"HTTP client side error","failed-to-load-content":"Failed to load content","failed-to-stream-content":"Failed to stream content","failed-to-stream-server-component":"Failed to stream server component","failed-to-render-content":"Failed to display content"},Dc=r=>{var x;const{aiChatProps:e,adapterToUse:t,prompt:n,composerOptions:s,showException:o,initialSegment:i,newSegments:a,cancelledSegmentIds:u,cancelledMessageIds:l,setChatSegments:c,setComposerStatus:d,setPrompt:p,conversationRef:h}=r,m=g.useMemo(()=>n.length>0,[n]),v=g.useRef(n);v.current=n;const w=g.useRef({newSegments:a,cancelledSegmentIds:u,cancelledMessageIds:l,setChatSegments:c,setComposerStatus:d,showException:o,setPrompt:p}),C=g.useRef({});g.useEffect(()=>{w.current={newSegments:a,cancelledSegmentIds:u,cancelledMessageIds:l,setChatSegments:c,setComposerStatus:d,showException:o,setPrompt:p}},[a,u,l,c,d,o,p]);const b=((E,k,O)=>g.useMemo(()=>{const L=(I=>{const P=[];return I.forEach(q=>{q.items.forEach(M=>{if(M.status==="complete"){if(M.participantRole==="assistant")P.push({role:"assistant",message:M.content});else if(M.participantRole==="user")return P.push({role:"user",message:M.content})}})}),P})(k),H=O==="max"||O===void 0?L:O>0?L.slice(-O):void 0;return{aiChatProps:mr(E),conversationHistory:H}},[E,k,O]))(e,i?[i,...a]:a,(x=e.conversationOptions)==null?void 0:x.historyPayloadSize);return g.useEffect(()=>{C.current=e.events||{}},[e.events]),g.useCallback(()=>{if(!t)return void De("No valid adapter was provided to AiChat component");if(!m||s!=null&&s.disableSubmitButton)return;d("submitting-prompt");const E=n,k=new Set,O=Cn(t)?t:t.streamServerComponent?{streamServerComponent:t.streamServerComponent}:{batchText:t.batchText,streamText:t.streamText},{segment:L,observable:H}=Rc(E,O,b);if(L.status==="error")return De("Error occurred while submitting prompt"),o("Error occurred while submitting prompt"),d("typing"),void(v.current===""&&p(E));const I=P=>{const q=w.current.newSegments.map(M=>M.uid!==H.segmentId?M:{...M,items:[...M.items,{...P}]});w.current.setChatSegments(q)};H.on("userMessageReceived",P=>{var q,M;(q=w.current)!=null&&q.cancelledMessageIds.includes(P.uid)||(I(P),(M=C.current)!=null&&M.messageSent&&C.current.messageSent({uid:P.uid,message:P.content}))}),H.on("aiMessageStreamStarted",P=>{var q,M;(q=w.current)!=null&&q.cancelledMessageIds.includes(P.uid)||(I(P),w.current.setComposerStatus("waiting"),v.current===E&&w.current.setPrompt(""),k.add(P.uid),(M=C.current)!=null&&M.messageStreamStarted&&C.current.messageStreamStarted({uid:P.uid}))}),H.on("aiServerComponentStreamStarted",P=>{var q,M,$;(q=w.current)!=null&&q.cancelledMessageIds.includes(P.uid)||(I(P),w.current.setComposerStatus("waiting"),v.current===E&&w.current.setPrompt(""),k.add(P.uid),(M=C.current)!=null&&M.serverComponentStreamStarted&&(($=C.current)==null||$.serverComponentStreamStarted({uid:P.uid})))}),H.on("aiServerComponentStreamed",P=>{var q,M,$;(q=w.current)!=null&&q.cancelledMessageIds.includes(P.uid)||(M=C.current)!=null&&M.serverComponentRendered&&!w.current.cancelledMessageIds.includes(P.uid)&&(($=C.current)==null||$.serverComponentRendered({uid:P.uid}))}),H.on("aiMessageReceived",P=>{var M,$;if((M=w.current)!=null&&M.cancelledMessageIds.includes(P.uid))return;const q=w.current.newSegments.map(B=>B.uid!==H.segmentId?B:{...B,items:[...B.items,{...P}]});w.current.setChatSegments(q),($=C.current)!=null&&$.messageReceived&&C.current.messageReceived({uid:P.uid,message:P.content})}),H.on("complete",P=>{var M;if((M=w.current)!=null&&M.cancelledMessageIds.includes(P.uid))return;w.current.setComposerStatus("typing");const q=w.current.newSegments.map($=>$.uid!==H.segmentId?$:{...P});w.current.setChatSegments(q),v.current===E&&p(""),k.size>0&&(k.forEach($=>{requestAnimationFrame(()=>{var B;(B=h.current)==null||B.completeStream(H.segmentId,$)})}),k.clear())}),H.on("aiChunkReceived",({messageId:P,chunk:q})=>{var M,$;(M=w.current)!=null&&M.cancelledMessageIds.includes(P)||(($=h.current)==null||$.streamChunk(L.uid,P,q))}),H.on("aiMessageStreamed",P=>{var q,M,$;(q=w.current)!=null&&q.cancelledMessageIds.includes(P.uid)||(M=C.current)!=null&&M.messageReceived&&(($=C.current)==null||$.messageReceived({uid:P.uid,message:P.content}))}),H.on("error",(P,q)=>{var B;const M=w.current.newSegments.filter(K=>K.uid!==L.uid),$=Oc[P];w.current.setChatSegments(M),w.current.setComposerStatus("typing"),w.current.showException($),v.current===""&&p(E),(B=C.current)!=null&&B.error&&C.current.error({errorId:P,message:$,errorObject:q})}),w.current.setChatSegments([...w.current.newSegments,L])},[n,t,b,o,w,s==null?void 0:s.disableSubmitButton])},Qo="nlux-comp-welcomeMessage",Zo=r=>y.jsxs("div",{className:Qo,children:[y.jsx(Yo,{avatar:r.avatar,name:r.name}),y.jsx("div",{className:"nlux-comp-welcomeMessage-personaName",children:r.name}),r.message&&y.jsx("div",{className:"nlux-comp-welcomeMessage-text",children:r.message})]}),Ms=({children:r})=>y.jsx("div",{className:Qo,children:r}),Mc=()=>{const r=g.useMemo(()=>"data:image/png;base64,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",[]);return y.jsx(Zo,{avatar:r,name:""})},jc=r=>{const{onConversationStarterSelected:e}=r;return y.jsx("div",{className:"nlux-comp-conversationStarters",children:r.items.map((t,n)=>y.jsxs("button",{className:"nlux-comp-conversationStarter",onClick:()=>e(t),children:[y.jsx(Bc,{icon:t.icon}),y.jsx("span",{className:"nlux-comp-conversationStarter-prompt",children:t.label??t.prompt})]},n))})},Bc=({icon:r})=>r?typeof r=="string"?y.jsx("img",{src:r,width:16}):y.jsx("div",{className:"nlux-comp-conversationStarter-icon-container",children:r}):null,Lc=r=>{const{segments:e,personaOptions:t,conversationOptions:n,userDefinedGreeting:s}=r,o=g.useMemo(()=>e.some(d=>d.items.length>0),[e]),i=g.useMemo(()=>!s&&!o&&(t==null?void 0:t.assistant)===void 0&&(n==null?void 0:n.showWelcomeMessage)!==!1,[o,t==null?void 0:t.assistant,n==null?void 0:n.showWelcomeMessage,s]),a=g.useMemo(()=>!s&&!o&&(t==null?void 0:t.assistant)!==void 0&&(n==null?void 0:n.showWelcomeMessage)!==!1,[s,o,t==null?void 0:t.assistant,n==null?void 0:n.showWelcomeMessage]),u=g.useMemo(()=>!o&&(n==null?void 0:n.conversationStarters)&&(n==null?void 0:n.conversationStarters.length)>0,[o,n==null?void 0:n.conversationStarters]),l=g.useMemo(()=>s!==void 0&&(n==null?void 0:n.showWelcomeMessage)!==!1,[s]);g.useEffect(()=>{s&&(n==null?void 0:n.showWelcomeMessage)===!1&&_t("Configuration conflict: The greeting UI override provided via <AiChatUI.Greeting> will not be shown because conversationOptions.showWelcomeMessage is set to false.")},[n==null?void 0:n.showWelcomeMessage,s]);const c=!(i||a||l||o);return y.jsxs(y.Fragment,{children:[i&&y.jsx(Mc,{}),a&&y.jsx(Zo,{name:t.assistant.name,avatar:t.assistant.avatar,message:t.assistant.tagline}),l&&y.jsx(Ms,{children:s}),c&&y.jsx(Ms,{children:null}),y.jsx("div",{className:"nlux-conversationStarters-container",children:u&&y.jsx(jc,{items:n.conversationStarters??[],onConversationStarterSelected:r.onConversationStarterSelected})})]})},js=()=>y.jsx("div",{className:"nlux-comp-messageLoader",children:y.jsx("div",{className:"nlux-comp-loaderContainer",children:y.jsx("span",{className:"spinning-loader"})})}),fr={Loader:r=>y.jsx(y.Fragment,{children:r.children}),Greeting:r=>y.jsx(y.Fragment,{children:r.children})},gr=g.createContext({}),Xo=function(r){var we,j,Pe,Fe,Le;const{adapter:e,className:t,initialConversation:n,conversationOptions:s,composerOptions:o,displayOptions:i}=r,{themeId:a,colorScheme:u}=i??{},l=g.useRef(null),c=g.useRef(null),d=g.useRef(void 0),p=g.useRef(null),h=((S,z)=>{const[Z,ae]=g.useState(),[be,xe]=g.useState(),le=g.useRef(Z),Ee=g.useRef(z);return g.useEffect(()=>{const R=S.current||void 0;R!==be&&xe(R)}),g.useEffect(()=>{be?le.current?le.current.updateConversationContainer(be):(le.current=Ic(be,Ee.current??Ds),ae(le.current)):le.current&&(le.current.destroy(),ae(void 0),le.current=void 0)},[be]),g.useEffect(()=>{Ee.current=z,le.current&&le.current.updateProps({autoScroll:z??Ds})},[z]),Z})(c,s==null?void 0:s.autoScroll),m=g.useMemo(()=>p.current?Ba(p.current):void 0,[p.current]),v=(()=>{const S={},z=new Set;return g.useMemo(()=>({getStreamingDomElement:Z=>{if(z.has(Z)&&z.delete(Z),S[Z]===void 0){const ae=document.createElement("div");ae.setAttribute("nlux-message-id",Z),ae.className="nlux-markdown-container",S[Z]=ae}return S[Z]},deleteStreamingDomElement:Z=>{z.add(Z),setTimeout(()=>{z.forEach(ae=>{S[ae]&&(S[ae].remove(),delete S[ae])}),z.clear()},1e3)}}),[])})(),{PrimitivesContextProvider:w}=function(S){var ae,be,xe,le,Ee,R,U,de,ue;const[z,Z]=g.useState(S);return g.useEffect(()=>{Z(S)},[(ae=S==null?void 0:S.messageOptions)==null?void 0:ae.htmlSanitizer,(be=S==null?void 0:S.messageOptions)==null?void 0:be.syntaxHighlighter,(xe=S==null?void 0:S.messageOptions)==null?void 0:xe.markdownLinkTarget,(le=S==null?void 0:S.messageOptions)==null?void 0:le.showCodeBlockCopyButton,(Ee=S==null?void 0:S.messageOptions)==null?void 0:Ee.skipStreamingAnimation,(R=S==null?void 0:S.messageOptions)==null?void 0:R.streamingAnimationSpeed,(U=S==null?void 0:S.messageOptions)==null?void 0:U.waitTimeBeforeStreamCompletion,(de=S==null?void 0:S.messageOptions)==null?void 0:de.responseRenderer,(ue=S==null?void 0:S.messageOptions)==null?void 0:ue.promptRenderer]),{PrimitivesContextProvider:g.useMemo(()=>({children:Ie})=>y.jsx(gr.Provider,{value:z,children:Ie}),[z]),primitivesContext:gr}}({messageOptions:r.messageOptions}),[C,b]=g.useState(""),[x,E]=g.useState("typing"),[k,O]=g.useState(),[L,H]=g.useState([]),[I,P]=g.useState([]),[q,M]=g.useState([]),$=g.useMemo(()=>k?[k,...L]:L,[k,L]),B=g.useMemo(()=>(S=>{const z=S;if(typeof(z==null?void 0:z.create)=="function")return z.create();if(typeof(z==null?void 0:z.batchText)=="function"||typeof(z==null?void 0:z.streamText)=="function"||typeof(z==null?void 0:z.streamServerComponent)=="function")return S;De("Unable to determine the type of the adapter! Missing batchText or streamText method.")})(e),[e]),K=(S=>g.useMemo(()=>{const z={minWidth:"280px",minHeight:"280px"};return S!=null&&S.width&&(z.width=S.width),S!=null&&S.height&&(z.height=S.height),z},[S==null?void 0:S.width,S==null?void 0:S.height]))(i),ne=g.useMemo(()=>(S=>{const z=["nlux-AiChat-root"],Z=`nlux-theme-${S.themeId||"nova"}`;return z.push(Z),S.className&&z.push(S.className),z})({className:t,themeId:a}).join(" "),[t,a]),se=g.useMemo(()=>{var S;return u!=="auto"&&u?u:typeof globalThis!==void 0&&globalThis.matchMedia&&((S=globalThis.matchMedia("(prefers-color-scheme: dark)"))!=null&&S.matches)?"dark":"light"},[u]),ce=g.useCallback(S=>m==null?void 0:m.displayException(S),[m]),_=function(S,z,Z,ae,be,xe,le,Ee){return g.useCallback(()=>{var U;const R=S.length>0?S[S.length-1]:void 0;(R==null?void 0:R.status)==="active"&&(ae(S.slice(0,-1)),be([...z,R.uid]),xe([...Z,...R.items.map(de=>de.uid)]),(U=le.current)==null||U.cancelSegmentStreams(R.uid)),Ee("typing")},[S,z,Z,ae,be,xe,le,Ee])}(L,I,q,H,P,M,l,E),A=g.useCallback(S=>b(S),[b]),D=Dc({aiChatProps:r,adapterToUse:B,conversationRef:l,initialSegment:k,newSegments:L,cancelledMessageIds:q,cancelledSegmentIds:I,prompt:C,composerOptions:o,showException:ce,setChatSegments:H,setComposerStatus:E,setPrompt:b}),N=((S,z,Z,ae,be,xe)=>g.useCallback((le,Ee,R)=>{if(le==="initial"&&S){const ue=[];for(const _e of S.items){if(_e.uid===Ee)break;ue.push(_e)}const Ie={...S,items:ue};return z(Ie),ae([]),be(R),void xe("submitting-edit")}const U=Z.findIndex(ue=>ue.uid===le),de=Z.slice(0,U);ae(de),be(R),xe("submitting-edit")},[Z,ae,S,z,be,xe]))(k,O,L,H,b,E),W=g.useCallback((S,z)=>{var Z;(Z=r.events)!=null&&Z.messageRendered&&r.events.messageRendered({uid:z})},[]),Q=g.useCallback(S=>{b(S.prompt),E("submitting-conversation-starter")},[b,E]),te=((S,z)=>g.useCallback(Z=>{S&&Z&&(z.current=Z.uid,S.handleNewChatSegmentAdded(Z.uid,Z.div))},[S]))(h,d);g.useEffect(()=>{x!=="submitting-conversation-starter"&&x!=="submitting-external-message"&&x!=="submitting-edit"||D()},[x,D]),g.useEffect(()=>O(n?{uid:"initial",status:"complete",items:n.map((S,z)=>{if(S.role==="assistant"||S.role==="user")return S.role==="user"?typeof S.message!="string"?void De(`Invalid message type for item at index ${z} in initial conversation: When role is "user", message must be a string`):{uid:Ke(),time:new Date,status:"complete",participantRole:"user",content:S.message}:{uid:Ke(),time:new Date,status:"complete",participantRole:"assistant",content:S.message,serverResponse:S.serverResponse,dataTransferMode:"batch"};De(`Invalid role for item at index ${z} in initial conversation: Role must be "assistant" or "user"`)}).filter(S=>S!==void 0)}:void 0),[n]),g.useEffect(()=>{var S;k&&((S=c.current)==null||S.scrollTo({behavior:"smooth",top:5e4}))},[k]);const Y=g.useRef(void 0);g.useEffect(()=>{const S=r.api;Y.current=S,typeof(S==null?void 0:S.__setHost)=="function"?S.__setHost({sendMessage:z=>{b(z),E("submitting-external-message")},resetConversation:()=>{H([]),O(void 0)},cancelLastMessageRequest:_}):_t(`API object passed was is not compatible with AiChat.
Only use API objects created by the useAiChatApi() hook.`)},[r.api,_,b,E,H,O]),g.useEffect(()=>()=>{var S;typeof((S=Y.current)==null?void 0:S.__unsetHost)=="function"&&(Y.current.__unsetHost(),Y.current=void 0)},[]),(S=>{g.useEffect(()=>{var Z;const z=(Z=S.events)==null?void 0:Z.ready;z&&z({aiChatProps:mr(S)})},[])})(r),((S,z)=>{var be;const Z=g.useRef(),ae=g.useRef();g.useEffect(()=>{Z.current=()=>{const xe=[];return z.forEach(le=>{le.items&&le.items.length!==0&&le.items.forEach(Ee=>{Ee.status==="complete"&&(Ee.participantRole!=="assistant"?Ee.participantRole==="user"&&xe.push({role:"user",message:Ee.content}):xe.push({role:"assistant",message:Ee.content}))})}),xe}},[z]),g.useEffect(()=>{var xe;ae.current=(xe=S.events)==null?void 0:xe.preDestroy},[(be=S.events)==null?void 0:be.preDestroy]),g.useEffect(()=>()=>{var le;const xe=ae.current;xe&&(xe({aiChatProps:mr(S),conversationHistory:((le=Z.current)==null?void 0:le.call(Z))??[]}),Z.current=void 0)},[])})(r,$);const G=g.useMemo(()=>g.forwardRef(wc),[]),J=(S=>{const z=g.useMemo(()=>S.children?Array.isArray(S.children)?S.children:[S.children]:[],[S.children]);return{Loader:g.useMemo(()=>z.length===0?y.jsx(js,{}):z.find(Z=>Z.type===fr.Loader)||y.jsx(js,{}),[z]),Greeting:g.useMemo(()=>{if(z.length!==0)return z.find(Z=>Z.type===fr.Greeting)},[z])}})(r),re=C.length>0,V=$.length===0?"nlux-chatRoom-starting":"nlux-chatRoom-active";return B?y.jsx(w,{children:y.jsxs("div",{className:ne,style:K,"data-color-scheme":se,children:[y.jsx("div",{className:"nlux-comp-exceptionBox",ref:p}),y.jsxs("div",{className:`nlux-chatRoom-container ${V}`,children:[y.jsx("div",{className:"nlux-launchPad-container",children:y.jsx(Lc,{segments:$,onConversationStarterSelected:Q,conversationOptions:s,personaOptions:r.personaOptions,userDefinedGreeting:J.Greeting})}),y.jsx("div",{className:"nlux-conversation-container",ref:c,children:y.jsx(G,{ref:l,segments:$,conversationOptions:r.conversationOptions,personaOptions:r.personaOptions,messageOptions:r.messageOptions,onLastActiveSegmentChange:te,Loader:J.Loader,markdownContainersController:v,submitShortcutKey:(we=r.composerOptions)==null?void 0:we.submitShortcut,onPromptResubmit:N,onMarkdownStreamRendered:W})}),y.jsx("div",{className:"nlux-composer-container",children:y.jsx(Ac,{status:x,prompt:C,hasValidInput:re,placeholder:(j=r.composerOptions)==null?void 0:j.placeholder,autoFocus:(Pe=r.composerOptions)==null?void 0:Pe.autoFocus,submitShortcut:(Fe=r.composerOptions)==null?void 0:Fe.submitShortcut,hideStopButton:(Le=r.composerOptions)==null?void 0:Le.hideStopButton,onChange:A,onSubmit:D,onCancel:_,Loader:J.Loader})})]})]})}):(_t("AiChat: No valid adapter provided. The component will not render."),y.jsx(y.Fragment,{}))},zc=()=>{const r=g.useRef(null),e=g.useRef(((t=()=>{})=>({composer:{send:n=>{throw new Error("AiChatApi is not connected to a host <AiChat /> component.")},cancel:()=>{throw new Error("AiChatApi is not connected to a host <AiChat /> component.")}},conversation:{reset:()=>{throw new Error("AiChatApi is not connected to a host <AiChat /> component.")}},__setHost:n=>{t(n)},__unsetHost:()=>{}}))());return e.current.composer.send=t=>{if(!r.current)throw new Error("AiChatApi is not connected to a host <AiChat /> component.");r.current.sendMessage(t)},e.current.composer.cancel=()=>{if(!r.current)throw new Error("AiChatApi is not connected to a host <AiChat /> component.");r.current.cancelLastMessageRequest()},e.current.conversation.reset=()=>{if(!r.current)throw new Error("AiChatApi is not connected to a host <AiChat /> component.");r.current.resetConversation()},e.current.__setHost=t=>{r.current=t},e.current.__unsetHost=()=>{r.current=null},e.current},Ko=({children:r})=>{const e=g.useMemo(()=>Math.random().toString(36).substring(7),[]),t=g.useContext(gr),n=Array.isArray(r)?r.join(""):r;return y.jsx(hr,{markdownOptions:t.messageOptions,content:n,messageUid:e})},$c=function(r,e){return g.useMemo(()=>({batchText:r}),e??[{}])},Fc=function(r,e){return g.useMemo(()=>({streamText:r}),e??[{}])},Hc=function(r,e){return{streamServerComponent:(t,n,s)=>()=>{const[o,i]=g.useState("idle"),[a,u]=g.useState(null);return g.useEffect(()=>{i("loading"),r.then(l=>{if(typeof l.default!="function"){const c="The module passed to useAsRscAdapter() as server component does not have a valid default export.";return De(c),i("error"),void s.onError(new Error(c))}i("success"),u(()=>g.lazy(async()=>{let c,d;try{d=l.default({message:t,extras:n}),c=await Promise.resolve(d)}catch{De(`An error occurred while rendering the React Server Component (RSC).
Please ensure that no server error has occurred.`),s.onError(new Error("Error while rendering RSC."))}return s.onServerComponentReceived(),c!==void 0&&g.isValidElement(c)?{default:()=>y.jsx(y.Fragment,{children:c})}:(s.onError(new Error("Unable to render RSC. The RSC adapter should return a valid React element.")),{default:()=>y.jsx(y.Fragment,{})})}))}).catch(l=>{De(`The module passed to useAsRscAdapter() is not a valid ES module, or did not properly load! The first parameter passed to useAsRscAdapter() should be the result of a dynamic import() call [ without await or .then() ]. The module should also have a default export. Your bundler should be able to handle dynamic imports and ES modules.

Reference: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import#dynamic_imports`),i("error"),s.onError(l)})},[]),o==="idle"||o==="loading"?null:o==="error"?(De("Error loading RSC"),y.jsx(y.Fragment,{children:"Error loading RSC"})):y.jsx(g.Suspense,{fallback:e||null,children:a&&y.jsx(a,{})})}}},Nc=(r,e,t)=>{const n=g.useContext(r.ref),[s]=g.useState(()=>{let i;do i=Math.random().toString(36).substring(2,15);while(n.hasItem(i));return i}),o=g.useRef();g.useEffect(()=>(o.current=n.observeState(s,e,t),()=>{var i;(i=o.current)==null||i.discard(),o.current=void 0}),[]),g.useEffect(()=>{var i;(i=o.current)==null||i.setDescription(e)},[e]),g.useEffect(()=>{var i;(i=o.current)==null||i.setData(t)},[t])},_c=(r,e,t,n)=>{const s=g.useContext(r.ref),[o]=g.useState(()=>{let a;do a=Math.random().toString(36).substring(2,15);while(s.hasTask(a));return a}),i=g.useRef();g.useEffect(()=>(i.current=s.registerTask(o,e,t,n),()=>{var a;(a=i.current)==null||a.discard(),i.current=void 0}),[]),g.useEffect(()=>{var a;(a=i.current)==null||a.setDescription(e)},[e]),g.useEffect(()=>{var a;(a=i.current)==null||a.setCallback(t)},[t]),g.useEffect(()=>{var a;(a=i.current)==null||a.setParamDescriptions(n??[])},[n])},Uc=r=>{const e=fs(),t=g.createContext(e);return{Provider:n=>{const[s,o]=g.useState(),[i,a]=g.useState(),[u,l]=g.useState();g.useEffect(()=>{let d=!0;const p=fs().withAdapter(r).withDataSyncOptions({syncStrategy:"auto",contextSize:ja["100k"]});return l(p),p.initialize(n.initialItems||{}).then(h=>{d&&(h.success?o(h.contextId):a(new Error(h.error)))}),()=>{d=!1,p.destroy()}},[]);const{children:c}=n;return i?n.errorComponent?y.jsx(n.errorComponent,{error:i.message}):y.jsxs("div",{children:[y.jsx("h1",{children:"Error initializing AI context"}),y.jsx("p",{children:i.message})]}):s&&u?y.jsx(t.Provider,{value:u,children:c}):n.loadingComponent?y.jsx(n.loadingComponent,{}):null},ref:t}},qc=function(r,e){return g.useEffect(r,function(t){const n=g.useRef(t),s=g.useRef(0);return zt(t,n.current)||(n.current=t,s.current+=1),g.useMemo(()=>n.current,[s.current])}(e))};var Go={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Bs=g.createContext&&g.createContext(Go),Wc=["attr","size","title"];function Yc(r,e){if(r==null)return{};var t=Qc(r,e),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(s=0;s<o.length;s++)n=o[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function Qc(r,e){if(r==null)return{};var t={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(e.indexOf(n)>=0)continue;t[n]=r[n]}return t}function Sn(){return Sn=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Sn.apply(this,arguments)}function Ls(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,n)}return t}function An(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ls(Object(t),!0).forEach(function(n){Zc(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Ls(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Zc(r,e,t){return e=Xc(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Xc(r){var e=Kc(r,"string");return typeof e=="symbol"?e:e+""}function Kc(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Jo(r){return r&&r.map((e,t)=>g.createElement(e.tag,An({key:t},e.attr),Jo(e.child)))}function Gc(r){return e=>g.createElement(Jc,Sn({attr:An({},r.attr)},e),Jo(r.child))}function Jc(r){var e=t=>{var{attr:n,size:s,title:o}=r,i=Yc(r,Wc),a=s||t.size||"1em",u;return t.className&&(u=t.className),r.className&&(u=(u?u+" ":"")+r.className),g.createElement("svg",Sn({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,i,{className:u,style:An(An({color:r.color||t.color},t.style),r.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),o&&g.createElement("title",null,o),r.children)};return Bs!==void 0?g.createElement(Bs.Consumer,null,t=>e(t)):e(Go)}function Vc(r){return Gc({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(r)}var Vo=(r=>(r.Text="Text",r.ImageUrl="ImageUrl",r))(Vo||{}),ei=(r=>(r.SystemMessage="system",r.AIMessage="ai",r.HumanMessage="human",r))(ei||{}),ti=(r=>(r.Auto="Auto",r.Low="Low",r.High="High",r))(ti||{});async function ni(r){const{files:e,message:t}=r;if(!e||!e.length)return t;{let n=await Promise.all(e.map(async s=>{const o=await el(s,r.resizeOptions);if(!o)throw new Error("resize failed");const i=await tl(o);if(!i)throw new Error("base64 failed");return["ImageUrl",i,null]}));return n.push(["Text",t,null]),n}}const el=async(r,e)=>{const t=(e==null?void 0:e.maxSize)||256,n=document.createElement("canvas"),s=n.getContext("2d");if(!s)throw new Error("ctx is not available");n.width=t,n.height=t;const o=await createImageBitmap(r),{width:i,height:a}=o,u=Math.max(t/i,t/a),l=(t-i*u)/2,c=(t-a*u)/2;return s.drawImage(o,0,0,i,a,l,c,i*u,a*u),new Promise(d=>{n.toBlob(p=>{d(p)})})};async function tl(r){return new Promise((e,t)=>{const n=new FileReader;n.onloadend=()=>e(n.result),n.readAsDataURL(r)})}async function nl(r,e){const t=r.getReader();let n;for(;!(n=await t.read()).done;)e(n.value)}function rl(r){let e,t,n,s=!1;return function(i){e===void 0?(e=i,t=0,n=-1):e=ol(e,i);const a=e.length;let u=0;for(;t<a;){s&&(e[t]===10&&(u=++t),s=!1);let l=-1;for(;t<a&&l===-1;++t)switch(e[t]){case 58:n===-1&&(n=t-u);break;case 13:s=!0;case 10:l=t;break}if(l===-1)break;r(e.subarray(u,l),n),u=t,n=-1}u===a?e=void 0:u!==0&&(e=e.subarray(u),t-=u)}}function sl(r,e,t){let n=zs();const s=new TextDecoder;return function(i,a){if(i.length===0)t==null||t(n),n=zs();else if(a>0){const u=s.decode(i.subarray(0,a)),l=a+(i[a+1]===32?2:1),c=s.decode(i.subarray(l));switch(u){case"data":n.data=n.data?n.data+(c||`
`):c||`
`;break;case"event":n.event=c;break;case"id":r(n.id=c);break;case"retry":const d=parseInt(c,10);isNaN(d)||e(n.retry=d);break}}}}function ol(r,e){const t=new Uint8Array(r.length+e.length);return t.set(r),t.set(e,r.length),t}function zs(){return{data:"",event:"",id:"",retry:void 0}}var il=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t};const vr="text/event-stream",al=1e3,$s="last-event-id";function cl(r,e){var{signal:t,headers:n,onopen:s,onmessage:o,onclose:i,onerror:a,openWhenHidden:u,fetch:l}=e,c=il(e,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise((d,p)=>{const h=Object.assign({},n);h.accept||(h.accept=vr);let m;function v(){m.abort(),document.hidden||k()}u||document.addEventListener("visibilitychange",v);let w=al,C=0;function b(){document.removeEventListener("visibilitychange",v),window.clearTimeout(C),m.abort()}t==null||t.addEventListener("abort",()=>{b(),d()});const x=l??window.fetch,E=s??ll;async function k(){var O;m=new AbortController;try{const L=await x(r,Object.assign(Object.assign({},c),{headers:h,signal:m.signal}));await E(L),await nl(L.body,rl(sl(H=>{H?h[$s]=H:delete h[$s]},H=>{w=H},o))),i==null||i(),b(),d()}catch(L){if(!m.signal.aborted)try{const H=(O=a==null?void 0:a(L))!==null&&O!==void 0?O:w;window.clearTimeout(C),C=window.setTimeout(k,H)}catch(H){b(),p(H)}}}k()})}function ll(r){const e=r.headers.get("content-type");if(!(e!=null&&e.startsWith(vr)))throw new Error(`Expected content-type to be ${vr}, Actual: ${e}`)}const ri="https://api.dev.langdb.ai",si=async r=>{var t;const e={"Content-Type":"application/json"};if(r.publicId)e["X-PUBLIC-APPLICATION-ID"]=r.publicId;else{const n=await((t=r.getAccessToken)==null?void 0:t.call(r));if(!n)throw new Error("Failed to get the user token");e.Authorization=`Bearer ${n}`}return e};class Nn extends Error{}const ul=r=>{const{files:e,fileResizeOptions:t}=r,s=`${r.serverUrl||ri}/stream`,[o,i]=g.useState(r.threadId),[a,u]=g.useState(),{modelName:l,agentParams:c}=r;return{adapter:{streamText:async(p,h)=>{try{const m=await si(r),v=await ni({files:e,message:p,resizeOptions:t}),w={model_name:l,parameters:c||{},user_id:r.userId||"",thread_id:o,message:v};await cl(s,{method:"POST",body:JSON.stringify(w),headers:m,credentials:"include",async onopen(C){if(C.ok&&C.headers.get("content-type")==="text/event-stream"){const b=C.headers.get("X-Thread-Id"),x=C.headers.get("X-Message-Id");if(u(x),i(b),r.responseCallback){const E=C==null?void 0:C.headers.get("x-trace-id");r.responseCallback({traceId:E,modelName:l,threadId:b,messageId:x})}if(!C.body)throw new Nn("No body found");return}else if(C.status>=400&&C.status<500&&C.status!==429){const b=await C.text();throw new Nn(b||`${C.status}: Failed to send message to the server`)}else return},onmessage(C){if(C.event)throw new Nn(C.data);h.next(C.data)},onclose(){},onerror(C){throw C}})}catch(m){const v=new Error(m.toString());r.responseCallback&&r.responseCallback({error:v,modelName:l}),h.error(v)}h.complete()}},threadId:o,messageId:a}};var yr={exports:{}},un={exports:{}},he={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fs;function dl(){if(Fs)return he;Fs=1;var r=typeof Symbol=="function"&&Symbol.for,e=r?Symbol.for("react.element"):60103,t=r?Symbol.for("react.portal"):60106,n=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,o=r?Symbol.for("react.profiler"):60114,i=r?Symbol.for("react.provider"):60109,a=r?Symbol.for("react.context"):60110,u=r?Symbol.for("react.async_mode"):60111,l=r?Symbol.for("react.concurrent_mode"):60111,c=r?Symbol.for("react.forward_ref"):60112,d=r?Symbol.for("react.suspense"):60113,p=r?Symbol.for("react.suspense_list"):60120,h=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116,v=r?Symbol.for("react.block"):60121,w=r?Symbol.for("react.fundamental"):60117,C=r?Symbol.for("react.responder"):60118,b=r?Symbol.for("react.scope"):60119;function x(k){if(typeof k=="object"&&k!==null){var O=k.$$typeof;switch(O){case e:switch(k=k.type,k){case u:case l:case n:case o:case s:case d:return k;default:switch(k=k&&k.$$typeof,k){case a:case c:case m:case h:case i:return k;default:return O}}case t:return O}}}function E(k){return x(k)===l}return he.AsyncMode=u,he.ConcurrentMode=l,he.ContextConsumer=a,he.ContextProvider=i,he.Element=e,he.ForwardRef=c,he.Fragment=n,he.Lazy=m,he.Memo=h,he.Portal=t,he.Profiler=o,he.StrictMode=s,he.Suspense=d,he.isAsyncMode=function(k){return E(k)||x(k)===u},he.isConcurrentMode=E,he.isContextConsumer=function(k){return x(k)===a},he.isContextProvider=function(k){return x(k)===i},he.isElement=function(k){return typeof k=="object"&&k!==null&&k.$$typeof===e},he.isForwardRef=function(k){return x(k)===c},he.isFragment=function(k){return x(k)===n},he.isLazy=function(k){return x(k)===m},he.isMemo=function(k){return x(k)===h},he.isPortal=function(k){return x(k)===t},he.isProfiler=function(k){return x(k)===o},he.isStrictMode=function(k){return x(k)===s},he.isSuspense=function(k){return x(k)===d},he.isValidElementType=function(k){return typeof k=="string"||typeof k=="function"||k===n||k===l||k===o||k===s||k===d||k===p||typeof k=="object"&&k!==null&&(k.$$typeof===m||k.$$typeof===h||k.$$typeof===i||k.$$typeof===a||k.$$typeof===c||k.$$typeof===w||k.$$typeof===C||k.$$typeof===b||k.$$typeof===v)},he.typeOf=x,he}var me={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hs;function pl(){return Hs||(Hs=1,process.env.NODE_ENV!=="production"&&function(){var r=typeof Symbol=="function"&&Symbol.for,e=r?Symbol.for("react.element"):60103,t=r?Symbol.for("react.portal"):60106,n=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,o=r?Symbol.for("react.profiler"):60114,i=r?Symbol.for("react.provider"):60109,a=r?Symbol.for("react.context"):60110,u=r?Symbol.for("react.async_mode"):60111,l=r?Symbol.for("react.concurrent_mode"):60111,c=r?Symbol.for("react.forward_ref"):60112,d=r?Symbol.for("react.suspense"):60113,p=r?Symbol.for("react.suspense_list"):60120,h=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116,v=r?Symbol.for("react.block"):60121,w=r?Symbol.for("react.fundamental"):60117,C=r?Symbol.for("react.responder"):60118,b=r?Symbol.for("react.scope"):60119;function x(j){return typeof j=="string"||typeof j=="function"||j===n||j===l||j===o||j===s||j===d||j===p||typeof j=="object"&&j!==null&&(j.$$typeof===m||j.$$typeof===h||j.$$typeof===i||j.$$typeof===a||j.$$typeof===c||j.$$typeof===w||j.$$typeof===C||j.$$typeof===b||j.$$typeof===v)}function E(j){if(typeof j=="object"&&j!==null){var Pe=j.$$typeof;switch(Pe){case e:var Fe=j.type;switch(Fe){case u:case l:case n:case o:case s:case d:return Fe;default:var Le=Fe&&Fe.$$typeof;switch(Le){case a:case c:case m:case h:case i:return Le;default:return Pe}}case t:return Pe}}}var k=u,O=l,L=a,H=i,I=e,P=c,q=n,M=m,$=h,B=t,K=o,ne=s,se=d,ce=!1;function _(j){return ce||(ce=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),A(j)||E(j)===u}function A(j){return E(j)===l}function D(j){return E(j)===a}function N(j){return E(j)===i}function W(j){return typeof j=="object"&&j!==null&&j.$$typeof===e}function Q(j){return E(j)===c}function te(j){return E(j)===n}function Y(j){return E(j)===m}function G(j){return E(j)===h}function J(j){return E(j)===t}function re(j){return E(j)===o}function V(j){return E(j)===s}function we(j){return E(j)===d}me.AsyncMode=k,me.ConcurrentMode=O,me.ContextConsumer=L,me.ContextProvider=H,me.Element=I,me.ForwardRef=P,me.Fragment=q,me.Lazy=M,me.Memo=$,me.Portal=B,me.Profiler=K,me.StrictMode=ne,me.Suspense=se,me.isAsyncMode=_,me.isConcurrentMode=A,me.isContextConsumer=D,me.isContextProvider=N,me.isElement=W,me.isForwardRef=Q,me.isFragment=te,me.isLazy=Y,me.isMemo=G,me.isPortal=J,me.isProfiler=re,me.isStrictMode=V,me.isSuspense=we,me.isValidElementType=x,me.typeOf=E}()),me}var Ns;function oi(){return Ns||(Ns=1,process.env.NODE_ENV==="production"?un.exports=dl():un.exports=pl()),un.exports}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var _n,_s;function hl(){if(_s)return _n;_s=1;var r=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable;function n(o){if(o==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(o)}function s(){try{if(!Object.assign)return!1;var o=new String("abc");if(o[5]="de",Object.getOwnPropertyNames(o)[0]==="5")return!1;for(var i={},a=0;a<10;a++)i["_"+String.fromCharCode(a)]=a;var u=Object.getOwnPropertyNames(i).map(function(c){return i[c]});if(u.join("")!=="0123456789")return!1;var l={};return"abcdefghijklmnopqrst".split("").forEach(function(c){l[c]=c}),Object.keys(Object.assign({},l)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return _n=s()?Object.assign:function(o,i){for(var a,u=n(o),l,c=1;c<arguments.length;c++){a=Object(arguments[c]);for(var d in a)e.call(a,d)&&(u[d]=a[d]);if(r){l=r(a);for(var p=0;p<l.length;p++)t.call(a,l[p])&&(u[l[p]]=a[l[p]])}}return u},_n}var Un,Us;function $r(){if(Us)return Un;Us=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Un=r,Un}var qn,qs;function ii(){return qs||(qs=1,qn=Function.call.bind(Object.prototype.hasOwnProperty)),qn}var Wn,Ws;function ml(){if(Ws)return Wn;Ws=1;var r=function(){};if(process.env.NODE_ENV!=="production"){var e=$r(),t={},n=ii();r=function(o){var i="Warning: "+o;typeof console<"u"&&console.error(i);try{throw new Error(i)}catch{}}}function s(o,i,a,u,l){if(process.env.NODE_ENV!=="production"){for(var c in o)if(n(o,c)){var d;try{if(typeof o[c]!="function"){var p=Error((u||"React class")+": "+a+" type `"+c+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof o[c]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw p.name="Invariant Violation",p}d=o[c](i,c,u,a,null,e)}catch(m){d=m}if(d&&!(d instanceof Error)&&r((u||"React class")+": type specification of "+a+" `"+c+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof d+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),d instanceof Error&&!(d.message in t)){t[d.message]=!0;var h=l?l():"";r("Failed "+a+" type: "+d.message+(h??""))}}}}return s.resetWarningCache=function(){process.env.NODE_ENV!=="production"&&(t={})},Wn=s,Wn}var Yn,Ys;function fl(){if(Ys)return Yn;Ys=1;var r=oi(),e=hl(),t=$r(),n=ii(),s=ml(),o=function(){};process.env.NODE_ENV!=="production"&&(o=function(a){var u="Warning: "+a;typeof console<"u"&&console.error(u);try{throw new Error(u)}catch{}});function i(){return null}return Yn=function(a,u){var l=typeof Symbol=="function"&&Symbol.iterator,c="@@iterator";function d(A){var D=A&&(l&&A[l]||A[c]);if(typeof D=="function")return D}var p="<<anonymous>>",h={array:C("array"),bigint:C("bigint"),bool:C("boolean"),func:C("function"),number:C("number"),object:C("object"),string:C("string"),symbol:C("symbol"),any:b(),arrayOf:x,element:E(),elementType:k(),instanceOf:O,node:P(),objectOf:H,oneOf:L,oneOfType:I,shape:M,exact:$};function m(A,D){return A===D?A!==0||1/A===1/D:A!==A&&D!==D}function v(A,D){this.message=A,this.data=D&&typeof D=="object"?D:{},this.stack=""}v.prototype=Error.prototype;function w(A){if(process.env.NODE_ENV!=="production")var D={},N=0;function W(te,Y,G,J,re,V,we){if(J=J||p,V=V||G,we!==t){if(u){var j=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw j.name="Invariant Violation",j}else if(process.env.NODE_ENV!=="production"&&typeof console<"u"){var Pe=J+":"+G;!D[Pe]&&N<3&&(o("You are manually calling a React.PropTypes validation function for the `"+V+"` prop on `"+J+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),D[Pe]=!0,N++)}}return Y[G]==null?te?Y[G]===null?new v("The "+re+" `"+V+"` is marked as required "+("in `"+J+"`, but its value is `null`.")):new v("The "+re+" `"+V+"` is marked as required in "+("`"+J+"`, but its value is `undefined`.")):null:A(Y,G,J,re,V)}var Q=W.bind(null,!1);return Q.isRequired=W.bind(null,!0),Q}function C(A){function D(N,W,Q,te,Y,G){var J=N[W],re=ne(J);if(re!==A){var V=se(J);return new v("Invalid "+te+" `"+Y+"` of type "+("`"+V+"` supplied to `"+Q+"`, expected ")+("`"+A+"`."),{expectedType:A})}return null}return w(D)}function b(){return w(i)}function x(A){function D(N,W,Q,te,Y){if(typeof A!="function")return new v("Property `"+Y+"` of component `"+Q+"` has invalid PropType notation inside arrayOf.");var G=N[W];if(!Array.isArray(G)){var J=ne(G);return new v("Invalid "+te+" `"+Y+"` of type "+("`"+J+"` supplied to `"+Q+"`, expected an array."))}for(var re=0;re<G.length;re++){var V=A(G,re,Q,te,Y+"["+re+"]",t);if(V instanceof Error)return V}return null}return w(D)}function E(){function A(D,N,W,Q,te){var Y=D[N];if(!a(Y)){var G=ne(Y);return new v("Invalid "+Q+" `"+te+"` of type "+("`"+G+"` supplied to `"+W+"`, expected a single ReactElement."))}return null}return w(A)}function k(){function A(D,N,W,Q,te){var Y=D[N];if(!r.isValidElementType(Y)){var G=ne(Y);return new v("Invalid "+Q+" `"+te+"` of type "+("`"+G+"` supplied to `"+W+"`, expected a single ReactElement type."))}return null}return w(A)}function O(A){function D(N,W,Q,te,Y){if(!(N[W]instanceof A)){var G=A.name||p,J=_(N[W]);return new v("Invalid "+te+" `"+Y+"` of type "+("`"+J+"` supplied to `"+Q+"`, expected ")+("instance of `"+G+"`."))}return null}return w(D)}function L(A){if(!Array.isArray(A))return process.env.NODE_ENV!=="production"&&(arguments.length>1?o("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):o("Invalid argument supplied to oneOf, expected an array.")),i;function D(N,W,Q,te,Y){for(var G=N[W],J=0;J<A.length;J++)if(m(G,A[J]))return null;var re=JSON.stringify(A,function(we,j){var Pe=se(j);return Pe==="symbol"?String(j):j});return new v("Invalid "+te+" `"+Y+"` of value `"+String(G)+"` "+("supplied to `"+Q+"`, expected one of "+re+"."))}return w(D)}function H(A){function D(N,W,Q,te,Y){if(typeof A!="function")return new v("Property `"+Y+"` of component `"+Q+"` has invalid PropType notation inside objectOf.");var G=N[W],J=ne(G);if(J!=="object")return new v("Invalid "+te+" `"+Y+"` of type "+("`"+J+"` supplied to `"+Q+"`, expected an object."));for(var re in G)if(n(G,re)){var V=A(G,re,Q,te,Y+"."+re,t);if(V instanceof Error)return V}return null}return w(D)}function I(A){if(!Array.isArray(A))return process.env.NODE_ENV!=="production"&&o("Invalid argument supplied to oneOfType, expected an instance of array."),i;for(var D=0;D<A.length;D++){var N=A[D];if(typeof N!="function")return o("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+ce(N)+" at index "+D+"."),i}function W(Q,te,Y,G,J){for(var re=[],V=0;V<A.length;V++){var we=A[V],j=we(Q,te,Y,G,J,t);if(j==null)return null;j.data&&n(j.data,"expectedType")&&re.push(j.data.expectedType)}var Pe=re.length>0?", expected one of type ["+re.join(", ")+"]":"";return new v("Invalid "+G+" `"+J+"` supplied to "+("`"+Y+"`"+Pe+"."))}return w(W)}function P(){function A(D,N,W,Q,te){return B(D[N])?null:new v("Invalid "+Q+" `"+te+"` supplied to "+("`"+W+"`, expected a ReactNode."))}return w(A)}function q(A,D,N,W,Q){return new v((A||"React class")+": "+D+" type `"+N+"."+W+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+Q+"`.")}function M(A){function D(N,W,Q,te,Y){var G=N[W],J=ne(G);if(J!=="object")return new v("Invalid "+te+" `"+Y+"` of type `"+J+"` "+("supplied to `"+Q+"`, expected `object`."));for(var re in A){var V=A[re];if(typeof V!="function")return q(Q,te,Y,re,se(V));var we=V(G,re,Q,te,Y+"."+re,t);if(we)return we}return null}return w(D)}function $(A){function D(N,W,Q,te,Y){var G=N[W],J=ne(G);if(J!=="object")return new v("Invalid "+te+" `"+Y+"` of type `"+J+"` "+("supplied to `"+Q+"`, expected `object`."));var re=e({},N[W],A);for(var V in re){var we=A[V];if(n(A,V)&&typeof we!="function")return q(Q,te,Y,V,se(we));if(!we)return new v("Invalid "+te+" `"+Y+"` key `"+V+"` supplied to `"+Q+"`.\nBad object: "+JSON.stringify(N[W],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(A),null,"  "));var j=we(G,V,Q,te,Y+"."+V,t);if(j)return j}return null}return w(D)}function B(A){switch(typeof A){case"number":case"string":case"undefined":return!0;case"boolean":return!A;case"object":if(Array.isArray(A))return A.every(B);if(A===null||a(A))return!0;var D=d(A);if(D){var N=D.call(A),W;if(D!==A.entries){for(;!(W=N.next()).done;)if(!B(W.value))return!1}else for(;!(W=N.next()).done;){var Q=W.value;if(Q&&!B(Q[1]))return!1}}else return!1;return!0;default:return!1}}function K(A,D){return A==="symbol"?!0:D?D["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&D instanceof Symbol:!1}function ne(A){var D=typeof A;return Array.isArray(A)?"array":A instanceof RegExp?"object":K(D,A)?"symbol":D}function se(A){if(typeof A>"u"||A===null)return""+A;var D=ne(A);if(D==="object"){if(A instanceof Date)return"date";if(A instanceof RegExp)return"regexp"}return D}function ce(A){var D=se(A);switch(D){case"array":case"object":return"an "+D;case"boolean":case"date":case"regexp":return"a "+D;default:return D}}function _(A){return!A.constructor||!A.constructor.name?p:A.constructor.name}return h.checkPropTypes=s,h.resetWarningCache=s.resetWarningCache,h.PropTypes=h,h},Yn}var Qn,Qs;function gl(){if(Qs)return Qn;Qs=1;var r=$r();function e(){}function t(){}return t.resetWarningCache=e,Qn=function(){function n(i,a,u,l,c,d){if(d!==r){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}n.isRequired=n;function s(){return n}var o={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return o.PropTypes=o,o},Qn}if(process.env.NODE_ENV!=="production"){var vl=oi(),yl=!0;yr.exports=fl()(vl.isElement,yl)}else yr.exports=gl()();var bl=yr.exports;const ye=Ri(bl);function vt(r,e,t,n){function s(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(c){try{l(n.next(c))}catch(d){i(d)}}function u(c){try{l(n.throw(c))}catch(d){i(d)}}function l(c){c.done?o(c.value):s(c.value).then(a,u)}l((n=n.apply(r,e||[])).next())})}function yt(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,s,o,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(l){return function(c){return u([l,c])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,l[0]&&(t=0)),t;)try{if(n=1,s&&(o=l[0]&2?s.return:l[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,l[1])).done)return o;switch(s=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,s=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(l[0]===6&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(c){l=[6,c],s=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Zs(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),s,o=[],i;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)o.push(s.value)}catch(a){i={error:a}}finally{try{s&&!s.done&&(t=n.return)&&t.call(n)}finally{if(i)throw i.error}}return o}function Xs(r,e,t){if(t||arguments.length===2)for(var n=0,s=e.length,o;n<s;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))}var xl=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function Zt(r,e){var t=wl(r);if(typeof t.path!="string"){var n=r.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof n=="string"&&n.length>0?n:r.name,writable:!1,configurable:!1,enumerable:!0})}return t}function wl(r){var e=r.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!r.type){var n=e.split(".").pop().toLowerCase(),s=xl.get(n);s&&Object.defineProperty(r,"type",{value:s,writable:!1,configurable:!1,enumerable:!0})}return r}var kl=[".DS_Store","Thumbs.db"];function Cl(r){return vt(this,void 0,void 0,function(){return yt(this,function(e){return En(r)&&Sl(r.dataTransfer)?[2,Il(r.dataTransfer,r.type)]:Al(r)?[2,El(r)]:Array.isArray(r)&&r.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,Tl(r)]:[2,[]]})})}function Sl(r){return En(r)}function Al(r){return En(r)&&En(r.target)}function En(r){return typeof r=="object"&&r!==null}function El(r){return br(r.target.files).map(function(e){return Zt(e)})}function Tl(r){return vt(this,void 0,void 0,function(){var e;return yt(this,function(t){switch(t.label){case 0:return[4,Promise.all(r.map(function(n){return n.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(n){return Zt(n)})]}})})}function Il(r,e){return vt(this,void 0,void 0,function(){var t,n;return yt(this,function(s){switch(s.label){case 0:return r.items?(t=br(r.items).filter(function(o){return o.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(Pl))]):[3,2];case 1:return n=s.sent(),[2,Ks(ai(n))];case 2:return[2,Ks(br(r.files).map(function(o){return Zt(o)}))]}})})}function Ks(r){return r.filter(function(e){return kl.indexOf(e.name)===-1})}function br(r){if(r===null)return[];for(var e=[],t=0;t<r.length;t++){var n=r[t];e.push(n)}return e}function Pl(r){if(typeof r.webkitGetAsEntry!="function")return Gs(r);var e=r.webkitGetAsEntry();return e&&e.isDirectory?ci(e):Gs(r)}function ai(r){return r.reduce(function(e,t){return Xs(Xs([],Zs(e),!1),Zs(Array.isArray(t)?ai(t):[t]),!1)},[])}function Gs(r){var e=r.getAsFile();if(!e)return Promise.reject("".concat(r," is not a File"));var t=Zt(e);return Promise.resolve(t)}function Rl(r){return vt(this,void 0,void 0,function(){return yt(this,function(e){return[2,r.isDirectory?ci(r):Ol(r)]})})}function ci(r){var e=r.createReader();return new Promise(function(t,n){var s=[];function o(){var i=this;e.readEntries(function(a){return vt(i,void 0,void 0,function(){var u,l,c;return yt(this,function(d){switch(d.label){case 0:if(a.length)return[3,5];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,Promise.all(s)];case 2:return u=d.sent(),t(u),[3,4];case 3:return l=d.sent(),n(l),[3,4];case 4:return[3,6];case 5:c=Promise.all(a.map(Rl)),s.push(c),o(),d.label=6;case 6:return[2]}})})},function(a){n(a)})}o()})}function Ol(r){return vt(this,void 0,void 0,function(){return yt(this,function(e){return[2,new Promise(function(t,n){r.file(function(s){var o=Zt(s,r.fullPath);t(o)},function(s){n(s)})})]})})}var Dl=function(r,e){if(r&&e){var t=Array.isArray(e)?e:e.split(","),n=r.name||"",s=(r.type||"").toLowerCase(),o=s.replace(/\/.*$/,"");return t.some(function(i){var a=i.trim().toLowerCase();return a.charAt(0)==="."?n.toLowerCase().endsWith(a):a.endsWith("/*")?o===a.replace(/\/.*$/,""):s===a})}return!0};function Js(r){return Bl(r)||jl(r)||ui(r)||Ml()}function Ml(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jl(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Bl(r){if(Array.isArray(r))return xr(r)}function Vs(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,n)}return t}function eo(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Vs(Object(t),!0).forEach(function(n){li(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Vs(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function li(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Ut(r,e){return $l(r)||zl(r,e)||ui(r,e)||Ll()}function Ll(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ui(r,e){if(r){if(typeof r=="string")return xr(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return xr(r,e)}}function xr(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function zl(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n=[],s=!0,o=!1,i,a;try{for(t=t.call(r);!(s=(i=t.next()).done)&&(n.push(i.value),!(e&&n.length===e));s=!0);}catch(u){o=!0,a=u}finally{try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}return n}}function $l(r){if(Array.isArray(r))return r}var Fl="file-invalid-type",Hl="file-too-large",Nl="file-too-small",_l="too-many-files",Ul=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:Fl,message:"File type must be ".concat(t)}},to=function(e){return{code:Hl,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},no=function(e){return{code:Nl,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},ql={code:_l,message:"Too many files"};function di(r,e){var t=r.type==="application/x-moz-file"||Dl(r,e);return[t,t?null:Ul(e)]}function pi(r,e,t){if(at(r.size))if(at(e)&&at(t)){if(r.size>t)return[!1,to(t)];if(r.size<e)return[!1,no(e)]}else{if(at(e)&&r.size<e)return[!1,no(e)];if(at(t)&&r.size>t)return[!1,to(t)]}return[!0,null]}function at(r){return r!=null}function Wl(r){var e=r.files,t=r.accept,n=r.minSize,s=r.maxSize,o=r.multiple,i=r.maxFiles,a=r.validator;return!o&&e.length>1||o&&i>=1&&e.length>i?!1:e.every(function(u){var l=di(u,t),c=Ut(l,1),d=c[0],p=pi(u,n,s),h=Ut(p,1),m=h[0],v=a?a(u):null;return d&&m&&!v})}function Tn(r){return typeof r.isPropagationStopped=="function"?r.isPropagationStopped():typeof r.cancelBubble<"u"?r.cancelBubble:!1}function dn(r){return r.dataTransfer?Array.prototype.some.call(r.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!r.target&&!!r.target.files}function ro(r){r.preventDefault()}function Yl(r){return r.indexOf("MSIE")!==-1||r.indexOf("Trident/")!==-1}function Ql(r){return r.indexOf("Edge/")!==-1}function Zl(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return Yl(r)||Ql(r)}function Qe(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return function(n){for(var s=arguments.length,o=new Array(s>1?s-1:0),i=1;i<s;i++)o[i-1]=arguments[i];return e.some(function(a){return!Tn(n)&&a&&a.apply(void 0,[n].concat(o)),Tn(n)})}}function Xl(){return"showOpenFilePicker"in window}function Kl(r){if(at(r)){var e=Object.entries(r).filter(function(t){var n=Ut(t,2),s=n[0],o=n[1],i=!0;return hi(s)||(console.warn('Skipped "'.concat(s,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),i=!1),(!Array.isArray(o)||!o.every(mi))&&(console.warn('Skipped "'.concat(s,'" because an invalid file extension was provided.')),i=!1),i}).reduce(function(t,n){var s=Ut(n,2),o=s[0],i=s[1];return eo(eo({},t),{},li({},o,i))},{});return[{description:"Files",accept:e}]}return r}function Gl(r){if(at(r))return Object.entries(r).reduce(function(e,t){var n=Ut(t,2),s=n[0],o=n[1];return[].concat(Js(e),[s],Js(o))},[]).filter(function(e){return hi(e)||mi(e)}).join(",")}function Jl(r){return r instanceof DOMException&&(r.name==="AbortError"||r.code===r.ABORT_ERR)}function Vl(r){return r instanceof DOMException&&(r.name==="SecurityError"||r.code===r.SECURITY_ERR)}function hi(r){return r==="audio/*"||r==="video/*"||r==="image/*"||r==="text/*"||/\w+\/[-+.\w]+/g.test(r)}function mi(r){return/^.*\.[\w]+$/.test(r)}var eu=["children"],tu=["open"],nu=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],ru=["refKey","onChange","onClick"];function su(r){return au(r)||iu(r)||fi(r)||ou()}function ou(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iu(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function au(r){if(Array.isArray(r))return wr(r)}function Zn(r,e){return uu(r)||lu(r,e)||fi(r,e)||cu()}function cu(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fi(r,e){if(r){if(typeof r=="string")return wr(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return wr(r,e)}}function wr(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function lu(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n=[],s=!0,o=!1,i,a;try{for(t=t.call(r);!(s=(i=t.next()).done)&&(n.push(i.value),!(e&&n.length===e));s=!0);}catch(u){o=!0,a=u}finally{try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}return n}}function uu(r){if(Array.isArray(r))return r}function so(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,n)}return t}function Se(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?so(Object(t),!0).forEach(function(n){kr(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):so(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function kr(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function In(r,e){if(r==null)return{};var t=du(r,e),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(s=0;s<o.length;s++)n=o[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function du(r,e){if(r==null)return{};var t={},n=Object.keys(r),s,o;for(o=0;o<n.length;o++)s=n[o],!(e.indexOf(s)>=0)&&(t[s]=r[s]);return t}var Fr=g.forwardRef(function(r,e){var t=r.children,n=In(r,eu),s=vi(n),o=s.open,i=In(s,tu);return g.useImperativeHandle(e,function(){return{open:o}},[o]),g.createElement(g.Fragment,null,t(Se(Se({},i),{},{open:o})))});Fr.displayName="Dropzone";var gi={disabled:!1,getFilesFromEvent:Cl,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};Fr.defaultProps=gi;Fr.propTypes={children:ye.func,accept:ye.objectOf(ye.arrayOf(ye.string)),multiple:ye.bool,preventDropOnDocument:ye.bool,noClick:ye.bool,noKeyboard:ye.bool,noDrag:ye.bool,noDragEventsBubbling:ye.bool,minSize:ye.number,maxSize:ye.number,maxFiles:ye.number,disabled:ye.bool,getFilesFromEvent:ye.func,onFileDialogCancel:ye.func,onFileDialogOpen:ye.func,useFsAccessApi:ye.bool,autoFocus:ye.bool,onDragEnter:ye.func,onDragLeave:ye.func,onDragOver:ye.func,onDrop:ye.func,onDropAccepted:ye.func,onDropRejected:ye.func,onError:ye.func,validator:ye.func};var Cr={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function vi(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Se(Se({},gi),r),t=e.accept,n=e.disabled,s=e.getFilesFromEvent,o=e.maxSize,i=e.minSize,a=e.multiple,u=e.maxFiles,l=e.onDragEnter,c=e.onDragLeave,d=e.onDragOver,p=e.onDrop,h=e.onDropAccepted,m=e.onDropRejected,v=e.onFileDialogCancel,w=e.onFileDialogOpen,C=e.useFsAccessApi,b=e.autoFocus,x=e.preventDropOnDocument,E=e.noClick,k=e.noKeyboard,O=e.noDrag,L=e.noDragEventsBubbling,H=e.onError,I=e.validator,P=g.useMemo(function(){return Gl(t)},[t]),q=g.useMemo(function(){return Kl(t)},[t]),M=g.useMemo(function(){return typeof w=="function"?w:oo},[w]),$=g.useMemo(function(){return typeof v=="function"?v:oo},[v]),B=g.useRef(null),K=g.useRef(null),ne=g.useReducer(pu,Cr),se=Zn(ne,2),ce=se[0],_=se[1],A=ce.isFocused,D=ce.isFileDialogActive,N=g.useRef(typeof window<"u"&&window.isSecureContext&&C&&Xl()),W=function(){!N.current&&D&&setTimeout(function(){if(K.current){var U=K.current.files;U.length||(_({type:"closeDialog"}),$())}},300)};g.useEffect(function(){return window.addEventListener("focus",W,!1),function(){window.removeEventListener("focus",W,!1)}},[K,D,$,N]);var Q=g.useRef([]),te=function(U){B.current&&B.current.contains(U.target)||(U.preventDefault(),Q.current=[])};g.useEffect(function(){return x&&(document.addEventListener("dragover",ro,!1),document.addEventListener("drop",te,!1)),function(){x&&(document.removeEventListener("dragover",ro),document.removeEventListener("drop",te))}},[B,x]),g.useEffect(function(){return!n&&b&&B.current&&B.current.focus(),function(){}},[B,b,n]);var Y=g.useCallback(function(R){H?H(R):console.error(R)},[H]),G=g.useCallback(function(R){R.preventDefault(),R.persist(),be(R),Q.current=[].concat(su(Q.current),[R.target]),dn(R)&&Promise.resolve(s(R)).then(function(U){if(!(Tn(R)&&!L)){var de=U.length,ue=de>0&&Wl({files:U,accept:P,minSize:i,maxSize:o,multiple:a,maxFiles:u,validator:I}),Ie=de>0&&!ue;_({isDragAccept:ue,isDragReject:Ie,isDragActive:!0,type:"setDraggedFiles"}),l&&l(R)}}).catch(function(U){return Y(U)})},[s,l,Y,L,P,i,o,a,u,I]),J=g.useCallback(function(R){R.preventDefault(),R.persist(),be(R);var U=dn(R);if(U&&R.dataTransfer)try{R.dataTransfer.dropEffect="copy"}catch{}return U&&d&&d(R),!1},[d,L]),re=g.useCallback(function(R){R.preventDefault(),R.persist(),be(R);var U=Q.current.filter(function(ue){return B.current&&B.current.contains(ue)}),de=U.indexOf(R.target);de!==-1&&U.splice(de,1),Q.current=U,!(U.length>0)&&(_({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),dn(R)&&c&&c(R))},[B,c,L]),V=g.useCallback(function(R,U){var de=[],ue=[];R.forEach(function(Ie){var _e=di(Ie,P),Xe=Zn(_e,2),tt=Xe[0],bt=Xe[1],xt=pi(Ie,i,o),ut=Zn(xt,2),wt=ut[0],kt=ut[1],Ct=I?I(Ie):null;if(tt&&wt&&!Ct)de.push(Ie);else{var St=[bt,kt];Ct&&(St=St.concat(Ct)),ue.push({file:Ie,errors:St.filter(function(At){return At})})}}),(!a&&de.length>1||a&&u>=1&&de.length>u)&&(de.forEach(function(Ie){ue.push({file:Ie,errors:[ql]})}),de.splice(0)),_({acceptedFiles:de,fileRejections:ue,type:"setFiles"}),p&&p(de,ue,U),ue.length>0&&m&&m(ue,U),de.length>0&&h&&h(de,U)},[_,a,P,i,o,u,p,h,m,I]),we=g.useCallback(function(R){R.preventDefault(),R.persist(),be(R),Q.current=[],dn(R)&&Promise.resolve(s(R)).then(function(U){Tn(R)&&!L||V(U,R)}).catch(function(U){return Y(U)}),_({type:"reset"})},[s,V,Y,L]),j=g.useCallback(function(){if(N.current){_({type:"openDialog"}),M();var R={multiple:a,types:q};window.showOpenFilePicker(R).then(function(U){return s(U)}).then(function(U){V(U,null),_({type:"closeDialog"})}).catch(function(U){Jl(U)?($(U),_({type:"closeDialog"})):Vl(U)?(N.current=!1,K.current?(K.current.value=null,K.current.click()):Y(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):Y(U)});return}K.current&&(_({type:"openDialog"}),M(),K.current.value=null,K.current.click())},[_,M,$,C,V,Y,q,a]),Pe=g.useCallback(function(R){!B.current||!B.current.isEqualNode(R.target)||(R.key===" "||R.key==="Enter"||R.keyCode===32||R.keyCode===13)&&(R.preventDefault(),j())},[B,j]),Fe=g.useCallback(function(){_({type:"focus"})},[]),Le=g.useCallback(function(){_({type:"blur"})},[]),S=g.useCallback(function(){E||(Zl()?setTimeout(j,0):j())},[E,j]),z=function(U){return n?null:U},Z=function(U){return k?null:z(U)},ae=function(U){return O?null:z(U)},be=function(U){L&&U.stopPropagation()},xe=g.useMemo(function(){return function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},U=R.refKey,de=U===void 0?"ref":U,ue=R.role,Ie=R.onKeyDown,_e=R.onFocus,Xe=R.onBlur,tt=R.onClick,bt=R.onDragEnter,xt=R.onDragOver,ut=R.onDragLeave,wt=R.onDrop,kt=In(R,nu);return Se(Se(kr({onKeyDown:Z(Qe(Ie,Pe)),onFocus:Z(Qe(_e,Fe)),onBlur:Z(Qe(Xe,Le)),onClick:z(Qe(tt,S)),onDragEnter:ae(Qe(bt,G)),onDragOver:ae(Qe(xt,J)),onDragLeave:ae(Qe(ut,re)),onDrop:ae(Qe(wt,we)),role:typeof ue=="string"&&ue!==""?ue:"presentation"},de,B),!n&&!k?{tabIndex:0}:{}),kt)}},[B,Pe,Fe,Le,S,G,J,re,we,k,O,n]),le=g.useCallback(function(R){R.stopPropagation()},[]),Ee=g.useMemo(function(){return function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},U=R.refKey,de=U===void 0?"ref":U,ue=R.onChange,Ie=R.onClick,_e=In(R,ru),Xe=kr({accept:P,multiple:a,type:"file",style:{display:"none"},onChange:z(Qe(ue,we)),onClick:z(Qe(Ie,le)),tabIndex:-1},de,K);return Se(Se({},Xe),_e)}},[K,t,a,we,n]);return Se(Se({},ce),{},{isFocused:A&&!n,getRootProps:xe,getInputProps:Ee,rootRef:B,inputRef:K,open:z(j)})}function pu(r,e){switch(e.type){case"focus":return Se(Se({},r),{},{isFocused:!0});case"blur":return Se(Se({},r),{},{isFocused:!1});case"openDialog":return Se(Se({},Cr),{},{isFileDialogActive:!0});case"closeDialog":return Se(Se({},r),{},{isFileDialogActive:!1});case"setDraggedFiles":return Se(Se({},r),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return Se(Se({},r),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return Se({},Cr);default:return r}}function oo(){}const hu=r=>y.jsx("svg",{...r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14"})}),mu=()=>y.jsxs("svg",{viewBox:"0 0 200 200",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[y.jsx("circle",{cx:"100",cy:"100",r:"99.5",stroke:"#B0488C"}),y.jsxs("g",{clipPath:"url(#clip0_31_12)",children:[y.jsx("path",{d:"M87.6691 75.9199C88.563 75.9163 89.457 75.9128 90.378 75.9091C92.2639 75.9065 94.1498 75.9134 96.0357 75.9291C98.9224 75.9491 101.807 75.9292 104.694 75.9053C106.528 75.9078 108.362 75.9126 110.195 75.9199C111.059 75.9124 111.921 75.9048 112.81 75.897C119.46 75.9944 119.46 75.9944 121.75 78.2731C122.191 78.8959 122.631 79.5187 123.085 80.1604C123.454 80.531 123.454 80.531 123.83 80.9091C123.911 82.1028 123.941 83.3 123.95 84.4965C123.957 85.2614 123.964 86.0262 123.971 86.8143C123.974 87.6478 123.978 88.4815 123.981 89.3403C123.985 90.1927 123.99 91.0451 123.994 91.9233C124.001 93.7328 124.006 95.5423 124.009 97.3517C124.016 100.116 124.039 102.879 124.062 105.643C124.067 107.399 124.071 109.155 124.074 110.911C124.083 111.738 124.093 112.563 124.102 113.415C124.081 120.894 124.081 120.894 121.596 124.332C119.274 125.815 117.439 126.021 114.715 126.035C113.937 126.042 113.159 126.049 112.357 126.056C111.521 126.056 110.685 126.055 109.823 126.054C108.961 126.057 108.098 126.06 107.209 126.064C105.383 126.068 103.559 126.068 101.734 126.065C98.9428 126.062 96.1519 126.08 93.3604 126.099C91.5874 126.101 89.8145 126.101 88.0415 126.101C87.2067 126.107 86.372 126.115 85.5119 126.122C84.7316 126.117 83.9513 126.113 83.1474 126.107C82.4635 126.108 81.7796 126.109 81.075 126.109C78.7215 125.767 77.3408 124.983 75.4255 123.583C73.7766 121.097 73.7375 120.265 73.6961 117.362C73.6818 116.549 73.6676 115.737 73.6528 114.901C73.6465 114.023 73.6401 113.146 73.6337 112.242C73.6251 111.34 73.6166 110.438 73.6079 109.509C73.5938 107.6 73.5841 105.69 73.5783 103.781C73.5639 100.859 73.5177 97.9383 73.4707 95.0167C73.461 93.1626 73.4532 91.3085 73.4475 89.4543C73.4291 88.5801 73.4107 87.7058 73.3917 86.8049C73.4123 83.0474 73.445 80.866 75.6217 77.739C79.2026 75.469 83.5895 75.8841 87.6691 75.9199Z",fill:"#B0488C"}),y.jsx("path",{d:"M32.2341 37.4866C59.7575 37.4866 87.2809 37.4866 115.638 37.4866C115.638 42.9219 115.638 48.3572 115.638 53.9572C93.0298 53.9572 70.4213 53.9572 47.1277 53.9572C47.1277 64.5807 47.1277 75.2043 47.1277 86.1497C42.2128 86.1497 37.2979 86.1497 32.2341 86.1497C32.2341 70.0909 32.2341 54.0321 32.2341 37.4866Z",fill:"#B0488C"}),y.jsx("path",{d:"M32.2341 116.845C37.149 116.845 42.0639 116.845 47.1277 116.845C47.1277 127.221 47.1277 137.598 47.1277 148.289C71.7022 148.289 96.2766 148.289 121.596 148.289C121.596 153.23 121.596 158.171 121.596 163.262C92.1064 163.262 62.617 163.262 32.2341 163.262C32.2341 147.944 32.2341 132.627 32.2341 116.845Z",fill:"#B0488C"}),y.jsx("path",{d:"M161.814 34.6792C165.577 37.5618 167.934 41.1653 169.255 45.7219C170.002 51.7878 170.244 57.7758 166.678 63.0231C166.3 63.4902 165.921 63.9573 165.532 64.4385C164.964 65.1623 164.964 65.1623 164.386 65.9007C160.694 70.0863 156.304 72.2018 150.81 72.9575C144.443 73.235 139.791 71.2772 134.814 67.3864C130.268 63.0898 128.124 57.8507 127.879 51.6177C128.195 45.152 130.717 40.4865 135.049 35.7846C142.84 28.7908 153.315 29.3596 161.814 34.6792Z",fill:"#B0488C"}),y.jsx("path",{d:"M158.009 137.132C162.749 139.815 166.014 143.005 167.766 148.289C168.291 153.643 168.045 158.108 164.787 162.513C160.978 166.779 156.65 168.925 151.011 169.532C144.592 168.841 140.292 166.139 136.21 161.062C134.084 157.002 134.439 151.969 135 147.54C136.243 144.421 137.612 142.39 140.167 140.241C140.665 139.812 141.163 139.383 141.676 138.942C146.467 135.355 152.423 135.005 158.009 137.132Z",fill:"#B0488C"}),y.jsx("path",{d:"M149.894 85.4011C154.809 85.4011 159.723 85.4011 164.787 85.4011C164.787 96.0246 164.787 106.648 164.787 117.594C159.872 117.594 154.957 117.594 149.894 117.594C149.894 106.97 149.894 96.3465 149.894 85.4011Z",fill:"#B0488C"}),y.jsx("path",{d:"M40.3383 94.0136C43.3122 94.7142 44.8713 96.3632 46.6623 98.7366C47.3967 101.321 47.103 103.037 46.383 105.615C44.2412 107.919 42.6152 109.128 39.6343 110.107C36.957 110.107 35.8402 109.471 33.7234 107.861C33.2934 107.567 32.8633 107.274 32.4203 106.972C30.8391 104.667 30.4332 102.35 30.7447 99.6257C32.7702 95.2399 35.5991 93.6206 40.3383 94.0136Z",fill:"#B0488C"})]}),y.jsx("defs",{children:y.jsx("clipPath",{id:"clip0_31_12",children:y.jsx("rect",{width:"140",height:"140",fill:"white",transform:"translate(30 30)"})})})]}),fu=({files:r})=>y.jsx(y.Fragment,{children:r.map((e,t)=>y.jsx("div",{className:"thumbnail m-2",children:y.jsx("div",{className:"thumbnailInner",children:y.jsx("img",{src:e.preview,alt:e.preview,className:"w-[150px]"})})},t))}),gu=({files:r,setFiles:e})=>{const t=g.useCallback(i=>{e(a=>[...a,...i.map(u=>Object.assign(u,{preview:URL.createObjectURL(u)}))])},[]),{getRootProps:n,getInputProps:s}=vi({onDrop:t}),o=i=>()=>{const a=r.filter(u=>u!==i);e(a)};return y.jsxs("div",{className:"flex flex-col w-[100%] dropzone border",children:[y.jsxs("div",{...n(),className:"flex items-center justify-center p-4 rounded-lg cursor-pointer hover:border-gray-500",children:[y.jsx("input",{...s()}),y.jsx("p",{className:"text-gray-500",children:"Drag & drop images, or click to select files"})]}),y.jsx("aside",{className:"flex flex-wrap mt-4",children:r.map(i=>y.jsxs("div",{className:"relative m-2",children:[y.jsx("button",{onClick:o(i),className:"absolute top-0 right-0 p-1 bg-red-500 rounded-full text-white",children:y.jsx(hu,{className:"w-4 h-4"})}),y.jsx("div",{className:"border p-1 rounded-lg",children:y.jsx("img",{src:i.preview,alt:i.name,className:"w-12 h-12 object-cover rounded-lg"})})]},i.name))})]})};function vu({title:r,titleId:e,...t},n){return Me.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},t),r?Me.createElement("title",{id:e},r):null,Me.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.498 15.25H4.372c-1.026 0-1.945-.694-2.054-1.715a12.137 12.137 0 0 1-.068-1.285c0-2.848.992-5.464 2.649-7.521C5.287 4.247 5.886 4 6.504 4h4.016a4.5 4.5 0 0 1 1.423.23l3.114 1.04a4.5 4.5 0 0 0 1.423.23h1.294M7.498 15.25c.618 0 .991.724.725 1.282A7.471 7.471 0 0 0 7.5 19.75 2.25 2.25 0 0 0 9.75 22a.75.75 0 0 0 .75-.75v-.633c0-.573.11-1.14.322-1.672.304-.76.93-1.33 1.653-1.715a9.04 9.04 0 0 0 2.86-2.4c.498-.634 1.226-1.08 2.032-1.08h.384m-10.253 1.5H9.7m8.075-9.75c.01.05.027.1.05.148.593 1.2.925 2.55.925 3.977 0 1.487-.36 2.89-.999 4.125m.023-8.25c-.076-.365.183-.75.575-.75h.908c.889 0 1.713.518 1.972 1.368.339 1.11.521 2.287.521 3.507 0 1.553-.295 3.036-.831 4.398-.306.774-1.086 1.227-1.918 1.227h-1.053c-.472 0-.745-.556-.5-.96a8.95 8.95 0 0 0 .303-.54"}))}const yu=Me.forwardRef(vu);function bu({title:r,titleId:e,...t},n){return Me.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},t),r?Me.createElement("title",{id:e},r):null,Me.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.633 10.25c.806 0 1.533-.446 2.031-1.08a9.041 9.041 0 0 1 2.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 0 0 .322-1.672V2.75a.75.75 0 0 1 .75-.75 2.25 2.25 0 0 1 2.25 2.25c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282m0 0h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 0 1-2.649 7.521c-.388.482-.987.729-1.605.729H13.48c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 0 0-1.423-.23H5.904m10.598-9.75H14.25M5.904 18.5c.083.205.173.405.27.602.197.4-.078.898-.523.898h-.908c-.889 0-1.713-.518-1.972-1.368a12 12 0 0 1-.521-3.507c0-1.553.295-3.036.831-4.398C3.387 9.953 4.167 9.5 5 9.5h1.053c.472 0 .745.556.5.96a8.958 8.958 0 0 0-1.302 4.665c0 1.194.232 2.333.654 3.375Z"}))}const xu=Me.forwardRef(bu);function wu({title:r,titleId:e,...t},n){return Me.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},t),r?Me.createElement("title",{id:e},r):null,Me.createElement("path",{d:"M15.73 5.5h1.035A7.465 7.465 0 0 1 18 9.625a7.465 7.465 0 0 1-1.235 4.125h-.148c-.806 0-1.534.446-2.031 1.08a9.04 9.04 0 0 1-2.861 2.4c-.723.384-1.35.956-1.653 1.715a4.499 4.499 0 0 0-.322 1.672v.633A.75.75 0 0 1 9 22a2.25 2.25 0 0 1-2.25-2.25c0-1.152.26-2.243.723-3.218.266-.558-.107-1.282-.725-1.282H3.622c-1.026 0-1.945-.694-2.054-1.715A12.137 12.137 0 0 1 1.5 12.25c0-2.848.992-5.464 2.649-7.521C4.537 4.247 5.136 4 5.754 4H9.77a4.5 4.5 0 0 1 1.423.23l3.114 1.04a4.5 4.5 0 0 0 1.423.23ZM21.669 14.023c.536-1.362.831-2.845.831-4.398 0-1.22-.182-2.398-.52-3.507-.26-.85-1.084-1.368-1.973-1.368H19.1c-.445 0-.72.498-.523.898.591 1.2.924 2.55.924 3.977a8.958 8.958 0 0 1-1.302 4.666c-.245.403.028.959.5.959h1.053c.832 0 1.612-.453 1.918-1.227Z"}))}const ku=Me.forwardRef(wu);function Cu({title:r,titleId:e,...t},n){return Me.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},t),r?Me.createElement("title",{id:e},r):null,Me.createElement("path",{d:"M7.493 18.5c-.425 0-.82-.236-.975-.632A7.48 7.48 0 0 1 6 15.125c0-1.75.599-3.358 1.602-4.634.151-.192.373-.309.6-.397.473-.183.89-.514 1.212-.924a9.042 9.042 0 0 1 2.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 0 0 .322-1.672V2.75A.75.75 0 0 1 15 2a2.25 2.25 0 0 1 2.25 2.25c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 0 1-2.649 7.521c-.388.482-.987.729-1.605.729H14.23c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 0 0-1.423-.23h-.777ZM2.331 10.727a11.969 11.969 0 0 0-.831 4.398 12 12 0 0 0 .52 3.507C2.28 19.482 3.105 20 3.994 20H4.9c.445 0 .72-.498.523-.898a8.963 8.963 0 0 1-.924-3.977c0-1.708.476-3.305 1.302-4.666.245-.403-.028-.959-.5-.959H4.25c-.832 0-1.612.453-1.918 1.227Z"}))}const Su=Me.forwardRef(Cu),Au=g.memo(r=>{var k,O;const[e]=g.useState(r.messages),t=r.advancedOptions||{},n=t.conversationOptions||{layout:"bubbles"},[s,o]=g.useState([]),{adapter:i,threadId:a,messageId:u}=ul({...r,files:s}),{controls:l}=r,[c,d]=g.useState(new Map),p=(L,H)=>{d(I=>new Map(I.set(L,H)))},h=L=>{const{prompt:H,uid:I}=L,P=c.get(I);return y.jsxs("div",{className:"rounded-lg shadow-sm",children:[y.jsx("span",{className:"block",children:H}),y.jsx("div",{className:"mt-2",children:P&&y.jsx(fu,{files:P})})]})},m=g.memo(L=>{const[H,I]=g.useState(),[P,q]=g.useState(),M=async $=>{var K;let B;if(L.dataTransferMode==="stream"){if(!a||!u){q("streaming message doesnt have thread and messageIds");return}B={thread_id:a,message_id:u,score:$}}else{let ne=(K=L.serverResponse)==null?void 0:K[0];if(ne)B={thread_id:ne.threadId,message_id:ne.messageId,score:$};else{q("message doesnt have thread and messageIds");return}}try{const ne=await si(r),se=r.serverUrl||ri;if(!(await fetch(`${se}/threads/score`,{method:"POST",headers:ne,body:JSON.stringify(B)})).ok)throw new Error("Failed to record score");I($)}catch(ne){q(ne.toString()),console.error("Error recording score:",ne)}};return y.jsxs("div",{className:"space-y-2",children:[L.status==="complete"&&y.jsx(Ko,{children:L.content}),L.status!=="complete"&&y.jsx("div",{className:"p-2 rounded-lg shadow-md",ref:L.containerRef}),y.jsxs("div",{className:"flex items-center justify-start space-x-1",children:[y.jsxs("button",{className:"p-2 hover:bg-gray-200 rounded focus:outline-none",onClick:()=>M(1),children:[H==null&&y.jsx(xu,{className:"h-4 w-4"}),H===1&&y.jsx(Su,{className:"h-4 w-4 animate-fadeIn"})]}),y.jsxs("button",{className:"p-2 hover:bg-gray-200 rounded focus:outline-none",onClick:()=>M(-1),children:[H==null&&y.jsx(yu,{className:"h-4 w-4"}),H===-1&&y.jsx(ku,{className:"h-4 w-4 animate-fadeIn"})]})]}),P&&y.jsx("div",{className:"text-red text-xs animate-fadeIn p-2 rounded-md",children:P})]})}),v=Object.assign({},{colorScheme:"light",themeId:"langdb"},t.displayOptions),w=t.composerOptions||{placeholder:"How can i help you today ?"},C=Object.assign({},{assistant:Object.assign({},{name:"LangDB",tagline:`
              Easily build and deploy AI agents with SQL.
              Customize with our React widget on`,avatar:y.jsx(mu,{})},(k=r.personaOptions)==null?void 0:k.assistant),user:Object.assign({},{name:"User",avatar:y.jsx(Vc,{})})},(O=r.personaOptions)==null?void 0:O.user),b=g.useCallback(L=>{s&&(p(L.uid,[...s]),o([]))},[p]),x=g.useCallback(()=>{},[]),E=r.className||"";return y.jsxs("div",{className:"flex flex-col w-[100%] h-full",children:[(l==null?void 0:l.enableFiles)&&y.jsx(gu,{files:s,setFiles:o}),y.jsx("div",{className:"flex-1 w-full relative",children:y.jsx("main",{className:`items-center justify-between  ${E} h-full absolute`,style:r.style||{},children:y.jsx(Xo,{adapter:i,initialConversation:e,events:{messageSent:b,messageStreamStarted:x},messageOptions:{promptRenderer:h,responseRenderer:m},personaOptions:C,conversationOptions:n,displayOptions:v,composerOptions:w,...t})})})]})});function Xn(...r){return r.filter(Boolean).join(" ")}const Eu=r=>{const{onMinimize:e,onMaximize:t,btnClassName:n,theme:s,children:o,title:i,maximizedPanelClassName:a,maximizedPanelStyle:u,showFullScreen:l,controls:c}=r,[d,p]=g.useState(!1),[h,m]=g.useState(l||!1),v=g.useCallback(()=>{p(w=>!w)},[]);return y.jsxs("div",{className:Xn(s||"dark"),children:[d&&y.jsxs("div",{style:h?u:{},className:Xn("light:text-slate-900 dark:text-white flex flex-1 bg-white dark:bg-black flex-col absolute p-[10px] pt-[0px]",h?a||"h-full w-full bottom-0 right-0":"rounded border shadow-md h-[60vh] w-[40vw] min-h-[500px] bottom-16 right-16"),children:[y.jsxs("div",{className:"border-b py-[5px] flex justify-center items-center",style:{zIndex:"99999"},children:[y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{onClick:()=>{p(!1),e&&e()},children:y.jsx(Tu,{})}),!(c!=null&&c.hideMaximise)&&y.jsx("button",{onClick:()=>{m(w=>!w),t&&t()},children:h?y.jsx(Pu,{}):y.jsx(Iu,{})})]}),y.jsx("div",{className:"flex flex-1 justify-center",children:i})]}),y.jsx("div",{className:"flex flex-1 overflow-scroll ",children:o})]}),!d&&y.jsx("button",{className:Xn(n||"","fixed text-white bg-primary hover:bg-primary-800 bottom-5 right-5 flex w-[50px] hover:scale-110 scale-100 h-[50px] justify-center items-center p-[10px] rounded-full cursor-pointer shadow-none hover:shadow-xl transition ease-in-out"),onClick:v,children:y.jsx(yi,{})})]})},yi=()=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-6",children:y.jsx("path",{strokeLinecap:"round","stroke-linejoin":"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"})}),Tu=()=>y.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:y.jsx("path",{d:"M19 13H5v-2h14v2z"})}),Iu=()=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-6",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8.25V18a2.25 2.25 0 0 0 2.25 2.25h13.5A2.25 2.25 0 0 0 21 18V8.25m-18 0V6a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 6v2.25m-18 0h18M5.25 6h.008v.008H5.25V6ZM7.5 6h.008v.008H7.5V6Zm2.25 0h.008v.008H9.75V6Z"})}),Pu=()=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9V4.5M9 9H4.5M9 9 3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5 5.25 5.25"})});exports.AiChat=Xo;exports.AiChatUI=fr;exports.ChatIcon=yi;exports.FloatingChatWidget=Eu;exports.ImageDetail=ti;exports.Markdown=Ko;exports.MessageContentType=Vo;exports.MessageType=ei;exports.Widget=Au;exports.createAiContext=Uc;exports.createInnerMessage=ni;exports.useAiChatApi=zc;exports.useAiContext=Nc;exports.useAiTask=_c;exports.useAsBatchAdapter=$c;exports.useAsRscAdapter=Hc;exports.useAsStreamAdapter=Fc;exports.useDeepCompareEffect=qc;
//# sourceMappingURL=index.cjs.js.map
