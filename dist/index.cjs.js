"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const v=require("react");function xi(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Xn={exports:{}},At={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _r;function wi(){if(_r)return At;_r=1;var r=v,e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function i(a,u,l){var c,d={},p=null,m=null;l!==void 0&&(p=""+l),u.key!==void 0&&(p=""+u.key),u.ref!==void 0&&(m=u.ref);for(c in u)n.call(u,c)&&!o.hasOwnProperty(c)&&(d[c]=u[c]);if(a&&a.defaultProps)for(c in u=a.defaultProps,u)d[c]===void 0&&(d[c]=u[c]);return{$$typeof:e,type:a,key:p,ref:m,props:d,_owner:s.current}}return At.Fragment=t,At.jsx=i,At.jsxs=i,At}var Et={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qr;function ki(){return qr||(qr=1,process.env.NODE_ENV!=="production"&&function(){var r=v,e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen"),h=Symbol.iterator,f="@@iterator";function x(g){if(g===null||typeof g!="object")return null;var T=h&&g[h]||g[f];return typeof T=="function"?T:null}var S=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function y(g){{for(var T=arguments.length,z=new Array(T>1?T-1:0),Z=1;Z<T;Z++)z[Z-1]=arguments[Z];b("error",g,z)}}function b(g,T,z){{var Z=S.ReactDebugCurrentFrame,ue=Z.getStackAddendum();ue!==""&&(T+="%s",z=z.concat([ue]));var ge=z.map(function(se){return String(se)});ge.unshift("Warning: "+T),Function.prototype.apply.call(console[g],console,ge)}}var E=!1,w=!1,M=!1,$=!1,N=!1,P;P=Symbol.for("react.module.reference");function I(g){return!!(typeof g=="string"||typeof g=="function"||g===n||g===o||N||g===s||g===l||g===c||$||g===m||E||w||M||typeof g=="object"&&g!==null&&(g.$$typeof===p||g.$$typeof===d||g.$$typeof===i||g.$$typeof===a||g.$$typeof===u||g.$$typeof===P||g.getModuleId!==void 0))}function W(g,T,z){var Z=g.displayName;if(Z)return Z;var ue=T.displayName||T.name||"";return ue!==""?z+"("+ue+")":z}function j(g){return g.displayName||"Context"}function F(g){if(g==null)return null;if(typeof g.tag=="number"&&y("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g;switch(g){case n:return"Fragment";case t:return"Portal";case o:return"Profiler";case s:return"StrictMode";case l:return"Suspense";case c:return"SuspenseList"}if(typeof g=="object")switch(g.$$typeof){case a:var T=g;return j(T)+".Consumer";case i:var z=g;return j(z._context)+".Provider";case u:return W(g,g.render,"ForwardRef");case d:var Z=g.displayName||null;return Z!==null?Z:F(g.type)||"Memo";case p:{var ue=g,ge=ue._payload,se=ue._init;try{return F(se(ge))}catch{return null}}}return null}var D=Object.assign,V=0,me,re,ie,_,A,O,H;function U(){}U.__reactDisabledLog=!0;function Q(){{if(V===0){me=console.log,re=console.info,ie=console.warn,_=console.error,A=console.group,O=console.groupCollapsed,H=console.groupEnd;var g={configurable:!0,enumerable:!0,value:U,writable:!0};Object.defineProperties(console,{info:g,log:g,warn:g,error:g,group:g,groupCollapsed:g,groupEnd:g})}V++}}function ee(){{if(V--,V===0){var g={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:D({},g,{value:me}),info:D({},g,{value:re}),warn:D({},g,{value:ie}),error:D({},g,{value:_}),group:D({},g,{value:A}),groupCollapsed:D({},g,{value:O}),groupEnd:D({},g,{value:H})})}V<0&&y("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Y=S.ReactCurrentDispatcher,K;function G(g,T,z){{if(K===void 0)try{throw Error()}catch(ue){var Z=ue.stack.trim().match(/\n( *(at )?)/);K=Z&&Z[1]||""}return`
`+K+g}}var te=!1,J;{var xe=typeof WeakMap=="function"?WeakMap:Map;J=new xe}function L(g,T){if(!g||te)return"";{var z=J.get(g);if(z!==void 0)return z}var Z;te=!0;var ue=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var ge;ge=Y.current,Y.current=null,Q();try{if(T){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(Le){Z=Le}Reflect.construct(g,[],se)}else{try{se.call()}catch(Le){Z=Le}g.call(se.prototype)}}else{try{throw Error()}catch(Le){Z=Le}g()}}catch(Le){if(Le&&Z&&typeof Le.stack=="string"){for(var ne=Le.stack.split(`
`),Oe=Z.stack.split(`
`),Se=ne.length-1,Ee=Oe.length-1;Se>=1&&Ee>=0&&ne[Se]!==Oe[Ee];)Ee--;for(;Se>=1&&Ee>=0;Se--,Ee--)if(ne[Se]!==Oe[Ee]){if(Se!==1||Ee!==1)do if(Se--,Ee--,Ee<0||ne[Se]!==Oe[Ee]){var He=`
`+ne[Se].replace(" at new "," at ");return g.displayName&&He.includes("<anonymous>")&&(He=He.replace("<anonymous>",g.displayName)),typeof g=="function"&&J.set(g,He),He}while(Se>=1&&Ee>=0);break}}}finally{te=!1,Y.current=ge,ee(),Error.prepareStackTrace=ue}var dt=g?g.displayName||g.name:"",tt=dt?G(dt):"";return typeof g=="function"&&J.set(g,tt),tt}function Pe(g,T,z){return L(g,!1)}function Fe(g){var T=g.prototype;return!!(T&&T.isReactComponent)}function Be(g,T,z){if(g==null)return"";if(typeof g=="function")return L(g,Fe(g));if(typeof g=="string")return G(g);switch(g){case l:return G("Suspense");case c:return G("SuspenseList")}if(typeof g=="object")switch(g.$$typeof){case u:return Pe(g.render);case d:return Be(g.type,T,z);case p:{var Z=g,ue=Z._payload,ge=Z._init;try{return Be(ge(ue),T,z)}catch{}}}return""}var C=Object.prototype.hasOwnProperty,B={},X=S.ReactDebugCurrentFrame;function oe(g){if(g){var T=g._owner,z=Be(g.type,g._source,T?T.type:null);X.setExtraStackFrame(z)}else X.setExtraStackFrame(null)}function ye(g,T,z,Z,ue){{var ge=Function.call.bind(C);for(var se in g)if(ge(g,se)){var ne=void 0;try{if(typeof g[se]!="function"){var Oe=Error((Z||"React class")+": "+z+" type `"+se+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof g[se]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Oe.name="Invariant Violation",Oe}ne=g[se](T,se,Z,z,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(Se){ne=Se}ne&&!(ne instanceof Error)&&(oe(ue),y("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",Z||"React class",z,se,typeof ne),oe(null)),ne instanceof Error&&!(ne.message in B)&&(B[ne.message]=!0,oe(ue),y("Failed %s type: %s",z,ne.message),oe(null))}}}var be=Array.isArray;function ae(g){return be(g)}function Ae(g){{var T=typeof Symbol=="function"&&Symbol.toStringTag,z=T&&g[Symbol.toStringTag]||g.constructor.name||"Object";return z}}function R(g){try{return q(g),!1}catch{return!0}}function q(g){return""+g}function le(g){if(R(g))return y("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Ae(g)),q(g)}var ce=S.ReactCurrentOwner,Te={key:!0,ref:!0,__self:!0,__source:!0},Ne,Xe,et;et={};function yt(g){if(C.call(g,"ref")){var T=Object.getOwnPropertyDescriptor(g,"ref").get;if(T&&T.isReactWarning)return!1}return g.ref!==void 0}function bt(g){if(C.call(g,"key")){var T=Object.getOwnPropertyDescriptor(g,"key").get;if(T&&T.isReactWarning)return!1}return g.key!==void 0}function lt(g,T){if(typeof g.ref=="string"&&ce.current&&T&&ce.current.stateNode!==T){var z=F(ce.current.type);et[z]||(y('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',F(ce.current.type),g.ref),et[z]=!0)}}function xt(g,T){{var z=function(){Ne||(Ne=!0,y("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",T))};z.isReactWarning=!0,Object.defineProperty(g,"key",{get:z,configurable:!0})}}function wt(g,T){{var z=function(){Xe||(Xe=!0,y("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",T))};z.isReactWarning=!0,Object.defineProperty(g,"ref",{get:z,configurable:!0})}}var kt=function(g,T,z,Z,ue,ge,se){var ne={$$typeof:e,type:g,key:T,ref:z,props:se,_owner:ge};return ne._store={},Object.defineProperty(ne._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(ne,"_self",{configurable:!1,enumerable:!1,writable:!1,value:Z}),Object.defineProperty(ne,"_source",{configurable:!1,enumerable:!1,writable:!1,value:ue}),Object.freeze&&(Object.freeze(ne.props),Object.freeze(ne)),ne};function Ct(g,T,z,Z,ue){{var ge,se={},ne=null,Oe=null;z!==void 0&&(le(z),ne=""+z),bt(T)&&(le(T.key),ne=""+T.key),yt(T)&&(Oe=T.ref,lt(T,ue));for(ge in T)C.call(T,ge)&&!Te.hasOwnProperty(ge)&&(se[ge]=T[ge]);if(g&&g.defaultProps){var Se=g.defaultProps;for(ge in Se)se[ge]===void 0&&(se[ge]=Se[ge])}if(ne||Oe){var Ee=typeof g=="function"?g.displayName||g.name||"Unknown":g;ne&&xt(se,Ee),Oe&&wt(se,Ee)}return kt(g,ne,Oe,ue,Z,ce.current,se)}}var St=S.ReactCurrentOwner,Br=S.ReactDebugCurrentFrame;function ut(g){if(g){var T=g._owner,z=Be(g.type,g._source,T?T.type:null);Br.setExtraStackFrame(z)}else Br.setExtraStackFrame(null)}var Rn;Rn=!1;function In(g){return typeof g=="object"&&g!==null&&g.$$typeof===e}function Dr(){{if(St.current){var g=F(St.current.type);if(g)return`

Check the render method of \``+g+"`."}return""}}function ui(g){return""}var zr={};function di(g){{var T=Dr();if(!T){var z=typeof g=="string"?g:g.displayName||g.name;z&&(T=`

Check the top-level render call using <`+z+">.")}return T}}function Fr(g,T){{if(!g._store||g._store.validated||g.key!=null)return;g._store.validated=!0;var z=di(T);if(zr[z])return;zr[z]=!0;var Z="";g&&g._owner&&g._owner!==St.current&&(Z=" It was passed a child from "+F(g._owner.type)+"."),ut(g),y('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',z,Z),ut(null)}}function Hr(g,T){{if(typeof g!="object")return;if(ae(g))for(var z=0;z<g.length;z++){var Z=g[z];In(Z)&&Fr(Z,T)}else if(In(g))g._store&&(g._store.validated=!0);else if(g){var ue=x(g);if(typeof ue=="function"&&ue!==g.entries)for(var ge=ue.call(g),se;!(se=ge.next()).done;)In(se.value)&&Fr(se.value,T)}}}function pi(g){{var T=g.type;if(T==null||typeof T=="string")return;var z;if(typeof T=="function")z=T.propTypes;else if(typeof T=="object"&&(T.$$typeof===u||T.$$typeof===d))z=T.propTypes;else return;if(z){var Z=F(T);ye(z,g.props,"prop",Z,g)}else if(T.PropTypes!==void 0&&!Rn){Rn=!0;var ue=F(T);y("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",ue||"Unknown")}typeof T.getDefaultProps=="function"&&!T.getDefaultProps.isReactClassApproved&&y("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function mi(g){{for(var T=Object.keys(g.props),z=0;z<T.length;z++){var Z=T[z];if(Z!=="children"&&Z!=="key"){ut(g),y("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",Z),ut(null);break}}g.ref!==null&&(ut(g),y("Invalid attribute `ref` supplied to `React.Fragment`."),ut(null))}}var $r={};function Nr(g,T,z,Z,ue,ge){{var se=I(g);if(!se){var ne="";(g===void 0||typeof g=="object"&&g!==null&&Object.keys(g).length===0)&&(ne+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var Oe=ui();Oe?ne+=Oe:ne+=Dr();var Se;g===null?Se="null":ae(g)?Se="array":g!==void 0&&g.$$typeof===e?(Se="<"+(F(g.type)||"Unknown")+" />",ne=" Did you accidentally export a JSX literal instead of a component?"):Se=typeof g,y("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",Se,ne)}var Ee=Ct(g,T,z,ue,ge);if(Ee==null)return Ee;if(se){var He=T.children;if(He!==void 0)if(Z)if(ae(He)){for(var dt=0;dt<He.length;dt++)Hr(He[dt],g);Object.freeze&&Object.freeze(He)}else y("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Hr(He,g)}if(C.call(T,"key")){var tt=F(g),Le=Object.keys(T).filter(function(bi){return bi!=="key"}),On=Le.length>0?"{key: someKey, "+Le.join(": ..., ")+": ...}":"{key: someKey}";if(!$r[tt+On]){var yi=Le.length>0?"{"+Le.join(": ..., ")+": ...}":"{}";y(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,On,tt,yi,tt),$r[tt+On]=!0}}return g===n?mi(Ee):pi(Ee),Ee}}function hi(g,T,z){return Nr(g,T,z,!0)}function fi(g,T,z){return Nr(g,T,z,!1)}var gi=fi,vi=hi;Et.Fragment=n,Et.jsx=gi,Et.jsxs=vi}()),Et}process.env.NODE_ENV==="production"?Xn.exports=wi():Xn.exports=ki();var k=Xn.exports,Ci=Object.defineProperty,Qt=(r,e,t)=>((n,s,o)=>s in n?Ci(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,typeof e!="symbol"?e+"":e,t);class Je extends Error{constructor(e={}){super(e.message),Qt(this,"exceptionId"),Qt(this,"message"),Qt(this,"source"),Qt(this,"type"),this.message=e.message??"",this.source=e.source,this.type=this.constructor.name,this.exceptionId=e.exceptionId}}class nt extends Je{}class mn extends Je{}const Me=r=>{typeof r!="string"?r&&typeof r.toString=="function"?console.warn(`[nlux] ${r.toString()}`):console.warn("[nlux]"):console.warn(`[nlux] ${r}`)},Ur=[],Zn=r=>{Ur.includes(r)||(Ur.push(r),Me(r))},to=class un{static register(e){const t=e.__compId;t?un.componentDefs.get(t)===void 0&&(e.__renderer&&e.__updater?un.componentDefs.set(t,{id:t,model:e,render:e.__renderer,update:e.__updater}):Me(`Component with id "${t}" missing renderer or updater`)):Me("Component definition missing valid id")}static retrieve(e){const t=un.componentDefs.get(e);if(t)return t;Me(`Component with id "${e}" not registered`)}};to.componentDefs=new Map;let no=to;btoa("sectionsRegistered")+"";const Qe=r=>{const e=requestAnimationFrame(()=>{r()});return()=>{cancelAnimationFrame(e)}},Ht=r=>{r.replaceChildren()},_e=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const e=16*Math.random()|0;return(r=="x"?e:3&e|8).toString(16)});class $e{constructor(e,t){this.subComponentElementIds=new Map,this.subComponents=new Map,this.__context=null,this.__destroyed=!1,this.__status="unmounted",this.actionsOnDomReady=[],this.compEventGetter=i=>{if(this.destroyed)return()=>{};const a=this.rendererEventListeners.get(i);if(!a)throw new Je({source:this.constructor.name,message:`Unable to call renderer event "${i}" because no matching event listener was found. Make sure that the event listener is registered using @CompEventListener() decorator in the component model class, and use class methods instead of arrow function attributes.`});return a};const n=Object.getPrototypeOf(this).constructor.__compId;if(!n)throw new nt({source:this.constructor.name,message:"Unable to instantiate component: missing compId in implementation. Component should be annotated using @Model() to set compId before iy can be instantiated."});if(this.def=no.retrieve(n)??null,!this.def)throw new nt({source:this.constructor.name,message:`Unable to instantiate component "${n}" because it's not registered. Component should be registered using CompRegistry.register(ComponentClass) before instantiating a component.`});this.__instanceId=_e(),this.__destroyed=!1,this.__context=e,this.renderedDom=null,this.renderingRoot=null,this.props=t;const s=t?Object.entries(t):[];this.elementProps=new Map(s),this.rendererEventListeners=new Map;const o=this.constructor.__compEventListeners;o&&o.forEach((i,a)=>{i.forEach(u=>{const l=Object.getPrototypeOf(this)[u];typeof l=="function"?this.addRendererEventListener(a,l.bind(this)):Me(`Unable to set event listener "${a}" because method "${u}" cannot be found on component "${this.constructor.name} at runtime!"`)})}),this.rendererProps=Object.freeze(t)}get destroyed(){return this.__destroyed}get id(){return this.__instanceId}get rendered(){return this.renderedDom!==null}get root(){return this.throwIfDestroyed(),this.renderedDom&&this.renderingRoot?this.renderingRoot:null}get status(){return this.__status}get context(){if(!this.__context)throw new nt({source:this.constructor.name,message:"Unable to get context because it's not set"});return this.__context}destroy(){this.destroyComponent()}destroyListItemComponent(){this.destroyComponent(!0)}getProp(e){return this.throwIfDestroyed(),this.elementProps.get(e)??null}render(e,t){var i;if(!this.def)return;if(this.destroyed)return void Me(`Unable to render component "${(i=this.def)==null?void 0:i.id}" because it is already destroyed`);if(this.rendered||this.renderedDom)return void Me(`Unable to render component "${this.def.id}" because it is already rendered`);const n=document.createDocumentFragment(),s=Object.getPrototypeOf(this).constructor.__compId,o=this.executeRenderer(n);if(!o)throw new Je({source:this.constructor.name,message:`Unable to render component "${s}" because renderer returned null`});this.renderedDom=o;for(const[,a]of this.subComponents){const u=this.getSubComponentPortal(a.id);u&&this.mountSubComponentToPortal(a.id,u)}Qe(()=>{this.destroyed||(t?e.insertBefore(n,t):e.append(n),this.renderingRoot=e)})}updateSubComponent(e,t,n){this.throwIfDestroyed();const s=this.subComponents.get(e);s&&!s.destroyed&&s.setProp(t,n)}addSubComponent(e,t,n){if(this.throwIfDestroyed(),this.subComponents.has(e))throw new nt({source:this.constructor.name,message:`Unable to add sub-component "${e}" because it already exists`});if(this.subComponents.set(e,t),n&&this.subComponentElementIds.set(e,n),this.renderedDom){const s=this.getSubComponentPortal(e);s&&this.mountSubComponentToPortal(e,s)}}executeDomAction(e,...t){if(this.throwIfDestroyed(),!this.renderedDom)return void this.actionsOnDomReady.push(()=>this.executeDomAction(e,...t));if(!this.renderingRoot)throw new Je({source:this.constructor.name,message:"Unable to execute DOM action because renderingRoot is not set"});const n=this.renderedDom.actions[e];if(!n)throw new Je({source:this.constructor.name,message:`Unable to execute DOM action "${String(e)}" because it does not exist`});return Qe(()=>n(...t))}executeRenderer(e){var s;const t=(s=this.def)==null?void 0:s.render;if(!t)return null;if(this.renderingRoot)throw new Je({source:this.constructor.name,message:"Unable to render component because renderingRoot is already set"});const n=t({appendToRoot:o=>{e.append(o),this.runDomActionsQueue()},compEvent:this.compEventGetter,props:this.rendererProps,context:this.context});return n&&(this.renderingRoot=e),n}removeSubComponent(e){this.throwIfDestroyed(),Qe(()=>{const t=this.subComponents.get(e);t&&(t.renderingRoot=null,t.destroy(),this.subComponents.delete(e))})}runDomActionsQueue(){if(this.actionsOnDomReady.length>0&&this.rendered){const e=this.actionsOnDomReady;this.actionsOnDomReady=[];for(const t of e)Qe(()=>t())}}setProp(e,t){this.destroyed?Me(`Unable to set prop "${String(e)}" because component "${this.constructor.name}" is destroyed`):this.elementProps.has(e)?(this.schedulePropUpdate(e,this.elementProps.get(e),t),this.props=Object.freeze(Object.fromEntries(this.elementProps)),this.elementProps.set(e,t)):Me(`Unable to set prop "${String(e)}" because it does not exist in the component props`)}throwIfDestroyed(){if(this.__destroyed)throw new nt({source:this.constructor.name,message:"Unable to call method on destroyed component"})}addRendererEventListener(e,t){if(this.throwIfDestroyed(),this.rendererEventListeners.has(e))throw new nt({source:this.constructor.name,message:`Unable to add event listener to rendererEvents "${e}" because it already exists`});this.rendererEventListeners.set(e,t)}destroyComponent(e=!1){if(this.throwIfDestroyed(),this.subComponents.forEach(t=>{t.destroy()}),this.renderedDom){this.renderedDom.elements&&(this.renderedDom.elements=void 0),this.renderedDom.actions&&(this.renderedDom.actions=void 0),this.renderedDom.onDestroy&&this.renderedDom.onDestroy();const t=this.renderingRoot;Qe(()=>{var n;if(t)if(t instanceof DocumentFragment)for(;t.firstChild;)t.removeChild(t.firstChild);else e?(n=t.parentElement)==null||n.removeChild(t):Ht(t)}),this.renderedDom=null,this.renderingRoot=null}this.__destroyed=!0,this.__context=null,this.props=void 0,this.elementProps.clear(),this.rendererEventListeners.clear(),this.subComponents.clear()}getSubComponentPortal(e){var o;const t=this.subComponents.get(e),n=this.subComponentElementIds.get(e);if(!t||!n)return null;const s=((o=this.renderedDom)==null?void 0:o.elements)[n];return s instanceof HTMLElement?s:null}mountSubComponentToPortal(e,t){const n=this.subComponents.get(e);n==null||n.render(t)}schedulePropUpdate(e,t,n){var a;if(!this.renderedDom||!((a=this.def)!=null&&a.update))return;const s=this.renderedDom,o=this.renderingRoot,i=this.def.update;o&&Qe(()=>{i({propName:e,currentValue:t,newValue:n,dom:{root:o,elements:s.elements,actions:s.actions},updateSubComponent:this.updateSubComponent})})}}$e.__compEventListeners=null,$e.__compId=null,$e.__renderer=null,$e.__updater=null;const Ve=(r,e,t)=>n=>{n.__compId=r,n.__renderer=e,n.__updater=t},qe=r=>(e,t)=>{const n=e;if(typeof n.constructor!="function")throw new nt({source:"CallbackFor",message:"@CallbackFor can only be used on methods of a class!"});n.constructor.hasOwnProperty("__compEventListeners")&&n.constructor.__compEventListeners!==null||(n.constructor.__compEventListeners=new Map);const s=n.constructor.__compEventListeners,o=s.get(r);o?o.push(t):s.set(r,[t])};function Si(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let at={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function Yr(r){at=r}var Ai=Object.defineProperty,ro=(r,e,t)=>((n,s,o)=>s in n?Ai(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,typeof e!="symbol"?e+"":e,t);let Lt=class{constructor(e){ro(this,"options"),this.options=e||at}postprocess(e){return e}preprocess(e){return e}processAllTokens(e){return e}};ro(Lt,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));const so=/[&<>"']/,Ei=new RegExp(so.source,"g"),oo=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Ti=new RegExp(oo.source,"g"),Pi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Wr=r=>Pi[r];function De(r,e){if(e){if(so.test(r))return r.replace(Ei,Wr)}else if(oo.test(r))return r.replace(Ti,Wr);return r}const Ri=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function Ii(r){return r.replace(Ri,(e,t)=>(t=t.toLowerCase())==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):"")}const Oi=/(^|[^\[])\^/g;function he(r,e){let t=typeof r=="string"?r:r.source;e=e||"";const n={replace:(s,o)=>{let i=typeof o=="string"?o:o.source;return i=i.replace(Oi,"$1"),t=t.replace(s,i),n},getRegex:()=>new RegExp(t,e)};return n}function Qr(r){try{r=encodeURI(r).replace(/%25/g,"%")}catch{return null}return r}const jt={exec:()=>null};function Xr(r,e){const t=r.replace(/\|/g,(s,o,i)=>{let a=!1,u=o;for(;--u>=0&&i[u]==="\\";)a=!a;return a?"|":" |"}).split(/ \|/);let n=0;if(t[0].trim()||t.shift(),t.length>0&&!t[t.length-1].trim()&&t.pop(),e)if(t.length>e)t.splice(e);else for(;t.length<e;)t.push("");for(;n<t.length;n++)t[n]=t[n].trim().replace(/\\\|/g,"|");return t}function Xt(r,e,t){const n=r.length;if(n===0)return"";let s=0;for(;s<n;){const o=r.charAt(n-s-1);if(o!==e||t){if(o===e||!t)break;s++}else s++}return r.slice(0,n-s)}const _t=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,io=/(?:[*+-]|\d{1,9}[.)])/,ao=he(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,io).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),br=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,xr=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Mi=he(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",xr).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Li=he(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,io).getRegex(),Tn="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",wr=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,ji=he("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",wr).replace("tag",Tn).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Zr=he(br).replace("hr",_t).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Tn).getRegex(),kr={blockquote:he(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Zr).getRegex(),code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,def:Mi,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:_t,html:ji,lheading:ao,list:Li,newline:/^(?: *(?:\n|$))+/,paragraph:Zr,table:jt,text:/^[^\n]+/},Kr=he("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",_t).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Tn).getRegex(),Bi={...kr,table:Kr,paragraph:he(br).replace("hr",_t).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Kr).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Tn).getRegex()},Di={...kr,html:he(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",wr).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:jt,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:he(br).replace("hr",_t).replace("heading",` *#{1,6} *[^
]`).replace("lheading",ao).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},co=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,lo=/^( {2,}|\\)\n(?!\s*$)/,qt="\\p{P}\\p{S}",zi=he(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,qt).getRegex(),Fi=he(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,qt).getRegex(),Hi=he("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,qt).getRegex(),$i=he("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,qt).getRegex(),Ni=he(/\\([punct])/,"gu").replace(/punct/g,qt).getRegex(),_i=he(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),qi=he(wr).replace("(?:-->|$)","-->").getRegex(),Ui=he("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",qi).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),hn=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Yi=he(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",hn).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Gr=he(/^!?\[(label)\]\[(ref)\]/).replace("label",hn).replace("ref",xr).getRegex(),Jr=he(/^!?\[(ref)\](?:\[\])?/).replace("ref",xr).getRegex(),Cr={_backpedal:jt,anyPunctuation:Ni,autolink:_i,blockSkip:/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,br:lo,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:jt,emStrongLDelim:Fi,emStrongRDelimAst:Hi,emStrongRDelimUnd:$i,escape:co,link:Yi,nolink:Jr,punctuation:zi,reflink:Gr,reflinkSearch:he("reflink|nolink(?!\\()","g").replace("reflink",Gr).replace("nolink",Jr).getRegex(),tag:Ui,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:jt},Wi={...Cr,link:he(/^!?\[(label)\]\((.*?)\)/).replace("label",hn).getRegex(),reflink:he(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",hn).getRegex()},Kn={...Cr,escape:he(co).replace("])","~|])").getRegex(),url:he(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Qi={...Kn,br:he(lo).replace("{2,}","*").getRegex(),text:he(Kn.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Zt={normal:kr,gfm:Bi,pedantic:Di},Tt={normal:Cr,gfm:Kn,breaks:Qi,pedantic:Wi};var Xi=Object.defineProperty,Mn=(r,e,t)=>((n,s,o)=>s in n?Xi(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,typeof e!="symbol"?e+"":e,t);function Vr(r,e,t,n){const s=e.href,o=e.title?De(e.title):null,i=r[1].replace(/\\([\[\]])/g,"$1");if(r[0].charAt(0)!=="!"){n.state.inLink=!0;const a={type:"link",raw:t,href:s,title:o,text:i,tokens:n.inlineTokens(i)};return n.state.inLink=!1,a}return{type:"image",raw:t,href:s,title:o,text:De(i)}}let fn=class{constructor(e){Mn(this,"lexer"),Mn(this,"options"),Mn(this,"rules"),this.options=e||at}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let n,s;return t[2]==="@"?(n=De(t[1]),s="mailto:"+n):(n=De(t[1]),s=n),{type:"link",raw:t[0],text:n,href:s,tokens:[{type:"text",raw:n,text:n}]}}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let n=t[0].replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`);n=Xt(n.replace(/^ *>[ \t]?/gm,""),`
`);const s=this.lexer.state.top;this.lexer.state.top=!0;const o=this.lexer.blockTokens(n);return this.lexer.state.top=s,{type:"blockquote",raw:t[0],tokens:o,text:n}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const n=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Xt(n,`
`)}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(/\n/g," ");const s=/[^ ]/.test(n),o=/^ /.test(n)&&/ $/.test(n);return s&&o&&(n=n.substring(1,n.length-1)),n=De(n,!0),{type:"codespan",raw:t[0],text:n}}}def(e){const t=this.rules.block.def.exec(e);if(t){const n=t[1].toLowerCase().replace(/\s+/g," "),s=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:s,title:o}}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}emStrong(e,t,n=""){let s=this.rules.inline.emStrongLDelim.exec(e);if(s&&!(s[3]&&n.match(/[\p{L}\p{N}]/u))&&(!(s[1]||s[2])||!n||this.rules.inline.punctuation.exec(n))){const o=[...s[0]].length-1;let i,a,u=o,l=0;const c=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,t=t.slice(-1*e.length+o);(s=c.exec(t))!=null;){if(i=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!i)continue;if(a=[...i].length,s[3]||s[4]){u+=a;continue}if((s[5]||s[6])&&o%3&&!((o+a)%3)){l+=a;continue}if(u-=a,u>0)continue;a=Math.min(a,a+u+l);const d=[...s[0]][0].length,p=e.slice(0,o+s.index+d+a);if(Math.min(o,a)%2){const h=p.slice(1,-1);return{type:"em",raw:p,text:h,tokens:this.lexer.inlineTokens(h)}}const m=p.slice(2,-2);return{type:"strong",raw:p,text:m,tokens:this.lexer.inlineTokens(m)}}}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:De(t[1])}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const n=t[0],s=function(o,i){const a=o.match(/^(\s+)(?:```)/);if(a===null)return i;const u=a[1];return i.split(`
`).map(l=>{const c=l.match(/^\s+/);if(c===null)return l;const[d]=c;return d.length>=u.length?l.slice(u.length):l}).join(`
`)}(n,t[3]||"");return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:s}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(/#$/.test(n)){const s=Xt(n,"#");this.options.pedantic?n=s.trim():s&&!/ $/.test(s)||(n=s.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let n;return n=this.lexer.state.inRawBlock?t[0]:De(t[0]),{type:"text",raw:t[0],text:n}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}link(e){const t=this.rules.inline.link.exec(e);if(t){const n=t[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;const i=Xt(n.slice(0,-1),"\\");if((n.length-i.length)%2==0)return}else{const i=function(a,u){if(a.indexOf(u[1])===-1)return-1;let l=0;for(let c=0;c<a.length;c++)if(a[c]==="\\")c++;else if(a[c]===u[0])l++;else if(a[c]===u[1]&&(l--,l<0))return c;return-1}(t[2],"()");if(i>-1){const a=(t[0].indexOf("!")===0?5:4)+t[1].length+i;t[2]=t[2].substring(0,i),t[0]=t[0].substring(0,a).trim(),t[3]=""}}let s=t[2],o="";if(this.options.pedantic){const i=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s);i&&(s=i[1],o=i[3])}else o=t[3]?t[3].slice(1,-1):"";return s=s.trim(),/^</.test(s)&&(s=this.options.pedantic&&!/>$/.test(n)?s.slice(1):s.slice(1,-1)),Vr(t,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim();const s=n.length>1,o={type:"list",raw:"",ordered:s,start:s?+n.slice(0,-1):"",loose:!1,items:[]};n=s?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=s?n:"[*+-]");const i=new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`);let a="",u="",l=!1;for(;e;){let c=!1;if(!(t=i.exec(e))||this.rules.block.hr.test(e))break;a=t[0],e=e.substring(a.length);let d=t[2].split(`
`,1)[0].replace(/^\t+/,S=>" ".repeat(3*S.length)),p=e.split(`
`,1)[0],m=0;this.options.pedantic?(m=2,u=d.trimStart()):(m=t[2].search(/[^ ]/),m=m>4?1:m,u=d.slice(m),m+=t[1].length);let h=!1;if(!d&&/^ *$/.test(p)&&(a+=p+`
`,e=e.substring(p.length+1),c=!0),!c){const S=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),y=new RegExp(`^ {0,${Math.min(3,m-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),b=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:\`\`\`|~~~)`),E=new RegExp(`^ {0,${Math.min(3,m-1)}}#`);for(;e;){const w=e.split(`
`,1)[0];if(p=w,this.options.pedantic&&(p=p.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),b.test(p)||E.test(p)||S.test(p)||y.test(e))break;if(p.search(/[^ ]/)>=m||!p.trim())u+=`
`+p.slice(m);else{if(h||d.search(/[^ ]/)>=4||b.test(d)||E.test(d)||y.test(d))break;u+=`
`+p}h||p.trim()||(h=!0),a+=w+`
`,e=e.substring(w.length+1),d=p.slice(m)}}o.loose||(l?o.loose=!0:/\n *\n *$/.test(a)&&(l=!0));let f,x=null;this.options.gfm&&(x=/^\[[ xX]\] /.exec(u),x&&(f=x[0]!=="[ ] ",u=u.replace(/^\[[ xX]\] +/,""))),o.items.push({type:"list_item",raw:a,task:!!x,checked:f,loose:!1,text:u,tokens:[]}),o.raw+=a}o.items[o.items.length-1].raw=a.trimEnd(),o.items[o.items.length-1].text=u.trimEnd(),o.raw=o.raw.trimEnd();for(let c=0;c<o.items.length;c++)if(this.lexer.state.top=!1,o.items[c].tokens=this.lexer.blockTokens(o.items[c].text,[]),!o.loose){const d=o.items[c].tokens.filter(m=>m.type==="space"),p=d.length>0&&d.some(m=>/\n.*\n/.test(m.raw));o.loose=p}if(o.loose)for(let c=0;c<o.items.length;c++)o.items[c].loose=!0;return o}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){const s=t[(n[2]||n[1]).replace(/\s+/g," ").toLowerCase()];if(!s){const o=n[0].charAt(0);return{type:"text",raw:o,text:o}}return Vr(n,s,n[0],this.lexer)}}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}table(e){const t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;const n=Xr(t[1]),s=t[2].replace(/^\||\| *$/g,"").split("|"),o=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],i={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===s.length){for(const a of s)/^ *-+: *$/.test(a)?i.align.push("right"):/^ *:-+: *$/.test(a)?i.align.push("center"):/^ *:-+ *$/.test(a)?i.align.push("left"):i.align.push(null);for(const a of n)i.header.push({text:a,tokens:this.lexer.inline(a)});for(const a of o)i.rows.push(Xr(a,i.header.length).map(u=>({text:u,tokens:this.lexer.inline(u)})));return i}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}url(e){var n;let t;if(t=this.rules.inline.url.exec(e)){let s,o;if(t[2]==="@")s=De(t[0]),o="mailto:"+s;else{let i;do i=t[0],t[0]=((n=this.rules.inline._backpedal.exec(t[0]))==null?void 0:n[0])??"";while(i!==t[0]);s=De(t[0]),o=t[1]==="www."?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:s,href:o,tokens:[{type:"text",raw:s,text:s}]}}}};var Zi=Object.defineProperty,Pt=(r,e,t)=>((n,s,o)=>s in n?Zi(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,typeof e!="symbol"?e+"":e,t);let mt=class Gn{constructor(e){Pt(this,"options"),Pt(this,"state"),Pt(this,"tokens"),Pt(this,"inlineQueue"),Pt(this,"tokenizer"),this.tokens=[],this.tokens.links=Object.create(null),this.options=e||at,this.options.tokenizer=this.options.tokenizer||new fn,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:Zt.normal,inline:Tt.normal};this.options.pedantic?(t.block=Zt.pedantic,t.inline=Tt.pedantic):this.options.gfm&&(t.block=Zt.gfm,this.options.breaks?t.inline=Tt.breaks:t.inline=Tt.gfm),this.tokenizer.rules=t}static get rules(){return{block:Zt,inline:Tt}}static lex(e,t){return new Gn(t).lex(e)}static lexInline(e,t){return new Gn(t).inlineTokens(e)}blockTokens(e,t=[]){let n,s,o,i;for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,(a,u,l)=>u+"    ".repeat(l.length));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>!!(n=a.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0))))if(n=this.tokenizer.space(e))e=e.substring(n.raw.length),n.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(n);else if(n=this.tokenizer.code(e))e=e.substring(n.raw.length),s=t[t.length-1],!s||s.type!=="paragraph"&&s.type!=="text"?t.push(n):(s.raw+=`
`+n.raw,s.text+=`
`+n.text,this.inlineQueue[this.inlineQueue.length-1].src=s.text);else if(n=this.tokenizer.fences(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.heading(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.hr(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.blockquote(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.list(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.html(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.def(e))e=e.substring(n.raw.length),s=t[t.length-1],!s||s.type!=="paragraph"&&s.type!=="text"?this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title}):(s.raw+=`
`+n.raw,s.text+=`
`+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=s.text);else if(n=this.tokenizer.table(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.lheading(e))e=e.substring(n.raw.length),t.push(n);else{if(o=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const u=e.slice(1);let l;this.options.extensions.startBlock.forEach(c=>{l=c.call({lexer:this},u),typeof l=="number"&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(o=e.substring(0,a+1))}if(this.state.top&&(n=this.tokenizer.paragraph(o)))s=t[t.length-1],i&&s.type==="paragraph"?(s.raw+=`
`+n.raw,s.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):t.push(n),i=o.length!==e.length,e=e.substring(n.raw.length);else if(n=this.tokenizer.text(e))e=e.substring(n.raw.length),s=t[t.length-1],s&&s.type==="text"?(s.raw+=`
`+n.raw,s.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):t.push(n);else if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n,s,o,i,a,u,l=e;if(this.tokens.links){const c=Object.keys(this.tokens.links);if(c.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(l))!=null;)c.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.blockSkip.exec(l))!=null;)l=l.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(l))!=null;)l=l.slice(0,i.index)+"++"+l.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(a||(u=""),a=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(c=>!!(n=c.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0))))if(n=this.tokenizer.escape(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.tag(e))e=e.substring(n.raw.length),s=t[t.length-1],s&&n.type==="text"&&s.type==="text"?(s.raw+=n.raw,s.text+=n.text):t.push(n);else if(n=this.tokenizer.link(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(n.raw.length),s=t[t.length-1],s&&n.type==="text"&&s.type==="text"?(s.raw+=n.raw,s.text+=n.text):t.push(n);else if(n=this.tokenizer.emStrong(e,l,u))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.codespan(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.br(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.del(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.autolink(e))e=e.substring(n.raw.length),t.push(n);else if(this.state.inLink||!(n=this.tokenizer.url(e))){if(o=e,this.options.extensions&&this.options.extensions.startInline){let c=1/0;const d=e.slice(1);let p;this.options.extensions.startInline.forEach(m=>{p=m.call({lexer:this},d),typeof p=="number"&&p>=0&&(c=Math.min(c,p))}),c<1/0&&c>=0&&(o=e.substring(0,c+1))}if(n=this.tokenizer.inlineText(o))e=e.substring(n.raw.length),n.raw.slice(-1)!=="_"&&(u=n.raw.slice(-1)),a=!0,s=t[t.length-1],s&&s.type==="text"?(s.raw+=n.raw,s.text+=n.text):t.push(n);else if(e){const c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}throw new Error(c)}}else e=e.substring(n.raw.length),t.push(n);return t}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const n=this.inlineQueue[t];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}};var Ki=Object.defineProperty,Gi=(r,e,t)=>((n,s,o)=>s in n?Ki(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,e+"",t);let gn=class{constructor(e){Gi(this,"options"),this.options=e||at}blockquote(e){return`<blockquote>
${e}</blockquote>
`}br(){return"<br>"}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}code(e,t,n){var o;const s=(o=(t||"").match(/^\S*/))==null?void 0:o[0];return e=e.replace(/\n$/,"")+`
`,s?'<pre><code class="language-'+De(s)+'">'+(n?e:De(e,!0))+`</code></pre>
`:"<pre><code>"+(n?e:De(e,!0))+`</code></pre>
`}codespan(e){return`<code>${e}</code>`}del(e){return`<del>${e}</del>`}em(e){return`<em>${e}</em>`}heading(e,t,n){return`<h${t}>${e}</h${t}>
`}hr(){return`<hr>
`}html(e,t){return e}image(e,t,n){const s=Qr(e);if(s===null)return n;let o=`<img src="${e=s}" alt="${n}"`;return t&&(o+=` title="${t}"`),o+=">",o}link(e,t,n){const s=Qr(e);if(s===null)return n;let o='<a href="'+(e=s)+'"';return t&&(o+=' title="'+t+'"'),o+=">"+n+"</a>",o}list(e,t,n){const s=t?"ol":"ul";return"<"+s+(t&&n!==1?' start="'+n+'"':"")+`>
`+e+"</"+s+`>
`}listitem(e,t,n){return`<li>${e}</li>
`}paragraph(e){return`<p>${e}</p>
`}strong(e){return`<strong>${e}</strong>`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablecell(e,t){const n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>
`}tablerow(e){return`<tr>
${e}</tr>
`}text(e){return e}},Sr=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,n){return""+n}image(e,t,n){return""+n}br(){return""}};var Ji=Object.defineProperty,Ln=(r,e,t)=>((n,s,o)=>s in n?Ji(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,typeof e!="symbol"?e+"":e,t);let ht=class Jn{constructor(e){Ln(this,"options"),Ln(this,"renderer"),Ln(this,"textRenderer"),this.options=e||at,this.options.renderer=this.options.renderer||new gn,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Sr}static parse(e,t){return new Jn(t).parse(e)}static parseInline(e,t){return new Jn(t).parseInline(e)}parse(e,t=!0){let n="";for(let s=0;s<e.length;s++){const o=e[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]){const i=o,a=this.options.extensions.renderers[i.type].call({parser:this},i);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(i.type)){n+=a||"";continue}}switch(o.type){case"space":continue;case"hr":n+=this.renderer.hr();continue;case"heading":{const i=o;n+=this.renderer.heading(this.parseInline(i.tokens),i.depth,Ii(this.parseInline(i.tokens,this.textRenderer)));continue}case"code":{const i=o;n+=this.renderer.code(i.text,i.lang,!!i.escaped);continue}case"table":{const i=o;let a="",u="";for(let c=0;c<i.header.length;c++)u+=this.renderer.tablecell(this.parseInline(i.header[c].tokens),{header:!0,align:i.align[c]});a+=this.renderer.tablerow(u);let l="";for(let c=0;c<i.rows.length;c++){const d=i.rows[c];u="";for(let p=0;p<d.length;p++)u+=this.renderer.tablecell(this.parseInline(d[p].tokens),{header:!1,align:i.align[p]});l+=this.renderer.tablerow(u)}n+=this.renderer.table(a,l);continue}case"blockquote":{const i=o,a=this.parse(i.tokens);n+=this.renderer.blockquote(a);continue}case"list":{const i=o,a=i.ordered,u=i.start,l=i.loose;let c="";for(let d=0;d<i.items.length;d++){const p=i.items[d],m=p.checked,h=p.task;let f="";if(p.task){const x=this.renderer.checkbox(!!m);l?p.tokens.length>0&&p.tokens[0].type==="paragraph"?(p.tokens[0].text=x+" "+p.tokens[0].text,p.tokens[0].tokens&&p.tokens[0].tokens.length>0&&p.tokens[0].tokens[0].type==="text"&&(p.tokens[0].tokens[0].text=x+" "+p.tokens[0].tokens[0].text)):p.tokens.unshift({type:"text",text:x+" "}):f+=x+" "}f+=this.parse(p.tokens,l),c+=this.renderer.listitem(f,h,!!m)}n+=this.renderer.list(c,a,u);continue}case"html":{const i=o;n+=this.renderer.html(i.text,i.block);continue}case"paragraph":{const i=o;n+=this.renderer.paragraph(this.parseInline(i.tokens));continue}case"text":{let i=o,a=i.tokens?this.parseInline(i.tokens):i.text;for(;s+1<e.length&&e[s+1].type==="text";)i=e[++s],a+=`
`+(i.tokens?this.parseInline(i.tokens):i.text);n+=t?this.renderer.paragraph(a):a;continue}default:{const i='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(i),"";throw new Error(i)}}}return n}parseInline(e,t){t=t||this.renderer;let n="";for(let s=0;s<e.length;s++){const o=e[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]){const i=this.options.extensions.renderers[o.type].call({parser:this},o);if(i!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){n+=i||"";continue}}switch(o.type){case"escape":{const i=o;n+=t.text(i.text);break}case"html":{const i=o;n+=t.html(i.text);break}case"link":{const i=o;n+=t.link(i.href,i.title,this.parseInline(i.tokens,t));break}case"image":{const i=o;n+=t.image(i.href,i.title,i.text);break}case"strong":{const i=o;n+=t.strong(this.parseInline(i.tokens,t));break}case"em":{const i=o;n+=t.em(this.parseInline(i.tokens,t));break}case"codespan":{const i=o;n+=t.codespan(i.text);break}case"br":n+=t.br();break;case"del":{const i=o;n+=t.del(this.parseInline(i.tokens,t));break}case"text":{const i=o;n+=t.text(i.text);break}default:{const i='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(i),"";throw new Error(i)}}}return n}};var Bt,es,Vn,Vi=Object.defineProperty,uo=r=>{throw TypeError(r)},Ue=(r,e,t)=>((n,s,o)=>s in n?Vi(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,typeof e!="symbol"?e+"":e,t),er=(r,e,t)=>(((n,s,o)=>{s.has(n)||uo("Cannot "+o)})(r,e,"access private method"),t);Bt=new WeakSet,es=function(r,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,r){const n="<p>An error occurred:</p><pre>"+De(t.message+"",!0)+"</pre>";return e?Promise.resolve(n):n}if(e)return Promise.reject(t);throw t}},Vn=function(r,e){return(t,n)=>{const s={...n},o={...this.defaults,...s};this.defaults.async===!0&&s.async===!1&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);const i=er(this,Bt,es).call(this,!!o.silent,!!o.async);if(t==null)return i(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(t):t).then(a=>r(a,o)).then(a=>o.hooks?o.hooks.processAllTokens(a):a).then(a=>o.walkTokens?Promise.all(this.walkTokens(a,o.walkTokens)).then(()=>a):a).then(a=>e(a,o)).then(a=>o.hooks?o.hooks.postprocess(a):a).catch(i);try{o.hooks&&(t=o.hooks.preprocess(t));let a=r(t,o);o.hooks&&(a=o.hooks.processAllTokens(a)),o.walkTokens&&this.walkTokens(a,o.walkTokens);let u=e(a,o);return o.hooks&&(u=o.hooks.postprocess(u)),u}catch(a){return i(a)}}};const rt=new class{constructor(...r){var e,t,n;e=this,(t=Bt).has(e)?uo("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Ue(this,"Hooks",Lt),Ue(this,"Lexer",mt),Ue(this,"Parser",ht),Ue(this,"Renderer",gn),Ue(this,"TextRenderer",Sr),Ue(this,"Tokenizer",fn),Ue(this,"defaults",{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}),Ue(this,"options",this.setOptions),Ue(this,"parse",er(this,Bt,Vn).call(this,mt.lex,ht.parse)),Ue(this,"parseInline",er(this,Bt,Vn).call(this,mt.lexInline,ht.parseInline)),this.use(...r)}lexer(r,e){return mt.lex(r,e??this.defaults)}parser(r,e){return ht.parse(r,e??this.defaults)}setOptions(r){return this.defaults={...this.defaults,...r},this}use(...r){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return r.forEach(t=>{const n={...t};if(n.async=this.defaults.async||n.async||!1,t.extensions&&(t.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const o=e.renderers[s.name];e.renderers[s.name]=o?function(...i){let a=s.renderer.apply(this,i);return a===!1&&(a=o.apply(this,i)),a}:s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const o=e[s.level];o?o.unshift(s.tokenizer):e[s.level]=[s.tokenizer],s.start&&(s.level==="block"?e.startBlock?e.startBlock.push(s.start):e.startBlock=[s.start]:s.level==="inline"&&(e.startInline?e.startInline.push(s.start):e.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(e.childTokens[s.name]=s.childTokens)}),n.extensions=e),t.renderer){const s=this.defaults.renderer||new gn(this.defaults);for(const o in t.renderer){if(!(o in s))throw new Error(`renderer '${o}' does not exist`);if(o==="options")continue;const i=o,a=t.renderer[i],u=s[i];s[i]=(...l)=>{let c=a.apply(s,l);return c===!1&&(c=u.apply(s,l)),c||""}}n.renderer=s}if(t.tokenizer){const s=this.defaults.tokenizer||new fn(this.defaults);for(const o in t.tokenizer){if(!(o in s))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;const i=o,a=t.tokenizer[i],u=s[i];s[i]=(...l)=>{let c=a.apply(s,l);return c===!1&&(c=u.apply(s,l)),c}}n.tokenizer=s}if(t.hooks){const s=this.defaults.hooks||new Lt;for(const o in t.hooks){if(!(o in s))throw new Error(`hook '${o}' does not exist`);if(o==="options")continue;const i=o,a=t.hooks[i],u=s[i];Lt.passThroughHooks.has(o)?s[i]=l=>{if(this.defaults.async)return Promise.resolve(a.call(s,l)).then(d=>u.call(s,d));const c=a.call(s,l);return u.call(s,c)}:s[i]=(...l)=>{let c=a.apply(s,l);return c===!1&&(c=u.apply(s,l)),c}}n.hooks=s}if(t.walkTokens){const s=this.defaults.walkTokens,o=t.walkTokens;n.walkTokens=function(i){let a=[];return a.push(o.call(this,i)),s&&(a=a.concat(s.call(this,i))),a}}this.defaults={...this.defaults,...n}}),this}walkTokens(r,e){var n,s;let t=[];for(const o of r)switch(t=t.concat(e.call(this,o)),o.type){case"table":{const i=o;for(const a of i.header)t=t.concat(this.walkTokens(a.tokens,e));for(const a of i.rows)for(const u of a)t=t.concat(this.walkTokens(u.tokens,e));break}case"list":{const i=o;t=t.concat(this.walkTokens(i.items,e));break}default:{const i=o;(s=(n=this.defaults.extensions)==null?void 0:n.childTokens)!=null&&s[i.type]?this.defaults.extensions.childTokens[i.type].forEach(a=>{const u=i[a].flat(1/0);t=t.concat(this.walkTokens(u,e))}):i.tokens&&(t=t.concat(this.walkTokens(i.tokens,e)))}}return t}};function we(r,e){return rt.parse(r,e)}we.options=we.setOptions=function(r){return rt.setOptions(r),we.defaults=rt.defaults,Yr(we.defaults),we},we.getDefaults=Si,we.defaults=at,we.use=function(...r){return rt.use(...r),we.defaults=rt.defaults,Yr(we.defaults),we},we.walkTokens=function(r,e){return rt.walkTokens(r,e)},we.parseInline=rt.parseInline,we.Parser=ht,we.parser=ht.parse,we.Renderer=gn,we.TextRenderer=Sr,we.Lexer=mt,we.lexer=mt.lex,we.Tokenizer=fn,we.Hooks=Lt,we.parse=we;const po=(r,e)=>{const{showCodeBlockCopyButton:t,markdownLinkTarget:n,syntaxHighlighter:s,htmlSanitizer:o}=e||{},i=we(r,{async:!1,breaks:!0});if(typeof i!="string")throw new Error("Markdown parsing failed");const a=document.createElement("div");return a.innerHTML=o?o(i):i,a.querySelectorAll("pre").forEach(u=>{const l=document.createElement("div");l.className="code-block";const c=u.querySelector("code");if(!c){const h=u.innerHTML;return l.innerHTML=o?o(h):h,void u.replaceWith(l)}let d;for(let h=0;h<c.classList.length;h++){const f=c.classList[h];if(f.startsWith("language-")){d=f.slice(9);break}}const p=document.createElement("pre"),m="<div>"+c.innerHTML+"</div>";if(p.innerHTML=e!=null&&e.htmlSanitizer?e.htmlSanitizer(m):m,d&&(p.setAttribute("data-language",d),s)){const h="<div>"+s.createHighlighter()(c.textContent||"",d)+"</div>";p.innerHTML=o?o(h):h,p.className="highlighter-dark"}Ht(l),l.appendChild(p),u.replaceWith(l)}),t!==!1&&a.querySelectorAll(".code-block").forEach(u=>{var p;if(!u.querySelector("pre")||(p=u.previousElementSibling)!=null&&p.classList.contains("nlux-comp-copyButton"))return;const l="Copy code block to clipboard",c=document.createElement("button");c.classList.add("nlux-comp-copyButton"),c.setAttribute("aria-label",l),c.setAttribute("title",l);const d=document.createElement("span");d.classList.add("icon-copy"),c.appendChild(d),u.appendChild(c)}),n!=="self"&&a.querySelectorAll("a").forEach(u=>{u.setAttribute("target","_blank")}),a.innerHTML},ts=r=>{if(!(r instanceof HTMLButtonElement)||r.dataset.clickListenerSet==="true")return;let e=!1;const t=r.nextElementSibling;r.addEventListener("click",()=>{if(e||!t)return;const n=t.innerText;navigator.clipboard.writeText(n??""),e=!0,r.classList.add("clicked"),setTimeout(()=>{e=!1,r.classList.remove("clicked")},1e3)}),r.dataset.clickListenerSet="true"},mo=r=>{const e="nlux-comp-copyButton";r instanceof HTMLButtonElement&&r.classList.contains(e)?ts(r):r.querySelectorAll(`.${e}`).forEach(ts)},ea=(r,e)=>{let t=!1;const{onComplete:n}=e||{},s=[],o=(e!=null&&e.skipStreamingAnimation?"timeout":"animationFrame")=="timeout"?d=>setTimeout(d,0):d=>requestAnimationFrame(d),i=document.createElement("div");i.classList.add("md-in-progress"),r.append(i);const a=()=>{for(;i.firstChild;){const d=i.firstChild;d instanceof HTMLElement&&mo(d),i.before(d)}},u=!(e!=null&&e.skipStreamingAnimation)&&(e!=null&&e.streamingAnimationSpeed)&&e.streamingAnimationSpeed>=0?e.streamingAnimationSpeed:e!=null&&e.skipStreamingAnimation?0:8,l={timeSinceLastProcessing:new Date().getTime(),currentMarkdown:"",previousHtml:void 0};let c=setInterval(()=>{const d=new Date().getTime(),p=(e==null?void 0:e.waitTimeBeforeStreamCompletion)!=="never";if(s.length===0&&p){const h=typeof(e==null?void 0:e.waitTimeBeforeStreamCompletion)=="number"?e.waitTimeBeforeStreamCompletion:2e3;return void((t||d-l.timeSinceLastProcessing>h)&&(t=!0,c&&(clearInterval(c),c=void 0),a(),i.remove(),n==null?void 0:n()))}l.timeSinceLastProcessing=d;const m=s.shift();m!==void 0&&typeof m=="string"&&o(()=>{const h=l.currentMarkdown+m,f=po(h,e).trim();if(typeof f!="string")return l.currentMarkdown=l.currentMarkdown.slice(0,-m.length),void Me("Markdown parsing failed");if(l.previousHtml&&f.length>l.previousHtml.length&&f.startsWith(l.previousHtml)){a();const x=f.slice(l.previousHtml.length).trim();i.innerHTML=e!=null&&e.htmlSanitizer?e.htmlSanitizer(x):x,l.currentMarkdown=m,l.previousHtml=void 0}else i.innerHTML=e!=null&&e.htmlSanitizer?e.htmlSanitizer(f):f,l.currentMarkdown=h,l.previousHtml=f})},u);return{next:d=>{if(t)Me("Stream is already complete. No more chunks can be added");else for(const p of d)s.push(p)},complete:()=>{s.push(`
`),t=!0},cancel:()=>{c&&(clearInterval(c),c=void 0),t=!0,i.remove()},error:()=>{t=!0}}},ho=(r,e)=>{const t=document.createElement("div");if(t.classList.add("nlux-comp-avatarContainer"),r){const n=document.createElement("div");n.classList.add("nlux-comp-avatarPicture"),n.style.backgroundImage=`url("${encodeURI(r)}")`,t.append(n)}return t},Ar="nlux-comp-avatar",Er=r=>{const e=document.createElement("div");return e.classList.add(Ar),r.avatar||r.name?(r.name&&(e.title=r.name),r.avatar&&r.avatar instanceof HTMLElement?(e.append(r.avatar.cloneNode(!0)),e):(e.append(ho(r.avatar)),e)):e},Kt={received:"nlux_msg_received",sent:"nlux_msg_sent"},fo=(r,e)=>{Object.keys(Kt).forEach(t=>{r.classList.remove(Kt[t])}),Kt[e]&&r.classList.add(Kt[e])},Mt={streaming:"nlux_msg_streaming",complete:"nlux_msg_complete"},go=(r,e)=>{Object.keys(Mt).forEach(t=>{r.classList.remove(Mt[t])}),Mt[e]&&r.classList.add(Mt[e])},vo=(r,e="text",t)=>{if(e==="markdown"){const n=document.createElement("div"),s=po(r,t);n.innerHTML=t!=null&&t.htmlSanitizer?t.htmlSanitizer(s):s,mo(n);const o=document.createDocumentFragment();for(;n.firstChild;)o.appendChild(n.firstChild);return o}return document.createTextNode(r)},yo="nlux-comp-message",Gt={received:"nlux-comp-chatItem--received",sent:"nlux-comp-chatItem--sent"},bo=(r,e)=>{Object.keys(Gt).forEach(t=>{r.classList.remove(Gt[t])}),Gt[e]&&r.classList.add(Gt[e])},Jt={bubbles:"nlux-comp-chatItem--bubblesLayout",list:"nlux-comp-chatItem--listLayout"},xo=(r,e)=>{Object.keys(Jt).forEach(t=>{r.classList.remove(Jt[t])}),Jt[e]&&r.classList.add(Jt[e])},wo="nlux-comp-chatItem-participantInfo",ko="nlux-comp-chatItem-participantName",ta=r=>{const e=document.createElement("div");e.classList.add("nlux-comp-chatItem");const t={direction:r.direction,status:r.status,message:r.message,htmlSanitizer:r.htmlSanitizer};let n;if(r.avatar!==void 0){const i={name:r.name,avatar:r.avatar};n=Er(i)}const s=document.createElement("span");s.classList.add(ko),s.textContent=r.name;{const i=document.createElement("div");i.classList.add(wo),n!==void 0&&i.append(n),i.append(s),e.append(i)}bo(e,r.direction),xo(e,r.layout);const o=(i=>{const a=document.createElement("div");a.classList.add(yo);const u=i.status?i.status:"complete";return go(a,u),fo(a,i.direction),a})(t);return e.append(o),e},ns=(r,e,t)=>{if(e.name!==t.name&&typeof t.avatar=="string"){const n=t.name&&t.name.length>0?t.name[0].toUpperCase():"",s=r.querySelector("* > .nlux-comp-avatarContainer > .avtr_ltr");s==null||s.replaceChildren(n)}},Co=(r,e,t)=>{e.avatar===t.avatar&&e.name===t.name||(e.avatar!==t.avatar&&((n,s,o)=>{if(s.avatar!==o.avatar)if(typeof o.avatar=="string"&&typeof s.avatar=="string"){const i=n.querySelector("* > .nlux-comp-avatarContainer > .nlux-comp-avatarPicture");i!==null&&(i.style.backgroundImage=`url("${encodeURI(o.avatar)}")`)}else if(typeof o.avatar=="string"){const i=ho(o.avatar);n.replaceChildren(i)}else o.avatar?n.replaceChildren(o.avatar.cloneNode(!0)):Ht(n)})(r,e,t),t.name?e.name!==t.name&&(r.title=t.name,ns(r,e,t)):(r.title="",ns(r,e,t)))},na=(r,e,t)=>{if(e.message===t.message&&e.status===t.status&&e.direction===t.direction||!t||!t.hasOwnProperty("message")&&!t.hasOwnProperty("status")&&!t.hasOwnProperty("direction"))return;e.direction!==t.direction&&fo(r,t.direction);const n=t.status;if(e.status!==n)return go(r,t.status),void((s,o,i)=>{const a=i.status;if(a!=="streaming"&&a==="complete"){const u=i.message?i.message:"",l=document.createTextNode(u);s.classList.add(Mt[a]),Ht(s),s.append(l)}})(r,0,t);n==="complete"&&(e.message===t.message&&e.format===t.format||((s,o,i)=>{o.message===i.message&&o.format===i.format||(Ht(s),s.append(vo(i.message??"",i.format,{htmlSanitizer:i.htmlSanitizer})))})(r,e,t))},rs="dom/getElement";var ra=Object.defineProperty,sa=Object.getOwnPropertyDescriptor,ss=(r,e,t,n)=>{for(var s,o=n>1?void 0:n?sa(e,t):e,i=r.length-1;i>=0;i--)(s=r[i])&&(o=(n?s(e,t,o):s(o))||o);return n&&o&&ra(e,t,o),o};let dn=class extends $e{constructor(e,t){super(e,t),this.serverResponse=[],this.stringContent="",t.domProps.message!==void 0&&(this.stringContent=t.domProps.message)}addChunk(e,t){this.throwIfDestroyed(),this.executeDomAction("processStreamedChunk",e),typeof e=="string"&&(this.stringContent+=e),this.serverResponse.push(t)}commitChunks(){this.throwIfDestroyed(),this.executeDomAction("commitStreamedChunks")}getChatSegmentItem(){return this.getProp("domProps").direction==="received"?{uid:this.props.uid,participantRole:"assistant",content:this.getItemContent(),serverResponse:this.serverResponse,status:"complete",dataTransferMode:"batch",time:new Date}:{uid:this.props.uid,participantRole:"user",content:this.getItemContent(),status:"complete",time:new Date}}getItemContent(){return this.aiMessageContent??this.stringContent}updateDomProps(e){const t=this.getProp("domProps"),n={...t,...e};this.setProp("domProps",n),this.executeDomAction("updateDomProps",t,n)}updateMarkdownStreamRenderer(e,t){if(this.setProp(e,t),e==="syntaxHighlighter"){const n=t;this.executeDomAction("updateMarkdownStreamRenderer",{syntaxHighlighter:n})}if(e==="htmlSanitizer"){const n=t;this.executeDomAction("updateMarkdownStreamRenderer",{htmlSanitizer:n})}}onMarkdownStreamComplete(e){this.context.emit("messageRendered",{uid:this.props.uid})}};ss([qe("markdown-stream-complete")],dn.prototype,"onMarkdownStreamComplete",1),dn=ss([Ve("chatItem",({props:r,appendToRoot:e,compEvent:t})=>{const n=ta({...r.domProps,htmlSanitizer:r.htmlSanitizer,message:void 0}),s=((c,d)=>{const p=c.querySelector(d);if(!p)throw new mn({source:rs,message:`Could not find element with query "${d}". Make sure the query provided matches an element that exists in the root element.`});if(!(p instanceof HTMLElement))throw new mn({source:rs,message:`Element with query "${d}" is not a valid HTMLElement.`});return p})(n,".nlux-comp-message");if(!s)throw new Error("Message container not found");const o=document.createElement("div");o.classList.add("nlux-markdownStream-root");const i=document.createElement("div");if(i.classList.add("nlux-markdown-container"),i.setAttribute("nlux-message-id",r.uid),o.append(i),s.append(o),r.domProps.message){const c=vo(r.domProps.message??"","markdown",{markdownLinkTarget:r.markdownLinkTarget,syntaxHighlighter:r.syntaxHighlighter,htmlSanitizer:r.htmlSanitizer});i.append(c)}let a;e(n);let u={...r};const l=c=>((d,p)=>{const m=ea(d,{syntaxHighlighter:p==null?void 0:p.syntaxHighlighter,htmlSanitizer:p==null?void 0:p.htmlSanitizer,markdownLinkTarget:p==null?void 0:p.markdownLinkTarget,showCodeBlockCopyButton:p==null?void 0:p.showCodeBlockCopyButton,skipStreamingAnimation:p==null?void 0:p.skipStreamingAnimation,streamingAnimationSpeed:p==null?void 0:p.streamingAnimationSpeed,waitTimeBeforeStreamCompletion:p==null?void 0:p.waitTimeBeforeStreamCompletion,onComplete:p==null?void 0:p.onComplete});return{next(h){m.next(h)},complete(){m.complete()}}})(i,{syntaxHighlighter:c.syntaxHighlighter,htmlSanitizer:c.htmlSanitizer,markdownLinkTarget:c.markdownLinkTarget,showCodeBlockCopyButton:c.showCodeBlockCopyButton,skipStreamingAnimation:c.skipStreamingAnimation,streamingAnimationSpeed:c.streamingAnimationSpeed,onComplete:()=>t("markdown-stream-complete")});return{elements:{chatItemContainer:n},actions:{focus:()=>{n.focus()},processStreamedChunk:c=>{a||(a=l(u)),a.next(c)},commitStreamedChunks:()=>{a&&a.complete()},updateMarkdownStreamRenderer:c=>{u={...u,...c},l(u)},updateDomProps:(c,d)=>{((p,m,h)=>{if((m.direction!==h.direction||m.layout!==h.layout||m.status!==h.status||m.message!==h.message||m.name!==h.name||m.avatar!==h.avatar)&&h&&(h.hasOwnProperty("direction")||h.hasOwnProperty("layout")||h.hasOwnProperty("status")||h.hasOwnProperty("message")||h.hasOwnProperty("loader")||h.hasOwnProperty("name")||h.hasOwnProperty("avatar"))){if(m.direction!==h.direction&&bo(p,h.direction),m.layout!==h.layout&&xo(p,h.layout),m.direction!==h.direction||m.status!==h.status||m.message!==h.message){const f=p.querySelector(`.${yo}`);f&&na(f,{direction:m.direction,status:m.status,message:m.message,htmlSanitizer:m.htmlSanitizer},{direction:h.direction,status:h.status,message:h.message,htmlSanitizer:m.htmlSanitizer})}if(m.name!==h.name||m.avatar!==h.avatar){const f=p.querySelector(`.${Ar}`);if(!h.name&&!h.avatar)return void(f==null?void 0:f.remove());if(f)Co(f,{name:m.name,avatar:m.avatar},{name:h.name,avatar:h.avatar});else if(h.name!==void 0||h.avatar!==void 0){const x={name:h.name,avatar:h.avatar},S=Er(x),y=p.querySelector(`.${wo}`);y&&y.prepend(S)}}if(m.name!==h.name){const f=p.querySelector(`.${ko}`);f&&(f.textContent=h.name||"")}}})(n,c,d)}},onDestroy:()=>{n.remove(),a=void 0}}},({propName:r,newValue:e,dom:t})=>{var n;switch(r){case"markdownLinkTarget":case"skipStreamingAnimation":case"syntaxHighlighter":case"htmlSanitizer":case"showCodeBlockCopyButton":case"streamingAnimationSpeed":(n=t.actions)==null||n.updateMarkdownStreamRenderer({[r]:e})}})],dn);const oa=(r,e)=>{let t,n=e,s=r,o=!0;const i=((f,x)=>{let S=!1;if(typeof f!="function")throw new Je({source:"x/throttle",message:"Callback must be a function"});return(...y)=>{S||(f.apply(void 0,y),S=!0,setTimeout(function(){S=!1},x))}})((f=>{let x,S;return y=>{const b=y.target;if(!(b instanceof HTMLElement))return;const{scrollTop:E,clientHeight:w,scrollHeight:M}=b,$=M-30,N=Math.ceil(E+w)>=$,P=x===void 0||S===void 0?void 0:E>x&&S===M?"down":E<x&&S===M?"up":void 0;S=M,x=E,f({scrolledToBottom:N,scrollDirection:P})}})(({scrolledToBottom:f,scrollDirection:x})=>{o?x==="up"&&(o=!1):x==="down"&&f&&(o=!0)}),50),a=f=>{f.addEventListener("scroll",i)},u=f=>{f==null||f.removeEventListener("scroll",i)},l=f=>{(t==null?void 0:t.uid)===f&&(c==null||c.disconnect(),d==null||d.disconnect(),t=void 0,c=void 0,d=void 0)};let c,d;const p=()=>{s==null||s.scrollTo({top:5e4,behavior:"instant"})},m=()=>{s&&n&&o&&p()},h=()=>{m()};return a(s),{updateConversationContainer:f=>{u(s),a(f),s=f},updateProps:({autoScroll:f})=>{n=f},handleNewChatSegmentAdded:(f,x)=>{t&&(c==null||c.disconnect(),d==null||d.disconnect()),t={uid:f,container:x},c=new ResizeObserver(m),c.observe(x),d=new MutationObserver(h),d.observe(x,{childList:!0,subtree:!0,characterData:!0}),n&&p()},handleChatSegmentRemoved:f=>l(f),handleChatSegmentComplete:f=>l(f),destroy:()=>{t&&(l(t.uid),t=void 0),u(s),s=void 0}}},ft=r=>{var n;const e=typeof r=="function"?r.__compId:void 0;if(!e)throw new Error("Invalid compClass! Component should be registered before using");const t=(n=no.retrieve(e))==null?void 0:n.model;if(!t||typeof t!="function")throw new Error(`Component "${e}" is not registered`);return{withContext:s=>({create:()=>new t(s,{}),withProps:o=>({create:()=>new t(s,o)})})}},ia=r=>{const e=["adapter","events"],t=Object.keys(r).filter(s=>!e.includes(s)),n={};for(let s=0;s<t.length;s++){const o=t[s];n[o]=r[o]}return n},So=()=>{const r=document.createElement("div");r.classList.add("nlux-comp-messageLoader");const e=document.createElement("span");e.classList.add("spinning-loader");const t=document.createElement("div");return t.classList.add("nlux-comp-loaderContainer"),t.appendChild(e),r.appendChild(t),r},os=r=>{const e="nlux-chatSegment";return r==="complete"?`${e} nlux-chatSegment--complete`:r==="error"?`${e} nlux-chatSegment--error`:`${e} nlux-chatSegment--active`},Vt=(r,e)=>{var t,n;return r==="assistant"?((t=e==null?void 0:e.assistant)==null?void 0:t.name)??"Assistant":r==="user"?((n=e==null?void 0:e.user)==null?void 0:n.name)??"User":""},aa="bubbles";var ca=Object.defineProperty,la=Object.getOwnPropertyDescriptor,en=(r,e,t,n)=>{for(var s,o=n>1?void 0:n?la(e,t):e,i=r.length-1;i>=0;i--)(s=r[i])&&(o=(n?s(e,t,o):s(o))||o);return n&&o&&ca(e,t,o),o};let pt=class extends $e{constructor(e,t){super(e,t),this.chatItemCompIdsByIndex=[],this.chatItemComponentsById=new Map}addChatItem(e){var s,o;if(this.throwIfDestroyed(),this.chatItemComponentsById.has(e.uid))throw new Error(`CompChatSegment: chat item with id "${e.uid}" already exists`);const t=((i,a,u,l)=>{const c=a??aa;if(i.participantRole==="assistant"){const p=i.status==="complete"?"complete":"streaming";return i.dataTransferMode==="stream"?{status:p,layout:c,direction:"received",name:Vt("assistant",{assistant:l}),avatar:l==null?void 0:l.avatar}:i.status==="complete"?{status:p,layout:c,direction:"received",name:Vt("assistant",{assistant:l}),avatar:l==null?void 0:l.avatar,message:(d=i.content,typeof d=="string"?d:typeof d=="object"?`${d}`:d==null?"":typeof d.toString=="function"?d.toString():JSON.stringify(d))}:{status:p,layout:c,direction:"received",name:Vt("assistant",{assistant:l}),avatar:l==null?void 0:l.avatar}}var d;return{status:"complete",layout:c,direction:"sent",message:i.content,name:Vt("user",{user:u}),avatar:u==null?void 0:u.avatar}})(e,this.getProp("conversationLayout"),this.getProp("userPersona"),this.getProp("assistantPersona"));if(!t)throw new Error(`CompChatSegment: chat item with id "${e.uid}" has invalid props`);const n=ft(dn).withContext(this.context).withProps({uid:e.uid,domProps:t,markdownLinkTarget:this.getProp("markdownLinkTarget"),showCodeBlockCopyButton:this.getProp("showCodeBlockCopyButton"),skipStreamingAnimation:this.getProp("skipStreamingAnimation"),syntaxHighlighter:this.getProp("syntaxHighlighter"),htmlSanitizer:this.getProp("htmlSanitizer"),streamingAnimationSpeed:this.getProp("streamingAnimationSpeed")}).create();this.chatItemComponentsById.set(e.uid,n),this.chatItemCompIdsByIndex.push(e.uid),this.rendered&&((o=(s=this.renderedDom)==null?void 0:s.elements)!=null&&o.chatSegmentContainer?n.render(this.renderedDom.elements.chatSegmentContainer,this.renderedDom.elements.loaderContainer):Zn("CompChatSegment: chatSegmentContainer is not available"))}addChunk(e,t,n){if(this.destroyed)return;const s=this.chatItemComponentsById.get(e);if(!s)throw new Error(`CompChatSegment: chat item with id "${e}" not found`);s.addChunk(t,n)}complete(){this.throwIfDestroyed(),this.chatItemComponentsById.forEach(e=>e.commitChunks()),this.setProp("status","complete")}destroy(){this.chatItemComponentsById.forEach(e=>e.destroy()),this.chatItemComponentsById.clear(),this.chatItemCompIdsByIndex=[],super.destroy()}getChatItems(){return this.chatItemCompIdsByIndex.map(e=>this.chatItemComponentsById.get(e)).filter(e=>!!e)}setAssistantPersona(e){this.setProp("assistantPersona",e);const t={name:e==null?void 0:e.name,avatar:e==null?void 0:e.avatar};this.chatItemComponentsById.forEach(n=>{n.getChatSegmentItem().participantRole==="assistant"&&n.updateDomProps(t)})}setLayout(e){this.setProp("conversationLayout",e),this.chatItemComponentsById.forEach(t=>{t.updateDomProps({layout:e})})}setUserPersona(e){this.setProp("userPersona",e);const t={name:e==null?void 0:e.name,avatar:e==null?void 0:e.avatar};this.chatItemComponentsById.forEach(n=>{n.getChatSegmentItem().participantRole==="user"&&n.updateDomProps(t)})}updateMarkdownStreamRenderer(e,t){this.setProp(e,t)}onLoaderShown(e){var t;(t=this.renderedDom)!=null&&t.elements&&(this.renderedDom.elements.loaderContainer=e)}setProp(e,t){super.setProp(e,t),e!=="markdownLinkTarget"&&e!=="syntaxHighlighter"&&e!=="htmlSanitizer"&&e!=="skipStreamingAnimation"&&e!=="streamingAnimationSpeed"||this.chatItemComponentsById.forEach(n=>{n.updateMarkdownStreamRenderer(e,t)})}onChatSegmentReady(){Qe(()=>{var t,n,s,o;if(!((n=(t=this.renderedDom)==null?void 0:t.elements)!=null&&n.chatSegmentContainer))return;const e=(o=(s=this.renderedDom)==null?void 0:s.elements)==null?void 0:o.chatSegmentContainer;this.chatItemComponentsById.forEach(i=>{i.rendered||i.render(e)})})}onLoaderHidden(){var e;(e=this.renderedDom)!=null&&e.elements&&(this.renderedDom.elements.loaderContainer=void 0)}};en([qe("loader-shown")],pt.prototype,"onLoaderShown",1),en([qe("chat-segment-ready")],pt.prototype,"onChatSegmentReady",1),en([qe("loader-hidden")],pt.prototype,"onLoaderHidden",1),pt=en([Ve("chatSegment",({props:r,compEvent:e,appendToRoot:t})=>{let n;const s=document.createElement("div");s.className=os(r.status);const o=()=>{if(!n){n=document.createElement("div"),n.className="nlux-chatSegment-loader-container";const i=So();n.appendChild(i),s.appendChild(n),e("loader-shown")(n)}};return r.status==="active"&&o(),t(s),e("chat-segment-ready")(),{elements:{chatSegmentContainer:s,loaderContainer:n},actions:{showLoader:o,hideLoader:()=>{n&&(n.remove(),n=void 0,e("loader-hidden")())}},onDestroy:()=>{s.remove()}}},({propName:r,newValue:e,dom:t})=>{var n,s,o;if(r==="status"){const i=(n=t.elements)==null?void 0:n.chatSegmentContainer;if(!i)return;const a=e;i.className=os(a),a==="active"?(s=t.actions)==null||s.showLoader():(o=t.actions)==null||o.hideLoader()}})],pt);let tr=class extends $e{constructor(e,t){super(e,t),this.chatSegmentCompIdsByIndex=[],this.chatSegmentComponentsById=new Map,t.messages&&t.messages.length>0&&this.addChatSegment("complete",t.messages)}addChatItem(e,t){const n=this.chatSegmentComponentsById.get(e);if(!n)throw new Error(`CompConversation: chat segment with id "${e}" not found`);n.destroyed?Zn(`CompConversation: chat segment with id "${e}" is destroyed and cannot be used`):n.addChatItem(t)}addChatSegment(e="active",t){this.throwIfDestroyed();const n=_e(),s=ft(pt).withContext(this.context).withProps({uid:n,status:e,conversationLayout:this.getProp("conversationLayout"),userPersona:this.getProp("userPersona"),assistantPersona:this.getProp("assistantPersona"),markdownLinkTarget:this.getProp("markdownLinkTarget"),showCodeBlockCopyButton:this.getProp("showCodeBlockCopyButton"),skipStreamingAnimation:this.getProp("skipStreamingAnimation"),syntaxHighlighter:this.getProp("syntaxHighlighter"),htmlSanitizer:this.getProp("htmlSanitizer"),streamingAnimationSpeed:this.getProp("streamingAnimationSpeed")}).create();if(t)for(const i of t)i.role==="assistant"?s.addChatItem({uid:_e(),participantRole:"assistant",time:new Date,dataTransferMode:"batch",status:"complete",content:i.message,serverResponse:i.serverResponse,contentType:"text"}):i.role==="user"&&s.addChatItem({uid:_e(),participantRole:"user",time:new Date,status:"complete",content:i.message,contentType:"text"});this.chatSegmentComponentsById.set(n,s),this.chatSegmentCompIdsByIndex.push(n);const o=s.id;return this.addSubComponent(o,s,"segmentsContainer"),this.notifyAboutSegmentCountChange(this.chatSegmentCompIdsByIndex.length),n}addChunk(e,t,n,s){const o=this.chatSegmentComponentsById.get(e);if(!o)throw new Error(`CompConversation: chat segment with id "${e}" not found`);o.addChunk(t,n,s)}completeChatSegment(e){const t=this.chatSegmentComponentsById.get(e);if(!t)throw new Error(`CompConversation: chat segment with id "${e}" not found`);t.destroyed||t.complete()}getChatSegmentContainer(e){const t=this.chatSegmentComponentsById.get(e);if((t==null?void 0:t.root)instanceof HTMLElement)return t.root}getConversationContentForAdapter(e="max"){if(typeof e=="number"&&e<0)return void Zn(`Invalid value provided for 'historyPayloadSize' : "${e}"! Value must be a positive integer or 'max'.`);if(e===0)return;const t=(n=>{const s=[];return n.forEach(o=>{o.items.forEach(i=>{if(i.status==="complete"){if(i.participantRole==="assistant")s.push({role:"assistant",message:i.content});else if(i.participantRole==="user")return s.push({role:"user",message:i.content})}})}),s})(this.chatSegmentCompIdsByIndex.map(n=>this.chatSegmentComponentsById.get(n)).filter(n=>n!==void 0).map(n=>({uid:n.id,status:"complete",items:n.getChatItems().map(s=>s.getChatSegmentItem())})));return e==="max"?t:t.slice(-e)}removeChatSegment(e){const t=this.chatSegmentComponentsById.get(e);if(!t)return;const n=t.id;this.subComponents.has(n)&&this.removeSubComponent(n),this.chatSegmentComponentsById.delete(t.id);const s=this.chatSegmentCompIdsByIndex.indexOf(e);s>=0&&this.chatSegmentCompIdsByIndex.splice(s,1),this.notifyAboutSegmentCountChange(this.chatSegmentCompIdsByIndex.length)}setAssistantPersona(e){this.setProp("assistantPersona",e),this.chatSegmentComponentsById.forEach(t=>{t.setAssistantPersona(e)})}setConversationLayout(e){this.setProp("conversationLayout",e),this.chatSegmentComponentsById.forEach(t=>{t.setLayout(e)})}setUserPersona(e){this.setProp("userPersona",e),this.chatSegmentComponentsById.forEach(t=>{t.setUserPersona(e)})}updateMarkdownStreamRenderer(e,t){this.setProp(e,t)}setProp(e,t){if(super.setProp(e,t),e==="markdownLinkTarget"||e==="syntaxHighlighter"||e==="htmlSanitizer"||e==="skipStreamingAnimation"||e==="streamingAnimationSpeed"||e==="showCodeBlockCopyButton"){const n=e,s=t;this.chatSegmentComponentsById.forEach(o=>{o.updateMarkdownStreamRenderer(n,s)})}}notifyAboutSegmentCountChange(e){const t=this.getProp("onSegmentCountChange");t&&t(e)}};tr=((r,e,t,n)=>{for(var s,o=e,i=r.length-1;i>=0;i--)(s=r[i])&&(o=s(o)||o);return o})([Ve("conversation",({appendToRoot:r})=>{const e=document.createElement("div");return e.classList.add("nlux-chatSegments-container"),r(e),{elements:{segmentsContainer:e},actions:{}}},()=>{})],tr);const jn={typing:"nlux-composer--typing","submitting-prompt":"nlux-composer--submitting","submitting-conversation-starter":"nlux-composer--submitting",waiting:"nlux-composer--waiting"},Ao=(r,e)=>{Object.keys(jn).forEach(t=>{r.classList.remove(jn[t])}),r.classList.add(jn[e])},ua=r=>{const e=document.createElement("div");e.classList.add("nlux-comp-composer");const t=document.createElement("textarea");t.placeholder=r.placeholder??"",t.value=r.message??"",r.autoFocus&&(t.autofocus=!0);const n=document.createElement("button");return n.append((()=>{const s=document.createElement("div");s.classList.add("nlux-comp-sendIcon");const o=document.createElement("div");return o.classList.add("nlux-comp-sendIcon-container"),s.appendChild(o),s})()),n.append(So()),e.append(t),e.append(n),Ao(e,r.status),r.status!=="submitting-conversation-starter"&&r.status!=="submitting-prompt"||(t.disabled=!0,n.disabled=!0),r.status==="waiting"&&(n.disabled=!0),r.status==="typing"&&(n.disabled=r.disableSubmitButton??t.value===""),e},vn=(r,e)=>{let t=!1;const n=e?r.querySelector(e):r,s=n instanceof HTMLElement?n:void 0;if(!s)throw new mn({source:"dom/listenTo",message:`Could not find element with query "${e}". Make sure the query provided matches an element that exists in the root element.`});const o=new Map,i=new Map,a=()=>{s&&(o.forEach((l,c)=>{s.removeEventListener(c,l)}),o.clear(),i.clear())},u={on:(l,c)=>{if(!c||!s)return u;if(!o.has(l)){const d=p=>{var m;(m=i.get(l))==null||m.forEach(h=>h(p))};o.set(l,d),s.addEventListener(l,d)}return i.has(l)||i.set(l,new Set),i.get(l).add(c),u},get:()=>{if(t)throw new Error("listenTo().get() can only be used once!");return t=!0,[s,a]}};return u};var da=Object.defineProperty,pa=Object.getOwnPropertyDescriptor,Rt=(r,e,t,n)=>{for(var s,o=n>1?void 0:n?pa(e,t):e,i=r.length-1;i>=0;i--)(s=r[i])&&(o=(n?s(e,t,o):s(o))||o);return n&&o&&da(e,t,o),o};let st=class extends $e{constructor(e,{props:t,eventListeners:n}){super(e,t),this.userEventListeners=n}focusTextInput(){this.executeDomAction("focusTextInput")}handleCommandEnterKeyPressed(e){var n;((n=this.getProp("domCompProps"))==null?void 0:n.submitShortcut)==="CommandEnter"&&(this.handleSendButtonClick(),e==null||e.preventDefault())}handleEnterKeyPressed(e){var n;const t=(n=this.getProp("domCompProps"))==null?void 0:n.submitShortcut;t&&(t!=="Enter"||e!=null&&e.isComposing)||(this.handleSendButtonClick(),e==null||e.preventDefault())}handleSendButtonClick(){var s;const e=this.getProp("domCompProps");if(e!=null&&e.disableSubmitButton||!(e==null?void 0:e.message))return;const n=(s=this.userEventListeners)==null?void 0:s.onSubmit;n&&n()}handleTextChange(e){var s;const t=(s=this.userEventListeners)==null?void 0:s.onTextUpdated;t&&t(e);const n=this.getProp("domCompProps");this.setDomProps({...n,message:e})}handleTextInputUpdated(e){const t=e.target;t instanceof HTMLTextAreaElement&&this.handleTextChange(t.value)}setDomProps(e){this.setProp("domCompProps",e)}};Rt([qe("command-enter-key-pressed")],st.prototype,"handleCommandEnterKeyPressed",1),Rt([qe("enter-key-pressed")],st.prototype,"handleEnterKeyPressed",1),Rt([qe("send-message-clicked")],st.prototype,"handleSendButtonClick",1),Rt([qe("text-updated")],st.prototype,"handleTextInputUpdated",1),st=Rt([Ve("composer",({appendToRoot:r,props:e,compEvent:t})=>{const n=ua(e.domCompProps);r(n);const[s,o]=vn(n,":scope > textarea").on("input",t("text-updated")).on("keydown",c=>{const d=c.key==="Enter"&&!c.isComposing,p=c.altKey||c.ctrlKey||c.metaKey||c.shiftKey;if(d&&!p)return void t("enter-key-pressed")(c);const m=c.getModifierState("Meta")&&c.key==="Enter",h=c.getModifierState("Control")&&c.key==="Enter";(m||h)&&t("command-enter-key-pressed")(c)}).get(),[i,a]=vn(n,":scope > button").on("click",t("send-message-clicked")).get();if(!(i instanceof HTMLButtonElement))throw new Error("Expected a button element");if(!(s instanceof HTMLTextAreaElement))throw new mn({source:(u="composer",l="render",`#${u}/${l}`),message:"Expected a textarea element"});var u,l;return{elements:{root:n,textInput:s,sendButton:i},actions:{focusTextInput:()=>Qe(()=>{s.focus(),s.setSelectionRange(s.value.length,s.value.length)})},onDestroy:()=>{o(),a()}}},({propName:r,currentValue:e,newValue:t,dom:n})=>{var s;r==="domCompProps"&&((s=n.elements)!=null&&s.root)&&((o,i,a)=>{if(i.status===a.status&&i.message===a.message&&i.placeholder===a.placeholder&&i.autoFocus===a.autoFocus&&i.disableSubmitButton===a.disableSubmitButton)return;if(i.status!==a.status)return Ao(o,a.status),void((l,c,d)=>{if(c.status===d.status)return;const p=l.querySelector("* > textarea");d.status!=="typing"&&d.status!=="waiting"||!p.disabled?d.status!=="submitting-prompt"&&d.status!=="submitting-conversation-starter"||p.disabled||(p.disabled=!0):p.disabled=!1;const m=l.querySelector("* > button");if(d.status==="typing"){const h=(c.disableSubmitButton!==d.disableSubmitButton?d.disableSubmitButton:c.disableSubmitButton)??p.value==="";m.disabled!==h&&(m.disabled=h)}else d.status!=="waiting"&&d.status!=="submitting-prompt"&&d.status!=="submitting-conversation-starter"||m.disabled||(m.disabled=!0);c.placeholder!==d.placeholder&&(p.placeholder=d.placeholder??""),c.message!==d.message&&(p.value=d.message??""),c.autoFocus!==d.autoFocus&&(p.autofocus=d.autoFocus??!1)})(o,i,a);const u=o.querySelector("* > textarea");if(i.placeholder!==a.placeholder&&(u.placeholder=a.placeholder??""),i.autoFocus!==a.autoFocus&&(u.autofocus=a.autoFocus??!1),i.message!==a.message&&(u.value=a.message??""),i.status==="typing"){const l=o.querySelector("* > button"),c=(i.disableSubmitButton!==a.disableSubmitButton?a.disableSubmitButton:i.disableSubmitButton)??u.value==="";l.disabled!==c&&(l.disabled=c)}})(n.elements.root,e,t)})],st);const nr=r=>{if(typeof r!="object"||r===null)return!1;const e=r;return(typeof e.streamText=="function"||typeof e.batchText=="function")&&["stream","batch"].includes(e.dataTransferMode)&&typeof e.id=="string"&&typeof e.info=="object"&&e.info!==null&&typeof e.preProcessAiBatchedMessage=="function"&&typeof e.preProcessAiStreamedChunk=="function"},Re=(r,e=1)=>{setTimeout(()=>{r()},e)},ma=(r,e,t,n,s,o,i,a,u)=>new Promise(l=>{const c=_e(),d=[],p=[];let m=!1,h=!1,f=!1;const x=nr(t),S={next:y=>{if(h||f)return;let b,E;if(x){const w=y,M=t.preProcessAiStreamedChunk(w,n);M!=null&&(b=M,E=w,d.push(b),p.push(E))}else b=y,d.push(b);b!=null?(m||m||(m=!0,Re(()=>{s.forEach(w=>{w({uid:c,status:"streaming",time:new Date,participantRole:"assistant",dataTransferMode:"stream"})})})),Re(()=>{i.forEach(w=>{w({chunk:b,messageId:c,serverResponse:E})})})):Me("Adapter returned an undefined or null value from streamText. This chunk will be ignored.")},complete:()=>{h||f||(f=!0,Re(()=>{const y={uid:c,status:"complete",content:d,contentType:"text",serverResponse:void 0,time:new Date,participantRole:"assistant",dataTransferMode:"stream"};o.forEach(b=>{b(y)}),l()}),Re(()=>{const y={uid:r,status:"complete",items:[e,{uid:c,status:"complete",contentType:"text",content:d,serverResponse:p,time:new Date,participantRole:"assistant",dataTransferMode:"stream"}]};a.forEach(b=>{b(y)})}))},error:y=>{h||f||(h=!0,Re(()=>{u.forEach(b=>{b("failed-to-stream-content",y)}),l()}))}};t.streamText(e.content,S,n)}),ha=(r,e,t)=>{if(!r)return(()=>{const y=new Set,b=_e(),E={uid:b,status:"complete",items:[]};return Re(()=>{y.forEach(w=>{w(E)}),y.clear()}),{segment:E,observable:{on:(w,M)=>{w==="complete"&&y.add(M)},removeListener:(w,M)=>{y.delete(M)},destroy:()=>{y.clear()},get segmentId(){return b}},dataTransferMode:"batch"}})();const n=e;if(n.streamText===void 0&&n.batchText===void 0&&n.streamServerComponent===void 0)return(y=>{const b=new Set,E=_e(),w={uid:E,status:"error",items:[]};return Re(()=>{b.forEach(M=>M(y)),b.clear()}),{segment:w,dataTransferMode:"stream",observable:{on:(M,$)=>{M==="error"&&b.add($)},removeListener:(M,$)=>{b.delete($)},destroy:()=>{b.clear()},get segmentId(){return E}}}})("no-data-transfer-mode-supported");const s=_e(),o=(y=>({uid:_e(),time:new Date,status:"complete",participantRole:"user",content:y,contentType:"text"}))(r);let i,a,u,l,c,d,p=new Set,m=new Set,h=new Set;Re(()=>{p!=null&&p.size&&(p.forEach(y=>{y(o)}),p.clear(),p=void 0)});const f=(y=>{const b=[],E=y,w=y;(E==null?void 0:E.streamText)===void 0&&(w==null?void 0:w.streamServerComponent)===void 0||b.push("stream"),(E==null?void 0:E.batchText)!==void 0&&b.push("batch");const M=nr(y)?y:void 0,$=(M==null?void 0:M.dataTransferMode)??void 0,N=b.length===1?b[0]:"stream";return $??N})(e);(y=>"streamServerComponent"in y?"server-component":"text")(e)==="server-component"?(u=new Set,a=new Set,((y,b,E,w,M,$,N,P)=>new Promise((I,W)=>{try{const j=b.content,F=_e(),D="assistant",V="streaming",me=new Date,re="stream";let ie,_;const A=()=>{Re(()=>{$.forEach(U=>{ie&&_&&U({...ie,content:_,status:"complete"})})},20);const H={uid:y,status:"complete",items:[b,ie]};Re(()=>{N.forEach(U=>{U(H)}),I()},20)},O=()=>{P.forEach(H=>{H("failed-to-stream-server-component",new Error("Failed to load content"))})};_=E.streamServerComponent(j,w,{onServerComponentReceived:A,onError:O}),ie={uid:F,content:_,contentType:"server-component",participantRole:D,status:V,time:me,dataTransferMode:re},Re(()=>{M.forEach(H=>{H(ie)})},10)}catch(j){Me(j);const F=j instanceof Error?j:typeof j=="string"?new Error(j):new Error("Unknown error");Re(()=>{P.forEach(D=>D("failed-to-load-content",F))})}}))(s,o,e,t,a,u,m,h).finally(()=>{Re(()=>S())})):f==="batch"?(i=new Set,(async(y,b,E,w,M,$,N)=>{try{const P=b.content,I=nr(E)?E:void 0,W=I!==void 0,j=_e(),F="assistant",D="complete",V=new Date,me="batch";let re;if(W){const A=await I.batchText(P,w),O=I.preProcessAiBatchedMessage(A,w);O!=null&&(re={uid:j,content:O,contentType:"text",serverResponse:A,participantRole:F,status:D,time:V,dataTransferMode:me})}else re={uid:j,content:await E.batchText(P,w),contentType:"text",serverResponse:void 0,participantRole:F,status:D,time:V,dataTransferMode:me};if(!re)throw new Error("Response from adapter was undefined or cannot be processed");const ie=re;Re(()=>{M.forEach(A=>{A(ie)})});const _={uid:y,status:"complete",items:[b,re]};Re(()=>{$.forEach(A=>{A(_)})})}catch(P){Me(P);const I=P instanceof Error?P:typeof P=="string"?new Error(P):new Error("Unknown error");Re(()=>{N.forEach(W=>W("failed-to-load-content",I))})}})(s,o,e,t,i,m,h).finally(()=>{Re(()=>S())})):(l=new Set,c=new Set,d=new Set,ma(s,o,e,t,l,c,d,m,h).finally(()=>{Re(()=>S())}));const S=()=>{p==null||p.clear(),p=void 0,i==null||i.clear(),i=void 0,a==null||a.clear(),a=void 0,u==null||u.clear(),u=void 0,l==null||l.clear(),l=void 0,c==null||c.clear(),c=void 0,d==null||d.clear(),d=void 0,m==null||m.clear(),m=void 0,h==null||h.clear(),h=void 0};return{segment:{status:"active",uid:s,items:[]},dataTransferMode:f,observable:{get segmentId(){return s},on:(y,b)=>{y==="userMessageReceived"&&p?p.add(b):y==="aiMessageReceived"&&i?i.add(b):y==="aiServerComponentStreamStarted"&&a?a.add(b):y==="aiServerComponentStreamed"&&u?u.add(b):y==="aiMessageStreamStarted"&&l?l.add(b):y==="aiMessageStreamed"&&c?c.add(b):y==="aiChunkReceived"&&d?d.add(b):y==="complete"&&m?m.add(b):y==="error"&&h&&h.add(b)},removeListener:(y,b)=>{y!=="userMessageReceived"?y!=="aiMessageReceived"?y!=="aiMessageStreamStarted"?y!=="aiMessageStreamed"?y!=="aiChunkReceived"?y!=="complete"?y!=="error"||(h==null||h.delete(b)):m==null||m.delete(b):d==null||d.delete(b):c==null||c.delete(b):l==null||l.delete(b):i==null||i.delete(b):p==null||p.delete(b)},destroy:()=>S()}}},fa={"data-transfer-mode-not-supported":"Requested data transfer mode is not supported","no-data-transfer-mode-supported":"Adapter does not support any valid data transfer modes","connection-error":"Connection error","invalid-credentials":"Invalid credentials","invalid-api-key":"Invalid API key","http-server-side-error":"HTTP server side error","http-client-side-error":"HTTP client side error","failed-to-load-content":"Failed to load content","failed-to-stream-content":"Failed to stream content","failed-to-stream-server-component":"Failed to stream server component","failed-to-render-content":"Failed to display content"},rr=(r,e)=>r!==void 0&&r.length>0||e!==void 0&&e>0?"active":"starting",is="nlux-comp-welcomeMessage-text",Eo=(r,e)=>{const t=r.querySelector(`.${is}`);if(e!==""&&e!==void 0)if(t)t.textContent=e;else{const n=document.createElement("div");n.classList.add(is),n.textContent=e,r.appendChild(n)}else t==null||t.remove()},To="nlux-comp-welcomeMessage-personaName",sr=r=>{const e=document.createElement("div");e.classList.add("nlux-comp-welcomeMessage");const t=Er({name:r.name,avatar:r.avatar});e.append(t);const n=document.createElement("div"),s=document.createTextNode(r.name);return n.append(s),n.classList.add(To),e.append(n),Eo(e,r.message),e},as=()=>sr({name:"",avatar:"data:image/png;base64,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"});var ga=Object.defineProperty,va=Object.getOwnPropertyDescriptor,cs=(r,e,t,n)=>{for(var s,o=n>1?void 0:n?va(e,t):e,i=r.length-1;i>=0;i--)(s=r[i])&&(o=(n?s(e,t,o):s(o))||o);return n&&o&&ga(e,t,o),o};let pn=class extends $e{constructor(r,e){super(r,e),this.updateConversationStarters=t=>{}}conversationStarterClicked(r){this.getProp("onConversationStarterSelected")(r)}};cs([qe("conversation-starter-selected")],pn.prototype,"conversationStarterClicked",1),pn=cs([Ve("conversationStarters",({appendToRoot:r,props:e,compEvent:t})=>{const n=(o=>{const i=document.createElement("div");return i.classList.add("nlux-comp-conversationStarters"),o.forEach((a,u)=>{const l=document.createElement("button");l.classList.add("nlux-comp-conversationStarter");let c=document.createElement("div");a.icon&&(typeof a.icon=="string"?(c=document.createElement("img"),c.setAttribute("src",a.icon),c.setAttribute("width","16px")):(c.className="nlux-comp-conversationStarter-icon-container",c.appendChild(a.icon)));const d=document.createElement("span");d.classList.add("nlux-comp-conversationStarter-prompt"),d.textContent=a.label??a.prompt,l.appendChild(c),l.appendChild(d),i.appendChild(l)}),i})(e.conversationStarters);r(n);let s=[];return e.conversationStarters.forEach((o,i)=>{const[a,u]=vn(n,`:scope > :nth-child(${i+1})`).on("click",()=>{t("conversation-starter-selected")(o)}).get();s.push(u)}),{elements:{},actions:{},onDestroy:()=>{s.forEach(o=>o()),s=[],n.remove()}}},({})=>{})],pn);let or=class extends $e{constructor(r,e){super(r,e),this.setConversationStarters(e.conversationStarters)}setConversationStarters(r){var e;if(r||this.conversationStartersComp){if(r&&!this.conversationStartersComp){const t=this.getProp("onConversationStarterSelected");return this.conversationStartersComp=ft(pn).withContext(this.context).withProps({conversationStarters:r,onConversationStarterSelected:t}).create(),void this.addSubComponent(this.conversationStartersComp.id,this.conversationStartersComp,"conversationStartersContainer")}!r&&this.conversationStartersComp?(this.removeSubComponent(this.conversationStartersComp.id),this.conversationStartersComp=void 0):(e=this.conversationStartersComp)==null||e.updateConversationStarters(r)}}setShowGreeting(r){this.setProp("showGreeting",r),this.executeDomAction("resetGreeting",r)}setAssistantPersona(r){this.setProp("assistantPersona",r),this.executeDomAction("updateAssistantPersona",r)}resetConversationStarters(){const r=this.getProp("conversationStarters");this.setConversationStarters(r)}};or=((r,e,t,n)=>{for(var s,o=e,i=r.length-1;i>=0;i--)(s=r[i])&&(o=s(o)||o);return o})([Ve("launchPad",({appendToRoot:r,props:e})=>{const t={assistantPersona:e.assistantPersona,conversationStarters:e.conversationStarters,showGreeting:e.showGreeting!==!1};let n;if(t.showGreeting)if(e.assistantPersona){const i=e.assistantPersona;n=sr({name:i.name,avatar:i.avatar,message:i.tagline})}else n=as();n&&(r(n),t.greetingElement=n);const s=document.createElement("div");s.classList.add("nlux-conversationStarters-container"),r(s);const o=(i=!0)=>{t.showGreeting=i,t.greetingElement&&(t.greetingElement.remove(),t.greetingElement=void 0),i&&(t.greetingElement=t.assistantPersona?sr({name:t.assistantPersona.name,avatar:t.assistantPersona.avatar,message:t.assistantPersona.tagline}):as(),t.greetingElement&&s.insertAdjacentElement("beforebegin",t.greetingElement))};return{elements:{conversationStartersContainer:s},actions:{resetGreeting:(i=!0)=>{o(i)},updateAssistantPersona:i=>{const a=t.assistantPersona;t.assistantPersona=i,(a||i)&&t.showGreeting&&(i&&a?((u,l,c)=>{if(l.message!==c.message||l.name!==c.name||l.avatar!==c.avatar){if(l.message!==c.message&&Eo(u,c.message),l.name!==c.name){const d=u.querySelector(`.${To}`);if(d){const p=document.createTextNode(c.name);d.replaceChildren(p)}}if(l.avatar!==c.avatar||l.name!==c.name){const d=u.querySelector(`.${Ar}`);d&&Co(d,{name:l.name,avatar:l.avatar},{name:c.name,avatar:c.avatar})}}})(t.greetingElement,{name:a==null?void 0:a.name,avatar:a==null?void 0:a.avatar,message:a==null?void 0:a.tagline},{name:i.name,avatar:i.avatar,message:i.tagline}):o())}},onDestroy:()=>{var i;(i=t.greetingElement)==null||i.remove(),s.remove()}}},({})=>{})],or);var ya=Object.defineProperty,ba=Object.getOwnPropertyDescriptor,Bn=(r,e,t,n)=>{for(var s,o=n>1?void 0:n?ba(e,t):e,i=r.length-1;i>=0;i--)(s=r[i])&&(o=(n?s(e,t,o):s(o))||o);return n&&o&&ya(e,t,o),o};let tn=class extends $e{constructor(r,{conversationLayout:e,autoScroll:t,streamingAnimationSpeed:n,visible:s=!0,composer:o,assistantPersona:i,userPersona:a,showGreeting:u,conversationStarters:l,initialConversationContent:c,syntaxHighlighter:d,htmlSanitizer:p,markdownLinkTarget:m,showCodeBlockCopyButton:h,skipStreamingAnimation:f}){if(super(r,{conversationLayout:e,visible:s,autoScroll:t,streamingAnimationSpeed:n,assistantPersona:i,userPersona:a,conversationStarters:l,showGreeting:u,initialConversationContent:c,composer:o,syntaxHighlighter:d,htmlSanitizer:p,markdownLinkTarget:m,showCodeBlockCopyButton:h,skipStreamingAnimation:f}),this.prompt="",this.handleConversationStarterClick=x=>{this.composer.setDomProps({status:"submitting-conversation-starter"}),this.composer.handleTextChange(x.prompt),this.composer.handleSendButtonClick()},this.handleSegmentCountChange=x=>{var y,b;if(this.segmentCount===x)return;this.segmentCount=x;const S=rr(this.getProp("initialConversationContent")||void 0,this.segmentCount);this.chatRoomStatus!==S&&(this.chatRoomStatus=S,this.executeDomAction("updateChatRoomStatus",this.chatRoomStatus),this.chatRoomStatus==="active"?(y=this.launchPad)!=null&&y.id&&(this.removeSubComponent((b=this.launchPad)==null?void 0:b.id),this.launchPad=void 0):this.addLaunchPad(this.getProp("showGreeting")??!0,this.getProp("assistantPersona"),this.getProp("conversationStarters"),this.handleConversationStarterClick))},this.segmentCount=c&&c.length>0?1:0,this.chatRoomStatus=rr(c,this.segmentCount),this.chatRoomStatus==="starting"&&this.addLaunchPad(u,i,l,this.handleConversationStarterClick),this.addConversation(i,a,c),this.addComposer(o==null?void 0:o.placeholder,o==null?void 0:o.autoFocus,o==null?void 0:o.disableSubmitButton,o==null?void 0:o.submitShortcut),!this.conversation||!this.composer)throw new Error("Chat room not initialized — An error occurred while initializing key components.")}getConversationContentForAdapter(r="max"){return this.conversation.getConversationContentForAdapter(r)}hide(){this.setProp("visible",!1)}messagesContainerClicked(){var r;(r=this.composer)==null||r.focusTextInput()}onChatRoomReady(){Qe(()=>{var e,t;const r=(t=(e=this.renderedDom)==null?void 0:e.elements)==null?void 0:t.conversationContainer;if(r instanceof HTMLElement){this.autoScrollController=oa(r,this.getProp("autoScroll")??!0);let n=0;const s=20,o=()=>{r.scrollHeight>r.clientHeight&&(r.scrollTo({behavior:"smooth",top:5e4}),clearInterval(i))},i=setInterval(()=>{n>=s?clearInterval(i):(o(),n++)},10)}this.context.emit("ready",{aiChatProps:ia(this.context.aiChatProps)})})}setProps(r){var e,t,n,s,o,i,a;if(r.hasOwnProperty("autoScroll")){const u=r.autoScroll;(e=this.autoScrollController)==null||e.updateProps({autoScroll:u})}if(r.hasOwnProperty("conversationLayout")&&((t=this.conversation)==null||t.setConversationLayout(r.conversationLayout)),r.hasOwnProperty("syntaxHighlighter")&&this.setProp("syntaxHighlighter",r.syntaxHighlighter),r.hasOwnProperty("htmlSanitizer")&&this.setProp("htmlSanitizer",r.htmlSanitizer),r.hasOwnProperty("markdownLinkTarget")&&this.setProp("markdownLinkTarget",r.markdownLinkTarget),r.hasOwnProperty("skipStreamingAnimation")&&this.setProp("skipStreamingAnimation",r.skipStreamingAnimation),r.hasOwnProperty("streamingAnimationSpeed")&&this.setProp("streamingAnimationSpeed",r.streamingAnimationSpeed),r.hasOwnProperty("assistantPersona")&&((n=this.conversation)==null||n.setAssistantPersona(r.assistantPersona??void 0),(s=this.launchPad)==null||s.setAssistantPersona(r.assistantPersona??void 0)),r.hasOwnProperty("userPersona")&&((o=this.conversation)==null||o.setUserPersona(r.userPersona??void 0)),r.hasOwnProperty("showGreeting")&&((i=this.launchPad)==null||i.setShowGreeting(r.showGreeting??!0)),r.hasOwnProperty("conversationStarters")&&((a=this.launchPad)==null||a.setConversationStarters(r.conversationStarters)),r.hasOwnProperty("composer")&&this.composer){const u={...this.composer.getProp("domCompProps"),...r.composer};this.composer.setDomProps(u)}}show(){this.setProp("visible",!0)}setProp(r,e){if(super.setProp(r,e),r==="markdownLinkTarget"||r==="syntaxHighlighter"||r==="htmlSanitizer"||r==="skipStreamingAnimation"||r==="streamingAnimationSpeed"){const t=r,n=e;this.conversation.updateMarkdownStreamRenderer(t,n)}}addLaunchPad(r,e,t,n){this.launchPad=ft(or).withContext(this.context).withProps({showGreeting:r,assistantPersona:e,conversationStarters:t,onConversationStarterSelected:n}).create(),this.addSubComponent(this.launchPad.id,this.launchPad,"launchPadContainer")}addConversation(r,e,t){this.conversation=ft(tr).withContext(this.context).withProps({assistantPersona:r,userPersona:e,messages:t,conversationLayout:this.getProp("conversationLayout"),markdownLinkTarget:this.getProp("markdownLinkTarget"),showCodeBlockCopyButton:this.getProp("showCodeBlockCopyButton"),skipStreamingAnimation:this.getProp("skipStreamingAnimation"),streamingAnimationSpeed:this.getProp("streamingAnimationSpeed"),syntaxHighlighter:this.getProp("syntaxHighlighter"),htmlSanitizer:this.getProp("htmlSanitizer"),onSegmentCountChange:this.handleSegmentCountChange}).create(),this.addSubComponent(this.conversation.id,this.conversation,"conversationContainer")}addComposer(r,e,t,n){this.composer=ft(st).withContext(this.context).withProps({props:{domCompProps:{status:"typing",placeholder:r,autoFocus:e,disableSubmitButton:t,submitShortcut:n}},eventListeners:{onTextUpdated:s=>this.handleComposerTextChange(s),onSubmit:()=>this.handleComposerSubmit()}}).create(),this.addSubComponent(this.composer.id,this.composer,"composerContainer")}handleComposerSubmit(){const r=this.props.composer;(({context:e,composerInstance:t,conversation:n,autoScrollController:s,messageToSend:o,resetComposer:i,setComposerAsWaiting:a})=>()=>{var l,c;const u=n.addChatSegment();try{const d=t.getProp("domCompProps");t.setDomProps({...d,status:"submitting-prompt"});const p={aiChatProps:e.aiChatProps,conversationHistory:n.getConversationContentForAdapter((c=(l=e.aiChatProps)==null?void 0:l.conversationOptions)==null?void 0:c.historyPayloadSize)},m=ha(o,e.adapter,p);m.observable.on("error",(h,f)=>{n.removeChatSegment(u),s==null||s.handleChatSegmentRemoved(u),i(!1),e.exception(h),e.emit("error",{errorId:h,message:fa[h],errorObject:f})}),m.observable.on("userMessageReceived",h=>{n.addChatItem(u,h),e.emit("messageSent",{uid:h.uid,message:h.content}),Qe(()=>{if(s){const f=n.getChatSegmentContainer(u);f&&s.handleNewChatSegmentAdded(u,f)}})}),m.dataTransferMode==="batch"?m.observable.on("aiMessageReceived",h=>{const f=typeof h.content=="string",x={...h,content:f?"":h.content};n.addChatItem(u,x),f&&n.addChunk(u,x.uid,h.content,h.serverResponse),n.completeChatSegment(u),e.emit("messageReceived",{uid:h.uid,message:h.content}),i(!0)}):(m.observable.on("aiMessageStreamStarted",h=>{n.addChatItem(u,h),a(),e.emit("messageStreamStarted",{uid:h.uid})}),m.observable.on("aiChunkReceived",h=>{const{messageId:f,chunk:x,serverResponse:S}=h;n.addChunk(u,f,x,S)}),m.observable.on("aiMessageStreamed",h=>{h.status==="complete"&&e.emit("messageReceived",{uid:h.uid,message:h.content})}),m.observable.on("aiServerComponentStreamStarted",h=>{n.addChatItem(u,h),a(),e.emit("messageStreamStarted",{uid:h.uid})}),m.observable.on("aiServerComponentStreamed",h=>{h.status==="complete"&&e.emit("messageReceived",{uid:h.uid,message:h.content})}),m.observable.on("complete",()=>{n.completeChatSegment(u),i(!1)}))}catch(d){Me(d),i(!1)}})({context:this.context,composerInstance:this.composer,conversation:this.conversation,messageToSend:this.prompt,autoScrollController:this.autoScrollController,resetComposer:e=>{this.destroyed||this.resetComposer(e,r==null?void 0:r.autoFocus)},setComposerAsWaiting:()=>{this.destroyed||this.composer.setDomProps({status:"waiting"})}})()}handleComposerTextChange(r){this.prompt=r}resetComposer(r=!1,e=!1){if(!this.composer)return;const t={...this.composer.getProp("domCompProps"),status:"typing"};r&&(t.message=""),this.composer.setDomProps(t),e&&this.composer.focusTextInput()}};Bn([qe("conversation-container-clicked")],tn.prototype,"messagesContainerClicked",1),Bn([qe("chat-room-ready")],tn.prototype,"onChatRoomReady",1),tn=Bn([Ve("chatRoom",({appendToRoot:r,compEvent:e,props:t})=>{const n=document.createElement("div");n.classList.add("nlux-conversation-container");const s=document.createElement("div");s.classList.add("nlux-composer-container");const o=document.createElement("div");o.classList.add("nlux-launchPad-container");const i=document.createDocumentFragment();i.appendChild(o),i.appendChild(n),i.appendChild(s);const a=t.visible??!0,u=document.createElement("div"),l=p=>{u.classList.remove("nlux-chatRoom-starting"),u.classList.remove("nlux-chatRoom-active"),u.classList.add(`nlux-chatRoom-${p}`)};u.classList.add("nlux-chatRoom-container"),l(rr(t.initialConversationContent)),u.append(i),u.style.display=a?"":"none";const[c,d]=vn(u,":scope > .nlux-conversation-container").on("click",e("conversation-container-clicked")).get();return r(u),e("chat-room-ready")(),{elements:{composerContainer:s,conversationContainer:n,launchPadContainer:o},actions:{updateChatRoomStatus:p=>{l(p)}},onDestroy:()=>{d()}}},({propName:r,newValue:e,dom:{elements:t}})=>{})],tn);const xa=r=>{const e=new Set;let t=!1,n=null,s=null;const o=()=>{if(t||e.size===0)return;t=!0;const a=e.values().next().value;e.delete(a),n=(({message:u})=>{const l=document.createElement("div");l.classList.add("nlux-comp-exceptionItem");const c=document.createElement("span");return c.classList.add("nlux-comp-exp_itm_msg"),c.append(document.createTextNode(u)),l.append(c),l})(a),r.append(n),s=setTimeout(i,3e3)},i=()=>{n==null||n.classList.add("nlux-comp-exceptionItem--hiding"),s=setTimeout(()=>{t=!1,n==null||n.remove(),n=null,o()},500)};return{displayException:a=>{e.add({message:a}),t||o()},destroy:()=>{e.clear(),n==null||n.remove(),s&&clearTimeout(s)}}};let ls=class extends $e{constructor(r,e){super(r,e)}destroy(){super.destroy()}showAlert(r,e){this.executeDomAction("displayException",e)}};ls=((r,e,t,n)=>{for(var s,o=e,i=r.length-1;i>=0;i--)(s=r[i])&&(o=s(o)||o);return o})([Ve("exceptionsBox",({props:r,appendToRoot:e})=>{const t=(()=>{const s=document.createElement("div");return s.classList.add("nlux-comp-exceptionBox"),s})();e(t);let n=xa(t);return{elements:{root:t},actions:{displayException:s=>{n==null||n.displayException(s)}},onDestroy:()=>{n==null||n.destroy(),t.remove(),n=void 0}}},()=>{})],ls);const wa=r=>{const e=new Set;let t=!1,n=null,s=null;const o=()=>{if(t||e.size===0)return;t=!0;const a=e.values().next().value;e.delete(a),n=(({message:u})=>{const l=document.createElement("div");l.classList.add("nlux-comp-exceptionItem");const c=document.createElement("span");return c.classList.add("nlux-comp-exp_itm_msg"),c.append(document.createTextNode(u)),l.append(c),l})(a),r.append(n),s=setTimeout(i,3e3)},i=()=>{n==null||n.classList.add("nlux-comp-exceptionItem--hiding"),s=setTimeout(()=>{t=!1,n==null||n.remove(),n=null,o()},500)};return{displayException:a=>{e.add({message:a}),t||o()},destroy:()=>{e.clear(),n==null||n.remove(),s&&clearTimeout(s)}}},Ze=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const e=16*Math.random()|0;return(r=="x"?e:3&e|8).toString(16)}),je=r=>{typeof r!="string"?r&&typeof r.toString=="function"?console.warn(`[nlux] ${r.toString()}`):console.warn("[nlux]"):console.warn(`[nlux] ${r}`)},us=[],$t=r=>{us.includes(r)||(us.push(r),je(r))},ka=r=>{const e="nlux-chatSegment";return r==="complete"?`${e} nlux-chatSegment--complete`:r==="error"?`${e} nlux-chatSegment--error`:`${e} nlux-chatSegment--active`},ir={received:"nlux_msg_received",sent:"nlux_msg_sent"},ar={streaming:"nlux_msg_streaming",complete:"nlux_msg_complete"},ds=r=>{if(!(r instanceof HTMLButtonElement)||r.dataset.clickListenerSet==="true")return;let e=!1;const t=r.nextElementSibling;r.addEventListener("click",()=>{if(e||!t)return;const n=t.innerText;navigator.clipboard.writeText(n??""),e=!0,r.classList.add("clicked"),setTimeout(()=>{e=!1,r.classList.remove("clicked")},1e3)}),r.dataset.clickListenerSet="true"},Po=r=>{const e="nlux-comp-copyButton";r instanceof HTMLButtonElement&&r.classList.contains(e)?ds(r):r.querySelectorAll(`.${e}`).forEach(ds)};function Ca(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let ct={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function ps(r){ct=r}var Sa=Object.defineProperty,Ro=(r,e,t)=>((n,s,o)=>s in n?Sa(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,typeof e!="symbol"?e+"":e,t);class Dt{constructor(e){Ro(this,"options"),this.options=e||ct}postprocess(e){return e}preprocess(e){return e}processAllTokens(e){return e}}Ro(Dt,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));const Io=/[&<>"']/,Aa=new RegExp(Io.source,"g"),Oo=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Ea=new RegExp(Oo.source,"g"),Ta={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ms=r=>Ta[r];function ze(r,e){if(e){if(Io.test(r))return r.replace(Aa,ms)}else if(Oo.test(r))return r.replace(Ea,ms);return r}const Pa=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function Ra(r){return r.replace(Pa,(e,t)=>(t=t.toLowerCase())==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):"")}const Ia=/(^|[^\[])\^/g;function fe(r,e){let t=typeof r=="string"?r:r.source;e=e||"";const n={replace:(s,o)=>{let i=typeof o=="string"?o:o.source;return i=i.replace(Ia,"$1"),t=t.replace(s,i),n},getRegex:()=>new RegExp(t,e)};return n}function hs(r){try{r=encodeURI(r).replace(/%25/g,"%")}catch{return null}return r}const zt={exec:()=>null};function fs(r,e){const t=r.replace(/\|/g,(s,o,i)=>{let a=!1,u=o;for(;--u>=0&&i[u]==="\\";)a=!a;return a?"|":" |"}).split(/ \|/);let n=0;if(t[0].trim()||t.shift(),t.length>0&&!t[t.length-1].trim()&&t.pop(),e)if(t.length>e)t.splice(e);else for(;t.length<e;)t.push("");for(;n<t.length;n++)t[n]=t[n].trim().replace(/\\\|/g,"|");return t}function nn(r,e,t){const n=r.length;if(n===0)return"";let s=0;for(;s<n;){const o=r.charAt(n-s-1);if(o!==e||t){if(o===e||!t)break;s++}else s++}return r.slice(0,n-s)}const Ut=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Mo=/(?:[*+-]|\d{1,9}[.)])/,Lo=fe(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Mo).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),Tr=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Pr=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Oa=fe(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",Pr).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Ma=fe(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Mo).getRegex(),Pn="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Rr=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,La=fe("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",Rr).replace("tag",Pn).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),gs=fe(Tr).replace("hr",Ut).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Pn).getRegex(),Ir={blockquote:fe(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",gs).getRegex(),code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,def:Oa,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:Ut,html:La,lheading:Lo,list:Ma,newline:/^(?: *(?:\n|$))+/,paragraph:gs,table:zt,text:/^[^\n]+/},vs=fe("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Ut).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Pn).getRegex(),ja={...Ir,table:vs,paragraph:fe(Tr).replace("hr",Ut).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",vs).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Pn).getRegex()},Ba={...Ir,html:fe(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Rr).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:zt,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:fe(Tr).replace("hr",Ut).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Lo).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},jo=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Bo=/^( {2,}|\\)\n(?!\s*$)/,Yt="\\p{P}\\p{S}",Da=fe(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Yt).getRegex(),za=fe(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Yt).getRegex(),Fa=fe("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Yt).getRegex(),Ha=fe("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Yt).getRegex(),$a=fe(/\\([punct])/,"gu").replace(/punct/g,Yt).getRegex(),Na=fe(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),_a=fe(Rr).replace("(?:-->|$)","-->").getRegex(),qa=fe("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",_a).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),yn=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Ua=fe(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",yn).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),ys=fe(/^!?\[(label)\]\[(ref)\]/).replace("label",yn).replace("ref",Pr).getRegex(),bs=fe(/^!?\[(ref)\](?:\[\])?/).replace("ref",Pr).getRegex(),Or={_backpedal:zt,anyPunctuation:$a,autolink:Na,blockSkip:/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,br:Bo,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:zt,emStrongLDelim:za,emStrongRDelimAst:Fa,emStrongRDelimUnd:Ha,escape:jo,link:Ua,nolink:bs,punctuation:Da,reflink:ys,reflinkSearch:fe("reflink|nolink(?!\\()","g").replace("reflink",ys).replace("nolink",bs).getRegex(),tag:qa,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:zt},Ya={...Or,link:fe(/^!?\[(label)\]\((.*?)\)/).replace("label",yn).getRegex(),reflink:fe(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",yn).getRegex()},cr={...Or,escape:fe(jo).replace("])","~|])").getRegex(),url:fe(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Wa={...cr,br:fe(Bo).replace("{2,}","*").getRegex(),text:fe(cr.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},rn={normal:Ir,gfm:ja,pedantic:Ba},It={normal:Or,gfm:cr,breaks:Wa,pedantic:Ya};var Qa=Object.defineProperty,Dn=(r,e,t)=>((n,s,o)=>s in n?Qa(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,typeof e!="symbol"?e+"":e,t);function xs(r,e,t,n){const s=e.href,o=e.title?ze(e.title):null,i=r[1].replace(/\\([\[\]])/g,"$1");if(r[0].charAt(0)!=="!"){n.state.inLink=!0;const a={type:"link",raw:t,href:s,title:o,text:i,tokens:n.inlineTokens(i)};return n.state.inLink=!1,a}return{type:"image",raw:t,href:s,title:o,text:ze(i)}}class bn{constructor(e){Dn(this,"lexer"),Dn(this,"options"),Dn(this,"rules"),this.options=e||ct}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let n,s;return t[2]==="@"?(n=ze(t[1]),s="mailto:"+n):(n=ze(t[1]),s=n),{type:"link",raw:t[0],text:n,href:s,tokens:[{type:"text",raw:n,text:n}]}}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let n=t[0].replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`);n=nn(n.replace(/^ *>[ \t]?/gm,""),`
`);const s=this.lexer.state.top;this.lexer.state.top=!0;const o=this.lexer.blockTokens(n);return this.lexer.state.top=s,{type:"blockquote",raw:t[0],tokens:o,text:n}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const n=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:nn(n,`
`)}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(/\n/g," ");const s=/[^ ]/.test(n),o=/^ /.test(n)&&/ $/.test(n);return s&&o&&(n=n.substring(1,n.length-1)),n=ze(n,!0),{type:"codespan",raw:t[0],text:n}}}def(e){const t=this.rules.block.def.exec(e);if(t){const n=t[1].toLowerCase().replace(/\s+/g," "),s=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:s,title:o}}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}emStrong(e,t,n=""){let s=this.rules.inline.emStrongLDelim.exec(e);if(s&&!(s[3]&&n.match(/[\p{L}\p{N}]/u))&&(!(s[1]||s[2])||!n||this.rules.inline.punctuation.exec(n))){const o=[...s[0]].length-1;let i,a,u=o,l=0;const c=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,t=t.slice(-1*e.length+o);(s=c.exec(t))!=null;){if(i=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!i)continue;if(a=[...i].length,s[3]||s[4]){u+=a;continue}if((s[5]||s[6])&&o%3&&!((o+a)%3)){l+=a;continue}if(u-=a,u>0)continue;a=Math.min(a,a+u+l);const d=[...s[0]][0].length,p=e.slice(0,o+s.index+d+a);if(Math.min(o,a)%2){const h=p.slice(1,-1);return{type:"em",raw:p,text:h,tokens:this.lexer.inlineTokens(h)}}const m=p.slice(2,-2);return{type:"strong",raw:p,text:m,tokens:this.lexer.inlineTokens(m)}}}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:ze(t[1])}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const n=t[0],s=function(o,i){const a=o.match(/^(\s+)(?:```)/);if(a===null)return i;const u=a[1];return i.split(`
`).map(l=>{const c=l.match(/^\s+/);if(c===null)return l;const[d]=c;return d.length>=u.length?l.slice(u.length):l}).join(`
`)}(n,t[3]||"");return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:s}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(/#$/.test(n)){const s=nn(n,"#");this.options.pedantic?n=s.trim():s&&!/ $/.test(s)||(n=s.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let n;return n=this.lexer.state.inRawBlock?t[0]:ze(t[0]),{type:"text",raw:t[0],text:n}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}link(e){const t=this.rules.inline.link.exec(e);if(t){const n=t[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;const i=nn(n.slice(0,-1),"\\");if((n.length-i.length)%2==0)return}else{const i=function(a,u){if(a.indexOf(u[1])===-1)return-1;let l=0;for(let c=0;c<a.length;c++)if(a[c]==="\\")c++;else if(a[c]===u[0])l++;else if(a[c]===u[1]&&(l--,l<0))return c;return-1}(t[2],"()");if(i>-1){const a=(t[0].indexOf("!")===0?5:4)+t[1].length+i;t[2]=t[2].substring(0,i),t[0]=t[0].substring(0,a).trim(),t[3]=""}}let s=t[2],o="";if(this.options.pedantic){const i=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s);i&&(s=i[1],o=i[3])}else o=t[3]?t[3].slice(1,-1):"";return s=s.trim(),/^</.test(s)&&(s=this.options.pedantic&&!/>$/.test(n)?s.slice(1):s.slice(1,-1)),xs(t,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim();const s=n.length>1,o={type:"list",raw:"",ordered:s,start:s?+n.slice(0,-1):"",loose:!1,items:[]};n=s?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=s?n:"[*+-]");const i=new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`);let a="",u="",l=!1;for(;e;){let c=!1;if(!(t=i.exec(e))||this.rules.block.hr.test(e))break;a=t[0],e=e.substring(a.length);let d=t[2].split(`
`,1)[0].replace(/^\t+/,S=>" ".repeat(3*S.length)),p=e.split(`
`,1)[0],m=0;this.options.pedantic?(m=2,u=d.trimStart()):(m=t[2].search(/[^ ]/),m=m>4?1:m,u=d.slice(m),m+=t[1].length);let h=!1;if(!d&&/^ *$/.test(p)&&(a+=p+`
`,e=e.substring(p.length+1),c=!0),!c){const S=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),y=new RegExp(`^ {0,${Math.min(3,m-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),b=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:\`\`\`|~~~)`),E=new RegExp(`^ {0,${Math.min(3,m-1)}}#`);for(;e;){const w=e.split(`
`,1)[0];if(p=w,this.options.pedantic&&(p=p.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),b.test(p)||E.test(p)||S.test(p)||y.test(e))break;if(p.search(/[^ ]/)>=m||!p.trim())u+=`
`+p.slice(m);else{if(h||d.search(/[^ ]/)>=4||b.test(d)||E.test(d)||y.test(d))break;u+=`
`+p}h||p.trim()||(h=!0),a+=w+`
`,e=e.substring(w.length+1),d=p.slice(m)}}o.loose||(l?o.loose=!0:/\n *\n *$/.test(a)&&(l=!0));let f,x=null;this.options.gfm&&(x=/^\[[ xX]\] /.exec(u),x&&(f=x[0]!=="[ ] ",u=u.replace(/^\[[ xX]\] +/,""))),o.items.push({type:"list_item",raw:a,task:!!x,checked:f,loose:!1,text:u,tokens:[]}),o.raw+=a}o.items[o.items.length-1].raw=a.trimEnd(),o.items[o.items.length-1].text=u.trimEnd(),o.raw=o.raw.trimEnd();for(let c=0;c<o.items.length;c++)if(this.lexer.state.top=!1,o.items[c].tokens=this.lexer.blockTokens(o.items[c].text,[]),!o.loose){const d=o.items[c].tokens.filter(m=>m.type==="space"),p=d.length>0&&d.some(m=>/\n.*\n/.test(m.raw));o.loose=p}if(o.loose)for(let c=0;c<o.items.length;c++)o.items[c].loose=!0;return o}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){const s=t[(n[2]||n[1]).replace(/\s+/g," ").toLowerCase()];if(!s){const o=n[0].charAt(0);return{type:"text",raw:o,text:o}}return xs(n,s,n[0],this.lexer)}}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}table(e){const t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;const n=fs(t[1]),s=t[2].replace(/^\||\| *$/g,"").split("|"),o=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],i={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===s.length){for(const a of s)/^ *-+: *$/.test(a)?i.align.push("right"):/^ *:-+: *$/.test(a)?i.align.push("center"):/^ *:-+ *$/.test(a)?i.align.push("left"):i.align.push(null);for(const a of n)i.header.push({text:a,tokens:this.lexer.inline(a)});for(const a of o)i.rows.push(fs(a,i.header.length).map(u=>({text:u,tokens:this.lexer.inline(u)})));return i}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}url(e){var n;let t;if(t=this.rules.inline.url.exec(e)){let s,o;if(t[2]==="@")s=ze(t[0]),o="mailto:"+s;else{let i;do i=t[0],t[0]=((n=this.rules.inline._backpedal.exec(t[0]))==null?void 0:n[0])??"";while(i!==t[0]);s=ze(t[0]),o=t[1]==="www."?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:s,href:o,tokens:[{type:"text",raw:s,text:s}]}}}}var Xa=Object.defineProperty,Ot=(r,e,t)=>((n,s,o)=>s in n?Xa(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,typeof e!="symbol"?e+"":e,t);class Ke{constructor(e){Ot(this,"options"),Ot(this,"state"),Ot(this,"tokens"),Ot(this,"inlineQueue"),Ot(this,"tokenizer"),this.tokens=[],this.tokens.links=Object.create(null),this.options=e||ct,this.options.tokenizer=this.options.tokenizer||new bn,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:rn.normal,inline:It.normal};this.options.pedantic?(t.block=rn.pedantic,t.inline=It.pedantic):this.options.gfm&&(t.block=rn.gfm,this.options.breaks?t.inline=It.breaks:t.inline=It.gfm),this.tokenizer.rules=t}static get rules(){return{block:rn,inline:It}}static lex(e,t){return new Ke(t).lex(e)}static lexInline(e,t){return new Ke(t).inlineTokens(e)}blockTokens(e,t=[]){let n,s,o,i;for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,(a,u,l)=>u+"    ".repeat(l.length));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>!!(n=a.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0))))if(n=this.tokenizer.space(e))e=e.substring(n.raw.length),n.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(n);else if(n=this.tokenizer.code(e))e=e.substring(n.raw.length),s=t[t.length-1],!s||s.type!=="paragraph"&&s.type!=="text"?t.push(n):(s.raw+=`
`+n.raw,s.text+=`
`+n.text,this.inlineQueue[this.inlineQueue.length-1].src=s.text);else if(n=this.tokenizer.fences(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.heading(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.hr(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.blockquote(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.list(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.html(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.def(e))e=e.substring(n.raw.length),s=t[t.length-1],!s||s.type!=="paragraph"&&s.type!=="text"?this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title}):(s.raw+=`
`+n.raw,s.text+=`
`+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=s.text);else if(n=this.tokenizer.table(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.lheading(e))e=e.substring(n.raw.length),t.push(n);else{if(o=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const u=e.slice(1);let l;this.options.extensions.startBlock.forEach(c=>{l=c.call({lexer:this},u),typeof l=="number"&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(o=e.substring(0,a+1))}if(this.state.top&&(n=this.tokenizer.paragraph(o)))s=t[t.length-1],i&&s.type==="paragraph"?(s.raw+=`
`+n.raw,s.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):t.push(n),i=o.length!==e.length,e=e.substring(n.raw.length);else if(n=this.tokenizer.text(e))e=e.substring(n.raw.length),s=t[t.length-1],s&&s.type==="text"?(s.raw+=`
`+n.raw,s.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):t.push(n);else if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n,s,o,i,a,u,l=e;if(this.tokens.links){const c=Object.keys(this.tokens.links);if(c.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(l))!=null;)c.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.blockSkip.exec(l))!=null;)l=l.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(l))!=null;)l=l.slice(0,i.index)+"++"+l.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(a||(u=""),a=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(c=>!!(n=c.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0))))if(n=this.tokenizer.escape(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.tag(e))e=e.substring(n.raw.length),s=t[t.length-1],s&&n.type==="text"&&s.type==="text"?(s.raw+=n.raw,s.text+=n.text):t.push(n);else if(n=this.tokenizer.link(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(n.raw.length),s=t[t.length-1],s&&n.type==="text"&&s.type==="text"?(s.raw+=n.raw,s.text+=n.text):t.push(n);else if(n=this.tokenizer.emStrong(e,l,u))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.codespan(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.br(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.del(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.autolink(e))e=e.substring(n.raw.length),t.push(n);else if(this.state.inLink||!(n=this.tokenizer.url(e))){if(o=e,this.options.extensions&&this.options.extensions.startInline){let c=1/0;const d=e.slice(1);let p;this.options.extensions.startInline.forEach(m=>{p=m.call({lexer:this},d),typeof p=="number"&&p>=0&&(c=Math.min(c,p))}),c<1/0&&c>=0&&(o=e.substring(0,c+1))}if(n=this.tokenizer.inlineText(o))e=e.substring(n.raw.length),n.raw.slice(-1)!=="_"&&(u=n.raw.slice(-1)),a=!0,s=t[t.length-1],s&&s.type==="text"?(s.raw+=n.raw,s.text+=n.text):t.push(n);else if(e){const c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}throw new Error(c)}}else e=e.substring(n.raw.length),t.push(n);return t}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const n=this.inlineQueue[t];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}}var Za=Object.defineProperty,Ka=(r,e,t)=>((n,s,o)=>s in n?Za(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,e+"",t);class xn{constructor(e){Ka(this,"options"),this.options=e||ct}blockquote(e){return`<blockquote>
${e}</blockquote>
`}br(){return"<br>"}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}code(e,t,n){var o;const s=(o=(t||"").match(/^\S*/))==null?void 0:o[0];return e=e.replace(/\n$/,"")+`
`,s?'<pre><code class="language-'+ze(s)+'">'+(n?e:ze(e,!0))+`</code></pre>
`:"<pre><code>"+(n?e:ze(e,!0))+`</code></pre>
`}codespan(e){return`<code>${e}</code>`}del(e){return`<del>${e}</del>`}em(e){return`<em>${e}</em>`}heading(e,t,n){return`<h${t}>${e}</h${t}>
`}hr(){return`<hr>
`}html(e,t){return e}image(e,t,n){const s=hs(e);if(s===null)return n;let o=`<img src="${e=s}" alt="${n}"`;return t&&(o+=` title="${t}"`),o+=">",o}link(e,t,n){const s=hs(e);if(s===null)return n;let o='<a href="'+(e=s)+'"';return t&&(o+=' title="'+t+'"'),o+=">"+n+"</a>",o}list(e,t,n){const s=t?"ol":"ul";return"<"+s+(t&&n!==1?' start="'+n+'"':"")+`>
`+e+"</"+s+`>
`}listitem(e,t,n){return`<li>${e}</li>
`}paragraph(e){return`<p>${e}</p>
`}strong(e){return`<strong>${e}</strong>`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablecell(e,t){const n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>
`}tablerow(e){return`<tr>
${e}</tr>
`}text(e){return e}}class Mr{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,n){return""+n}image(e,t,n){return""+n}br(){return""}}var Ga=Object.defineProperty,zn=(r,e,t)=>((n,s,o)=>s in n?Ga(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,typeof e!="symbol"?e+"":e,t);class Ge{constructor(e){zn(this,"options"),zn(this,"renderer"),zn(this,"textRenderer"),this.options=e||ct,this.options.renderer=this.options.renderer||new xn,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Mr}static parse(e,t){return new Ge(t).parse(e)}static parseInline(e,t){return new Ge(t).parseInline(e)}parse(e,t=!0){let n="";for(let s=0;s<e.length;s++){const o=e[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]){const i=o,a=this.options.extensions.renderers[i.type].call({parser:this},i);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(i.type)){n+=a||"";continue}}switch(o.type){case"space":continue;case"hr":n+=this.renderer.hr();continue;case"heading":{const i=o;n+=this.renderer.heading(this.parseInline(i.tokens),i.depth,Ra(this.parseInline(i.tokens,this.textRenderer)));continue}case"code":{const i=o;n+=this.renderer.code(i.text,i.lang,!!i.escaped);continue}case"table":{const i=o;let a="",u="";for(let c=0;c<i.header.length;c++)u+=this.renderer.tablecell(this.parseInline(i.header[c].tokens),{header:!0,align:i.align[c]});a+=this.renderer.tablerow(u);let l="";for(let c=0;c<i.rows.length;c++){const d=i.rows[c];u="";for(let p=0;p<d.length;p++)u+=this.renderer.tablecell(this.parseInline(d[p].tokens),{header:!1,align:i.align[p]});l+=this.renderer.tablerow(u)}n+=this.renderer.table(a,l);continue}case"blockquote":{const i=o,a=this.parse(i.tokens);n+=this.renderer.blockquote(a);continue}case"list":{const i=o,a=i.ordered,u=i.start,l=i.loose;let c="";for(let d=0;d<i.items.length;d++){const p=i.items[d],m=p.checked,h=p.task;let f="";if(p.task){const x=this.renderer.checkbox(!!m);l?p.tokens.length>0&&p.tokens[0].type==="paragraph"?(p.tokens[0].text=x+" "+p.tokens[0].text,p.tokens[0].tokens&&p.tokens[0].tokens.length>0&&p.tokens[0].tokens[0].type==="text"&&(p.tokens[0].tokens[0].text=x+" "+p.tokens[0].tokens[0].text)):p.tokens.unshift({type:"text",text:x+" "}):f+=x+" "}f+=this.parse(p.tokens,l),c+=this.renderer.listitem(f,h,!!m)}n+=this.renderer.list(c,a,u);continue}case"html":{const i=o;n+=this.renderer.html(i.text,i.block);continue}case"paragraph":{const i=o;n+=this.renderer.paragraph(this.parseInline(i.tokens));continue}case"text":{let i=o,a=i.tokens?this.parseInline(i.tokens):i.text;for(;s+1<e.length&&e[s+1].type==="text";)i=e[++s],a+=`
`+(i.tokens?this.parseInline(i.tokens):i.text);n+=t?this.renderer.paragraph(a):a;continue}default:{const i='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(i),"";throw new Error(i)}}}return n}parseInline(e,t){t=t||this.renderer;let n="";for(let s=0;s<e.length;s++){const o=e[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]){const i=this.options.extensions.renderers[o.type].call({parser:this},o);if(i!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){n+=i||"";continue}}switch(o.type){case"escape":{const i=o;n+=t.text(i.text);break}case"html":{const i=o;n+=t.html(i.text);break}case"link":{const i=o;n+=t.link(i.href,i.title,this.parseInline(i.tokens,t));break}case"image":{const i=o;n+=t.image(i.href,i.title,i.text);break}case"strong":{const i=o;n+=t.strong(this.parseInline(i.tokens,t));break}case"em":{const i=o;n+=t.em(this.parseInline(i.tokens,t));break}case"codespan":{const i=o;n+=t.codespan(i.text);break}case"br":n+=t.br();break;case"del":{const i=o;n+=t.del(this.parseInline(i.tokens,t));break}case"text":{const i=o;n+=t.text(i.text);break}default:{const i='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(i),"";throw new Error(i)}}}return n}}var Ft,ws,lr,Ja=Object.defineProperty,Do=r=>{throw TypeError(r)},Ye=(r,e,t)=>((n,s,o)=>s in n?Ja(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,typeof e!="symbol"?e+"":e,t),ur=(r,e,t)=>(((n,s,o)=>{s.has(n)||Do("Cannot "+o)})(r,e,"access private method"),t);Ft=new WeakSet,ws=function(r,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,r){const n="<p>An error occurred:</p><pre>"+ze(t.message+"",!0)+"</pre>";return e?Promise.resolve(n):n}if(e)return Promise.reject(t);throw t}},lr=function(r,e){return(t,n)=>{const s={...n},o={...this.defaults,...s};this.defaults.async===!0&&s.async===!1&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);const i=ur(this,Ft,ws).call(this,!!o.silent,!!o.async);if(t==null)return i(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(t):t).then(a=>r(a,o)).then(a=>o.hooks?o.hooks.processAllTokens(a):a).then(a=>o.walkTokens?Promise.all(this.walkTokens(a,o.walkTokens)).then(()=>a):a).then(a=>e(a,o)).then(a=>o.hooks?o.hooks.postprocess(a):a).catch(i);try{o.hooks&&(t=o.hooks.preprocess(t));let a=r(t,o);o.hooks&&(a=o.hooks.processAllTokens(a)),o.walkTokens&&this.walkTokens(a,o.walkTokens);let u=e(a,o);return o.hooks&&(u=o.hooks.postprocess(u)),u}catch(a){return i(a)}}};const ot=new class{constructor(...r){var e,t,n;e=this,(t=Ft).has(e)?Do("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Ye(this,"Hooks",Dt),Ye(this,"Lexer",Ke),Ye(this,"Parser",Ge),Ye(this,"Renderer",xn),Ye(this,"TextRenderer",Mr),Ye(this,"Tokenizer",bn),Ye(this,"defaults",{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}),Ye(this,"options",this.setOptions),Ye(this,"parse",ur(this,Ft,lr).call(this,Ke.lex,Ge.parse)),Ye(this,"parseInline",ur(this,Ft,lr).call(this,Ke.lexInline,Ge.parseInline)),this.use(...r)}lexer(r,e){return Ke.lex(r,e??this.defaults)}parser(r,e){return Ge.parse(r,e??this.defaults)}setOptions(r){return this.defaults={...this.defaults,...r},this}use(...r){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return r.forEach(t=>{const n={...t};if(n.async=this.defaults.async||n.async||!1,t.extensions&&(t.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const o=e.renderers[s.name];e.renderers[s.name]=o?function(...i){let a=s.renderer.apply(this,i);return a===!1&&(a=o.apply(this,i)),a}:s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const o=e[s.level];o?o.unshift(s.tokenizer):e[s.level]=[s.tokenizer],s.start&&(s.level==="block"?e.startBlock?e.startBlock.push(s.start):e.startBlock=[s.start]:s.level==="inline"&&(e.startInline?e.startInline.push(s.start):e.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(e.childTokens[s.name]=s.childTokens)}),n.extensions=e),t.renderer){const s=this.defaults.renderer||new xn(this.defaults);for(const o in t.renderer){if(!(o in s))throw new Error(`renderer '${o}' does not exist`);if(o==="options")continue;const i=o,a=t.renderer[i],u=s[i];s[i]=(...l)=>{let c=a.apply(s,l);return c===!1&&(c=u.apply(s,l)),c||""}}n.renderer=s}if(t.tokenizer){const s=this.defaults.tokenizer||new bn(this.defaults);for(const o in t.tokenizer){if(!(o in s))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;const i=o,a=t.tokenizer[i],u=s[i];s[i]=(...l)=>{let c=a.apply(s,l);return c===!1&&(c=u.apply(s,l)),c}}n.tokenizer=s}if(t.hooks){const s=this.defaults.hooks||new Dt;for(const o in t.hooks){if(!(o in s))throw new Error(`hook '${o}' does not exist`);if(o==="options")continue;const i=o,a=t.hooks[i],u=s[i];Dt.passThroughHooks.has(o)?s[i]=l=>{if(this.defaults.async)return Promise.resolve(a.call(s,l)).then(d=>u.call(s,d));const c=a.call(s,l);return u.call(s,c)}:s[i]=(...l)=>{let c=a.apply(s,l);return c===!1&&(c=u.apply(s,l)),c}}n.hooks=s}if(t.walkTokens){const s=this.defaults.walkTokens,o=t.walkTokens;n.walkTokens=function(i){let a=[];return a.push(o.call(this,i)),s&&(a=a.concat(s.call(this,i))),a}}this.defaults={...this.defaults,...n}}),this}walkTokens(r,e){var n,s;let t=[];for(const o of r)switch(t=t.concat(e.call(this,o)),o.type){case"table":{const i=o;for(const a of i.header)t=t.concat(this.walkTokens(a.tokens,e));for(const a of i.rows)for(const u of a)t=t.concat(this.walkTokens(u.tokens,e));break}case"list":{const i=o;t=t.concat(this.walkTokens(i.items,e));break}default:{const i=o;(s=(n=this.defaults.extensions)==null?void 0:n.childTokens)!=null&&s[i.type]?this.defaults.extensions.childTokens[i.type].forEach(a=>{const u=i[a].flat(1/0);t=t.concat(this.walkTokens(u,e))}):i.tokens&&(t=t.concat(this.walkTokens(i.tokens,e)))}}return t}};function ke(r,e){return ot.parse(r,e)}ke.options=ke.setOptions=function(r){return ot.setOptions(r),ke.defaults=ot.defaults,ps(ke.defaults),ke},ke.getDefaults=Ca,ke.defaults=ct,ke.use=function(...r){return ot.use(...r),ke.defaults=ot.defaults,ps(ke.defaults),ke},ke.walkTokens=function(r,e){return ot.walkTokens(r,e)},ke.parseInline=ot.parseInline,ke.Parser=Ge,ke.parser=Ge.parse,ke.Renderer=xn,ke.TextRenderer=Mr,ke.Lexer=Ke,ke.lexer=Ke.lex,ke.Tokenizer=bn,ke.Hooks=Dt,ke.parse=ke;const zo=(r,e)=>{const{showCodeBlockCopyButton:t,markdownLinkTarget:n,syntaxHighlighter:s,htmlSanitizer:o}=e||{},i=ke(r,{async:!1,breaks:!0});if(typeof i!="string")throw new Error("Markdown parsing failed");const a=document.createElement("div");return a.innerHTML=o?o(i):i,a.querySelectorAll("pre").forEach(u=>{const l=document.createElement("div");l.className="code-block";const c=u.querySelector("code");if(!c){const h=u.innerHTML;return l.innerHTML=o?o(h):h,void u.replaceWith(l)}let d;for(let h=0;h<c.classList.length;h++){const f=c.classList[h];if(f.startsWith("language-")){d=f.slice(9);break}}const p=document.createElement("pre"),m="<div>"+c.innerHTML+"</div>";if(p.innerHTML=e!=null&&e.htmlSanitizer?e.htmlSanitizer(m):m,d&&(p.setAttribute("data-language",d),s)){const h="<div>"+s.createHighlighter()(c.textContent||"",d)+"</div>";p.innerHTML=o?o(h):h,p.className="highlighter-dark"}(h=>{h.replaceChildren()})(l),l.appendChild(p),u.replaceWith(l)}),t!==!1&&a.querySelectorAll(".code-block").forEach(u=>{var p;if(!u.querySelector("pre")||(p=u.previousElementSibling)!=null&&p.classList.contains("nlux-comp-copyButton"))return;const l="Copy code block to clipboard",c=document.createElement("button");c.classList.add("nlux-comp-copyButton"),c.setAttribute("aria-label",l),c.setAttribute("title",l);const d=document.createElement("span");d.classList.add("icon-copy"),c.appendChild(d),u.appendChild(c)}),n!=="self"&&a.querySelectorAll("a").forEach(u=>{u.setAttribute("target","_blank")}),a.innerHTML},Fo="nlux-comp-message",ks={received:"nlux-comp-chatItem--received",sent:"nlux-comp-chatItem--sent"},Va="nlux-comp-chatItem--bubblesLayout",ec="nlux-comp-chatItem--listLayout",tc=(r,e)=>{let t=!1;const{onComplete:n}=e||{},s=[],o=(e!=null&&e.skipStreamingAnimation?"timeout":"animationFrame")=="timeout"?d=>setTimeout(d,0):d=>requestAnimationFrame(d),i=document.createElement("div");i.classList.add("md-in-progress"),r.append(i);const a=()=>{for(;i.firstChild;){const d=i.firstChild;d instanceof HTMLElement&&Po(d),i.before(d)}},u=!(e!=null&&e.skipStreamingAnimation)&&(e!=null&&e.streamingAnimationSpeed)&&e.streamingAnimationSpeed>=0?e.streamingAnimationSpeed:e!=null&&e.skipStreamingAnimation?0:8,l={timeSinceLastProcessing:new Date().getTime(),currentMarkdown:"",previousHtml:void 0};let c=setInterval(()=>{const d=new Date().getTime(),p=(e==null?void 0:e.waitTimeBeforeStreamCompletion)!=="never";if(s.length===0&&p){const h=typeof(e==null?void 0:e.waitTimeBeforeStreamCompletion)=="number"?e.waitTimeBeforeStreamCompletion:2e3;return void((t||d-l.timeSinceLastProcessing>h)&&(t=!0,c&&(clearInterval(c),c=void 0),a(),i.remove(),n==null?void 0:n()))}l.timeSinceLastProcessing=d;const m=s.shift();m!==void 0&&typeof m=="string"&&o(()=>{const h=l.currentMarkdown+m,f=zo(h,e).trim();if(typeof f!="string")return l.currentMarkdown=l.currentMarkdown.slice(0,-m.length),void je("Markdown parsing failed");if(l.previousHtml&&f.length>l.previousHtml.length&&f.startsWith(l.previousHtml)){a();const x=f.slice(l.previousHtml.length).trim();i.innerHTML=e!=null&&e.htmlSanitizer?e.htmlSanitizer(x):x,l.currentMarkdown=m,l.previousHtml=void 0}else i.innerHTML=e!=null&&e.htmlSanitizer?e.htmlSanitizer(f):f,l.currentMarkdown=h,l.previousHtml=f})},u);return{next:d=>{if(t)je("Stream is already complete. No more chunks can be added");else for(const p of d)s.push(p)},complete:()=>{s.push(`
`),t=!0},cancel:()=>{c&&(clearInterval(c),c=void 0),t=!0,i.remove()},error:()=>{t=!0}}},nc=function(r,e){const{uid:t,status:n,responseRenderer:s,markdownOptions:o,initialMarkdownMessage:i,markdownContainersController:a}=r,[u,l]=v.useState([]),c=v.useRef(null),d=v.useRef(null),p=v.useRef(null),m=v.useRef(null),[h,f]=v.useState();v.useEffect(()=>{c.current!==d.current&&(d.current=c.current,f(c.current||void 0))}),v.useEffect(()=>{if(h){const S=a.getStreamingDomElement(t);h.append(S)}},[h]),v.useEffect(()=>{m.current=S=>{l(y=>[...y,S])}},[l]),v.useEffect(()=>{const S=a.getStreamingDomElement(t);return p.current=tc(S,{syntaxHighlighter:o==null?void 0:o.syntaxHighlighter,htmlSanitizer:o==null?void 0:o.htmlSanitizer,markdownLinkTarget:o==null?void 0:o.markdownLinkTarget,showCodeBlockCopyButton:o==null?void 0:o.showCodeBlockCopyButton,skipStreamingAnimation:o==null?void 0:o.skipStreamingAnimation,streamingAnimationSpeed:o==null?void 0:o.streamingAnimationSpeed,waitTimeBeforeStreamCompletion:o==null?void 0:o.waitTimeBeforeStreamCompletion,onComplete:o==null?void 0:o.onStreamComplete}),i&&p.current.next(i),()=>{a.deleteStreamingDomElement(t)}},[]),v.useEffect(()=>()=>{d.current=null,p.current=null,m.current=null,f(void 0)},[]),v.useImperativeHandle(e,()=>({streamChunk:S=>{var y,b;m.current&&((y=m.current)==null||y.call(m,S)),typeof S=="string"&&((b=p.current)==null||b.next(S))},completeStream:()=>{var S;(S=p.current)==null||S.complete()},cancelStream:()=>{var S;(S=p.current)==null||S.cancel()}}),[]);const x=s||void 0;return k.jsxs("div",{className:`${Fo} ${ar[n]} ${ir.received}`,children:[x&&k.jsx(x,{uid:t,status:n,containerRef:c,content:u,contentType:"text",serverResponse:[],dataTransferMode:"stream"}),!x&&k.jsx("div",{className:"nlux-markdownStream-root",ref:c})]})},Ho=(r,e)=>{if(!e||e==="Enter"){const t=r.key==="Enter"&&!r.nativeEvent.isComposing,n=r.altKey||r.ctrlKey||r.metaKey||r.shiftKey;return t&&!n}return!!(e==="CommandEnter"&&r.key==="Enter"&&(r.getModifierState("Control")||r.getModifierState("Meta")))},rc=r=>{const{markdownOptions:e}=r,t=v.useRef(null),n=v.useMemo(()=>r.content?zo(r.content,{syntaxHighlighter:e==null?void 0:e.syntaxHighlighter,htmlSanitizer:e==null?void 0:e.htmlSanitizer,markdownLinkTarget:e==null?void 0:e.markdownLinkTarget,showCodeBlockCopyButton:e==null?void 0:e.showCodeBlockCopyButton}):"",[r.content,e==null?void 0:e.markdownLinkTarget,e==null?void 0:e.syntaxHighlighter,e==null?void 0:e.htmlSanitizer,e==null?void 0:e.showCodeBlockCopyButton]);v.useEffect(()=>{t.current&&(e==null?void 0:e.showCodeBlockCopyButton)!==!1&&Po(t.current)},[n,t.current,e==null?void 0:e.showCodeBlockCopyButton]);const s=v.useMemo(()=>e!=null&&e.htmlSanitizer?e.htmlSanitizer(n):n,[n,e==null?void 0:e.htmlSanitizer]),o=v.useCallback(l=>{if(!r.canResubmit)return;const c=l.currentTarget.textContent;return c?Ho(l,r.submitShortcutKey)?(l.preventDefault(),void(r.onResubmit&&r.onResubmit(c))):void(l.key==="Escape"&&(l.preventDefault(),l.currentTarget.textContent=r.content,l.currentTarget.blur())):void 0},[r.canResubmit,r.onResubmit,r.content]),i=v.useCallback(l=>{r.canResubmit&&(l.preventDefault(),l.currentTarget.textContent=r.content,l.currentTarget.blur())},[r.canResubmit,r.content]),a=v.useCallback(l=>{if(!r.canResubmit)return;l.preventDefault();const c=document.createRange();c.selectNodeContents(l.currentTarget);const d=window.getSelection();d==null||d.removeAllRanges(),d==null||d.addRange(c)},[r.canResubmit]),u=r.canResubmit?"editable-markdown-container":"";return k.jsx($o,{children:k.jsx("div",{className:"nlux-markdownStream-root"+(u?` ${u}`:""),children:k.jsx("div",{className:"nlux-markdown-container",ref:t,dangerouslySetInnerHTML:{__html:s},contentEditable:r.canResubmit,onKeyDown:o,onBlur:i,onFocus:a})})})};class $o extends v.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e){je("Markdown rendering error occurred. This could be due to a malformed markdown content, or it could be because the page requires an HTML sanitizer. Please check the error message for more details and consider configuring NLUX with a compatible sanitizer."),this.props.onMarkdownRenderingError&&this.props.onMarkdownRenderingError(e)}render(){return this.state.hasError?null:this.props.children}}const Cs=r=>k.jsx($o,{children:k.jsx(rc,{...r})}),No=r=>{const e=typeof r.avatar=="string",t=!e&&v.isValidElement(r.avatar);return k.jsxs("div",{className:"nlux-comp-avatar",children:[t&&r.avatar,!t&&e&&k.jsx("div",{className:"nlux-comp-avatarContainer",children:r.avatar&&k.jsx("div",{className:"nlux-comp-avatarPicture",style:{backgroundImage:`url("${encodeURI(r.avatar)}")`}})})]})},sc=function(r,e){var S,y,b,E,w,M,$,N;const t=v.useRef(null);v.useImperativeHandle(e,()=>({streamChunk:P=>setTimeout(()=>{var I;return(I=t==null?void 0:t.current)==null?void 0:I.streamChunk(P)}),completeStream:()=>setTimeout(()=>{var P;return(P=t==null?void 0:t.current)==null?void 0:P.completeStream()}),cancelStream:()=>{var P;return(P=t==null?void 0:t.current)==null?void 0:P.cancelStream()}}),[]);const n=r.contentType==="server-component",s=r.direction==="received",o=r.direction==="sent",i=r.dataTransferMode==="stream",a=r.isPartOfInitialSegment,u=v.useCallback(()=>{var P;return(P=r.onMarkdownStreamRendered)==null?void 0:P.call(r,r.uid)},[r.uid]);v.useEffect(()=>{var P;i||n||a||((P=r.onMarkdownStreamRendered)==null||P.call(r,r.uid))},[]);const l=function(P){const{uid:I,status:W,dataTransferMode:j,contentType:F,fetchedContent:D,streamedContent:V,streamedServerResponse:me,fetchedServerResponse:re,direction:ie,messageOptions:_}=P;if((_==null?void 0:_.responseRenderer)!==void 0){if(j==="stream"){const H={uid:I,status:W,dataTransferMode:j,contentType:F,content:V??[],serverResponse:me??[]};return()=>{const U=_.responseRenderer;return k.jsx(U,{...H})}}const A=v.isValidElement(D),O={uid:I,status:"complete",dataTransferMode:j,contentType:F,content:D?A?[]:[D]:[],serverComponent:A?D:void 0,serverResponse:re?[re]:[]};return()=>{const H=_.responseRenderer;return k.jsx(H,{...O})}}if(ie==="sent"){if(typeof D=="string"){const A=D;return()=>k.jsx(k.Fragment,{children:A})}return()=>""}if(typeof D=="string"){const A=D;return()=>k.jsx(Cs,{messageUid:I,content:A,markdownOptions:{syntaxHighlighter:_==null?void 0:_.syntaxHighlighter,htmlSanitizer:_==null?void 0:_.htmlSanitizer,markdownLinkTarget:_==null?void 0:_.markdownLinkTarget,showCodeBlockCopyButton:_==null?void 0:_.showCodeBlockCopyButton,skipStreamingAnimation:_==null?void 0:_.skipStreamingAnimation}})}return v.isValidElement(D)?()=>k.jsx(k.Fragment,{children:D}):()=>""}(r),c=function(P){var I;return v.useCallback(()=>{var j,F,D;if(((j=P.messageOptions)==null?void 0:j.promptRenderer)===void 0)return k.jsx(Cs,{messageUid:P.uid,content:P.fetchedContent,markdownOptions:{htmlSanitizer:(F=P.messageOptions)==null?void 0:F.htmlSanitizer},canResubmit:(D=P.messageOptions)==null?void 0:D.editableUserMessages,submitShortcutKey:P.submitShortcutKey,onResubmit:V=>{P.onPromptResubmit&&P.onPromptResubmit(V)}});const W=P.messageOptions.promptRenderer;return k.jsx(W,{uid:P.uid,prompt:P.fetchedContent,onResubmit:V=>{P.onPromptResubmit&&P.onPromptResubmit(V)}})},[(I=P.messageOptions)==null?void 0:I.promptRenderer,P.fetchedContent,P.uid])}(r),d=v.useMemo(()=>v.forwardRef(nc),[]),p=function(P){const I=v.useMemo(()=>k.jsxs("div",{className:"nlux-comp-chatItem-participantInfo",children:[P.avatar!==void 0&&k.jsx(No,{name:P.name,avatar:P.avatar}),k.jsx("span",{className:"nlux-comp-chatItem-participantName",children:P.name})]}),[P.avatar,P.name]);return()=>k.jsx(k.Fragment,{children:I})}(r),m=`nlux-comp-chatItem ${r.direction?ks[r.direction]:ks.received} ${r.layout==="bubbles"?Va:ec}`,h=r.status?ar[r.status]:ar.rendered,f=r.direction?ir[r.direction]:ir.received,x=`${Fo} ${h} ${f}`;return k.jsxs("div",{className:m,children:[k.jsx(p,{}),s&&i&&!n&&k.jsx(d,{uid:r.uid,status:r.status,ref:t,direction:r.direction,responseRenderer:(S=r.messageOptions)==null?void 0:S.responseRenderer,markdownContainersController:r.markdownContainersController,markdownOptions:{syntaxHighlighter:(y=r.messageOptions)==null?void 0:y.syntaxHighlighter,htmlSanitizer:(b=r.messageOptions)==null?void 0:b.htmlSanitizer,markdownLinkTarget:(E=r.messageOptions)==null?void 0:E.markdownLinkTarget,showCodeBlockCopyButton:(w=r.messageOptions)==null?void 0:w.showCodeBlockCopyButton,skipStreamingAnimation:(M=r.messageOptions)==null?void 0:M.skipStreamingAnimation,streamingAnimationSpeed:($=r.messageOptions)==null?void 0:$.streamingAnimationSpeed,waitTimeBeforeStreamCompletion:(N=r.messageOptions)==null?void 0:N.waitTimeBeforeStreamCompletion,onStreamComplete:u}},"do-not-change"),s&&i&&n&&k.jsx("div",{className:x,children:r.fetchedContent}),s&&!i&&k.jsx("div",{className:x,children:k.jsx(l,{})}),o&&k.jsx("div",{className:x,children:k.jsx(c,{})})]})},Ss=r=>typeof r=="string"||typeof r=="number"||typeof r=="boolean"||r==null,sn=(r,e)=>{var t,n;return r==="assistant"?((t=e==null?void 0:e.assistant)==null?void 0:t.name)??"Assistant":r==="user"?((n=e==null?void 0:e.user)==null?void 0:n.name)??"User":""},on=(r,e)=>{var t,n;return r==="assistant"?(t=e==null?void 0:e.assistant)==null?void 0:t.avatar:r==="user"?(n=e==null?void 0:e.user)==null?void 0:n.avatar:void 0},oc=function(r,e){const{chatSegment:t,containerRef:n}=r,[s,o]=v.useState(!1),i=v.useMemo(()=>new Map,[]),a=v.useMemo(()=>new Map,[]),u=v.useRef(new Map),l=v.useRef(new Map);((m,h,f,x)=>{v.useEffect(()=>{if(m.length===0)return x.clear(),h.current.clear(),void f.current.clear();const S=new Set(x.keys()),y=new Set(m.map(b=>b.uid));S.forEach(b=>{y.has(b)||x.delete(b)}),new Set(h.current.keys()).forEach(b=>{y.has(b)||(h.current.delete(b),f.current.delete(b))})},[m])})(t.items,u,l,i),v.useImperativeHandle(e,()=>({streamChunk:(m,h)=>{const f=i.get(m);if(f!=null&&f.current){const x=f.current.streamChunk;(a.get(m)??[]).forEach(S=>{x(S)}),a.delete(m),x(h)}else{const x=a.get(m)??[];a.set(m,[...x,h])}},completeStream:m=>{const h=i.get(m);h!=null&&h.current?(h.current.completeStream(),i.delete(m)):o(!0)},cancelStreams:()=>{a.clear(),i.forEach(m=>{var h;(h=m.current)==null||h.cancelStream()})}}),[]),v.useEffect(()=>{a.size>0&&a.forEach((m,h)=>{const f=i.get(h);f!=null&&f.current&&(m.forEach(x=>{var S;(S=f==null?void 0:f.current)==null||S.streamChunk(x)}),a.delete(h),s&&(f.current.completeStream(),o(!1)))})});const c=v.useMemo(()=>t.status!=="active"?null:k.jsx("div",{className:"nlux-chatSegment-loader-container",children:r.Loader}),[t.status,r.Loader]),d=v.useMemo(()=>v.forwardRef(sc),[]),p=v.useCallback(m=>{var h;(h=r.onMarkdownStreamRendered)==null||h.call(r,t.uid,m)},[]);return t.items.length===0?null:k.jsxs("div",{ref:n,className:ka(t.status),children:[t.items.map(m=>ic(r,d,t,m,i,l,u,p)),c]})},ic=function(r,e,t,n,s,o,i,a){var p;const u=r.isInitialSegment;let l=s.get(n.uid);l||(l=v.createRef(),s.set(n.uid,l));let c=n.content,d="text";if(typeof c=="function"){const m=o.current.get(n.uid),h=i.current.get(n.uid);if(m&&h)c=h,d="server-component";else{i.current.delete(n.uid),o.current.delete(n.uid);try{const f=c;if(c=k.jsx(f,{}),!c||!v.isValidElement(c))throw new Error("Invalid React element returned from the AI chat content function.");d="server-component",i.current.set(n.uid,c),o.current.set(n.uid,f)}catch{return je(`The type of the AI chat content is an invalid function.
If you're looking to render a React Server Components, please refer to docs.nlkit.com/nlux for more information.
`),null}}}if(n.participantRole==="user")return n.status!=="complete"?($t(`User chat item should be always be in complete state — Current status: ${n.status} — Segment UID: ${t.uid}`),null):Ss(c)?k.jsx(e,{ref:l,uid:n.uid,status:"complete",direction:"sent",contentType:d,dataTransferMode:"batch",fetchedContent:n.content,markdownContainersController:r.markdownContainersController,layout:r.layout,messageOptions:r.messageOptions,isPartOfInitialSegment:u,name:sn(n.participantRole,r.personaOptions),avatar:on(n.participantRole,r.personaOptions),submitShortcutKey:r.submitShortcutKey,onPromptResubmit:m=>r.onPromptResubmit(r.chatSegment.uid,n.uid,m)},n.uid):($t(`User chat item should have primitive content (string, number, boolean, null) — Current content: ${JSON.stringify(c)} — Segment UID: ${t.uid}`),null);if(n.status==="complete")return n.dataTransferMode==="stream"?k.jsx(e,{ref:l,uid:n.uid,status:n.status,direction:"received",contentType:d,dataTransferMode:n.dataTransferMode,markdownContainersController:r.markdownContainersController,onMarkdownStreamRendered:a,streamedContent:c,streamedServerResponse:n.serverResponse,layout:r.layout,messageOptions:r.messageOptions,isPartOfInitialSegment:u,name:sn(n.participantRole,r.personaOptions),avatar:on(n.participantRole,r.personaOptions)},n.uid):d!=="text"||Ss(c)||(p=r.messageOptions)!=null&&p.responseRenderer?k.jsx(e,{ref:l,uid:n.uid,status:"complete",direction:"received",contentType:d,dataTransferMode:n.dataTransferMode,markdownContainersController:r.markdownContainersController,onMarkdownStreamRendered:a,fetchedContent:c,fetchedServerResponse:n.serverResponse,layout:r.layout,messageOptions:r.messageOptions,isPartOfInitialSegment:u,name:sn(n.participantRole,r.personaOptions),avatar:on(n.participantRole,r.personaOptions)},n.uid):(je(`When the type of the AI chat content is not primitive (object or array), a custom renderer must be provided — Current content: ${JSON.stringify(c)} — Segment UID: ${t.uid}`),null);if(n.status==="streaming"){const m=d==="server-component"&&v.isValidElement(c)?c:void 0;return k.jsx(e,{ref:l,uid:n.uid,status:"streaming",direction:"received",contentType:d,dataTransferMode:n.dataTransferMode,markdownContainersController:r.markdownContainersController,onMarkdownStreamRendered:a,fetchedContent:m,layout:r.layout,messageOptions:r.messageOptions,isPartOfInitialSegment:u,name:sn(n.participantRole,r.personaOptions),avatar:on(n.participantRole,r.personaOptions)},n.uid)}},ac=function(r,e){const{segments:t,personaOptions:n,conversationOptions:s,onLastActiveSegmentChange:o}=r,i=v.createRef();(function(c,d,p){const m=v.useMemo(()=>{const f=c.length>0?c[c.length-1]:void 0;return(f==null?void 0:f.status)==="active"?f.uid:void 0},[c]),h=v.useRef(void 0);v.useEffect(()=>{if(!p)return;const f=h.current;if(m===(f==null?void 0:f.uid)&&d.current===(f==null?void 0:f.div))return;const x=m&&d.current?{uid:m,div:d.current}:void 0;(x||h.current)&&(p(x),h.current=x)})})(t,i,o);const a=function(c){const d=v.useMemo(()=>new Map,[]);return v.useEffect(()=>{if(c.length===0)return void d.clear();const p=new Set(d.keys()),m=new Set(c.map(h=>h.uid));p.forEach(h=>{m.has(h)||d.delete(h)})},[c]),{get:p=>{var m;return(m=d.get(p))==null?void 0:m.current},getRef:p=>d.get(p),set:(p,m)=>{d.set(p,m)},remove:p=>{d.delete(p)}}}(t),u=(c=>v.useMemo(()=>{return d=c==null?void 0:c.layout,d??"bubbles";var d},[c==null?void 0:c.layout]))(s);v.useImperativeHandle(e,()=>({streamChunk:(c,d,p)=>{const m=a.get(c);m==null||m.streamChunk(d,p)},completeStream:(c,d)=>{const p=a.get(c);p==null||p.completeStream(d)},cancelSegmentStreams:c=>{const d=a.get(c);d==null||d.cancelStreams()}}),[]);const l=v.useMemo(()=>v.forwardRef(oc),[]);return k.jsx("div",{className:"nlux-chatSegments-container",children:t.map((c,d)=>{const p=d===t.length-1,m=c.uid==="initial";let h=a.getRef(c.uid);return h||(h=v.createRef(),a.set(c.uid,h)),k.jsx(l,{ref:h,containerRef:p?i:void 0,markdownContainersController:r.markdownContainersController,chatSegment:c,isInitialSegment:m,layout:u,personaOptions:n,messageOptions:r.messageOptions,Loader:r.Loader,submitShortcutKey:r.submitShortcutKey,onPromptResubmit:r.onPromptResubmit,onMarkdownStreamRendered:r.onMarkdownStreamRendered},c.uid)})})},cc={typing:"nlux-composer--typing","submitting-prompt":"nlux-composer--submitting","submitting-conversation-starter":"nlux-composer--submitting",waiting:"nlux-composer--waiting"},lc=()=>k.jsx("div",{className:"nlux-comp-cancelIcon",children:k.jsx("div",{className:"nlux-comp-cancelIcon-container"})}),uc=()=>k.jsx("div",{className:"nlux-comp-sendIcon",children:k.jsx("div",{className:"nlux-comp-sendIcon-container"})}),Fn=["submitting-prompt","submitting-edit","submitting-conversation-starter","submitting-external-message"],dc=r=>{const e=`nlux-comp-composer ${cc[r.status]||""}`,t=Fn.includes(r.status),n=!r.hasValidInput||r.status==="waiting"||Fn.includes(r.status),s=r.status==="typing"||r.status==="waiting",o=r.hideStopButton!==!0&&(Fn.includes(r.status)||r.status==="waiting"),i=v.useRef(null);v.useEffect(()=>{r.status==="typing"&&r.autoFocus&&i.current&&i.current.focus()},[r.status,r.autoFocus,i.current]);const a=v.useMemo(()=>c=>{var d;(d=r.onChange)==null||d.call(r,c.target.value)},[r.onChange]),u=v.useMemo(()=>()=>{var c;(c=r.onSubmit)==null||c.call(r)},[r.onSubmit]),l=v.useMemo(()=>c=>{Ho(c,r.submitShortcut)&&(c.preventDefault(),u())},[u,r.submitShortcut]);return k.jsxs("div",{className:e,children:[k.jsx("textarea",{tabIndex:0,ref:i,disabled:t,placeholder:r.placeholder,value:r.prompt,onChange:a,onKeyDown:l}),!o&&k.jsxs("button",{tabIndex:0,disabled:n,onClick:()=>r.onSubmit(),children:[s&&k.jsx(uc,{}),!s&&r.Loader]}),o&&k.jsx("button",{tabIndex:0,onClick:r.onCancel,children:k.jsx(lc,{})})]})},dr=r=>{var n;const e={},t=Object.keys(r);for(let s=0;s<t.length;s++){const o=t[s];o!=="personaOptions"&&o!=="messageOptions"&&o!=="adapter"&&o!=="events"&&Object.assign(e,{[o]:r[o]})}return r.personaOptions&&(e.personaOptions={},r.personaOptions.assistant&&(e.personaOptions.assistant={name:r.personaOptions.assistant.name,avatar:typeof r.personaOptions.assistant.avatar=="string"?r.personaOptions.assistant.avatar:"<REACT ELEMENT />",tagline:r.personaOptions.assistant.tagline}),r.personaOptions.user&&(e.personaOptions.user={name:r.personaOptions.user.name,avatar:typeof r.personaOptions.user.avatar=="string"?r.personaOptions.user.avatar:"<REACT ELEMENT />"})),r.messageOptions&&(e.messageOptions={...r.messageOptions,responseRenderer:r.messageOptions.responseRenderer?()=>null:void 0,promptRenderer:r.messageOptions.promptRenderer?()=>null:void 0}),(n=r.conversationOptions)!=null&&n.conversationStarters&&(e.conversationOptions={...r.conversationOptions,conversationStarters:r.conversationOptions.conversationStarters.map(s=>({...s,icon:s.icon?"<REACT ELEMENT />":void 0}))}),e};var pc=Object.defineProperty,an=(r,e,t)=>((n,s,o)=>s in n?pc(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(r,typeof e!="symbol"?e+"":e,t);class mc extends Error{constructor(e={}){super(e.message),an(this,"exceptionId"),an(this,"message"),an(this,"source"),an(this,"type"),this.message=e.message??"",this.source=e.source,this.type=this.constructor.name,this.exceptionId=e.exceptionId}}const hc=(r,e)=>{let t,n=e,s=r,o=!0;const i=((f,x)=>{let S=!1;if(typeof f!="function")throw new mc({source:"x/throttle",message:"Callback must be a function"});return(...y)=>{S||(f.apply(void 0,y),S=!0,setTimeout(function(){S=!1},x))}})((f=>{let x,S;return y=>{const b=y.target;if(!(b instanceof HTMLElement))return;const{scrollTop:E,clientHeight:w,scrollHeight:M}=b,$=M-30,N=Math.ceil(E+w)>=$,P=x===void 0||S===void 0?void 0:E>x&&S===M?"down":E<x&&S===M?"up":void 0;S=M,x=E,f({scrolledToBottom:N,scrollDirection:P})}})(({scrolledToBottom:f,scrollDirection:x})=>{o?x==="up"&&(o=!1):x==="down"&&f&&(o=!0)}),50),a=f=>{f.addEventListener("scroll",i)},u=f=>{f==null||f.removeEventListener("scroll",i)},l=f=>{(t==null?void 0:t.uid)===f&&(c==null||c.disconnect(),d==null||d.disconnect(),t=void 0,c=void 0,d=void 0)};let c,d;const p=()=>{s==null||s.scrollTo({top:5e4,behavior:"instant"})},m=()=>{s&&n&&o&&p()},h=()=>{m()};return a(s),{updateConversationContainer:f=>{u(s),a(f),s=f},updateProps:({autoScroll:f})=>{n=f},handleNewChatSegmentAdded:(f,x)=>{t&&(c==null||c.disconnect(),d==null||d.disconnect()),t={uid:f,container:x},c=new ResizeObserver(m),c.observe(x),d=new MutationObserver(h),d.observe(x,{childList:!0,subtree:!0,characterData:!0}),n&&p()},handleChatSegmentRemoved:f=>l(f),handleChatSegmentComplete:f=>l(f),destroy:()=>{t&&(l(t.uid),t=void 0),u(s),s=void 0}}},As=!0,wn=r=>{if(typeof r!="object"||r===null)return!1;const e=r;return(typeof e.streamText=="function"||typeof e.batchText=="function")&&["stream","batch"].includes(e.dataTransferMode)&&typeof e.id=="string"&&typeof e.info=="object"&&e.info!==null&&typeof e.preProcessAiBatchedMessage=="function"&&typeof e.preProcessAiStreamedChunk=="function"},Ie=(r,e=1)=>{setTimeout(()=>{r()},e)},fc=(r,e,t,n,s,o,i,a,u)=>new Promise(l=>{const c=Ze(),d=[],p=[];let m=!1,h=!1,f=!1;const x=wn(t),S={next:y=>{if(h||f)return;let b,E;if(x){const w=y,M=t.preProcessAiStreamedChunk(w,n);M!=null&&(b=M,E=w,d.push(b),p.push(E))}else b=y,d.push(b);b!=null?(m||m||(m=!0,Ie(()=>{s.forEach(w=>{w({uid:c,status:"streaming",time:new Date,participantRole:"assistant",dataTransferMode:"stream"})})})),Ie(()=>{i.forEach(w=>{w({chunk:b,messageId:c,serverResponse:E})})})):je("Adapter returned an undefined or null value from streamText. This chunk will be ignored.")},complete:()=>{h||f||(f=!0,Ie(()=>{const y={uid:c,status:"complete",content:d,contentType:"text",serverResponse:void 0,time:new Date,participantRole:"assistant",dataTransferMode:"stream"};o.forEach(b=>{b(y)}),l()}),Ie(()=>{const y={uid:r,status:"complete",items:[e,{uid:c,status:"complete",contentType:"text",content:d,serverResponse:p,time:new Date,participantRole:"assistant",dataTransferMode:"stream"}]};a.forEach(b=>{b(y)})}))},error:y=>{h||f||(h=!0,Ie(()=>{u.forEach(b=>{b("failed-to-stream-content",y)}),l()}))}};t.streamText(e.content,S,n)}),gc=(r,e,t)=>{if(!r)return(()=>{const y=new Set,b=Ze(),E={uid:b,status:"complete",items:[]};return Ie(()=>{y.forEach(w=>{w(E)}),y.clear()}),{segment:E,observable:{on:(w,M)=>{w==="complete"&&y.add(M)},removeListener:(w,M)=>{y.delete(M)},destroy:()=>{y.clear()},get segmentId(){return b}},dataTransferMode:"batch"}})();const n=e;if(n.streamText===void 0&&n.batchText===void 0&&n.streamServerComponent===void 0)return(y=>{const b=new Set,E=Ze(),w={uid:E,status:"error",items:[]};return Ie(()=>{b.forEach(M=>M(y)),b.clear()}),{segment:w,dataTransferMode:"stream",observable:{on:(M,$)=>{M==="error"&&b.add($)},removeListener:(M,$)=>{b.delete($)},destroy:()=>{b.clear()},get segmentId(){return E}}}})("no-data-transfer-mode-supported");const s=Ze(),o=(y=>({uid:Ze(),time:new Date,status:"complete",participantRole:"user",content:y,contentType:"text"}))(r);let i,a,u,l,c,d,p=new Set,m=new Set,h=new Set;Ie(()=>{p!=null&&p.size&&(p.forEach(y=>{y(o)}),p.clear(),p=void 0)});const f=(y=>{const b=[],E=y,w=y;(E==null?void 0:E.streamText)===void 0&&(w==null?void 0:w.streamServerComponent)===void 0||b.push("stream"),(E==null?void 0:E.batchText)!==void 0&&b.push("batch");const M=wn(y)?y:void 0,$=(M==null?void 0:M.dataTransferMode)??void 0,N=b.length===1?b[0]:"stream";return $??N})(e);(y=>"streamServerComponent"in y?"server-component":"text")(e)==="server-component"?(u=new Set,a=new Set,((y,b,E,w,M,$,N,P)=>new Promise((I,W)=>{try{const j=b.content,F=Ze(),D="assistant",V="streaming",me=new Date,re="stream";let ie,_;const A=()=>{Ie(()=>{$.forEach(U=>{ie&&_&&U({...ie,content:_,status:"complete"})})},20);const H={uid:y,status:"complete",items:[b,ie]};Ie(()=>{N.forEach(U=>{U(H)}),I()},20)},O=()=>{P.forEach(H=>{H("failed-to-stream-server-component",new Error("Failed to load content"))})};_=E.streamServerComponent(j,w,{onServerComponentReceived:A,onError:O}),ie={uid:F,content:_,contentType:"server-component",participantRole:D,status:V,time:me,dataTransferMode:re},Ie(()=>{M.forEach(H=>{H(ie)})},10)}catch(j){je(j);const F=j instanceof Error?j:typeof j=="string"?new Error(j):new Error("Unknown error");Ie(()=>{P.forEach(D=>D("failed-to-load-content",F))})}}))(s,o,e,t,a,u,m,h).finally(()=>{Ie(()=>S())})):f==="batch"?(i=new Set,(async(y,b,E,w,M,$,N)=>{try{const P=b.content,I=wn(E)?E:void 0,W=I!==void 0,j=Ze(),F="assistant",D="complete",V=new Date,me="batch";let re;if(W){const A=await I.batchText(P,w),O=I.preProcessAiBatchedMessage(A,w);O!=null&&(re={uid:j,content:O,contentType:"text",serverResponse:A,participantRole:F,status:D,time:V,dataTransferMode:me})}else re={uid:j,content:await E.batchText(P,w),contentType:"text",serverResponse:void 0,participantRole:F,status:D,time:V,dataTransferMode:me};if(!re)throw new Error("Response from adapter was undefined or cannot be processed");const ie=re;Ie(()=>{M.forEach(A=>{A(ie)})});const _={uid:y,status:"complete",items:[b,re]};Ie(()=>{$.forEach(A=>{A(_)})})}catch(P){je(P);const I=P instanceof Error?P:typeof P=="string"?new Error(P):new Error("Unknown error");Ie(()=>{N.forEach(W=>W("failed-to-load-content",I))})}})(s,o,e,t,i,m,h).finally(()=>{Ie(()=>S())})):(l=new Set,c=new Set,d=new Set,fc(s,o,e,t,l,c,d,m,h).finally(()=>{Ie(()=>S())}));const S=()=>{p==null||p.clear(),p=void 0,i==null||i.clear(),i=void 0,a==null||a.clear(),a=void 0,u==null||u.clear(),u=void 0,l==null||l.clear(),l=void 0,c==null||c.clear(),c=void 0,d==null||d.clear(),d=void 0,m==null||m.clear(),m=void 0,h==null||h.clear(),h=void 0};return{segment:{status:"active",uid:s,items:[]},dataTransferMode:f,observable:{get segmentId(){return s},on:(y,b)=>{y==="userMessageReceived"&&p?p.add(b):y==="aiMessageReceived"&&i?i.add(b):y==="aiServerComponentStreamStarted"&&a?a.add(b):y==="aiServerComponentStreamed"&&u?u.add(b):y==="aiMessageStreamStarted"&&l?l.add(b):y==="aiMessageStreamed"&&c?c.add(b):y==="aiChunkReceived"&&d?d.add(b):y==="complete"&&m?m.add(b):y==="error"&&h&&h.add(b)},removeListener:(y,b)=>{y!=="userMessageReceived"?y!=="aiMessageReceived"?y!=="aiMessageStreamStarted"?y!=="aiMessageStreamed"?y!=="aiChunkReceived"?y!=="complete"?y!=="error"||(h==null||h.delete(b)):m==null||m.delete(b):d==null||d.delete(b):c==null||c.delete(b):l==null||l.delete(b):i==null||i.delete(b):p==null||p.delete(b)},destroy:()=>S()}}},vc={"data-transfer-mode-not-supported":"Requested data transfer mode is not supported","no-data-transfer-mode-supported":"Adapter does not support any valid data transfer modes","connection-error":"Connection error","invalid-credentials":"Invalid credentials","invalid-api-key":"Invalid API key","http-server-side-error":"HTTP server side error","http-client-side-error":"HTTP client side error","failed-to-load-content":"Failed to load content","failed-to-stream-content":"Failed to stream content","failed-to-stream-server-component":"Failed to stream server component","failed-to-render-content":"Failed to display content"},yc=r=>{var b;const{aiChatProps:e,adapterToUse:t,prompt:n,composerOptions:s,showException:o,initialSegment:i,newSegments:a,cancelledSegmentIds:u,cancelledMessageIds:l,setChatSegments:c,setComposerStatus:d,setPrompt:p,conversationRef:m}=r,h=v.useMemo(()=>n.length>0,[n]),f=v.useRef(n);f.current=n;const x=v.useRef({newSegments:a,cancelledSegmentIds:u,cancelledMessageIds:l,setChatSegments:c,setComposerStatus:d,showException:o,setPrompt:p}),S=v.useRef({});v.useEffect(()=>{x.current={newSegments:a,cancelledSegmentIds:u,cancelledMessageIds:l,setChatSegments:c,setComposerStatus:d,showException:o,setPrompt:p}},[a,u,l,c,d,o,p]);const y=((E,w,M)=>v.useMemo(()=>{const $=(P=>{const I=[];return P.forEach(W=>{W.items.forEach(j=>{if(j.status==="complete"){if(j.participantRole==="assistant")I.push({role:"assistant",message:j.content});else if(j.participantRole==="user")return I.push({role:"user",message:j.content})}})}),I})(w),N=M==="max"||M===void 0?$:M>0?$.slice(-M):void 0;return{aiChatProps:dr(E),conversationHistory:N}},[E,w,M]))(e,i?[i,...a]:a,(b=e.conversationOptions)==null?void 0:b.historyPayloadSize);return v.useEffect(()=>{S.current=e.events||{}},[e.events]),v.useCallback(()=>{if(!t)return void je("No valid adapter was provided to AiChat component");if(!h||s!=null&&s.disableSubmitButton)return;d("submitting-prompt");const E=n,w=new Set,M=wn(t)?t:t.streamServerComponent?{streamServerComponent:t.streamServerComponent}:{batchText:t.batchText,streamText:t.streamText},{segment:$,observable:N}=gc(E,M,y);if($.status==="error")return je("Error occurred while submitting prompt"),o("Error occurred while submitting prompt"),d("typing"),void(f.current===""&&p(E));const P=I=>{const W=x.current.newSegments.map(j=>j.uid!==N.segmentId?j:{...j,items:[...j.items,{...I}]});x.current.setChatSegments(W)};N.on("userMessageReceived",I=>{var W,j;(W=x.current)!=null&&W.cancelledMessageIds.includes(I.uid)||(P(I),(j=S.current)!=null&&j.messageSent&&S.current.messageSent({uid:I.uid,message:I.content}))}),N.on("aiMessageStreamStarted",I=>{var W,j;(W=x.current)!=null&&W.cancelledMessageIds.includes(I.uid)||(P(I),x.current.setComposerStatus("waiting"),f.current===E&&x.current.setPrompt(""),w.add(I.uid),(j=S.current)!=null&&j.messageStreamStarted&&S.current.messageStreamStarted({uid:I.uid}))}),N.on("aiServerComponentStreamStarted",I=>{var W,j,F;(W=x.current)!=null&&W.cancelledMessageIds.includes(I.uid)||(P(I),x.current.setComposerStatus("waiting"),f.current===E&&x.current.setPrompt(""),w.add(I.uid),(j=S.current)!=null&&j.serverComponentStreamStarted&&((F=S.current)==null||F.serverComponentStreamStarted({uid:I.uid})))}),N.on("aiServerComponentStreamed",I=>{var W,j,F;(W=x.current)!=null&&W.cancelledMessageIds.includes(I.uid)||(j=S.current)!=null&&j.serverComponentRendered&&!x.current.cancelledMessageIds.includes(I.uid)&&((F=S.current)==null||F.serverComponentRendered({uid:I.uid}))}),N.on("aiMessageReceived",I=>{var j,F;if((j=x.current)!=null&&j.cancelledMessageIds.includes(I.uid))return;const W=x.current.newSegments.map(D=>D.uid!==N.segmentId?D:{...D,items:[...D.items,{...I}]});x.current.setChatSegments(W),(F=S.current)!=null&&F.messageReceived&&S.current.messageReceived({uid:I.uid,message:I.content})}),N.on("complete",I=>{var j;if((j=x.current)!=null&&j.cancelledMessageIds.includes(I.uid))return;x.current.setComposerStatus("typing");const W=x.current.newSegments.map(F=>F.uid!==N.segmentId?F:{...I});x.current.setChatSegments(W),f.current===E&&p(""),w.size>0&&(w.forEach(F=>{requestAnimationFrame(()=>{var D;(D=m.current)==null||D.completeStream(N.segmentId,F)})}),w.clear())}),N.on("aiChunkReceived",({messageId:I,chunk:W})=>{var j,F;(j=x.current)!=null&&j.cancelledMessageIds.includes(I)||((F=m.current)==null||F.streamChunk($.uid,I,W))}),N.on("aiMessageStreamed",I=>{var W,j,F;(W=x.current)!=null&&W.cancelledMessageIds.includes(I.uid)||(j=S.current)!=null&&j.messageReceived&&((F=S.current)==null||F.messageReceived({uid:I.uid,message:I.content}))}),N.on("error",(I,W)=>{var D;const j=x.current.newSegments.filter(V=>V.uid!==$.uid),F=vc[I];x.current.setChatSegments(j),x.current.setComposerStatus("typing"),x.current.showException(F),f.current===""&&p(E),(D=S.current)!=null&&D.error&&S.current.error({errorId:I,message:F,errorObject:W})}),x.current.setChatSegments([...x.current.newSegments,$])},[n,t,y,o,x,s==null?void 0:s.disableSubmitButton])},_o="nlux-comp-welcomeMessage",qo=r=>k.jsxs("div",{className:_o,children:[k.jsx(No,{avatar:r.avatar,name:r.name}),k.jsx("div",{className:"nlux-comp-welcomeMessage-personaName",children:r.name}),r.message&&k.jsx("div",{className:"nlux-comp-welcomeMessage-text",children:r.message})]}),Es=({children:r})=>k.jsx("div",{className:_o,children:r}),bc=()=>{const r=v.useMemo(()=>"data:image/png;base64,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",[]);return k.jsx(qo,{avatar:r,name:""})},xc=r=>{const{onConversationStarterSelected:e}=r;return k.jsx("div",{className:"nlux-comp-conversationStarters",children:r.items.map((t,n)=>k.jsxs("button",{className:"nlux-comp-conversationStarter",onClick:()=>e(t),children:[k.jsx(wc,{icon:t.icon}),k.jsx("span",{className:"nlux-comp-conversationStarter-prompt",children:t.label??t.prompt})]},n))})},wc=({icon:r})=>r?typeof r=="string"?k.jsx("img",{src:r,width:16}):k.jsx("div",{className:"nlux-comp-conversationStarter-icon-container",children:r}):null,kc=r=>{const{segments:e,personaOptions:t,conversationOptions:n,userDefinedGreeting:s}=r,o=v.useMemo(()=>e.some(d=>d.items.length>0),[e]),i=v.useMemo(()=>!s&&!o&&(t==null?void 0:t.assistant)===void 0&&(n==null?void 0:n.showWelcomeMessage)!==!1,[o,t==null?void 0:t.assistant,n==null?void 0:n.showWelcomeMessage,s]),a=v.useMemo(()=>!s&&!o&&(t==null?void 0:t.assistant)!==void 0&&(n==null?void 0:n.showWelcomeMessage)!==!1,[s,o,t==null?void 0:t.assistant,n==null?void 0:n.showWelcomeMessage]),u=v.useMemo(()=>!o&&(n==null?void 0:n.conversationStarters)&&(n==null?void 0:n.conversationStarters.length)>0,[o,n==null?void 0:n.conversationStarters]),l=v.useMemo(()=>s!==void 0&&(n==null?void 0:n.showWelcomeMessage)!==!1,[s]);v.useEffect(()=>{s&&(n==null?void 0:n.showWelcomeMessage)===!1&&$t("Configuration conflict: The greeting UI override provided via <AiChatUI.Greeting> will not be shown because conversationOptions.showWelcomeMessage is set to false.")},[n==null?void 0:n.showWelcomeMessage,s]);const c=!(i||a||l||o);return k.jsxs(k.Fragment,{children:[i&&k.jsx(bc,{}),a&&k.jsx(qo,{name:t.assistant.name,avatar:t.assistant.avatar,message:t.assistant.tagline}),l&&k.jsx(Es,{children:s}),c&&k.jsx(Es,{children:null}),k.jsx("div",{className:"nlux-conversationStarters-container",children:u&&k.jsx(xc,{items:n.conversationStarters??[],onConversationStarterSelected:r.onConversationStarterSelected})})]})},Ts=()=>k.jsx("div",{className:"nlux-comp-messageLoader",children:k.jsx("div",{className:"nlux-comp-loaderContainer",children:k.jsx("span",{className:"spinning-loader"})})}),Ps={Loader:r=>k.jsx(k.Fragment,{children:r.children}),Greeting:r=>k.jsx(k.Fragment,{children:r.children})},Rs=v.createContext({}),Cc=function(r){var xe,L,Pe,Fe,Be;const{adapter:e,className:t,initialConversation:n,conversationOptions:s,composerOptions:o,displayOptions:i}=r,{themeId:a,colorScheme:u}=i??{},l=v.useRef(null),c=v.useRef(null),d=v.useRef(void 0),p=v.useRef(null),m=((C,B)=>{const[X,oe]=v.useState(),[ye,be]=v.useState(),ae=v.useRef(X),Ae=v.useRef(B);return v.useEffect(()=>{const R=C.current||void 0;R!==ye&&be(R)}),v.useEffect(()=>{ye?ae.current?ae.current.updateConversationContainer(ye):(ae.current=hc(ye,Ae.current??As),oe(ae.current)):ae.current&&(ae.current.destroy(),oe(void 0),ae.current=void 0)},[ye]),v.useEffect(()=>{Ae.current=B,ae.current&&ae.current.updateProps({autoScroll:B??As})},[B]),X})(c,s==null?void 0:s.autoScroll),h=v.useMemo(()=>p.current?wa(p.current):void 0,[p.current]),f=(()=>{const C={},B=new Set;return v.useMemo(()=>({getStreamingDomElement:X=>{if(B.has(X)&&B.delete(X),C[X]===void 0){const oe=document.createElement("div");oe.setAttribute("nlux-message-id",X),oe.className="nlux-markdown-container",C[X]=oe}return C[X]},deleteStreamingDomElement:X=>{B.add(X),setTimeout(()=>{B.forEach(oe=>{C[oe]&&(C[oe].remove(),delete C[oe])}),B.clear()},1e3)}}),[])})(),{PrimitivesContextProvider:x}=function(C){var oe,ye,be,ae,Ae,R,q,le,ce;const[B,X]=v.useState(C);return v.useEffect(()=>{X(C)},[(oe=C==null?void 0:C.messageOptions)==null?void 0:oe.htmlSanitizer,(ye=C==null?void 0:C.messageOptions)==null?void 0:ye.syntaxHighlighter,(be=C==null?void 0:C.messageOptions)==null?void 0:be.markdownLinkTarget,(ae=C==null?void 0:C.messageOptions)==null?void 0:ae.showCodeBlockCopyButton,(Ae=C==null?void 0:C.messageOptions)==null?void 0:Ae.skipStreamingAnimation,(R=C==null?void 0:C.messageOptions)==null?void 0:R.streamingAnimationSpeed,(q=C==null?void 0:C.messageOptions)==null?void 0:q.waitTimeBeforeStreamCompletion,(le=C==null?void 0:C.messageOptions)==null?void 0:le.responseRenderer,(ce=C==null?void 0:C.messageOptions)==null?void 0:ce.promptRenderer]),{PrimitivesContextProvider:v.useMemo(()=>({children:Te})=>k.jsx(Rs.Provider,{value:B,children:Te}),[B]),primitivesContext:Rs}}({messageOptions:r.messageOptions}),[S,y]=v.useState(""),[b,E]=v.useState("typing"),[w,M]=v.useState(),[$,N]=v.useState([]),[P,I]=v.useState([]),[W,j]=v.useState([]),F=v.useMemo(()=>w?[w,...$]:$,[w,$]),D=v.useMemo(()=>(C=>{const B=C;if(typeof(B==null?void 0:B.create)=="function")return B.create();if(typeof(B==null?void 0:B.batchText)=="function"||typeof(B==null?void 0:B.streamText)=="function"||typeof(B==null?void 0:B.streamServerComponent)=="function")return C;je("Unable to determine the type of the adapter! Missing batchText or streamText method.")})(e),[e]),V=(C=>v.useMemo(()=>{const B={minWidth:"280px",minHeight:"280px"};return C!=null&&C.width&&(B.width=C.width),C!=null&&C.height&&(B.height=C.height),B},[C==null?void 0:C.width,C==null?void 0:C.height]))(i),me=v.useMemo(()=>(C=>{const B=["nlux-AiChat-root"],X=`nlux-theme-${C.themeId||"nova"}`;return B.push(X),C.className&&B.push(C.className),B})({className:t,themeId:a}).join(" "),[t,a]),re=v.useMemo(()=>{var C;return u!=="auto"&&u?u:typeof globalThis!==void 0&&globalThis.matchMedia&&((C=globalThis.matchMedia("(prefers-color-scheme: dark)"))!=null&&C.matches)?"dark":"light"},[u]),ie=v.useCallback(C=>h==null?void 0:h.displayException(C),[h]),_=function(C,B,X,oe,ye,be,ae,Ae){return v.useCallback(()=>{var q;const R=C.length>0?C[C.length-1]:void 0;(R==null?void 0:R.status)==="active"&&(oe(C.slice(0,-1)),ye([...B,R.uid]),be([...X,...R.items.map(le=>le.uid)]),(q=ae.current)==null||q.cancelSegmentStreams(R.uid)),Ae("typing")},[C,B,X,oe,ye,be,ae,Ae])}($,P,W,N,I,j,l,E),A=v.useCallback(C=>y(C),[y]),O=yc({aiChatProps:r,adapterToUse:D,conversationRef:l,initialSegment:w,newSegments:$,cancelledMessageIds:W,cancelledSegmentIds:P,prompt:S,composerOptions:o,showException:ie,setChatSegments:N,setComposerStatus:E,setPrompt:y}),H=((C,B,X,oe,ye,be)=>v.useCallback((ae,Ae,R)=>{if(ae==="initial"&&C){const ce=[];for(const Ne of C.items){if(Ne.uid===Ae)break;ce.push(Ne)}const Te={...C,items:ce};return B(Te),oe([]),ye(R),void be("submitting-edit")}const q=X.findIndex(ce=>ce.uid===ae),le=X.slice(0,q);oe(le),ye(R),be("submitting-edit")},[X,oe,C,B,ye,be]))(w,M,$,N,y,E),U=v.useCallback((C,B)=>{var X;(X=r.events)!=null&&X.messageRendered&&r.events.messageRendered({uid:B})},[]),Q=v.useCallback(C=>{y(C.prompt),E("submitting-conversation-starter")},[y,E]),ee=((C,B)=>v.useCallback(X=>{C&&X&&(B.current=X.uid,C.handleNewChatSegmentAdded(X.uid,X.div))},[C]))(m,d);v.useEffect(()=>{b!=="submitting-conversation-starter"&&b!=="submitting-external-message"&&b!=="submitting-edit"||O()},[b,O]),v.useEffect(()=>M(n?{uid:"initial",status:"complete",items:n.map((C,B)=>{if(C.role==="assistant"||C.role==="user")return C.role==="user"?typeof C.message!="string"?void je(`Invalid message type for item at index ${B} in initial conversation: When role is "user", message must be a string`):{uid:Ze(),time:new Date,status:"complete",participantRole:"user",content:C.message}:{uid:Ze(),time:new Date,status:"complete",participantRole:"assistant",content:C.message,serverResponse:C.serverResponse,dataTransferMode:"batch"};je(`Invalid role for item at index ${B} in initial conversation: Role must be "assistant" or "user"`)}).filter(C=>C!==void 0)}:void 0),[n]),v.useEffect(()=>{var C;w&&((C=c.current)==null||C.scrollTo({behavior:"smooth",top:5e4}))},[w]);const Y=v.useRef(void 0);v.useEffect(()=>{const C=r.api;Y.current=C,typeof(C==null?void 0:C.__setHost)=="function"?C.__setHost({sendMessage:B=>{y(B),E("submitting-external-message")},resetConversation:()=>{N([]),M(void 0)},cancelLastMessageRequest:_}):$t(`API object passed was is not compatible with AiChat.
Only use API objects created by the useAiChatApi() hook.`)},[r.api,_,y,E,N,M]),v.useEffect(()=>()=>{var C;typeof((C=Y.current)==null?void 0:C.__unsetHost)=="function"&&(Y.current.__unsetHost(),Y.current=void 0)},[]),(C=>{v.useEffect(()=>{var X;const B=(X=C.events)==null?void 0:X.ready;B&&B({aiChatProps:dr(C)})},[])})(r),((C,B)=>{var ye;const X=v.useRef(),oe=v.useRef();v.useEffect(()=>{X.current=()=>{const be=[];return B.forEach(ae=>{ae.items&&ae.items.length!==0&&ae.items.forEach(Ae=>{Ae.status==="complete"&&(Ae.participantRole!=="assistant"?Ae.participantRole==="user"&&be.push({role:"user",message:Ae.content}):be.push({role:"assistant",message:Ae.content}))})}),be}},[B]),v.useEffect(()=>{var be;oe.current=(be=C.events)==null?void 0:be.preDestroy},[(ye=C.events)==null?void 0:ye.preDestroy]),v.useEffect(()=>()=>{var ae;const be=oe.current;be&&(be({aiChatProps:dr(C),conversationHistory:((ae=X.current)==null?void 0:ae.call(X))??[]}),X.current=void 0)},[])})(r,F);const K=v.useMemo(()=>v.forwardRef(ac),[]),G=(C=>{const B=v.useMemo(()=>C.children?Array.isArray(C.children)?C.children:[C.children]:[],[C.children]);return{Loader:v.useMemo(()=>B.length===0?k.jsx(Ts,{}):B.find(X=>X.type===Ps.Loader)||k.jsx(Ts,{}),[B]),Greeting:v.useMemo(()=>{if(B.length!==0)return B.find(X=>X.type===Ps.Greeting)},[B])}})(r),te=S.length>0,J=F.length===0?"nlux-chatRoom-starting":"nlux-chatRoom-active";return D?k.jsx(x,{children:k.jsxs("div",{className:me,style:V,"data-color-scheme":re,children:[k.jsx("div",{className:"nlux-comp-exceptionBox",ref:p}),k.jsxs("div",{className:`nlux-chatRoom-container ${J}`,children:[k.jsx("div",{className:"nlux-launchPad-container",children:k.jsx(kc,{segments:F,onConversationStarterSelected:Q,conversationOptions:s,personaOptions:r.personaOptions,userDefinedGreeting:G.Greeting})}),k.jsx("div",{className:"nlux-conversation-container",ref:c,children:k.jsx(K,{ref:l,segments:F,conversationOptions:r.conversationOptions,personaOptions:r.personaOptions,messageOptions:r.messageOptions,onLastActiveSegmentChange:ee,Loader:G.Loader,markdownContainersController:f,submitShortcutKey:(xe=r.composerOptions)==null?void 0:xe.submitShortcut,onPromptResubmit:H,onMarkdownStreamRendered:U})}),k.jsx("div",{className:"nlux-composer-container",children:k.jsx(dc,{status:b,prompt:S,hasValidInput:te,placeholder:(L=r.composerOptions)==null?void 0:L.placeholder,autoFocus:(Pe=r.composerOptions)==null?void 0:Pe.autoFocus,submitShortcut:(Fe=r.composerOptions)==null?void 0:Fe.submitShortcut,hideStopButton:(Be=r.composerOptions)==null?void 0:Be.hideStopButton,onChange:A,onSubmit:O,onCancel:_,Loader:G.Loader})})]})]})}):($t("AiChat: No valid adapter provided. The component will not render."),k.jsx(k.Fragment,{}))};var Uo={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Is=v.createContext&&v.createContext(Uo),Sc=["attr","size","title"];function Ac(r,e){if(r==null)return{};var t=Ec(r,e),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(s=0;s<o.length;s++)n=o[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function Ec(r,e){if(r==null)return{};var t={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(e.indexOf(n)>=0)continue;t[n]=r[n]}return t}function kn(){return kn=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},kn.apply(this,arguments)}function Os(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,n)}return t}function Cn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Os(Object(t),!0).forEach(function(n){Tc(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Os(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Tc(r,e,t){return e=Pc(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Pc(r){var e=Rc(r,"string");return typeof e=="symbol"?e:e+""}function Rc(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Yo(r){return r&&r.map((e,t)=>v.createElement(e.tag,Cn({key:t},e.attr),Yo(e.child)))}function Ic(r){return e=>v.createElement(Oc,kn({attr:Cn({},r.attr)},e),Yo(r.child))}function Oc(r){var e=t=>{var{attr:n,size:s,title:o}=r,i=Ac(r,Sc),a=s||t.size||"1em",u;return t.className&&(u=t.className),r.className&&(u=(u?u+" ":"")+r.className),v.createElement("svg",kn({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,i,{className:u,style:Cn(Cn({color:r.color||t.color},t.style),r.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),o&&v.createElement("title",null,o),r.children)};return Is!==void 0?v.createElement(Is.Consumer,null,t=>e(t)):e(Uo)}function Mc(r){return Ic({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(r)}var Wo=(r=>(r.Text="Text",r.ImageUrl="ImageUrl",r))(Wo||{}),Qo=(r=>(r.SystemMessage="system",r.AIMessage="ai",r.HumanMessage="human",r))(Qo||{}),Xo=(r=>(r.Auto="Auto",r.Low="Low",r.High="High",r))(Xo||{});async function Zo(r){const{files:e,message:t}=r;if(!e||!e.length)return t;{let n=await Promise.all(e.map(async s=>{const o=await Lc(s,r.resizeOptions);if(!o)throw new Error("resize failed");const i=await jc(o);if(!i)throw new Error("base64 failed");return["ImageUrl",i,null]}));return n.push(["Text",t,null]),n}}const Lc=async(r,e)=>{const t=(e==null?void 0:e.maxSize)||256,n=document.createElement("canvas"),s=n.getContext("2d");if(!s)throw new Error("ctx is not available");n.width=t,n.height=t;const o=await createImageBitmap(r),{width:i,height:a}=o,u=Math.max(t/i,t/a),l=(t-i*u)/2,c=(t-a*u)/2;return s.drawImage(o,0,0,i,a,l,c,i*u,a*u),new Promise(d=>{n.toBlob(p=>{d(p)})})};async function jc(r){return new Promise((e,t)=>{const n=new FileReader;n.onloadend=()=>e(n.result),n.readAsDataURL(r)})}async function Bc(r,e){const t=r.getReader();let n;for(;!(n=await t.read()).done;)e(n.value)}function Dc(r){let e,t,n,s=!1;return function(i){e===void 0?(e=i,t=0,n=-1):e=Fc(e,i);const a=e.length;let u=0;for(;t<a;){s&&(e[t]===10&&(u=++t),s=!1);let l=-1;for(;t<a&&l===-1;++t)switch(e[t]){case 58:n===-1&&(n=t-u);break;case 13:s=!0;case 10:l=t;break}if(l===-1)break;r(e.subarray(u,l),n),u=t,n=-1}u===a?e=void 0:u!==0&&(e=e.subarray(u),t-=u)}}function zc(r,e,t){let n=Ms();const s=new TextDecoder;return function(i,a){if(i.length===0)t==null||t(n),n=Ms();else if(a>0){const u=s.decode(i.subarray(0,a)),l=a+(i[a+1]===32?2:1),c=s.decode(i.subarray(l));switch(u){case"data":n.data=n.data?n.data+`
`+c:c;break;case"event":n.event=c;break;case"id":r(n.id=c);break;case"retry":const d=parseInt(c,10);isNaN(d)||e(n.retry=d);break}}}}function Fc(r,e){const t=new Uint8Array(r.length+e.length);return t.set(r),t.set(e,r.length),t}function Ms(){return{data:"",event:"",id:"",retry:void 0}}var Hc=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t};const pr="text/event-stream",$c=1e3,Ls="last-event-id";function Nc(r,e){var{signal:t,headers:n,onopen:s,onmessage:o,onclose:i,onerror:a,openWhenHidden:u,fetch:l}=e,c=Hc(e,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise((d,p)=>{const m=Object.assign({},n);m.accept||(m.accept=pr);let h;function f(){h.abort(),document.hidden||w()}u||document.addEventListener("visibilitychange",f);let x=$c,S=0;function y(){document.removeEventListener("visibilitychange",f),window.clearTimeout(S),h.abort()}t==null||t.addEventListener("abort",()=>{y(),d()});const b=l??window.fetch,E=s??_c;async function w(){var M;h=new AbortController;try{const $=await b(r,Object.assign(Object.assign({},c),{headers:m,signal:h.signal}));await E($),await Bc($.body,Dc(zc(N=>{N?m[Ls]=N:delete m[Ls]},N=>{x=N},o))),i==null||i(),y(),d()}catch($){if(!h.signal.aborted)try{const N=(M=a==null?void 0:a($))!==null&&M!==void 0?M:x;window.clearTimeout(S),S=window.setTimeout(w,N)}catch(N){y(),p(N)}}}w()})}function _c(r){const e=r.headers.get("content-type");if(!(e!=null&&e.startsWith(pr)))throw new Error(`Expected content-type to be ${pr}, Actual: ${e}`)}const qc="https://api.dev.langdb.ai";class Hn extends Error{}const Uc=r=>{const{files:e,fileResizeOptions:t}=r,s=`${r.serverUrl||qc}/stream`,[o,i]=v.useState(r.threadId),{modelName:a,agentParams:u}=r,l={"Content-Type":"application/json"};return r.publicId&&(l["X-PUBLIC-APPLICATION-ID"]=r.publicId),{streamText:async(c,d)=>{var p;if(!r.publicId){const m=await((p=r.getAccessToken)==null?void 0:p.call(r));if(!m){d.error(new Error("Failed to get the user token"));return}l.Authorization=`Bearer ${m}`}try{const m=await Zo({files:e,message:c,resizeOptions:t}),h={model_name:a,parameters:u||{},user_id:r.userId||"",thread_id:o,message:m};await Nc(s,{method:"POST",body:JSON.stringify(h),headers:l,async onopen(f){if(f.ok&&f.headers.get("content-type")==="text/event-stream"){const x=f.headers.get("X-Thread-Id");if(x&&i(x),r.responseCallback){const S=f==null?void 0:f.headers.get("x-trace-id");r.responseCallback({traceId:S,modelName:a})}if(!f.body)throw new Hn("No body found");return}else if(f.status>=400&&f.status<500&&f.status!==429){const x=await f.text();throw new Hn(x||`${f.status}: Failed to send message to the server`)}else return},onmessage(f){if(f.event)throw new Hn(f.data);d.next(f.data)},onclose(){},onerror(f){throw f}})}catch(m){const h=new Error(m.toString());r.responseCallback&&r.responseCallback({error:h,modelName:a}),d.error(h)}d.complete()}}};var mr={exports:{}},cn={exports:{}},de={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var js;function Yc(){if(js)return de;js=1;var r=typeof Symbol=="function"&&Symbol.for,e=r?Symbol.for("react.element"):60103,t=r?Symbol.for("react.portal"):60106,n=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,o=r?Symbol.for("react.profiler"):60114,i=r?Symbol.for("react.provider"):60109,a=r?Symbol.for("react.context"):60110,u=r?Symbol.for("react.async_mode"):60111,l=r?Symbol.for("react.concurrent_mode"):60111,c=r?Symbol.for("react.forward_ref"):60112,d=r?Symbol.for("react.suspense"):60113,p=r?Symbol.for("react.suspense_list"):60120,m=r?Symbol.for("react.memo"):60115,h=r?Symbol.for("react.lazy"):60116,f=r?Symbol.for("react.block"):60121,x=r?Symbol.for("react.fundamental"):60117,S=r?Symbol.for("react.responder"):60118,y=r?Symbol.for("react.scope"):60119;function b(w){if(typeof w=="object"&&w!==null){var M=w.$$typeof;switch(M){case e:switch(w=w.type,w){case u:case l:case n:case o:case s:case d:return w;default:switch(w=w&&w.$$typeof,w){case a:case c:case h:case m:case i:return w;default:return M}}case t:return M}}}function E(w){return b(w)===l}return de.AsyncMode=u,de.ConcurrentMode=l,de.ContextConsumer=a,de.ContextProvider=i,de.Element=e,de.ForwardRef=c,de.Fragment=n,de.Lazy=h,de.Memo=m,de.Portal=t,de.Profiler=o,de.StrictMode=s,de.Suspense=d,de.isAsyncMode=function(w){return E(w)||b(w)===u},de.isConcurrentMode=E,de.isContextConsumer=function(w){return b(w)===a},de.isContextProvider=function(w){return b(w)===i},de.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===e},de.isForwardRef=function(w){return b(w)===c},de.isFragment=function(w){return b(w)===n},de.isLazy=function(w){return b(w)===h},de.isMemo=function(w){return b(w)===m},de.isPortal=function(w){return b(w)===t},de.isProfiler=function(w){return b(w)===o},de.isStrictMode=function(w){return b(w)===s},de.isSuspense=function(w){return b(w)===d},de.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===n||w===l||w===o||w===s||w===d||w===p||typeof w=="object"&&w!==null&&(w.$$typeof===h||w.$$typeof===m||w.$$typeof===i||w.$$typeof===a||w.$$typeof===c||w.$$typeof===x||w.$$typeof===S||w.$$typeof===y||w.$$typeof===f)},de.typeOf=b,de}var pe={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bs;function Wc(){return Bs||(Bs=1,process.env.NODE_ENV!=="production"&&function(){var r=typeof Symbol=="function"&&Symbol.for,e=r?Symbol.for("react.element"):60103,t=r?Symbol.for("react.portal"):60106,n=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,o=r?Symbol.for("react.profiler"):60114,i=r?Symbol.for("react.provider"):60109,a=r?Symbol.for("react.context"):60110,u=r?Symbol.for("react.async_mode"):60111,l=r?Symbol.for("react.concurrent_mode"):60111,c=r?Symbol.for("react.forward_ref"):60112,d=r?Symbol.for("react.suspense"):60113,p=r?Symbol.for("react.suspense_list"):60120,m=r?Symbol.for("react.memo"):60115,h=r?Symbol.for("react.lazy"):60116,f=r?Symbol.for("react.block"):60121,x=r?Symbol.for("react.fundamental"):60117,S=r?Symbol.for("react.responder"):60118,y=r?Symbol.for("react.scope"):60119;function b(L){return typeof L=="string"||typeof L=="function"||L===n||L===l||L===o||L===s||L===d||L===p||typeof L=="object"&&L!==null&&(L.$$typeof===h||L.$$typeof===m||L.$$typeof===i||L.$$typeof===a||L.$$typeof===c||L.$$typeof===x||L.$$typeof===S||L.$$typeof===y||L.$$typeof===f)}function E(L){if(typeof L=="object"&&L!==null){var Pe=L.$$typeof;switch(Pe){case e:var Fe=L.type;switch(Fe){case u:case l:case n:case o:case s:case d:return Fe;default:var Be=Fe&&Fe.$$typeof;switch(Be){case a:case c:case h:case m:case i:return Be;default:return Pe}}case t:return Pe}}}var w=u,M=l,$=a,N=i,P=e,I=c,W=n,j=h,F=m,D=t,V=o,me=s,re=d,ie=!1;function _(L){return ie||(ie=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),A(L)||E(L)===u}function A(L){return E(L)===l}function O(L){return E(L)===a}function H(L){return E(L)===i}function U(L){return typeof L=="object"&&L!==null&&L.$$typeof===e}function Q(L){return E(L)===c}function ee(L){return E(L)===n}function Y(L){return E(L)===h}function K(L){return E(L)===m}function G(L){return E(L)===t}function te(L){return E(L)===o}function J(L){return E(L)===s}function xe(L){return E(L)===d}pe.AsyncMode=w,pe.ConcurrentMode=M,pe.ContextConsumer=$,pe.ContextProvider=N,pe.Element=P,pe.ForwardRef=I,pe.Fragment=W,pe.Lazy=j,pe.Memo=F,pe.Portal=D,pe.Profiler=V,pe.StrictMode=me,pe.Suspense=re,pe.isAsyncMode=_,pe.isConcurrentMode=A,pe.isContextConsumer=O,pe.isContextProvider=H,pe.isElement=U,pe.isForwardRef=Q,pe.isFragment=ee,pe.isLazy=Y,pe.isMemo=K,pe.isPortal=G,pe.isProfiler=te,pe.isStrictMode=J,pe.isSuspense=xe,pe.isValidElementType=b,pe.typeOf=E}()),pe}var Ds;function Ko(){return Ds||(Ds=1,process.env.NODE_ENV==="production"?cn.exports=Yc():cn.exports=Wc()),cn.exports}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var $n,zs;function Qc(){if(zs)return $n;zs=1;var r=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable;function n(o){if(o==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(o)}function s(){try{if(!Object.assign)return!1;var o=new String("abc");if(o[5]="de",Object.getOwnPropertyNames(o)[0]==="5")return!1;for(var i={},a=0;a<10;a++)i["_"+String.fromCharCode(a)]=a;var u=Object.getOwnPropertyNames(i).map(function(c){return i[c]});if(u.join("")!=="0123456789")return!1;var l={};return"abcdefghijklmnopqrst".split("").forEach(function(c){l[c]=c}),Object.keys(Object.assign({},l)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return $n=s()?Object.assign:function(o,i){for(var a,u=n(o),l,c=1;c<arguments.length;c++){a=Object(arguments[c]);for(var d in a)e.call(a,d)&&(u[d]=a[d]);if(r){l=r(a);for(var p=0;p<l.length;p++)t.call(a,l[p])&&(u[l[p]]=a[l[p]])}}return u},$n}var Nn,Fs;function Lr(){if(Fs)return Nn;Fs=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Nn=r,Nn}var _n,Hs;function Go(){return Hs||(Hs=1,_n=Function.call.bind(Object.prototype.hasOwnProperty)),_n}var qn,$s;function Xc(){if($s)return qn;$s=1;var r=function(){};if(process.env.NODE_ENV!=="production"){var e=Lr(),t={},n=Go();r=function(o){var i="Warning: "+o;typeof console<"u"&&console.error(i);try{throw new Error(i)}catch{}}}function s(o,i,a,u,l){if(process.env.NODE_ENV!=="production"){for(var c in o)if(n(o,c)){var d;try{if(typeof o[c]!="function"){var p=Error((u||"React class")+": "+a+" type `"+c+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof o[c]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw p.name="Invariant Violation",p}d=o[c](i,c,u,a,null,e)}catch(h){d=h}if(d&&!(d instanceof Error)&&r((u||"React class")+": type specification of "+a+" `"+c+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof d+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),d instanceof Error&&!(d.message in t)){t[d.message]=!0;var m=l?l():"";r("Failed "+a+" type: "+d.message+(m??""))}}}}return s.resetWarningCache=function(){process.env.NODE_ENV!=="production"&&(t={})},qn=s,qn}var Un,Ns;function Zc(){if(Ns)return Un;Ns=1;var r=Ko(),e=Qc(),t=Lr(),n=Go(),s=Xc(),o=function(){};process.env.NODE_ENV!=="production"&&(o=function(a){var u="Warning: "+a;typeof console<"u"&&console.error(u);try{throw new Error(u)}catch{}});function i(){return null}return Un=function(a,u){var l=typeof Symbol=="function"&&Symbol.iterator,c="@@iterator";function d(A){var O=A&&(l&&A[l]||A[c]);if(typeof O=="function")return O}var p="<<anonymous>>",m={array:S("array"),bigint:S("bigint"),bool:S("boolean"),func:S("function"),number:S("number"),object:S("object"),string:S("string"),symbol:S("symbol"),any:y(),arrayOf:b,element:E(),elementType:w(),instanceOf:M,node:I(),objectOf:N,oneOf:$,oneOfType:P,shape:j,exact:F};function h(A,O){return A===O?A!==0||1/A===1/O:A!==A&&O!==O}function f(A,O){this.message=A,this.data=O&&typeof O=="object"?O:{},this.stack=""}f.prototype=Error.prototype;function x(A){if(process.env.NODE_ENV!=="production")var O={},H=0;function U(ee,Y,K,G,te,J,xe){if(G=G||p,J=J||K,xe!==t){if(u){var L=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw L.name="Invariant Violation",L}else if(process.env.NODE_ENV!=="production"&&typeof console<"u"){var Pe=G+":"+K;!O[Pe]&&H<3&&(o("You are manually calling a React.PropTypes validation function for the `"+J+"` prop on `"+G+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),O[Pe]=!0,H++)}}return Y[K]==null?ee?Y[K]===null?new f("The "+te+" `"+J+"` is marked as required "+("in `"+G+"`, but its value is `null`.")):new f("The "+te+" `"+J+"` is marked as required in "+("`"+G+"`, but its value is `undefined`.")):null:A(Y,K,G,te,J)}var Q=U.bind(null,!1);return Q.isRequired=U.bind(null,!0),Q}function S(A){function O(H,U,Q,ee,Y,K){var G=H[U],te=me(G);if(te!==A){var J=re(G);return new f("Invalid "+ee+" `"+Y+"` of type "+("`"+J+"` supplied to `"+Q+"`, expected ")+("`"+A+"`."),{expectedType:A})}return null}return x(O)}function y(){return x(i)}function b(A){function O(H,U,Q,ee,Y){if(typeof A!="function")return new f("Property `"+Y+"` of component `"+Q+"` has invalid PropType notation inside arrayOf.");var K=H[U];if(!Array.isArray(K)){var G=me(K);return new f("Invalid "+ee+" `"+Y+"` of type "+("`"+G+"` supplied to `"+Q+"`, expected an array."))}for(var te=0;te<K.length;te++){var J=A(K,te,Q,ee,Y+"["+te+"]",t);if(J instanceof Error)return J}return null}return x(O)}function E(){function A(O,H,U,Q,ee){var Y=O[H];if(!a(Y)){var K=me(Y);return new f("Invalid "+Q+" `"+ee+"` of type "+("`"+K+"` supplied to `"+U+"`, expected a single ReactElement."))}return null}return x(A)}function w(){function A(O,H,U,Q,ee){var Y=O[H];if(!r.isValidElementType(Y)){var K=me(Y);return new f("Invalid "+Q+" `"+ee+"` of type "+("`"+K+"` supplied to `"+U+"`, expected a single ReactElement type."))}return null}return x(A)}function M(A){function O(H,U,Q,ee,Y){if(!(H[U]instanceof A)){var K=A.name||p,G=_(H[U]);return new f("Invalid "+ee+" `"+Y+"` of type "+("`"+G+"` supplied to `"+Q+"`, expected ")+("instance of `"+K+"`."))}return null}return x(O)}function $(A){if(!Array.isArray(A))return process.env.NODE_ENV!=="production"&&(arguments.length>1?o("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):o("Invalid argument supplied to oneOf, expected an array.")),i;function O(H,U,Q,ee,Y){for(var K=H[U],G=0;G<A.length;G++)if(h(K,A[G]))return null;var te=JSON.stringify(A,function(xe,L){var Pe=re(L);return Pe==="symbol"?String(L):L});return new f("Invalid "+ee+" `"+Y+"` of value `"+String(K)+"` "+("supplied to `"+Q+"`, expected one of "+te+"."))}return x(O)}function N(A){function O(H,U,Q,ee,Y){if(typeof A!="function")return new f("Property `"+Y+"` of component `"+Q+"` has invalid PropType notation inside objectOf.");var K=H[U],G=me(K);if(G!=="object")return new f("Invalid "+ee+" `"+Y+"` of type "+("`"+G+"` supplied to `"+Q+"`, expected an object."));for(var te in K)if(n(K,te)){var J=A(K,te,Q,ee,Y+"."+te,t);if(J instanceof Error)return J}return null}return x(O)}function P(A){if(!Array.isArray(A))return process.env.NODE_ENV!=="production"&&o("Invalid argument supplied to oneOfType, expected an instance of array."),i;for(var O=0;O<A.length;O++){var H=A[O];if(typeof H!="function")return o("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+ie(H)+" at index "+O+"."),i}function U(Q,ee,Y,K,G){for(var te=[],J=0;J<A.length;J++){var xe=A[J],L=xe(Q,ee,Y,K,G,t);if(L==null)return null;L.data&&n(L.data,"expectedType")&&te.push(L.data.expectedType)}var Pe=te.length>0?", expected one of type ["+te.join(", ")+"]":"";return new f("Invalid "+K+" `"+G+"` supplied to "+("`"+Y+"`"+Pe+"."))}return x(U)}function I(){function A(O,H,U,Q,ee){return D(O[H])?null:new f("Invalid "+Q+" `"+ee+"` supplied to "+("`"+U+"`, expected a ReactNode."))}return x(A)}function W(A,O,H,U,Q){return new f((A||"React class")+": "+O+" type `"+H+"."+U+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+Q+"`.")}function j(A){function O(H,U,Q,ee,Y){var K=H[U],G=me(K);if(G!=="object")return new f("Invalid "+ee+" `"+Y+"` of type `"+G+"` "+("supplied to `"+Q+"`, expected `object`."));for(var te in A){var J=A[te];if(typeof J!="function")return W(Q,ee,Y,te,re(J));var xe=J(K,te,Q,ee,Y+"."+te,t);if(xe)return xe}return null}return x(O)}function F(A){function O(H,U,Q,ee,Y){var K=H[U],G=me(K);if(G!=="object")return new f("Invalid "+ee+" `"+Y+"` of type `"+G+"` "+("supplied to `"+Q+"`, expected `object`."));var te=e({},H[U],A);for(var J in te){var xe=A[J];if(n(A,J)&&typeof xe!="function")return W(Q,ee,Y,J,re(xe));if(!xe)return new f("Invalid "+ee+" `"+Y+"` key `"+J+"` supplied to `"+Q+"`.\nBad object: "+JSON.stringify(H[U],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(A),null,"  "));var L=xe(K,J,Q,ee,Y+"."+J,t);if(L)return L}return null}return x(O)}function D(A){switch(typeof A){case"number":case"string":case"undefined":return!0;case"boolean":return!A;case"object":if(Array.isArray(A))return A.every(D);if(A===null||a(A))return!0;var O=d(A);if(O){var H=O.call(A),U;if(O!==A.entries){for(;!(U=H.next()).done;)if(!D(U.value))return!1}else for(;!(U=H.next()).done;){var Q=U.value;if(Q&&!D(Q[1]))return!1}}else return!1;return!0;default:return!1}}function V(A,O){return A==="symbol"?!0:O?O["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&O instanceof Symbol:!1}function me(A){var O=typeof A;return Array.isArray(A)?"array":A instanceof RegExp?"object":V(O,A)?"symbol":O}function re(A){if(typeof A>"u"||A===null)return""+A;var O=me(A);if(O==="object"){if(A instanceof Date)return"date";if(A instanceof RegExp)return"regexp"}return O}function ie(A){var O=re(A);switch(O){case"array":case"object":return"an "+O;case"boolean":case"date":case"regexp":return"a "+O;default:return O}}function _(A){return!A.constructor||!A.constructor.name?p:A.constructor.name}return m.checkPropTypes=s,m.resetWarningCache=s.resetWarningCache,m.PropTypes=m,m},Un}var Yn,_s;function Kc(){if(_s)return Yn;_s=1;var r=Lr();function e(){}function t(){}return t.resetWarningCache=e,Yn=function(){function n(i,a,u,l,c,d){if(d!==r){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}n.isRequired=n;function s(){return n}var o={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return o.PropTypes=o,o},Yn}if(process.env.NODE_ENV!=="production"){var Gc=Ko(),Jc=!0;mr.exports=Zc()(Gc.isElement,Jc)}else mr.exports=Kc()();var Vc=mr.exports;const ve=xi(Vc);function gt(r,e,t,n){function s(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(c){try{l(n.next(c))}catch(d){i(d)}}function u(c){try{l(n.throw(c))}catch(d){i(d)}}function l(c){c.done?o(c.value):s(c.value).then(a,u)}l((n=n.apply(r,e||[])).next())})}function vt(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,s,o,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(l){return function(c){return u([l,c])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,l[0]&&(t=0)),t;)try{if(n=1,s&&(o=l[0]&2?s.return:l[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,l[1])).done)return o;switch(s=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,s=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(l[0]===6&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(c){l=[6,c],s=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function qs(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),s,o=[],i;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)o.push(s.value)}catch(a){i={error:a}}finally{try{s&&!s.done&&(t=n.return)&&t.call(n)}finally{if(i)throw i.error}}return o}function Us(r,e,t){if(t||arguments.length===2)for(var n=0,s=e.length,o;n<s;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))}var el=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function Wt(r,e){var t=tl(r);if(typeof t.path!="string"){var n=r.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof n=="string"&&n.length>0?n:r.name,writable:!1,configurable:!1,enumerable:!0})}return t}function tl(r){var e=r.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!r.type){var n=e.split(".").pop().toLowerCase(),s=el.get(n);s&&Object.defineProperty(r,"type",{value:s,writable:!1,configurable:!1,enumerable:!0})}return r}var nl=[".DS_Store","Thumbs.db"];function rl(r){return gt(this,void 0,void 0,function(){return vt(this,function(e){return Sn(r)&&sl(r.dataTransfer)?[2,cl(r.dataTransfer,r.type)]:ol(r)?[2,il(r)]:Array.isArray(r)&&r.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,al(r)]:[2,[]]})})}function sl(r){return Sn(r)}function ol(r){return Sn(r)&&Sn(r.target)}function Sn(r){return typeof r=="object"&&r!==null}function il(r){return hr(r.target.files).map(function(e){return Wt(e)})}function al(r){return gt(this,void 0,void 0,function(){var e;return vt(this,function(t){switch(t.label){case 0:return[4,Promise.all(r.map(function(n){return n.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(n){return Wt(n)})]}})})}function cl(r,e){return gt(this,void 0,void 0,function(){var t,n;return vt(this,function(s){switch(s.label){case 0:return r.items?(t=hr(r.items).filter(function(o){return o.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(ll))]):[3,2];case 1:return n=s.sent(),[2,Ys(Jo(n))];case 2:return[2,Ys(hr(r.files).map(function(o){return Wt(o)}))]}})})}function Ys(r){return r.filter(function(e){return nl.indexOf(e.name)===-1})}function hr(r){if(r===null)return[];for(var e=[],t=0;t<r.length;t++){var n=r[t];e.push(n)}return e}function ll(r){if(typeof r.webkitGetAsEntry!="function")return Ws(r);var e=r.webkitGetAsEntry();return e&&e.isDirectory?Vo(e):Ws(r)}function Jo(r){return r.reduce(function(e,t){return Us(Us([],qs(e),!1),qs(Array.isArray(t)?Jo(t):[t]),!1)},[])}function Ws(r){var e=r.getAsFile();if(!e)return Promise.reject("".concat(r," is not a File"));var t=Wt(e);return Promise.resolve(t)}function ul(r){return gt(this,void 0,void 0,function(){return vt(this,function(e){return[2,r.isDirectory?Vo(r):dl(r)]})})}function Vo(r){var e=r.createReader();return new Promise(function(t,n){var s=[];function o(){var i=this;e.readEntries(function(a){return gt(i,void 0,void 0,function(){var u,l,c;return vt(this,function(d){switch(d.label){case 0:if(a.length)return[3,5];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,Promise.all(s)];case 2:return u=d.sent(),t(u),[3,4];case 3:return l=d.sent(),n(l),[3,4];case 4:return[3,6];case 5:c=Promise.all(a.map(ul)),s.push(c),o(),d.label=6;case 6:return[2]}})})},function(a){n(a)})}o()})}function dl(r){return gt(this,void 0,void 0,function(){return vt(this,function(e){return[2,new Promise(function(t,n){r.file(function(s){var o=Wt(s,r.fullPath);t(o)},function(s){n(s)})})]})})}var pl=function(r,e){if(r&&e){var t=Array.isArray(e)?e:e.split(","),n=r.name||"",s=(r.type||"").toLowerCase(),o=s.replace(/\/.*$/,"");return t.some(function(i){var a=i.trim().toLowerCase();return a.charAt(0)==="."?n.toLowerCase().endsWith(a):a.endsWith("/*")?o===a.replace(/\/.*$/,""):s===a})}return!0};function Qs(r){return fl(r)||hl(r)||ti(r)||ml()}function ml(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hl(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function fl(r){if(Array.isArray(r))return fr(r)}function Xs(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,n)}return t}function Zs(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Xs(Object(t),!0).forEach(function(n){ei(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Xs(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function ei(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Nt(r,e){return yl(r)||vl(r,e)||ti(r,e)||gl()}function gl(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ti(r,e){if(r){if(typeof r=="string")return fr(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return fr(r,e)}}function fr(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function vl(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n=[],s=!0,o=!1,i,a;try{for(t=t.call(r);!(s=(i=t.next()).done)&&(n.push(i.value),!(e&&n.length===e));s=!0);}catch(u){o=!0,a=u}finally{try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}return n}}function yl(r){if(Array.isArray(r))return r}var bl="file-invalid-type",xl="file-too-large",wl="file-too-small",kl="too-many-files",Cl=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:bl,message:"File type must be ".concat(t)}},Ks=function(e){return{code:xl,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},Gs=function(e){return{code:wl,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},Sl={code:kl,message:"Too many files"};function ni(r,e){var t=r.type==="application/x-moz-file"||pl(r,e);return[t,t?null:Cl(e)]}function ri(r,e,t){if(it(r.size))if(it(e)&&it(t)){if(r.size>t)return[!1,Ks(t)];if(r.size<e)return[!1,Gs(e)]}else{if(it(e)&&r.size<e)return[!1,Gs(e)];if(it(t)&&r.size>t)return[!1,Ks(t)]}return[!0,null]}function it(r){return r!=null}function Al(r){var e=r.files,t=r.accept,n=r.minSize,s=r.maxSize,o=r.multiple,i=r.maxFiles,a=r.validator;return!o&&e.length>1||o&&i>=1&&e.length>i?!1:e.every(function(u){var l=ni(u,t),c=Nt(l,1),d=c[0],p=ri(u,n,s),m=Nt(p,1),h=m[0],f=a?a(u):null;return d&&h&&!f})}function An(r){return typeof r.isPropagationStopped=="function"?r.isPropagationStopped():typeof r.cancelBubble<"u"?r.cancelBubble:!1}function ln(r){return r.dataTransfer?Array.prototype.some.call(r.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!r.target&&!!r.target.files}function Js(r){r.preventDefault()}function El(r){return r.indexOf("MSIE")!==-1||r.indexOf("Trident/")!==-1}function Tl(r){return r.indexOf("Edge/")!==-1}function Pl(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return El(r)||Tl(r)}function We(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return function(n){for(var s=arguments.length,o=new Array(s>1?s-1:0),i=1;i<s;i++)o[i-1]=arguments[i];return e.some(function(a){return!An(n)&&a&&a.apply(void 0,[n].concat(o)),An(n)})}}function Rl(){return"showOpenFilePicker"in window}function Il(r){if(it(r)){var e=Object.entries(r).filter(function(t){var n=Nt(t,2),s=n[0],o=n[1],i=!0;return si(s)||(console.warn('Skipped "'.concat(s,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),i=!1),(!Array.isArray(o)||!o.every(oi))&&(console.warn('Skipped "'.concat(s,'" because an invalid file extension was provided.')),i=!1),i}).reduce(function(t,n){var s=Nt(n,2),o=s[0],i=s[1];return Zs(Zs({},t),{},ei({},o,i))},{});return[{description:"Files",accept:e}]}return r}function Ol(r){if(it(r))return Object.entries(r).reduce(function(e,t){var n=Nt(t,2),s=n[0],o=n[1];return[].concat(Qs(e),[s],Qs(o))},[]).filter(function(e){return si(e)||oi(e)}).join(",")}function Ml(r){return r instanceof DOMException&&(r.name==="AbortError"||r.code===r.ABORT_ERR)}function Ll(r){return r instanceof DOMException&&(r.name==="SecurityError"||r.code===r.SECURITY_ERR)}function si(r){return r==="audio/*"||r==="video/*"||r==="image/*"||r==="text/*"||/\w+\/[-+.\w]+/g.test(r)}function oi(r){return/^.*\.[\w]+$/.test(r)}var jl=["children"],Bl=["open"],Dl=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],zl=["refKey","onChange","onClick"];function Fl(r){return Nl(r)||$l(r)||ii(r)||Hl()}function Hl(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $l(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Nl(r){if(Array.isArray(r))return gr(r)}function Wn(r,e){return Ul(r)||ql(r,e)||ii(r,e)||_l()}function _l(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ii(r,e){if(r){if(typeof r=="string")return gr(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return gr(r,e)}}function gr(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function ql(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n=[],s=!0,o=!1,i,a;try{for(t=t.call(r);!(s=(i=t.next()).done)&&(n.push(i.value),!(e&&n.length===e));s=!0);}catch(u){o=!0,a=u}finally{try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}return n}}function Ul(r){if(Array.isArray(r))return r}function Vs(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,n)}return t}function Ce(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Vs(Object(t),!0).forEach(function(n){vr(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Vs(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function vr(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function En(r,e){if(r==null)return{};var t=Yl(r,e),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(s=0;s<o.length;s++)n=o[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function Yl(r,e){if(r==null)return{};var t={},n=Object.keys(r),s,o;for(o=0;o<n.length;o++)s=n[o],!(e.indexOf(s)>=0)&&(t[s]=r[s]);return t}var jr=v.forwardRef(function(r,e){var t=r.children,n=En(r,jl),s=ci(n),o=s.open,i=En(s,Bl);return v.useImperativeHandle(e,function(){return{open:o}},[o]),v.createElement(v.Fragment,null,t(Ce(Ce({},i),{},{open:o})))});jr.displayName="Dropzone";var ai={disabled:!1,getFilesFromEvent:rl,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};jr.defaultProps=ai;jr.propTypes={children:ve.func,accept:ve.objectOf(ve.arrayOf(ve.string)),multiple:ve.bool,preventDropOnDocument:ve.bool,noClick:ve.bool,noKeyboard:ve.bool,noDrag:ve.bool,noDragEventsBubbling:ve.bool,minSize:ve.number,maxSize:ve.number,maxFiles:ve.number,disabled:ve.bool,getFilesFromEvent:ve.func,onFileDialogCancel:ve.func,onFileDialogOpen:ve.func,useFsAccessApi:ve.bool,autoFocus:ve.bool,onDragEnter:ve.func,onDragLeave:ve.func,onDragOver:ve.func,onDrop:ve.func,onDropAccepted:ve.func,onDropRejected:ve.func,onError:ve.func,validator:ve.func};var yr={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function ci(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Ce(Ce({},ai),r),t=e.accept,n=e.disabled,s=e.getFilesFromEvent,o=e.maxSize,i=e.minSize,a=e.multiple,u=e.maxFiles,l=e.onDragEnter,c=e.onDragLeave,d=e.onDragOver,p=e.onDrop,m=e.onDropAccepted,h=e.onDropRejected,f=e.onFileDialogCancel,x=e.onFileDialogOpen,S=e.useFsAccessApi,y=e.autoFocus,b=e.preventDropOnDocument,E=e.noClick,w=e.noKeyboard,M=e.noDrag,$=e.noDragEventsBubbling,N=e.onError,P=e.validator,I=v.useMemo(function(){return Ol(t)},[t]),W=v.useMemo(function(){return Il(t)},[t]),j=v.useMemo(function(){return typeof x=="function"?x:eo},[x]),F=v.useMemo(function(){return typeof f=="function"?f:eo},[f]),D=v.useRef(null),V=v.useRef(null),me=v.useReducer(Wl,yr),re=Wn(me,2),ie=re[0],_=re[1],A=ie.isFocused,O=ie.isFileDialogActive,H=v.useRef(typeof window<"u"&&window.isSecureContext&&S&&Rl()),U=function(){!H.current&&O&&setTimeout(function(){if(V.current){var q=V.current.files;q.length||(_({type:"closeDialog"}),F())}},300)};v.useEffect(function(){return window.addEventListener("focus",U,!1),function(){window.removeEventListener("focus",U,!1)}},[V,O,F,H]);var Q=v.useRef([]),ee=function(q){D.current&&D.current.contains(q.target)||(q.preventDefault(),Q.current=[])};v.useEffect(function(){return b&&(document.addEventListener("dragover",Js,!1),document.addEventListener("drop",ee,!1)),function(){b&&(document.removeEventListener("dragover",Js),document.removeEventListener("drop",ee))}},[D,b]),v.useEffect(function(){return!n&&y&&D.current&&D.current.focus(),function(){}},[D,y,n]);var Y=v.useCallback(function(R){N?N(R):console.error(R)},[N]),K=v.useCallback(function(R){R.preventDefault(),R.persist(),ye(R),Q.current=[].concat(Fl(Q.current),[R.target]),ln(R)&&Promise.resolve(s(R)).then(function(q){if(!(An(R)&&!$)){var le=q.length,ce=le>0&&Al({files:q,accept:I,minSize:i,maxSize:o,multiple:a,maxFiles:u,validator:P}),Te=le>0&&!ce;_({isDragAccept:ce,isDragReject:Te,isDragActive:!0,type:"setDraggedFiles"}),l&&l(R)}}).catch(function(q){return Y(q)})},[s,l,Y,$,I,i,o,a,u,P]),G=v.useCallback(function(R){R.preventDefault(),R.persist(),ye(R);var q=ln(R);if(q&&R.dataTransfer)try{R.dataTransfer.dropEffect="copy"}catch{}return q&&d&&d(R),!1},[d,$]),te=v.useCallback(function(R){R.preventDefault(),R.persist(),ye(R);var q=Q.current.filter(function(ce){return D.current&&D.current.contains(ce)}),le=q.indexOf(R.target);le!==-1&&q.splice(le,1),Q.current=q,!(q.length>0)&&(_({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),ln(R)&&c&&c(R))},[D,c,$]),J=v.useCallback(function(R,q){var le=[],ce=[];R.forEach(function(Te){var Ne=ni(Te,I),Xe=Wn(Ne,2),et=Xe[0],yt=Xe[1],bt=ri(Te,i,o),lt=Wn(bt,2),xt=lt[0],wt=lt[1],kt=P?P(Te):null;if(et&&xt&&!kt)le.push(Te);else{var Ct=[yt,wt];kt&&(Ct=Ct.concat(kt)),ce.push({file:Te,errors:Ct.filter(function(St){return St})})}}),(!a&&le.length>1||a&&u>=1&&le.length>u)&&(le.forEach(function(Te){ce.push({file:Te,errors:[Sl]})}),le.splice(0)),_({acceptedFiles:le,fileRejections:ce,type:"setFiles"}),p&&p(le,ce,q),ce.length>0&&h&&h(ce,q),le.length>0&&m&&m(le,q)},[_,a,I,i,o,u,p,m,h,P]),xe=v.useCallback(function(R){R.preventDefault(),R.persist(),ye(R),Q.current=[],ln(R)&&Promise.resolve(s(R)).then(function(q){An(R)&&!$||J(q,R)}).catch(function(q){return Y(q)}),_({type:"reset"})},[s,J,Y,$]),L=v.useCallback(function(){if(H.current){_({type:"openDialog"}),j();var R={multiple:a,types:W};window.showOpenFilePicker(R).then(function(q){return s(q)}).then(function(q){J(q,null),_({type:"closeDialog"})}).catch(function(q){Ml(q)?(F(q),_({type:"closeDialog"})):Ll(q)?(H.current=!1,V.current?(V.current.value=null,V.current.click()):Y(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):Y(q)});return}V.current&&(_({type:"openDialog"}),j(),V.current.value=null,V.current.click())},[_,j,F,S,J,Y,W,a]),Pe=v.useCallback(function(R){!D.current||!D.current.isEqualNode(R.target)||(R.key===" "||R.key==="Enter"||R.keyCode===32||R.keyCode===13)&&(R.preventDefault(),L())},[D,L]),Fe=v.useCallback(function(){_({type:"focus"})},[]),Be=v.useCallback(function(){_({type:"blur"})},[]),C=v.useCallback(function(){E||(Pl()?setTimeout(L,0):L())},[E,L]),B=function(q){return n?null:q},X=function(q){return w?null:B(q)},oe=function(q){return M?null:B(q)},ye=function(q){$&&q.stopPropagation()},be=v.useMemo(function(){return function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},q=R.refKey,le=q===void 0?"ref":q,ce=R.role,Te=R.onKeyDown,Ne=R.onFocus,Xe=R.onBlur,et=R.onClick,yt=R.onDragEnter,bt=R.onDragOver,lt=R.onDragLeave,xt=R.onDrop,wt=En(R,Dl);return Ce(Ce(vr({onKeyDown:X(We(Te,Pe)),onFocus:X(We(Ne,Fe)),onBlur:X(We(Xe,Be)),onClick:B(We(et,C)),onDragEnter:oe(We(yt,K)),onDragOver:oe(We(bt,G)),onDragLeave:oe(We(lt,te)),onDrop:oe(We(xt,xe)),role:typeof ce=="string"&&ce!==""?ce:"presentation"},le,D),!n&&!w?{tabIndex:0}:{}),wt)}},[D,Pe,Fe,Be,C,K,G,te,xe,w,M,n]),ae=v.useCallback(function(R){R.stopPropagation()},[]),Ae=v.useMemo(function(){return function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},q=R.refKey,le=q===void 0?"ref":q,ce=R.onChange,Te=R.onClick,Ne=En(R,zl),Xe=vr({accept:I,multiple:a,type:"file",style:{display:"none"},onChange:B(We(ce,xe)),onClick:B(We(Te,ae)),tabIndex:-1},le,V);return Ce(Ce({},Xe),Ne)}},[V,t,a,xe,n]);return Ce(Ce({},ie),{},{isFocused:A&&!n,getRootProps:be,getInputProps:Ae,rootRef:D,inputRef:V,open:B(L)})}function Wl(r,e){switch(e.type){case"focus":return Ce(Ce({},r),{},{isFocused:!0});case"blur":return Ce(Ce({},r),{},{isFocused:!1});case"openDialog":return Ce(Ce({},yr),{},{isFileDialogActive:!0});case"closeDialog":return Ce(Ce({},r),{},{isFileDialogActive:!1});case"setDraggedFiles":return Ce(Ce({},r),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return Ce(Ce({},r),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return Ce({},yr);default:return r}}function eo(){}const Ql=r=>k.jsx("svg",{...r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14"})}),Xl=()=>k.jsxs("svg",{viewBox:"0 0 200 200",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[k.jsx("circle",{cx:"100",cy:"100",r:"99.5",stroke:"#B0488C"}),k.jsxs("g",{clipPath:"url(#clip0_31_12)",children:[k.jsx("path",{d:"M87.6691 75.9199C88.563 75.9163 89.457 75.9128 90.378 75.9091C92.2639 75.9065 94.1498 75.9134 96.0357 75.9291C98.9224 75.9491 101.807 75.9292 104.694 75.9053C106.528 75.9078 108.362 75.9126 110.195 75.9199C111.059 75.9124 111.921 75.9048 112.81 75.897C119.46 75.9944 119.46 75.9944 121.75 78.2731C122.191 78.8959 122.631 79.5187 123.085 80.1604C123.454 80.531 123.454 80.531 123.83 80.9091C123.911 82.1028 123.941 83.3 123.95 84.4965C123.957 85.2614 123.964 86.0262 123.971 86.8143C123.974 87.6478 123.978 88.4815 123.981 89.3403C123.985 90.1927 123.99 91.0451 123.994 91.9233C124.001 93.7328 124.006 95.5423 124.009 97.3517C124.016 100.116 124.039 102.879 124.062 105.643C124.067 107.399 124.071 109.155 124.074 110.911C124.083 111.738 124.093 112.563 124.102 113.415C124.081 120.894 124.081 120.894 121.596 124.332C119.274 125.815 117.439 126.021 114.715 126.035C113.937 126.042 113.159 126.049 112.357 126.056C111.521 126.056 110.685 126.055 109.823 126.054C108.961 126.057 108.098 126.06 107.209 126.064C105.383 126.068 103.559 126.068 101.734 126.065C98.9428 126.062 96.1519 126.08 93.3604 126.099C91.5874 126.101 89.8145 126.101 88.0415 126.101C87.2067 126.107 86.372 126.115 85.5119 126.122C84.7316 126.117 83.9513 126.113 83.1474 126.107C82.4635 126.108 81.7796 126.109 81.075 126.109C78.7215 125.767 77.3408 124.983 75.4255 123.583C73.7766 121.097 73.7375 120.265 73.6961 117.362C73.6818 116.549 73.6676 115.737 73.6528 114.901C73.6465 114.023 73.6401 113.146 73.6337 112.242C73.6251 111.34 73.6166 110.438 73.6079 109.509C73.5938 107.6 73.5841 105.69 73.5783 103.781C73.5639 100.859 73.5177 97.9383 73.4707 95.0167C73.461 93.1626 73.4532 91.3085 73.4475 89.4543C73.4291 88.5801 73.4107 87.7058 73.3917 86.8049C73.4123 83.0474 73.445 80.866 75.6217 77.739C79.2026 75.469 83.5895 75.8841 87.6691 75.9199Z",fill:"#B0488C"}),k.jsx("path",{d:"M32.2341 37.4866C59.7575 37.4866 87.2809 37.4866 115.638 37.4866C115.638 42.9219 115.638 48.3572 115.638 53.9572C93.0298 53.9572 70.4213 53.9572 47.1277 53.9572C47.1277 64.5807 47.1277 75.2043 47.1277 86.1497C42.2128 86.1497 37.2979 86.1497 32.2341 86.1497C32.2341 70.0909 32.2341 54.0321 32.2341 37.4866Z",fill:"#B0488C"}),k.jsx("path",{d:"M32.2341 116.845C37.149 116.845 42.0639 116.845 47.1277 116.845C47.1277 127.221 47.1277 137.598 47.1277 148.289C71.7022 148.289 96.2766 148.289 121.596 148.289C121.596 153.23 121.596 158.171 121.596 163.262C92.1064 163.262 62.617 163.262 32.2341 163.262C32.2341 147.944 32.2341 132.627 32.2341 116.845Z",fill:"#B0488C"}),k.jsx("path",{d:"M161.814 34.6792C165.577 37.5618 167.934 41.1653 169.255 45.7219C170.002 51.7878 170.244 57.7758 166.678 63.0231C166.3 63.4902 165.921 63.9573 165.532 64.4385C164.964 65.1623 164.964 65.1623 164.386 65.9007C160.694 70.0863 156.304 72.2018 150.81 72.9575C144.443 73.235 139.791 71.2772 134.814 67.3864C130.268 63.0898 128.124 57.8507 127.879 51.6177C128.195 45.152 130.717 40.4865 135.049 35.7846C142.84 28.7908 153.315 29.3596 161.814 34.6792Z",fill:"#B0488C"}),k.jsx("path",{d:"M158.009 137.132C162.749 139.815 166.014 143.005 167.766 148.289C168.291 153.643 168.045 158.108 164.787 162.513C160.978 166.779 156.65 168.925 151.011 169.532C144.592 168.841 140.292 166.139 136.21 161.062C134.084 157.002 134.439 151.969 135 147.54C136.243 144.421 137.612 142.39 140.167 140.241C140.665 139.812 141.163 139.383 141.676 138.942C146.467 135.355 152.423 135.005 158.009 137.132Z",fill:"#B0488C"}),k.jsx("path",{d:"M149.894 85.4011C154.809 85.4011 159.723 85.4011 164.787 85.4011C164.787 96.0246 164.787 106.648 164.787 117.594C159.872 117.594 154.957 117.594 149.894 117.594C149.894 106.97 149.894 96.3465 149.894 85.4011Z",fill:"#B0488C"}),k.jsx("path",{d:"M40.3383 94.0136C43.3122 94.7142 44.8713 96.3632 46.6623 98.7366C47.3967 101.321 47.103 103.037 46.383 105.615C44.2412 107.919 42.6152 109.128 39.6343 110.107C36.957 110.107 35.8402 109.471 33.7234 107.861C33.2934 107.567 32.8633 107.274 32.4203 106.972C30.8391 104.667 30.4332 102.35 30.7447 99.6257C32.7702 95.2399 35.5991 93.6206 40.3383 94.0136Z",fill:"#B0488C"})]}),k.jsx("defs",{children:k.jsx("clipPath",{id:"clip0_31_12",children:k.jsx("rect",{width:"140",height:"140",fill:"white",transform:"translate(30 30)"})})})]}),Zl=({files:r})=>k.jsx(k.Fragment,{children:r.map(e=>k.jsx("div",{className:"thumbnail m-2",children:k.jsx("div",{className:"thumbnailInner",children:k.jsx("img",{src:e.preview,alt:e.name,className:"w-[150px]"})})},e.name))}),Kl=({files:r,setFiles:e})=>{const t=v.useCallback(i=>{e(a=>[...a,...i.map(u=>Object.assign(u,{preview:URL.createObjectURL(u)}))])},[]),{getRootProps:n,getInputProps:s}=ci({onDrop:t}),o=i=>()=>{const a=r.filter(u=>u!==i);e(a)};return k.jsxs("div",{className:"flex flex-col w-[100%] dropzone border",children:[k.jsxs("div",{...n(),className:"flex items-center justify-center p-4 border-2 border-dashed border-gray-400 rounded-lg cursor-pointer hover:border-gray-500",children:[k.jsx("input",{...s()}),k.jsx("p",{className:"text-gray-600",children:"Drag & drop images, or click to select files"})]}),k.jsx("aside",{className:"flex flex-wrap mt-4",children:r.map(i=>k.jsxs("div",{className:"relative m-2",children:[k.jsx("button",{onClick:o(i),className:"absolute top-0 right-0 p-1 bg-red-500 rounded-full text-white",children:k.jsx(Ql,{className:"w-4 h-4"})}),k.jsx("div",{className:"border p-1 rounded-lg",children:k.jsx("img",{src:i.preview,alt:i.name,className:"w-12 h-12 object-cover rounded-lg"})})]},i.name))})]})};function Gl(r){var S,y;const e=r.advancedOptions||{},t=e.conversationOptions||{layout:"bubbles"},[n,s]=v.useState([]),o=Uc({...r,files:n}),{controls:i}=r,[a,u]=v.useState(new Map),l=(b,E)=>{u(w=>new Map(w.set(b,E)))},c=({prompt:b,uid:E})=>{const w=a.get(E);return k.jsxs("div",{className:"rounded-lg shadow-sm",children:[k.jsx("span",{className:"block",children:b}),k.jsx("div",{className:"mt-2",children:w&&k.jsx(Zl,{files:w})})]})},d=Object.assign({},{colorScheme:"light",themeId:"langdb"},e.displayOptions),p=e.composerOptions||{placeholder:"How can i help you today ?"},m=Object.assign({},{assistant:Object.assign({},{name:"LangDB",tagline:`
              Easily build and deploy AI agents with SQL.
              Customize with our React widget on`,avatar:k.jsx(Xl,{})},(S=r.personaOptions)==null?void 0:S.assistant),user:Object.assign({},{name:"User",avatar:k.jsx(Mc,{})})},(y=r.personaOptions)==null?void 0:y.user),h=v.useCallback(b=>{n&&(l(b.uid,[...n]),s([]))},[l]),f=v.useCallback(()=>{},[]),x=r.className||"";return k.jsxs("div",{className:"flex flex-col w-[100%] h-full",children:[(i==null?void 0:i.enableFiles)&&k.jsx(Kl,{files:n,setFiles:s}),k.jsx("div",{className:"flex-1 w-full relative",children:k.jsx("main",{className:`items-center justify-between  ${x} h-full absolute`,style:r.style||{},children:k.jsx(Cc,{adapter:o,initialConversation:r.messages,events:{messageSent:h,messageStreamStarted:f},messageOptions:{promptRenderer:c},personaOptions:m,conversationOptions:t,displayOptions:d,composerOptions:p,...e})})})]})}function Qn(...r){return r.filter(Boolean).join(" ")}const Jl=r=>{const{onMinimize:e,onMaximize:t,btnClassName:n,theme:s,children:o,title:i,maximizedPanelClassName:a,maximizedPanelStyle:u,showFullScreen:l,controls:c}=r,[d,p]=v.useState(!1),[m,h]=v.useState(l||!1),f=v.useCallback(()=>{p(x=>!x)},[]);return k.jsxs("div",{className:Qn(s||"dark"),children:[d&&k.jsxs("div",{style:m?u:{},className:Qn("light:text-slate-900 dark:text-white flex flex-1 bg-white dark:bg-black flex-col absolute p-[10px] pt-[0px]",m?a||"h-full w-full bottom-0 right-0":"rounded border shadow-md h-[60vh] w-[40vw] min-h-[500px] bottom-16 right-16"),children:[k.jsxs("div",{className:"border-b py-[5px] flex justify-center items-center",style:{zIndex:"99999"},children:[k.jsxs("div",{className:"flex gap-2",children:[k.jsx("button",{onClick:()=>{p(!1),e&&e()},children:k.jsx(Vl,{})}),!(c!=null&&c.hideMaximise)&&k.jsx("button",{onClick:()=>{h(x=>!x),t&&t()},children:m?k.jsx(tu,{}):k.jsx(eu,{})})]}),k.jsx("div",{className:"flex flex-1 justify-center",children:i})]}),k.jsx("div",{className:"flex flex-1 overflow-scroll ",children:o})]}),!d&&k.jsx("button",{className:Qn(n||"","fixed text-white bg-primary hover:bg-primary-800 bottom-5 right-5 flex w-[50px] hover:scale-110 scale-100 h-[50px] justify-center items-center p-[10px] rounded-full cursor-pointer shadow-none hover:shadow-xl transition ease-in-out"),onClick:f,children:k.jsx(li,{})})]})},li=()=>k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-6",children:k.jsx("path",{strokeLinecap:"round","stroke-linejoin":"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"})}),Vl=()=>k.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:k.jsx("path",{d:"M19 13H5v-2h14v2z"})}),eu=()=>k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-6",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8.25V18a2.25 2.25 0 0 0 2.25 2.25h13.5A2.25 2.25 0 0 0 21 18V8.25m-18 0V6a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 6v2.25m-18 0h18M5.25 6h.008v.008H5.25V6ZM7.5 6h.008v.008H7.5V6Zm2.25 0h.008v.008H9.75V6Z"})}),tu=()=>k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9V4.5M9 9H4.5M9 9 3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5 5.25 5.25"})});exports.ChatIcon=li;exports.FloatingChatWidget=Jl;exports.ImageDetail=Xo;exports.MessageContentType=Wo;exports.MessageType=Qo;exports.Widget=Gl;exports.createInnerMessage=Zo;
//# sourceMappingURL=index.cjs.js.map
